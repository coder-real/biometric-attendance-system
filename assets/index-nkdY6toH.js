(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function VE(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var pm={exports:{}},jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function uw(){if(L_)return jl;L_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:h,ref:o!==void 0?o:null,props:u}}return jl.Fragment=e,jl.jsx=n,jl.jsxs=n,jl}var P_;function cw(){return P_||(P_=1,pm.exports=uw()),pm.exports}var _=cw(),gm={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function hw(){if(U_)return xe;U_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),A=Symbol.iterator;function k(P){return P===null||typeof P!="object"?null:(P=A&&P[A]||P["@@iterator"],typeof P=="function"?P:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,B={};function $(P,ne,oe){this.props=P,this.context=ne,this.refs=B,this.updater=oe||j}$.prototype.isReactComponent={},$.prototype.setState=function(P,ne){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,ne,"setState")},$.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function J(){}J.prototype=$.prototype;function X(P,ne,oe){this.props=P,this.context=ne,this.refs=B,this.updater=oe||j}var se=X.prototype=new J;se.constructor=X,U(se,$.prototype),se.isPureReactComponent=!0;var ge=Array.isArray;function ye(){}var N={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function C(P,ne,oe){var ce=oe.ref;return{$$typeof:r,type:P,key:ne,ref:ce!==void 0?ce:null,props:oe}}function M(P,ne){return C(P.type,ne,P.props)}function D(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function I(P){var ne={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(oe){return ne[oe]})}var R=/\/+/g;function he(P,ne){return typeof P=="object"&&P!==null&&P.key!=null?I(""+P.key):ne.toString(36)}function me(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(ye,ye):(P.status="pending",P.then(function(ne){P.status==="pending"&&(P.status="fulfilled",P.value=ne)},function(ne){P.status==="pending"&&(P.status="rejected",P.reason=ne)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function K(P,ne,oe,ce,we){var Ie=typeof P;(Ie==="undefined"||Ie==="boolean")&&(P=null);var Be=!1;if(P===null)Be=!0;else switch(Ie){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(P.$$typeof){case r:case e:Be=!0;break;case E:return Be=P._init,K(Be(P._payload),ne,oe,ce,we)}}if(Be)return we=we(P),Be=ce===""?"."+he(P,0):ce,ge(we)?(oe="",Be!=null&&(oe=Be.replace(R,"$&/")+"/"),K(we,ne,oe,"",function(vs){return vs})):we!=null&&(D(we)&&(we=M(we,oe+(we.key==null||P&&P.key===we.key?"":(""+we.key).replace(R,"$&/")+"/")+Be)),ne.push(we)),1;Be=0;var Vt=ce===""?".":ce+":";if(ge(P))for(var lt=0;lt<P.length;lt++)ce=P[lt],Ie=Vt+he(ce,lt),Be+=K(ce,ne,oe,Ie,we);else if(lt=k(P),typeof lt=="function")for(P=lt.call(P),lt=0;!(ce=P.next()).done;)ce=ce.value,Ie=Vt+he(ce,lt++),Be+=K(ce,ne,oe,Ie,we);else if(Ie==="object"){if(typeof P.then=="function")return K(me(P),ne,oe,ce,we);throw ne=String(P),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Be}function re(P,ne,oe){if(P==null)return P;var ce=[],we=0;return K(P,ce,"","",function(Ie){return ne.call(oe,Ie,we++)}),ce}function de(P){if(P._status===-1){var ne=P._result;ne=ne(),ne.then(function(oe){(P._status===0||P._status===-1)&&(P._status=1,P._result=oe)},function(oe){(P._status===0||P._status===-1)&&(P._status=2,P._result=oe)}),P._status===-1&&(P._status=0,P._result=ne)}if(P._status===1)return P._result.default;throw P._result}var Se=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},He={map:re,forEach:function(P,ne,oe){re(P,function(){ne.apply(this,arguments)},oe)},count:function(P){var ne=0;return re(P,function(){ne++}),ne},toArray:function(P){return re(P,function(ne){return ne})||[]},only:function(P){if(!D(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return xe.Activity=T,xe.Children=He,xe.Component=$,xe.Fragment=n,xe.Profiler=o,xe.PureComponent=X,xe.StrictMode=s,xe.Suspense=g,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,xe.__COMPILER_RUNTIME={__proto__:null,c:function(P){return N.H.useMemoCache(P)}},xe.cache=function(P){return function(){return P.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(P,ne,oe){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ce=U({},P.props),we=P.key;if(ne!=null)for(Ie in ne.key!==void 0&&(we=""+ne.key),ne)!S.call(ne,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&ne.ref===void 0||(ce[Ie]=ne[Ie]);var Ie=arguments.length-2;if(Ie===1)ce.children=oe;else if(1<Ie){for(var Be=Array(Ie),Vt=0;Vt<Ie;Vt++)Be[Vt]=arguments[Vt+2];ce.children=Be}return C(P.type,we,ce)},xe.createContext=function(P){return P={$$typeof:h,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},xe.createElement=function(P,ne,oe){var ce,we={},Ie=null;if(ne!=null)for(ce in ne.key!==void 0&&(Ie=""+ne.key),ne)S.call(ne,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(we[ce]=ne[ce]);var Be=arguments.length-2;if(Be===1)we.children=oe;else if(1<Be){for(var Vt=Array(Be),lt=0;lt<Be;lt++)Vt[lt]=arguments[lt+2];we.children=Vt}if(P&&P.defaultProps)for(ce in Be=P.defaultProps,Be)we[ce]===void 0&&(we[ce]=Be[ce]);return C(P,Ie,we)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(P){return{$$typeof:m,render:P}},xe.isValidElement=D,xe.lazy=function(P){return{$$typeof:E,_payload:{_status:-1,_result:P},_init:de}},xe.memo=function(P,ne){return{$$typeof:p,type:P,compare:ne===void 0?null:ne}},xe.startTransition=function(P){var ne=N.T,oe={};N.T=oe;try{var ce=P(),we=N.S;we!==null&&we(oe,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ye,Se)}catch(Ie){Se(Ie)}finally{ne!==null&&oe.types!==null&&(ne.types=oe.types),N.T=ne}},xe.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},xe.use=function(P){return N.H.use(P)},xe.useActionState=function(P,ne,oe){return N.H.useActionState(P,ne,oe)},xe.useCallback=function(P,ne){return N.H.useCallback(P,ne)},xe.useContext=function(P){return N.H.useContext(P)},xe.useDebugValue=function(){},xe.useDeferredValue=function(P,ne){return N.H.useDeferredValue(P,ne)},xe.useEffect=function(P,ne){return N.H.useEffect(P,ne)},xe.useEffectEvent=function(P){return N.H.useEffectEvent(P)},xe.useId=function(){return N.H.useId()},xe.useImperativeHandle=function(P,ne,oe){return N.H.useImperativeHandle(P,ne,oe)},xe.useInsertionEffect=function(P,ne){return N.H.useInsertionEffect(P,ne)},xe.useLayoutEffect=function(P,ne){return N.H.useLayoutEffect(P,ne)},xe.useMemo=function(P,ne){return N.H.useMemo(P,ne)},xe.useOptimistic=function(P,ne){return N.H.useOptimistic(P,ne)},xe.useReducer=function(P,ne,oe){return N.H.useReducer(P,ne,oe)},xe.useRef=function(P){return N.H.useRef(P)},xe.useState=function(P){return N.H.useState(P)},xe.useSyncExternalStore=function(P,ne,oe){return N.H.useSyncExternalStore(P,ne,oe)},xe.useTransition=function(){return N.H.useTransition()},xe.version="19.2.0",xe}var z_;function fp(){return z_||(z_=1,gm.exports=hw()),gm.exports}var V=fp();const _h=VE(V);var ym={exports:{}},Ll={},_m={exports:{}},vm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function fw(){return B_||(B_=1,(function(r){function e(K,re){var de=K.length;K.push(re);e:for(;0<de;){var Se=de-1>>>1,He=K[Se];if(0<o(He,re))K[Se]=re,K[de]=He,de=Se;else break e}}function n(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var re=K[0],de=K.pop();if(de!==re){K[0]=de;e:for(var Se=0,He=K.length,P=He>>>1;Se<P;){var ne=2*(Se+1)-1,oe=K[ne],ce=ne+1,we=K[ce];if(0>o(oe,de))ce<He&&0>o(we,oe)?(K[Se]=we,K[ce]=de,Se=ce):(K[Se]=oe,K[ne]=de,Se=ne);else if(ce<He&&0>o(we,de))K[Se]=we,K[ce]=de,Se=ce;else break e}}return re}function o(K,re){var de=K.sortIndex-re.sortIndex;return de!==0?de:K.id-re.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var g=[],p=[],E=1,T=null,A=3,k=!1,j=!1,U=!1,B=!1,$=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function se(K){for(var re=n(p);re!==null;){if(re.callback===null)s(p);else if(re.startTime<=K)s(p),re.sortIndex=re.expirationTime,e(g,re);else break;re=n(p)}}function ge(K){if(U=!1,se(K),!j)if(n(g)!==null)j=!0,ye||(ye=!0,I());else{var re=n(p);re!==null&&me(ge,re.startTime-K)}}var ye=!1,N=-1,S=5,C=-1;function M(){return B?!0:!(r.unstable_now()-C<S)}function D(){if(B=!1,ye){var K=r.unstable_now();C=K;var re=!0;try{e:{j=!1,U&&(U=!1,J(N),N=-1),k=!0;var de=A;try{t:{for(se(K),T=n(g);T!==null&&!(T.expirationTime>K&&M());){var Se=T.callback;if(typeof Se=="function"){T.callback=null,A=T.priorityLevel;var He=Se(T.expirationTime<=K);if(K=r.unstable_now(),typeof He=="function"){T.callback=He,se(K),re=!0;break t}T===n(g)&&s(g),se(K)}else s(g);T=n(g)}if(T!==null)re=!0;else{var P=n(p);P!==null&&me(ge,P.startTime-K),re=!1}}break e}finally{T=null,A=de,k=!1}re=void 0}}finally{re?I():ye=!1}}}var I;if(typeof X=="function")I=function(){X(D)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,he=R.port2;R.port1.onmessage=D,I=function(){he.postMessage(null)}}else I=function(){$(D,0)};function me(K,re){N=$(function(){K(r.unstable_now())},re)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(K){switch(A){case 1:case 2:case 3:var re=3;break;default:re=A}var de=A;A=re;try{return K()}finally{A=de}},r.unstable_requestPaint=function(){B=!0},r.unstable_runWithPriority=function(K,re){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var de=A;A=K;try{return re()}finally{A=de}},r.unstable_scheduleCallback=function(K,re,de){var Se=r.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Se+de:Se):de=Se,K){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=de+He,K={id:E++,callback:re,priorityLevel:K,startTime:de,expirationTime:He,sortIndex:-1},de>Se?(K.sortIndex=de,e(p,K),n(g)===null&&K===n(p)&&(U?(J(N),N=-1):U=!0,me(ge,de-Se))):(K.sortIndex=He,e(g,K),j||k||(j=!0,ye||(ye=!0,I()))),K},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(K){var re=A;return function(){var de=A;A=re;try{return K.apply(this,arguments)}finally{A=de}}}})(vm)),vm}var q_;function dw(){return q_||(q_=1,_m.exports=fw()),_m.exports}var Em={exports:{}},Wt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function mw(){if(H_)return Wt;H_=1;var r=fp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:p,implementation:E}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Wt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Wt.createPortal=function(g,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,E)},Wt.flushSync=function(g){var p=h.T,E=s.p;try{if(h.T=null,s.p=2,g)return g()}finally{h.T=p,s.p=E,s.d.f()}},Wt.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},Wt.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Wt.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,k=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:k}):E==="script"&&s.d.X(g,{crossOrigin:T,integrity:A,fetchPriority:k,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Wt.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=m(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},Wt.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin);s.d.L(g,E,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Wt.preloadModule=function(g,p){if(typeof g=="string")if(p){var E=m(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},Wt.requestFormReset=function(g){s.d.r(g)},Wt.unstable_batchedUpdates=function(g,p){return g(p)},Wt.useFormState=function(g,p,E){return h.H.useFormState(g,p,E)},Wt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Wt.version="19.2.0",Wt}var F_;function pw(){if(F_)return Em.exports;F_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Em.exports=mw(),Em.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function gw(){if(G_)return Ll;G_=1;var r=dw(),e=fp(),n=pw();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(s(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),t;if(d===l)return g(f),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var v=!1,w=f.child;w;){if(w===a){v=!0,a=f,l=d;break}if(w===l){v=!0,l=f,a=d;break}w=w.sibling}if(!v){for(w=d.child;w;){if(w===a){v=!0,a=d,l=f;break}if(w===l){v=!0,l=d,a=f;break}w=w.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function E(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=E(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),X=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function I(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function he(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case U:return"Fragment";case $:return"Profiler";case B:return"StrictMode";case ge:return"Suspense";case ye:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case j:return"Portal";case X:return t.displayName||"Context";case J:return(t._context.displayName||"Context")+".Consumer";case se:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return i=t.displayName||null,i!==null?i:he(t.type)||"Memo";case S:i=t._payload,t=t._init;try{return he(t(i))}catch{}}return null}var me=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Se=[],He=-1;function P(t){return{current:t}}function ne(t){0>He||(t.current=Se[He],Se[He]=null,He--)}function oe(t,i){He++,Se[He]=t.current,t.current=i}var ce=P(null),we=P(null),Ie=P(null),Be=P(null);function Vt(t,i){switch(oe(Ie,i),oe(we,t),oe(ce,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?a_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=a_(i),t=o_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ne(ce),oe(ce,t)}function lt(){ne(ce),ne(we),ne(Ie)}function vs(t){t.memoizedState!==null&&oe(Be,t);var i=ce.current,a=o_(i,t.type);i!==a&&(oe(we,t),oe(ce,a))}function fa(t){we.current===t&&(ne(ce),ne(we)),Be.current===t&&(ne(Be),Ol._currentValue=de)}var da,ma;function ci(t){if(da===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);da=i&&i[1]||"",ma=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+da+t+ma}var Oo=!1;function Es(t,i){if(!t||Oo)return"";Oo=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(Y){var G=Y}Reflect.construct(t,[],te)}else{try{te.call()}catch(Y){G=Y}t.call(te.prototype)}}else{try{throw Error()}catch(Y){G=Y}(te=t())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],w=d[1];if(v&&w){var O=v.split(`
`),F=w.split(`
`);for(f=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(l===O.length||f===F.length)for(l=O.length-1,f=F.length-1;1<=l&&0<=f&&O[l]!==F[f];)f--;for(;1<=l&&0<=f;l--,f--)if(O[l]!==F[f]){if(l!==1||f!==1)do if(l--,f--,0>f||O[l]!==F[f]){var W=`
`+O[l].replace(" at new "," at ");return t.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",t.displayName)),W}while(1<=l&&0<=f);break}}}finally{Oo=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ci(a):""}function Mo(t,i){switch(t.tag){case 26:case 27:case 5:return ci(t.type);case 16:return ci("Lazy");case 13:return t.child!==i&&i!==null?ci("Suspense Fallback"):ci("Suspense");case 19:return ci("SuspenseList");case 0:case 15:return Es(t.type,!1);case 11:return Es(t.type.render,!1);case 1:return Es(t.type,!0);case 31:return ci("Activity");default:return""}}function Vo(t){try{var i="",a=null;do i+=Mo(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Tt=Object.prototype.hasOwnProperty,kt=r.unstable_scheduleCallback,yr=r.unstable_cancelCallback,yf=r.unstable_shouldYield,wu=r.unstable_requestPaint,rn=r.unstable_now,bs=r.unstable_getCurrentPriorityLevel,ko=r.unstable_ImmediatePriority,jo=r.unstable_UserBlockingPriority,_r=r.unstable_NormalPriority,_f=r.unstable_LowPriority,Au=r.unstable_IdlePriority,xu=r.log,Ru=r.unstable_setDisableYieldValue,Gn=null,qt=null;function Nn(t){if(typeof xu=="function"&&Ru(t),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(Gn,t)}catch{}}var pt=Math.clz32?Math.clz32:Nu,Cu=Math.log,pa=Math.LN2;function Nu(t){return t>>>=0,t===0?32:31-(Cu(t)/pa|0)|0}var hi=256,Ts=262144,St=4194304;function fi(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function di(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~d,l!==0?f=fi(l):(v&=w,v!==0?f=fi(v):a||(a=w&~t,a!==0&&(f=fi(a))))):(w=l&~d,w!==0?f=fi(w):v!==0?f=fi(v):a||(a=l&~t,a!==0&&(f=fi(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function $n(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function vf(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Iu(){var t=St;return St<<=1,(St&62914560)===0&&(St=4194304),t}function mi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ss(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ef(t,i,a,l,f,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,O=t.expirationTimes,F=t.hiddenUpdates;for(a=v&~a;0<a;){var W=31-pt(a),te=1<<W;w[W]=0,O[W]=-1;var G=F[W];if(G!==null)for(F[W]=null,W=0;W<G.length;W++){var Y=G[W];Y!==null&&(Y.lane&=-536870913)}a&=~te}l!==0&&ws(t,l,0),d!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function ws(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-pt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Lo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-pt(a),f=1<<l;f&i|t[l]&i&&(t[l]|=i),a&=~f}}function Po(t,i){var a=i&-i;return a=(a&42)!==0?1:As(a),(a&(t.suspendedLanes|i))!==0?0:a}function As(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Bi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Du(){var t=re.p;return t!==0?t:(t=window.event,t===void 0?32:I_(t.type))}function Qn(t,i){var a=re.p;try{return re.p=t,i()}finally{re.p=a}}var Kn=Math.random().toString(36).slice(2),wt="__reactFiber$"+Kn,Pt="__reactProps$"+Kn,pi="__reactContainer$"+Kn,ga="__reactEvents$"+Kn,bf="__reactListeners$"+Kn,Ou="__reactHandles$"+Kn,Mu="__reactResources$"+Kn,gi="__reactMarker$"+Kn;function ya(t){delete t[wt],delete t[Pt],delete t[ga],delete t[bf],delete t[Ou]}function yi(t){var i=t[wt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[pi]||a[wt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=m_(t);t!==null;){if(a=t[wt])return a;t=m_(t)}return i}t=a,a=t.parentNode}return null}function In(t){if(t=t[wt]||t[pi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function yn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function _i(t){var i=t[Mu];return i||(i=t[Mu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function At(t){t[gi]=!0}var Uo=new Set,zo={};function vi(t,i){Ei(t,i),Ei(t+"Capture",i)}function Ei(t,i){for(zo[t]=i,t=0;t<i.length;t++)Uo.add(i[t])}var Bo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qo={},Ho={};function Vu(t){return Tt.call(Ho,t)?!0:Tt.call(qo,t)?!1:Bo.test(t)?Ho[t]=!0:(qo[t]=!0,!1)}function _a(t,i,a){if(Vu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function _n(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function xt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function Ut(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vr(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Fo(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Ye(t){if(!t._valueTracker){var i=vr(t)?"checked":"value";t._valueTracker=Fo(t,i,""+t[i])}}function xs(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=vr(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function bi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Rs=/[\n"\\]/g;function on(t){return t.replace(Rs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function va(t,i,a,l,f,d,v,w){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Ut(i)):t.value!==""+Ut(i)&&(t.value=""+Ut(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?Go(t,v,Ut(i)):a!=null?Go(t,v,Ut(a)):l!=null&&t.removeAttribute("value"),f==null&&d!=null&&(t.defaultChecked=!!d),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+Ut(w):t.removeAttribute("name")}function ku(t,i,a,l,f,d,v,w){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Ye(t);return}a=a!=null?""+Ut(a):"",i=i!=null?""+Ut(i):a,w||i===t.value||(t.value=i),t.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),Ye(t)}function Go(t,i,a){i==="number"&&bi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Er(t,i,a,l){if(t=t.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=i.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Ut(a),i=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function ju(t,i,a){if(i!=null&&(i=""+Ut(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Ut(a):""}function br(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(me(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Ut(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Ye(t)}function ln(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Lu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $o(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Lu.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Qo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&$o(t,f,l)}else for(var d in i)i.hasOwnProperty(d)&&$o(t,d,i[d])}function Ea(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ba(t){return Tr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Yn(){}var Ko=null;function Dn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sr=null,Ti=null;function Cs(t){var i=In(t);if(i&&(t=i.stateNode)){var a=t[Pt]||null;e:switch(t=i.stateNode,i.type){case"input":if(va(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+on(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var f=l[Pt]||null;if(!f)throw Error(s(90));va(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&xs(l)}break e;case"textarea":ju(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Er(t,!!a.multiple,i,!1)}}}var Ta=!1;function wr(t,i,a){if(Ta)return t(i,a);Ta=!0;try{var l=t(i);return l}finally{if(Ta=!1,(Sr!==null||Ti!==null)&&(Dc(),Sr&&(i=Sr,t=Ti,Ti=Sr=null,Cs(i),t)))for(i=0;i<t.length;i++)Cs(t[i])}}function Xn(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Pt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ns=!1;if(On)try{var Ze={};Object.defineProperty(Ze,"passive",{get:function(){Ns=!0}}),window.addEventListener("test",Ze,Ze),window.removeEventListener("test",Ze,Ze)}catch{Ns=!1}var Si=null,Yo=null,Is=null;function Xo(){if(Is)return Is;var t,i=Yo,a=i.length,l,f="value"in Si?Si.value:Si.textContent,d=f.length;for(t=0;t<a&&i[t]===f[t];t++);var v=a-t;for(l=1;l<=v&&i[a-l]===f[d-l];l++);return Is=f.slice(t,1<l?1-l:void 0)}function Ds(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function qi(){return!0}function Wn(){return!1}function Ht(t){function i(a,l,f,d,v){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(d):d[w]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?qi:Wn,this.isPropagationStopped=Wn,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=qi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=qi)},persist:function(){},isPersistent:qi}),i}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wi=Ht(Hi),Ar=T({},Hi,{view:0,detail:0}),Wo=Ht(Ar),xr,Sa,Ai,wa=T({},Ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ai&&(Ai&&t.type==="mousemove"?(xr=t.screenX-Ai.screenX,Sa=t.screenY-Ai.screenY):Sa=xr=0,Ai=t),xr)},movementY:function(t){return"movementY"in t?t.movementY:Sa}}),Jo=Ht(wa),Os=T({},wa,{dataTransfer:0}),Uu=Ht(Os),zu=T({},Ar,{relatedTarget:0}),Ms=Ht(zu),Zo=T({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Bu=Ht(Zo),Aa=T({},Hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qu=Ht(Aa),Hu=T({},Hi,{data:0}),xi=Ht(Hu),Fu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$u={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qu(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=$u[t])?!!i[t]:!1}function Rr(){return Qu}var sn=T({},Ar,{key:function(t){if(t.key){var i=Fu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Ds(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rr,charCode:function(t){return t.type==="keypress"?Ds(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ds(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ku=Ht(sn),Yu=T({},wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fi=Ht(Yu),c=T({},Ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rr}),y=Ht(c),b=T({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=Ht(b),q=T({},wa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Ht(q),ae=T({},Hi,{newState:0,oldState:0}),Ce=Ht(ae),gt=[9,13,27,32],$e=On&&"CompositionEvent"in window,ut=null;On&&"documentMode"in document&&(ut=document.documentMode);var Mn=On&&"TextEvent"in window&&!ut,Ri=On&&(!$e||ut&&8<ut&&11>=ut),Jn=" ",Zn=!1;function Vs(t,i){switch(t){case"keyup":return gt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ra=!1;function MS(t,i){switch(t){case"compositionend":return xa(i);case"keypress":return i.which!==32?null:(Zn=!0,Jn);case"textInput":return t=i.data,t===Jn&&Zn?null:t;default:return null}}function VS(t,i){if(Ra)return t==="compositionend"||!$e&&Vs(t,i)?(t=Xo(),Is=Yo=Si=null,Ra=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ri&&i.locale!=="ko"?null:i.data;default:return null}}var kS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!kS[t.type]:i==="textarea"}function _g(t,i,a,l){Sr?Ti?Ti.push(l):Ti=[l]:Sr=l,i=Pc(i,"onChange"),0<i.length&&(a=new wi("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var el=null,tl=null;function jS(t){e_(t,0)}function Xu(t){var i=yn(t);if(xs(i))return t}function vg(t,i){if(t==="change")return i}var Eg=!1;if(On){var Tf;if(On){var Sf="oninput"in document;if(!Sf){var bg=document.createElement("div");bg.setAttribute("oninput","return;"),Sf=typeof bg.oninput=="function"}Tf=Sf}else Tf=!1;Eg=Tf&&(!document.documentMode||9<document.documentMode)}function Tg(){el&&(el.detachEvent("onpropertychange",Sg),tl=el=null)}function Sg(t){if(t.propertyName==="value"&&Xu(tl)){var i=[];_g(i,tl,t,Dn(t)),wr(jS,i)}}function LS(t,i,a){t==="focusin"?(Tg(),el=i,tl=a,el.attachEvent("onpropertychange",Sg)):t==="focusout"&&Tg()}function PS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xu(tl)}function US(t,i){if(t==="click")return Xu(i)}function zS(t,i){if(t==="input"||t==="change")return Xu(i)}function BS(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var vn=typeof Object.is=="function"?Object.is:BS;function nl(t,i){if(vn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Tt.call(i,f)||!vn(t[f],i[f]))return!1}return!0}function wg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ag(t,i){var a=wg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=wg(a)}}function xg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?xg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Rg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=bi(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=bi(t.document)}return i}function wf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var qS=On&&"documentMode"in document&&11>=document.documentMode,Ca=null,Af=null,il=null,xf=!1;function Cg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;xf||Ca==null||Ca!==bi(l)||(l=Ca,"selectionStart"in l&&wf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),il&&nl(il,l)||(il=l,l=Pc(Af,"onSelect"),0<l.length&&(i=new wi("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Ca)))}function ks(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Na={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionrun:ks("Transition","TransitionRun"),transitionstart:ks("Transition","TransitionStart"),transitioncancel:ks("Transition","TransitionCancel"),transitionend:ks("Transition","TransitionEnd")},Rf={},Ng={};On&&(Ng=document.createElement("div").style,"AnimationEvent"in window||(delete Na.animationend.animation,delete Na.animationiteration.animation,delete Na.animationstart.animation),"TransitionEvent"in window||delete Na.transitionend.transition);function js(t){if(Rf[t])return Rf[t];if(!Na[t])return t;var i=Na[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Ng)return Rf[t]=i[a];return t}var Ig=js("animationend"),Dg=js("animationiteration"),Og=js("animationstart"),HS=js("transitionrun"),FS=js("transitionstart"),GS=js("transitioncancel"),Mg=js("transitionend"),Vg=new Map,Cf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cf.push("scrollEnd");function ei(t,i){Vg.set(t,i),vi(i,[t])}var Wu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Vn=[],Ia=0,Nf=0;function Ju(){for(var t=Ia,i=Nf=Ia=0;i<t;){var a=Vn[i];Vn[i++]=null;var l=Vn[i];Vn[i++]=null;var f=Vn[i];Vn[i++]=null;var d=Vn[i];if(Vn[i++]=null,l!==null&&f!==null){var v=l.pending;v===null?f.next=f:(f.next=v.next,v.next=f),l.pending=f}d!==0&&kg(a,f,d)}}function Zu(t,i,a,l){Vn[Ia++]=t,Vn[Ia++]=i,Vn[Ia++]=a,Vn[Ia++]=l,Nf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function If(t,i,a,l){return Zu(t,i,a,l),ec(t)}function Ls(t,i){return Zu(t,null,null,i),ec(t)}function kg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(f=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,f&&i!==null&&(f=31-pt(a),t=d.hiddenUpdates,l=t[f],l===null?t[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function ec(t){if(50<Al)throw Al=0,Ud=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Da={};function $S(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,i,a,l){return new $S(t,i,a,l)}function Df(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Gi(t,i){var a=t.alternate;return a===null?(a=En(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function jg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function tc(t,i,a,l,f,d){var v=0;if(l=t,typeof t=="function")Df(t)&&(v=1);else if(typeof t=="string")v=W1(t,a,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=En(31,a,i,f),t.elementType=C,t.lanes=d,t;case U:return Ps(a.children,f,d,i);case B:v=8,f|=24;break;case $:return t=En(12,a,i,f|2),t.elementType=$,t.lanes=d,t;case ge:return t=En(13,a,i,f),t.elementType=ge,t.lanes=d,t;case ye:return t=En(19,a,i,f),t.elementType=ye,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case X:v=10;break e;case J:v=9;break e;case se:v=11;break e;case N:v=14;break e;case S:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=En(v,a,i,f),i.elementType=t,i.type=l,i.lanes=d,i}function Ps(t,i,a,l){return t=En(7,t,l,i),t.lanes=a,t}function Of(t,i,a){return t=En(6,t,null,i),t.lanes=a,t}function Lg(t){var i=En(18,null,null,0);return i.stateNode=t,i}function Mf(t,i,a){return i=En(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Pg=new WeakMap;function kn(t,i){if(typeof t=="object"&&t!==null){var a=Pg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Vo(i)},Pg.set(t,i),i)}return{value:t,source:i,stack:Vo(i)}}var Oa=[],Ma=0,nc=null,rl=0,jn=[],Ln=0,Cr=null,Ci=1,Ni="";function $i(t,i){Oa[Ma++]=rl,Oa[Ma++]=nc,nc=t,rl=i}function Ug(t,i,a){jn[Ln++]=Ci,jn[Ln++]=Ni,jn[Ln++]=Cr,Cr=t;var l=Ci;t=Ni;var f=32-pt(l)-1;l&=~(1<<f),a+=1;var d=32-pt(i)+f;if(30<d){var v=f-f%5;d=(l&(1<<v)-1).toString(32),l>>=v,f-=v,Ci=1<<32-pt(i)+f|a<<f|l,Ni=d+t}else Ci=1<<d|a<<f|l,Ni=t}function Vf(t){t.return!==null&&($i(t,1),Ug(t,1,0))}function kf(t){for(;t===nc;)nc=Oa[--Ma],Oa[Ma]=null,rl=Oa[--Ma],Oa[Ma]=null;for(;t===Cr;)Cr=jn[--Ln],jn[Ln]=null,Ni=jn[--Ln],jn[Ln]=null,Ci=jn[--Ln],jn[Ln]=null}function zg(t,i){jn[Ln++]=Ci,jn[Ln++]=Ni,jn[Ln++]=Cr,Ci=i.id,Ni=i.overflow,Cr=t}var Ft=null,at=null,ze=!1,Nr=null,Pn=!1,jf=Error(s(519));function Ir(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw sl(kn(i,t)),jf}function Bg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[wt]=t,i[Pt]=l,a){case"dialog":Me("cancel",i),Me("close",i);break;case"iframe":case"object":case"embed":Me("load",i);break;case"video":case"audio":for(a=0;a<Rl.length;a++)Me(Rl[a],i);break;case"source":Me("error",i);break;case"img":case"image":case"link":Me("error",i),Me("load",i);break;case"details":Me("toggle",i);break;case"input":Me("invalid",i),ku(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Me("invalid",i);break;case"textarea":Me("invalid",i),br(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||r_(i.textContent,a)?(l.popover!=null&&(Me("beforetoggle",i),Me("toggle",i)),l.onScroll!=null&&Me("scroll",i),l.onScrollEnd!=null&&Me("scrollend",i),l.onClick!=null&&(i.onclick=Yn),i=!0):i=!1,i||Ir(t,!0)}function qg(t){for(Ft=t.return;Ft;)switch(Ft.tag){case 5:case 31:case 13:Pn=!1;return;case 27:case 3:Pn=!0;return;default:Ft=Ft.return}}function Va(t){if(t!==Ft)return!1;if(!ze)return qg(t),ze=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||em(t.type,t.memoizedProps)),a=!a),a&&at&&Ir(t),qg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));at=d_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));at=d_(t)}else i===27?(i=at,Fr(t.type)?(t=sm,sm=null,at=t):at=i):at=Ft?zn(t.stateNode.nextSibling):null;return!0}function Us(){at=Ft=null,ze=!1}function Lf(){var t=Nr;return t!==null&&(fn===null?fn=t:fn.push.apply(fn,t),Nr=null),t}function sl(t){Nr===null?Nr=[t]:Nr.push(t)}var Pf=P(null),zs=null,Qi=null;function Dr(t,i,a){oe(Pf,i._currentValue),i._currentValue=a}function Ki(t){t._currentValue=Pf.current,ne(Pf)}function Uf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function zf(t,i,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var d=f.dependencies;if(d!==null){var v=f.child;d=d.firstContext;e:for(;d!==null;){var w=d;d=f;for(var O=0;O<i.length;O++)if(w.context===i[O]){d.lanes|=a,w=d.alternate,w!==null&&(w.lanes|=a),Uf(d.return,a,t),l||(v=null);break e}d=w.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Uf(v,a,t),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===t){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function ka(t,i,a,l){t=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var w=f.type;vn(f.pendingProps.value,v.value)||(t!==null?t.push(w):t=[w])}}else if(f===Be.current){if(v=f.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Ol):t=[Ol])}f=f.return}t!==null&&zf(i,t,a,l),i.flags|=262144}function ic(t){for(t=t.firstContext;t!==null;){if(!vn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Bs(t){zs=t,Qi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Gt(t){return Hg(zs,t)}function rc(t,i){return zs===null&&Bs(t),Hg(t,i)}function Hg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Qi===null){if(t===null)throw Error(s(308));Qi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Qi=Qi.next=i;return a}var QS=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},KS=r.unstable_scheduleCallback,YS=r.unstable_NormalPriority,Rt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bf(){return{controller:new QS,data:new Map,refCount:0}}function al(t){t.refCount--,t.refCount===0&&KS(YS,function(){t.controller.abort()})}var ol=null,qf=0,ja=0,La=null;function XS(t,i){if(ol===null){var a=ol=[];qf=0,ja=Gd(),La={status:"pending",value:void 0,then:function(l){a.push(l)}}}return qf++,i.then(Fg,Fg),i}function Fg(){if(--qf===0&&ol!==null){La!==null&&(La.status="fulfilled");var t=ol;ol=null,ja=0,La=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function WS(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Gg=K.S;K.S=function(t,i){C0=rn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&XS(t,i),Gg!==null&&Gg(t,i)};var qs=P(null);function Hf(){var t=qs.current;return t!==null?t:it.pooledCache}function sc(t,i){i===null?oe(qs,qs.current):oe(qs,i.pool)}function $g(){var t=Hf();return t===null?null:{parent:Rt._currentValue,pool:t}}var Pa=Error(s(460)),Ff=Error(s(474)),ac=Error(s(542)),oc={then:function(){}};function Qg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Kg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Yn,Yn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Xg(t),t;default:if(typeof i.status=="string")i.then(Yn,Yn);else{if(t=it,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Xg(t),t}throw Fs=i,Pa}}function Hs(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Fs=a,Pa):a}}var Fs=null;function Yg(){if(Fs===null)throw Error(s(459));var t=Fs;return Fs=null,t}function Xg(t){if(t===Pa||t===ac)throw Error(s(483))}var Ua=null,ll=0;function lc(t){var i=ll;return ll+=1,Ua===null&&(Ua=[]),Kg(Ua,t,i)}function ul(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function uc(t,i){throw i.$$typeof===A?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Wg(t){function i(z,L){if(t){var H=z.deletions;H===null?(z.deletions=[L],z.flags|=16):H.push(L)}}function a(z,L){if(!t)return null;for(;L!==null;)i(z,L),L=L.sibling;return null}function l(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function f(z,L){return z=Gi(z,L),z.index=0,z.sibling=null,z}function d(z,L,H){return z.index=H,t?(H=z.alternate,H!==null?(H=H.index,H<L?(z.flags|=67108866,L):H):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function v(z){return t&&z.alternate===null&&(z.flags|=67108866),z}function w(z,L,H,Z){return L===null||L.tag!==6?(L=Of(H,z.mode,Z),L.return=z,L):(L=f(L,H),L.return=z,L)}function O(z,L,H,Z){var _e=H.type;return _e===U?W(z,L,H.props.children,Z,H.key):L!==null&&(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===S&&Hs(_e)===L.type)?(L=f(L,H.props),ul(L,H),L.return=z,L):(L=tc(H.type,H.key,H.props,null,z.mode,Z),ul(L,H),L.return=z,L)}function F(z,L,H,Z){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=Mf(H,z.mode,Z),L.return=z,L):(L=f(L,H.children||[]),L.return=z,L)}function W(z,L,H,Z,_e){return L===null||L.tag!==7?(L=Ps(H,z.mode,Z,_e),L.return=z,L):(L=f(L,H),L.return=z,L)}function te(z,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Of(""+L,z.mode,H),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case k:return H=tc(L.type,L.key,L.props,null,z.mode,H),ul(H,L),H.return=z,H;case j:return L=Mf(L,z.mode,H),L.return=z,L;case S:return L=Hs(L),te(z,L,H)}if(me(L)||I(L))return L=Ps(L,z.mode,H,null),L.return=z,L;if(typeof L.then=="function")return te(z,lc(L),H);if(L.$$typeof===X)return te(z,rc(z,L),H);uc(z,L)}return null}function G(z,L,H,Z){var _e=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return _e!==null?null:w(z,L,""+H,Z);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case k:return H.key===_e?O(z,L,H,Z):null;case j:return H.key===_e?F(z,L,H,Z):null;case S:return H=Hs(H),G(z,L,H,Z)}if(me(H)||I(H))return _e!==null?null:W(z,L,H,Z,null);if(typeof H.then=="function")return G(z,L,lc(H),Z);if(H.$$typeof===X)return G(z,L,rc(z,H),Z);uc(z,H)}return null}function Y(z,L,H,Z,_e){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return z=z.get(H)||null,w(L,z,""+Z,_e);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case k:return z=z.get(Z.key===null?H:Z.key)||null,O(L,z,Z,_e);case j:return z=z.get(Z.key===null?H:Z.key)||null,F(L,z,Z,_e);case S:return Z=Hs(Z),Y(z,L,H,Z,_e)}if(me(Z)||I(Z))return z=z.get(H)||null,W(L,z,Z,_e,null);if(typeof Z.then=="function")return Y(z,L,H,lc(Z),_e);if(Z.$$typeof===X)return Y(z,L,H,rc(L,Z),_e);uc(L,Z)}return null}function fe(z,L,H,Z){for(var _e=null,Fe=null,pe=L,De=L=0,je=null;pe!==null&&De<H.length;De++){pe.index>De?(je=pe,pe=null):je=pe.sibling;var Ge=G(z,pe,H[De],Z);if(Ge===null){pe===null&&(pe=je);break}t&&pe&&Ge.alternate===null&&i(z,pe),L=d(Ge,L,De),Fe===null?_e=Ge:Fe.sibling=Ge,Fe=Ge,pe=je}if(De===H.length)return a(z,pe),ze&&$i(z,De),_e;if(pe===null){for(;De<H.length;De++)pe=te(z,H[De],Z),pe!==null&&(L=d(pe,L,De),Fe===null?_e=pe:Fe.sibling=pe,Fe=pe);return ze&&$i(z,De),_e}for(pe=l(pe);De<H.length;De++)je=Y(pe,z,De,H[De],Z),je!==null&&(t&&je.alternate!==null&&pe.delete(je.key===null?De:je.key),L=d(je,L,De),Fe===null?_e=je:Fe.sibling=je,Fe=je);return t&&pe.forEach(function(Yr){return i(z,Yr)}),ze&&$i(z,De),_e}function Ee(z,L,H,Z){if(H==null)throw Error(s(151));for(var _e=null,Fe=null,pe=L,De=L=0,je=null,Ge=H.next();pe!==null&&!Ge.done;De++,Ge=H.next()){pe.index>De?(je=pe,pe=null):je=pe.sibling;var Yr=G(z,pe,Ge.value,Z);if(Yr===null){pe===null&&(pe=je);break}t&&pe&&Yr.alternate===null&&i(z,pe),L=d(Yr,L,De),Fe===null?_e=Yr:Fe.sibling=Yr,Fe=Yr,pe=je}if(Ge.done)return a(z,pe),ze&&$i(z,De),_e;if(pe===null){for(;!Ge.done;De++,Ge=H.next())Ge=te(z,Ge.value,Z),Ge!==null&&(L=d(Ge,L,De),Fe===null?_e=Ge:Fe.sibling=Ge,Fe=Ge);return ze&&$i(z,De),_e}for(pe=l(pe);!Ge.done;De++,Ge=H.next())Ge=Y(pe,z,De,Ge.value,Z),Ge!==null&&(t&&Ge.alternate!==null&&pe.delete(Ge.key===null?De:Ge.key),L=d(Ge,L,De),Fe===null?_e=Ge:Fe.sibling=Ge,Fe=Ge);return t&&pe.forEach(function(lw){return i(z,lw)}),ze&&$i(z,De),_e}function nt(z,L,H,Z){if(typeof H=="object"&&H!==null&&H.type===U&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case k:e:{for(var _e=H.key;L!==null;){if(L.key===_e){if(_e=H.type,_e===U){if(L.tag===7){a(z,L.sibling),Z=f(L,H.props.children),Z.return=z,z=Z;break e}}else if(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===S&&Hs(_e)===L.type){a(z,L.sibling),Z=f(L,H.props),ul(Z,H),Z.return=z,z=Z;break e}a(z,L);break}else i(z,L);L=L.sibling}H.type===U?(Z=Ps(H.props.children,z.mode,Z,H.key),Z.return=z,z=Z):(Z=tc(H.type,H.key,H.props,null,z.mode,Z),ul(Z,H),Z.return=z,z=Z)}return v(z);case j:e:{for(_e=H.key;L!==null;){if(L.key===_e)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(z,L.sibling),Z=f(L,H.children||[]),Z.return=z,z=Z;break e}else{a(z,L);break}else i(z,L);L=L.sibling}Z=Mf(H,z.mode,Z),Z.return=z,z=Z}return v(z);case S:return H=Hs(H),nt(z,L,H,Z)}if(me(H))return fe(z,L,H,Z);if(I(H)){if(_e=I(H),typeof _e!="function")throw Error(s(150));return H=_e.call(H),Ee(z,L,H,Z)}if(typeof H.then=="function")return nt(z,L,lc(H),Z);if(H.$$typeof===X)return nt(z,L,rc(z,H),Z);uc(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(z,L.sibling),Z=f(L,H),Z.return=z,z=Z):(a(z,L),Z=Of(H,z.mode,Z),Z.return=z,z=Z),v(z)):a(z,L)}return function(z,L,H,Z){try{ll=0;var _e=nt(z,L,H,Z);return Ua=null,_e}catch(pe){if(pe===Pa||pe===ac)throw pe;var Fe=En(29,pe,null,z.mode);return Fe.lanes=Z,Fe.return=z,Fe}finally{}}}var Gs=Wg(!0),Jg=Wg(!1),Or=!1;function Gf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $f(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Mr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Vr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Qe&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=ec(t),kg(t,null,a),i}return Zu(t,l,i,a),ec(t)}function cl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Lo(t,a)}}function Qf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Kf=!1;function hl(){if(Kf){var t=La;if(t!==null)throw t}}function fl(t,i,a,l){Kf=!1;var f=t.updateQueue;Or=!1;var d=f.firstBaseUpdate,v=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var O=w,F=O.next;O.next=null,v===null?d=F:v.next=F,v=O;var W=t.alternate;W!==null&&(W=W.updateQueue,w=W.lastBaseUpdate,w!==v&&(w===null?W.firstBaseUpdate=F:w.next=F,W.lastBaseUpdate=O))}if(d!==null){var te=f.baseState;v=0,W=F=O=null,w=d;do{var G=w.lane&-536870913,Y=G!==w.lane;if(Y?(ke&G)===G:(l&G)===G){G!==0&&G===ja&&(Kf=!0),W!==null&&(W=W.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var fe=t,Ee=w;G=i;var nt=a;switch(Ee.tag){case 1:if(fe=Ee.payload,typeof fe=="function"){te=fe.call(nt,te,G);break e}te=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=Ee.payload,G=typeof fe=="function"?fe.call(nt,te,G):fe,G==null)break e;te=T({},te,G);break e;case 2:Or=!0}}G=w.callback,G!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:w.tag,payload:w.payload,callback:w.callback,next:null},W===null?(F=W=Y,O=te):W=W.next=Y,v|=G;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;Y=w,w=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);W===null&&(O=te),f.baseState=O,f.firstBaseUpdate=F,f.lastBaseUpdate=W,d===null&&(f.shared.lanes=0),Ur|=v,t.lanes=v,t.memoizedState=te}}function Zg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function ey(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Zg(a[t],i)}var za=P(null),cc=P(0);function ty(t,i){t=ir,oe(cc,t),oe(za,i),ir=t|i.baseLanes}function Yf(){oe(cc,ir),oe(za,za.current)}function Xf(){ir=cc.current,ne(za),ne(cc)}var bn=P(null),Un=null;function kr(t){var i=t.alternate;oe(yt,yt.current&1),oe(bn,t),Un===null&&(i===null||za.current!==null||i.memoizedState!==null)&&(Un=t)}function Wf(t){oe(yt,yt.current),oe(bn,t),Un===null&&(Un=t)}function ny(t){t.tag===22?(oe(yt,yt.current),oe(bn,t),Un===null&&(Un=t)):jr()}function jr(){oe(yt,yt.current),oe(bn,bn.current)}function Tn(t){ne(bn),Un===t&&(Un=null),ne(yt)}var yt=P(0);function hc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||im(a)||rm(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Yi=0,Ne=null,et=null,Ct=null,fc=!1,Ba=!1,$s=!1,dc=0,dl=0,qa=null,JS=0;function dt(){throw Error(s(321))}function Jf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!vn(t[a],i[a]))return!1;return!0}function Zf(t,i,a,l,f,d){return Yi=d,Ne=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=t===null||t.memoizedState===null?Uy:md,$s=!1,d=a(l,f),$s=!1,Ba&&(d=ry(i,a,l,f)),iy(t),d}function iy(t){K.H=gl;var i=et!==null&&et.next!==null;if(Yi=0,Ct=et=Ne=null,fc=!1,dl=0,qa=null,i)throw Error(s(300));t===null||Nt||(t=t.dependencies,t!==null&&ic(t)&&(Nt=!0))}function ry(t,i,a,l){Ne=t;var f=0;do{if(Ba&&(qa=null),dl=0,Ba=!1,25<=f)throw Error(s(301));if(f+=1,Ct=et=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=zy,d=i(a,l)}while(Ba);return d}function ZS(){var t=K.H,i=t.useState()[0];return i=typeof i.then=="function"?ml(i):i,t=t.useState()[0],(et!==null?et.memoizedState:null)!==t&&(Ne.flags|=1024),i}function ed(){var t=dc!==0;return dc=0,t}function td(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function nd(t){if(fc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}fc=!1}Yi=0,Ct=et=Ne=null,Ba=!1,dl=dc=0,qa=null}function an(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Ne.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function _t(){if(et===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var i=Ct===null?Ne.memoizedState:Ct.next;if(i!==null)Ct=i,et=t;else{if(t===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Ct===null?Ne.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function mc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ml(t){var i=dl;return dl+=1,qa===null&&(qa=[]),t=Kg(qa,t,i),i=Ne,(Ct===null?i.memoizedState:Ct.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?Uy:md),t}function pc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ml(t);if(t.$$typeof===X)return Gt(t)}throw Error(s(438,String(t)))}function id(t){var i=null,a=Ne.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ne.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=mc(),Ne.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=M;return i.index++,a}function Xi(t,i){return typeof i=="function"?i(t):i}function gc(t){var i=_t();return rd(i,et,t)}function rd(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=t.baseQueue,d=l.pending;if(d!==null){if(f!==null){var v=f.next;f.next=d.next,d.next=v}i.baseQueue=f=d,l.pending=null}if(d=t.baseState,f===null)t.memoizedState=d;else{i=f.next;var w=v=null,O=null,F=i,W=!1;do{var te=F.lane&-536870913;if(te!==F.lane?(ke&te)===te:(Yi&te)===te){var G=F.revertLane;if(G===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),te===ja&&(W=!0);else if((Yi&G)===G){F=F.next,G===ja&&(W=!0);continue}else te={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(w=O=te,v=d):O=O.next=te,Ne.lanes|=G,Ur|=G;te=F.action,$s&&a(d,te),d=F.hasEagerState?F.eagerState:a(d,te)}else G={lane:te,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(w=O=G,v=d):O=O.next=G,Ne.lanes|=te,Ur|=te;F=F.next}while(F!==null&&F!==i);if(O===null?v=d:O.next=w,!vn(d,t.memoizedState)&&(Nt=!0,W&&(a=La,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=O,l.lastRenderedState=d}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function sd(t){var i=_t(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do d=t(d,v.action),v=v.next;while(v!==f);vn(d,i.memoizedState)||(Nt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function sy(t,i,a){var l=Ne,f=_t(),d=ze;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!vn((et||f).memoizedState,a);if(v&&(f.memoizedState=a,Nt=!0),f=f.queue,ld(ly.bind(null,l,f,t),[t]),f.getSnapshot!==i||v||Ct!==null&&Ct.memoizedState.tag&1){if(l.flags|=2048,Ha(9,{destroy:void 0},oy.bind(null,l,f,a,i),null),it===null)throw Error(s(349));d||(Yi&127)!==0||ay(l,i,a)}return a}function ay(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ne.updateQueue,i===null?(i=mc(),Ne.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function oy(t,i,a,l){i.value=a,i.getSnapshot=l,uy(i)&&cy(t)}function ly(t,i,a){return a(function(){uy(i)&&cy(t)})}function uy(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!vn(t,a)}catch{return!0}}function cy(t){var i=Ls(t,2);i!==null&&dn(i,t,2)}function ad(t){var i=an();if(typeof t=="function"){var a=t;if(t=a(),$s){Nn(!0);try{a()}finally{Nn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:t},i}function hy(t,i,a,l){return t.baseState=a,rd(t,et,typeof l=="function"?l:Xi)}function e1(t,i,a,l,f){if(vc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};K.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,fy(i,d)):(d.next=a.next,i.pending=a.next=d)}}function fy(t,i){var a=i.action,l=i.payload,f=t.state;if(i.isTransition){var d=K.T,v={};K.T=v;try{var w=a(f,l),O=K.S;O!==null&&O(v,w),dy(t,i,w)}catch(F){od(t,i,F)}finally{d!==null&&v.types!==null&&(d.types=v.types),K.T=d}}else try{d=a(f,l),dy(t,i,d)}catch(F){od(t,i,F)}}function dy(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){my(t,i,l)},function(l){return od(t,i,l)}):my(t,i,a)}function my(t,i,a){i.status="fulfilled",i.value=a,py(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,fy(t,a)))}function od(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,py(i),i=i.next;while(i!==l)}t.action=null}function py(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function gy(t,i){return i}function yy(t,i){if(ze){var a=it.formState;if(a!==null){e:{var l=Ne;if(ze){if(at){t:{for(var f=at,d=Pn;f.nodeType!==8;){if(!d){f=null;break t}if(f=zn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){at=zn(f.nextSibling),l=f.data==="F!";break e}}Ir(l)}l=!1}l&&(i=a[0])}}return a=an(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gy,lastRenderedState:i},a.queue=l,a=jy.bind(null,Ne,l),l.dispatch=a,l=ad(!1),d=dd.bind(null,Ne,!1,l.queue),l=an(),f={state:i,dispatch:null,action:t,pending:null},l.queue=f,a=e1.bind(null,Ne,f,d,a),f.dispatch=a,l.memoizedState=t,[i,a,!1]}function _y(t){var i=_t();return vy(i,et,t)}function vy(t,i,a){if(i=rd(t,i,gy)[0],t=gc(Xi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=ml(i)}catch(v){throw v===Pa?ac:v}else l=i;i=_t();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Ne.flags|=2048,Ha(9,{destroy:void 0},t1.bind(null,f,a),null)),[l,d,t]}function t1(t,i){t.action=i}function Ey(t){var i=_t(),a=et;if(a!==null)return vy(i,a,t);_t(),i=i.memoizedState,a=_t();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Ha(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ne.updateQueue,i===null&&(i=mc(),Ne.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function by(){return _t().memoizedState}function yc(t,i,a,l){var f=an();Ne.flags|=t,f.memoizedState=Ha(1|i,{destroy:void 0},a,l===void 0?null:l)}function _c(t,i,a,l){var f=_t();l=l===void 0?null:l;var d=f.memoizedState.inst;et!==null&&l!==null&&Jf(l,et.memoizedState.deps)?f.memoizedState=Ha(i,d,a,l):(Ne.flags|=t,f.memoizedState=Ha(1|i,d,a,l))}function Ty(t,i){yc(8390656,8,t,i)}function ld(t,i){_c(2048,8,t,i)}function n1(t){Ne.flags|=4;var i=Ne.updateQueue;if(i===null)i=mc(),Ne.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Sy(t){var i=_t().memoizedState;return n1({ref:i,nextImpl:t}),function(){if((Qe&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function wy(t,i){return _c(4,2,t,i)}function Ay(t,i){return _c(4,4,t,i)}function xy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Ry(t,i,a){a=a!=null?a.concat([t]):null,_c(4,4,xy.bind(null,i,t),a)}function ud(){}function Cy(t,i){var a=_t();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Jf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Ny(t,i){var a=_t();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Jf(i,l[1]))return l[0];if(l=t(),$s){Nn(!0);try{t()}finally{Nn(!1)}}return a.memoizedState=[l,i],l}function cd(t,i,a){return a===void 0||(Yi&1073741824)!==0&&(ke&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=I0(),Ne.lanes|=t,Ur|=t,a)}function Iy(t,i,a,l){return vn(a,i)?a:za.current!==null?(t=cd(t,a,l),vn(t,i)||(Nt=!0),t):(Yi&42)===0||(Yi&1073741824)!==0&&(ke&261930)===0?(Nt=!0,t.memoizedState=a):(t=I0(),Ne.lanes|=t,Ur|=t,i)}function Dy(t,i,a,l,f){var d=re.p;re.p=d!==0&&8>d?d:8;var v=K.T,w={};K.T=w,dd(t,!1,i,a);try{var O=f(),F=K.S;if(F!==null&&F(w,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var W=WS(O,l);pl(t,i,W,An(t))}else pl(t,i,l,An(t))}catch(te){pl(t,i,{then:function(){},status:"rejected",reason:te},An())}finally{re.p=d,v!==null&&w.types!==null&&(v.types=w.types),K.T=v}}function i1(){}function hd(t,i,a,l){if(t.tag!==5)throw Error(s(476));var f=Oy(t).queue;Dy(t,f,i,de,a===null?i1:function(){return My(t),a(l)})}function Oy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:de},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function My(t){var i=Oy(t);i.next===null&&(i=t.alternate.memoizedState),pl(t,i.next.queue,{},An())}function fd(){return Gt(Ol)}function Vy(){return _t().memoizedState}function ky(){return _t().memoizedState}function r1(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=An();t=Mr(a);var l=Vr(i,t,a);l!==null&&(dn(l,i,a),cl(l,i,a)),i={cache:Bf()},t.payload=i;return}i=i.return}}function s1(t,i,a){var l=An();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},vc(t)?Ly(i,a):(a=If(t,i,a,l),a!==null&&(dn(a,t,l),Py(a,i,l)))}function jy(t,i,a){var l=An();pl(t,i,a,l)}function pl(t,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(vc(t))Ly(i,f);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,w=d(v,a);if(f.hasEagerState=!0,f.eagerState=w,vn(w,v))return Zu(t,i,f,0),it===null&&Ju(),!1}catch{}finally{}if(a=If(t,i,f,l),a!==null)return dn(a,t,l),Py(a,i,l),!0}return!1}function dd(t,i,a,l){if(l={lane:2,revertLane:Gd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},vc(t)){if(i)throw Error(s(479))}else i=If(t,a,l,2),i!==null&&dn(i,t,2)}function vc(t){var i=t.alternate;return t===Ne||i!==null&&i===Ne}function Ly(t,i){Ba=fc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Py(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Lo(t,a)}}var gl={readContext:Gt,use:pc,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt};gl.useEffectEvent=dt;var Uy={readContext:Gt,use:pc,useCallback:function(t,i){return an().memoizedState=[t,i===void 0?null:i],t},useContext:Gt,useEffect:Ty,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,yc(4194308,4,xy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return yc(4194308,4,t,i)},useInsertionEffect:function(t,i){yc(4,2,t,i)},useMemo:function(t,i){var a=an();i=i===void 0?null:i;var l=t();if($s){Nn(!0);try{t()}finally{Nn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=an();if(a!==void 0){var f=a(i);if($s){Nn(!0);try{a(i)}finally{Nn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=s1.bind(null,Ne,t),[l.memoizedState,t]},useRef:function(t){var i=an();return t={current:t},i.memoizedState=t},useState:function(t){t=ad(t);var i=t.queue,a=jy.bind(null,Ne,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:ud,useDeferredValue:function(t,i){var a=an();return cd(a,t,i)},useTransition:function(){var t=ad(!1);return t=Dy.bind(null,Ne,t.queue,!0,!1),an().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ne,f=an();if(ze){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),it===null)throw Error(s(349));(ke&127)!==0||ay(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,Ty(ly.bind(null,l,d,t),[t]),l.flags|=2048,Ha(9,{destroy:void 0},oy.bind(null,l,d,a,i),null),a},useId:function(){var t=an(),i=it.identifierPrefix;if(ze){var a=Ni,l=Ci;a=(l&~(1<<32-pt(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=dc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=JS++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:fd,useFormState:yy,useActionState:yy,useOptimistic:function(t){var i=an();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=dd.bind(null,Ne,!0,a),a.dispatch=i,[t,i]},useMemoCache:id,useCacheRefresh:function(){return an().memoizedState=r1.bind(null,Ne)},useEffectEvent:function(t){var i=an(),a={impl:t};return i.memoizedState=a,function(){if((Qe&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},md={readContext:Gt,use:pc,useCallback:Cy,useContext:Gt,useEffect:ld,useImperativeHandle:Ry,useInsertionEffect:wy,useLayoutEffect:Ay,useMemo:Ny,useReducer:gc,useRef:by,useState:function(){return gc(Xi)},useDebugValue:ud,useDeferredValue:function(t,i){var a=_t();return Iy(a,et.memoizedState,t,i)},useTransition:function(){var t=gc(Xi)[0],i=_t().memoizedState;return[typeof t=="boolean"?t:ml(t),i]},useSyncExternalStore:sy,useId:Vy,useHostTransitionStatus:fd,useFormState:_y,useActionState:_y,useOptimistic:function(t,i){var a=_t();return hy(a,et,t,i)},useMemoCache:id,useCacheRefresh:ky};md.useEffectEvent=Sy;var zy={readContext:Gt,use:pc,useCallback:Cy,useContext:Gt,useEffect:ld,useImperativeHandle:Ry,useInsertionEffect:wy,useLayoutEffect:Ay,useMemo:Ny,useReducer:sd,useRef:by,useState:function(){return sd(Xi)},useDebugValue:ud,useDeferredValue:function(t,i){var a=_t();return et===null?cd(a,t,i):Iy(a,et.memoizedState,t,i)},useTransition:function(){var t=sd(Xi)[0],i=_t().memoizedState;return[typeof t=="boolean"?t:ml(t),i]},useSyncExternalStore:sy,useId:Vy,useHostTransitionStatus:fd,useFormState:Ey,useActionState:Ey,useOptimistic:function(t,i){var a=_t();return et!==null?hy(a,et,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:id,useCacheRefresh:ky};zy.useEffectEvent=Sy;function pd(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var gd={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=An(),f=Mr(l);f.payload=i,a!=null&&(f.callback=a),i=Vr(t,f,l),i!==null&&(dn(i,t,l),cl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=An(),f=Mr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Vr(t,f,l),i!==null&&(dn(i,t,l),cl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=An(),l=Mr(a);l.tag=2,i!=null&&(l.callback=i),i=Vr(t,l,a),i!==null&&(dn(i,t,a),cl(i,t,a))}};function By(t,i,a,l,f,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!nl(a,l)||!nl(f,d):!0}function qy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&gd.enqueueReplaceState(i,i.state,null)}function Qs(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function Hy(t){Wu(t)}function Fy(t){console.error(t)}function Gy(t){Wu(t)}function Ec(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function $y(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function yd(t,i,a){return a=Mr(a),a.tag=3,a.payload={element:null},a.callback=function(){Ec(t,i)},a}function Qy(t){return t=Mr(t),t.tag=3,t}function Ky(t,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;t.payload=function(){return f(d)},t.callback=function(){$y(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){$y(i,a,l),typeof f!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function a1(t,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&ka(i,a,f,!0),a=bn.current,a!==null){switch(a.tag){case 31:case 13:return Un===null?Oc():a.alternate===null&&mt===0&&(mt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===oc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),qd(t,l,f)),!1;case 22:return a.flags|=65536,l===oc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),qd(t,l,f)),!1}throw Error(s(435,a.tag))}return qd(t,l,f),Oc(),!1}if(ze)return i=bn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==jf&&(t=Error(s(422),{cause:l}),sl(kn(t,a)))):(l!==jf&&(i=Error(s(423),{cause:l}),sl(kn(i,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=kn(l,a),f=yd(t.stateNode,l,f),Qf(t,f),mt!==4&&(mt=2)),!1;var d=Error(s(520),{cause:l});if(d=kn(d,a),wl===null?wl=[d]:wl.push(d),mt!==4&&(mt=2),i===null)return!0;l=kn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=yd(a.stateNode,l,t),Qf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(zr===null||!zr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Qy(f),Ky(f,t,a,l),Qf(a,f),!1}a=a.return}while(a!==null);return!1}var _d=Error(s(461)),Nt=!1;function $t(t,i,a,l){i.child=t===null?Jg(i,null,a,l):Gs(i,t.child,a,l)}function Yy(t,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var w in l)w!=="ref"&&(v[w]=l[w])}else v=l;return Bs(i),l=Zf(t,i,a,v,d,f),w=ed(),t!==null&&!Nt?(td(t,i,f),Wi(t,i,f)):(ze&&w&&Vf(i),i.flags|=1,$t(t,i,l,f),i.child)}function Xy(t,i,a,l,f){if(t===null){var d=a.type;return typeof d=="function"&&!Df(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Wy(t,i,d,l,f)):(t=tc(a.type,null,l,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!xd(t,f)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:nl,a(v,l)&&t.ref===i.ref)return Wi(t,i,f)}return i.flags|=1,t=Gi(d,l),t.ref=i.ref,t.return=i,i.child=t}function Wy(t,i,a,l,f){if(t!==null){var d=t.memoizedProps;if(nl(d,l)&&t.ref===i.ref)if(Nt=!1,i.pendingProps=l=d,xd(t,f))(t.flags&131072)!==0&&(Nt=!0);else return i.lanes=t.lanes,Wi(t,i,f)}return vd(t,i,a,l,f)}function Jy(t,i,a,l){var f=l.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=i.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return Zy(t,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&sc(i,d!==null?d.cachePool:null),d!==null?ty(i,d):Yf(),ny(i);else return l=i.lanes=536870912,Zy(t,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(sc(i,d.cachePool),ty(i,d),jr(),i.memoizedState=null):(t!==null&&sc(i,null),Yf(),jr());return $t(t,i,f,a),i.child}function yl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Zy(t,i,a,l,f){var d=Hf();return d=d===null?null:{parent:Rt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&sc(i,null),Yf(),ny(i),t!==null&&ka(t,i,l,!0),i.childLanes=f,null}function bc(t,i){return i=Sc({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function e0(t,i,a){return Gs(i,t.child,null,a),t=bc(i,i.pendingProps),t.flags|=2,Tn(i),i.memoizedState=null,t}function o1(t,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(ze){if(l.mode==="hidden")return t=bc(i,l),i.lanes=536870912,yl(null,t);if(Wf(i),(t=at)?(t=f_(t,Pn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Cr!==null?{id:Ci,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},a=Lg(t),a.return=i,i.child=a,Ft=i,at=null)):t=null,t===null)throw Ir(i);return i.lanes=536870912,null}return bc(i,l)}var d=t.memoizedState;if(d!==null){var v=d.dehydrated;if(Wf(i),f)if(i.flags&256)i.flags&=-257,i=e0(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(Nt||ka(t,i,a,!1),f=(a&t.childLanes)!==0,Nt||f){if(l=it,l!==null&&(v=Po(l,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,Ls(t,v),dn(l,t,v),_d;Oc(),i=e0(t,i,a)}else t=d.treeContext,at=zn(v.nextSibling),Ft=i,ze=!0,Nr=null,Pn=!1,t!==null&&zg(i,t),i=bc(i,l),i.flags|=4096;return i}return t=Gi(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Tc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function vd(t,i,a,l,f){return Bs(i),a=Zf(t,i,a,l,void 0,f),l=ed(),t!==null&&!Nt?(td(t,i,f),Wi(t,i,f)):(ze&&l&&Vf(i),i.flags|=1,$t(t,i,a,f),i.child)}function t0(t,i,a,l,f,d){return Bs(i),i.updateQueue=null,a=ry(i,l,a,f),iy(t),l=ed(),t!==null&&!Nt?(td(t,i,d),Wi(t,i,d)):(ze&&l&&Vf(i),i.flags|=1,$t(t,i,a,d),i.child)}function n0(t,i,a,l,f){if(Bs(i),i.stateNode===null){var d=Da,v=a.contextType;typeof v=="object"&&v!==null&&(d=Gt(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=gd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Gf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Gt(v):Da,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(pd(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&gd.enqueueReplaceState(d,d.state,null),fl(i,l,d,f),hl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var w=i.memoizedProps,O=Qs(a,w);d.props=O;var F=d.context,W=a.contextType;v=Da,typeof W=="object"&&W!==null&&(v=Gt(W));var te=a.getDerivedStateFromProps;W=typeof te=="function"||typeof d.getSnapshotBeforeUpdate=="function",w=i.pendingProps!==w,W||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(w||F!==v)&&qy(i,d,l,v),Or=!1;var G=i.memoizedState;d.state=G,fl(i,l,d,f),hl(),F=i.memoizedState,w||G!==F||Or?(typeof te=="function"&&(pd(i,a,te,l),F=i.memoizedState),(O=Or||By(i,a,O,l,G,F,v))?(W||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=F),d.props=l,d.state=F,d.context=v,l=O):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,$f(t,i),v=i.memoizedProps,W=Qs(a,v),d.props=W,te=i.pendingProps,G=d.context,F=a.contextType,O=Da,typeof F=="object"&&F!==null&&(O=Gt(F)),w=a.getDerivedStateFromProps,(F=typeof w=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==te||G!==O)&&qy(i,d,l,O),Or=!1,G=i.memoizedState,d.state=G,fl(i,l,d,f),hl();var Y=i.memoizedState;v!==te||G!==Y||Or||t!==null&&t.dependencies!==null&&ic(t.dependencies)?(typeof w=="function"&&(pd(i,a,w,l),Y=i.memoizedState),(W=Or||By(i,a,W,l,G,Y,O)||t!==null&&t.dependencies!==null&&ic(t.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Y,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Y,O)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&G===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&G===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=Y),d.props=l,d.state=Y,d.context=O,l=W):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&G===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&G===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,Tc(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=Gs(i,t.child,null,f),i.child=Gs(i,null,a,f)):$t(t,i,a,f),i.memoizedState=d.state,t=i.child):t=Wi(t,i,f),t}function i0(t,i,a,l){return Us(),i.flags|=256,$t(t,i,a,l),i.child}var Ed={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bd(t){return{baseLanes:t,cachePool:$g()}}function Td(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=wn),t}function r0(t,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(yt.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(ze){if(f?kr(i):jr(),(t=at)?(t=f_(t,Pn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Cr!==null?{id:Ci,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},a=Lg(t),a.return=i,i.child=a,Ft=i,at=null)):t=null,t===null)throw Ir(i);return rm(t)?i.lanes=32:i.lanes=536870912,null}var w=l.children;return l=l.fallback,f?(jr(),f=i.mode,w=Sc({mode:"hidden",children:w},f),l=Ps(l,f,a,null),w.return=i,l.return=i,w.sibling=l,i.child=w,l=i.child,l.memoizedState=bd(a),l.childLanes=Td(t,v,a),i.memoizedState=Ed,yl(null,l)):(kr(i),Sd(i,w))}var O=t.memoizedState;if(O!==null&&(w=O.dehydrated,w!==null)){if(d)i.flags&256?(kr(i),i.flags&=-257,i=wd(t,i,a)):i.memoizedState!==null?(jr(),i.child=t.child,i.flags|=128,i=null):(jr(),w=l.fallback,f=i.mode,l=Sc({mode:"visible",children:l.children},f),w=Ps(w,f,a,null),w.flags|=2,l.return=i,w.return=i,l.sibling=w,i.child=l,Gs(i,t.child,null,a),l=i.child,l.memoizedState=bd(a),l.childLanes=Td(t,v,a),i.memoizedState=Ed,i=yl(null,l));else if(kr(i),rm(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var F=v.dgst;v=F,l=Error(s(419)),l.stack="",l.digest=v,sl({value:l,source:null,stack:null}),i=wd(t,i,a)}else if(Nt||ka(t,i,a,!1),v=(a&t.childLanes)!==0,Nt||v){if(v=it,v!==null&&(l=Po(v,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,Ls(t,l),dn(v,t,l),_d;im(w)||Oc(),i=wd(t,i,a)}else im(w)?(i.flags|=192,i.child=t.child,i=null):(t=O.treeContext,at=zn(w.nextSibling),Ft=i,ze=!0,Nr=null,Pn=!1,t!==null&&zg(i,t),i=Sd(i,l.children),i.flags|=4096);return i}return f?(jr(),w=l.fallback,f=i.mode,O=t.child,F=O.sibling,l=Gi(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,F!==null?w=Gi(F,w):(w=Ps(w,f,a,null),w.flags|=2),w.return=i,l.return=i,l.sibling=w,i.child=l,yl(null,l),l=i.child,w=t.child.memoizedState,w===null?w=bd(a):(f=w.cachePool,f!==null?(O=Rt._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=$g(),w={baseLanes:w.baseLanes|a,cachePool:f}),l.memoizedState=w,l.childLanes=Td(t,v,a),i.memoizedState=Ed,yl(t.child,l)):(kr(i),a=t.child,t=a.sibling,a=Gi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function Sd(t,i){return i=Sc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Sc(t,i){return t=En(22,t,null,i),t.lanes=0,t}function wd(t,i,a){return Gs(i,t.child,null,a),t=Sd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function s0(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Uf(t.return,i,a)}function Ad(t,i,a,l,f,d){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=f,v.treeForkCount=d)}function a0(t,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var v=yt.current,w=(v&2)!==0;if(w?(v=v&1|2,i.flags|=128):v&=1,oe(yt,v),$t(t,i,l,a),l=ze?rl:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&s0(t,a,i);else if(t.tag===19)s0(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)t=a.alternate,t!==null&&hc(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Ad(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&hc(t)===null){i.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}Ad(i,!0,a,null,d,l);break;case"together":Ad(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Wi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Ur|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(ka(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Gi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Gi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function xd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&ic(t)))}function l1(t,i,a){switch(i.tag){case 3:Vt(i,i.stateNode.containerInfo),Dr(i,Rt,t.memoizedState.cache),Us();break;case 27:case 5:vs(i);break;case 4:Vt(i,i.stateNode.containerInfo);break;case 10:Dr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Wf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(kr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?r0(t,i,a):(kr(i),t=Wi(t,i,a),t!==null?t.sibling:null);kr(i);break;case 19:var f=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(ka(t,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return a0(t,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(yt,yt.current),l)break;return null;case 22:return i.lanes=0,Jy(t,i,a,i.pendingProps);case 24:Dr(i,Rt,t.memoizedState.cache)}return Wi(t,i,a)}function o0(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Nt=!0;else{if(!xd(t,a)&&(i.flags&128)===0)return Nt=!1,l1(t,i,a);Nt=(t.flags&131072)!==0}else Nt=!1,ze&&(i.flags&1048576)!==0&&Ug(i,rl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=Hs(i.elementType),i.type=t,typeof t=="function")Df(t)?(l=Qs(t,l),i.tag=1,i=n0(null,i,t,l,a)):(i.tag=0,i=vd(null,i,t,l,a));else{if(t!=null){var f=t.$$typeof;if(f===se){i.tag=11,i=Yy(null,i,t,l,a);break e}else if(f===N){i.tag=14,i=Xy(null,i,t,l,a);break e}}throw i=he(t)||t,Error(s(306,i,""))}}return i;case 0:return vd(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Qs(l,i.pendingProps),n0(t,i,l,f,a);case 3:e:{if(Vt(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,$f(t,i),fl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,Dr(i,Rt,l),l!==d.cache&&zf(i,[Rt],a,!0),hl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=i0(t,i,l,a);break e}else if(l!==f){f=kn(Error(s(424)),i),sl(f),i=i0(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(at=zn(t.firstChild),Ft=i,ze=!0,Nr=null,Pn=!0,a=Jg(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Us(),l===f){i=Wi(t,i,a);break e}$t(t,i,l,a)}i=i.child}return i;case 26:return Tc(t,i),t===null?(a=__(i.type,null,i.pendingProps,null))?i.memoizedState=a:ze||(a=i.type,t=i.pendingProps,l=Uc(Ie.current).createElement(a),l[wt]=i,l[Pt]=t,Qt(l,a,t),At(l),i.stateNode=l):i.memoizedState=__(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return vs(i),t===null&&ze&&(l=i.stateNode=p_(i.type,i.pendingProps,Ie.current),Ft=i,Pn=!0,f=at,Fr(i.type)?(sm=f,at=zn(l.firstChild)):at=f),$t(t,i,i.pendingProps.children,a),Tc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&ze&&((f=l=at)&&(l=P1(l,i.type,i.pendingProps,Pn),l!==null?(i.stateNode=l,Ft=i,at=zn(l.firstChild),Pn=!1,f=!0):f=!1),f||Ir(i)),vs(i),f=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,em(f,d)?l=null:v!==null&&em(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=Zf(t,i,ZS,null,null,a),Ol._currentValue=f),Tc(t,i),$t(t,i,l,a),i.child;case 6:return t===null&&ze&&((t=a=at)&&(a=U1(a,i.pendingProps,Pn),a!==null?(i.stateNode=a,Ft=i,at=null,t=!0):t=!1),t||Ir(i)),null;case 13:return r0(t,i,a);case 4:return Vt(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Gs(i,null,l,a):$t(t,i,l,a),i.child;case 11:return Yy(t,i,i.type,i.pendingProps,a);case 7:return $t(t,i,i.pendingProps,a),i.child;case 8:return $t(t,i,i.pendingProps.children,a),i.child;case 12:return $t(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Dr(i,i.type,l.value),$t(t,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Bs(i),f=Gt(f),l=l(f),i.flags|=1,$t(t,i,l,a),i.child;case 14:return Xy(t,i,i.type,i.pendingProps,a);case 15:return Wy(t,i,i.type,i.pendingProps,a);case 19:return a0(t,i,a);case 31:return o1(t,i,a);case 22:return Jy(t,i,a,i.pendingProps);case 24:return Bs(i),l=Gt(Rt),t===null?(f=Hf(),f===null&&(f=it,d=Bf(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},Gf(i),Dr(i,Rt,f)):((t.lanes&a)!==0&&($f(t,i),fl(i,null,null,a),hl()),f=t.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Dr(i,Rt,l)):(l=d.cache,Dr(i,Rt,l),l!==f.cache&&zf(i,[Rt],a,!0))),$t(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ji(t){t.flags|=4}function Rd(t,i,a,l,f){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(V0())t.flags|=8192;else throw Fs=oc,Ff}else t.flags&=-16777217}function l0(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!S_(i))if(V0())t.flags|=8192;else throw Fs=oc,Ff}function wc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Iu():536870912,t.lanes|=i,Qa|=i)}function _l(t,i){if(!ze)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ot(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function u1(t,i,a){var l=i.pendingProps;switch(kf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(i),null;case 1:return ot(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Ki(Rt),lt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Va(i)?Ji(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Lf())),ot(i),null;case 26:var f=i.type,d=i.memoizedState;return t===null?(Ji(i),d!==null?(ot(i),l0(i,d)):(ot(i),Rd(i,f,null,l,a))):d?d!==t.memoizedState?(Ji(i),ot(i),l0(i,d)):(ot(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&Ji(i),ot(i),Rd(i,f,t,l,a)),null;case 27:if(fa(i),a=Ie.current,f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Ji(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ot(i),null}t=ce.current,Va(i)?Bg(i):(t=p_(f,l,a),i.stateNode=t,Ji(i))}return ot(i),null;case 5:if(fa(i),f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Ji(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ot(i),null}if(d=ce.current,Va(i))Bg(i);else{var v=Uc(Ie.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(f,{is:l.is}):v.createElement(f)}}d[wt]=i,d[Pt]=l;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=d;e:switch(Qt(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ji(i)}}return ot(i),Rd(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Ji(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=Ie.current,Va(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,f=Ft,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[wt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||r_(t.nodeValue,a)),t||Ir(i,!0)}else t=Uc(t).createTextNode(l),t[wt]=i,i.stateNode=t}return ot(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=Va(i),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[wt]=i}else Us(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ot(i),t=!1}else a=Lf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(Tn(i),i):(Tn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return ot(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Va(i),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[wt]=i}else Us(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ot(i),f=!1}else f=Lf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Tn(i),i):(Tn(i),null)}return Tn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),wc(i,i.updateQueue),ot(i),null);case 4:return lt(),t===null&&Yd(i.stateNode.containerInfo),ot(i),null;case 10:return Ki(i.type),ot(i),null;case 19:if(ne(yt),l=i.memoizedState,l===null)return ot(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)_l(l,!1);else{if(mt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=hc(t),d!==null){for(i.flags|=128,_l(l,!1),t=d.updateQueue,i.updateQueue=t,wc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)jg(a,t),a=a.sibling;return oe(yt,yt.current&1|2),ze&&$i(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&rn()>Nc&&(i.flags|=128,f=!0,_l(l,!1),i.lanes=4194304)}else{if(!f)if(t=hc(d),t!==null){if(i.flags|=128,f=!0,t=t.updateQueue,i.updateQueue=t,wc(i,t),_l(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!ze)return ot(i),null}else 2*rn()-l.renderingStartTime>Nc&&a!==536870912&&(i.flags|=128,f=!0,_l(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(t=l.last,t!==null?t.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=rn(),t.sibling=null,a=yt.current,oe(yt,f?a&1|2:a&1),ze&&$i(i,l.treeForkCount),t):(ot(i),null);case 22:case 23:return Tn(i),Xf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ot(i),i.subtreeFlags&6&&(i.flags|=8192)):ot(i),a=i.updateQueue,a!==null&&wc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&ne(qs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ki(Rt),ot(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function c1(t,i){switch(kf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Ki(Rt),lt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return fa(i),null;case 31:if(i.memoizedState!==null){if(Tn(i),i.alternate===null)throw Error(s(340));Us()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Tn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Us()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ne(yt),null;case 4:return lt(),null;case 10:return Ki(i.type),null;case 22:case 23:return Tn(i),Xf(),t!==null&&ne(qs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Ki(Rt),null;case 25:return null;default:return null}}function u0(t,i){switch(kf(i),i.tag){case 3:Ki(Rt),lt();break;case 26:case 27:case 5:fa(i);break;case 4:lt();break;case 31:i.memoizedState!==null&&Tn(i);break;case 13:Tn(i);break;case 19:ne(yt);break;case 10:Ki(i.type);break;case 22:case 23:Tn(i),Xf(),t!==null&&ne(qs);break;case 24:Ki(Rt)}}function vl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==f)}}catch(w){We(i,i.return,w)}}function Lr(t,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&t)===t){var v=l.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,f=i;var O=a,F=w;try{F()}catch(W){We(f,O,W)}}}l=l.next}while(l!==d)}}catch(W){We(i,i.return,W)}}function c0(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{ey(i,a)}catch(l){We(t,t.return,l)}}}function h0(t,i,a){a.props=Qs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){We(t,i,l)}}function El(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){We(t,i,f)}}function Ii(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){We(t,i,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){We(t,i,f)}else a.current=null}function f0(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){We(t,t.return,f)}}function Cd(t,i,a){try{var l=t.stateNode;O1(l,t.type,a,i),l[Pt]=i}catch(f){We(t,t.return,f)}}function d0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Fr(t.type)||t.tag===4}function Nd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||d0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Fr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Id(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Yn));else if(l!==4&&(l===27&&Fr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Id(t,i,a),t=t.sibling;t!==null;)Id(t,i,a),t=t.sibling}function Ac(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&Fr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Ac(t,i,a),t=t.sibling;t!==null;)Ac(t,i,a),t=t.sibling}function m0(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Qt(i,l,a),i[wt]=t,i[Pt]=a}catch(d){We(t,t.return,d)}}var Zi=!1,It=!1,Dd=!1,p0=typeof WeakSet=="function"?WeakSet:Set,zt=null;function h1(t,i){if(t=t.containerInfo,Jd=$c,t=Rg(t),wf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,w=-1,O=-1,F=0,W=0,te=t,G=null;t:for(;;){for(var Y;te!==a||f!==0&&te.nodeType!==3||(w=v+f),te!==d||l!==0&&te.nodeType!==3||(O=v+l),te.nodeType===3&&(v+=te.nodeValue.length),(Y=te.firstChild)!==null;)G=te,te=Y;for(;;){if(te===t)break t;if(G===a&&++F===f&&(w=v),G===d&&++W===l&&(O=v),(Y=te.nextSibling)!==null)break;te=G,G=te.parentNode}te=Y}a=w===-1||O===-1?null:{start:w,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Zd={focusedElem:t,selectionRange:a},$c=!1,zt=i;zt!==null;)if(i=zt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,zt=t;else for(;zt!==null;){switch(i=zt,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var fe=Qs(a.type,f);t=l.getSnapshotBeforeUpdate(fe,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ee){We(a,a.return,Ee)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)nm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":nm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,zt=t;break}zt=i.return}}function g0(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:tr(t,a),l&4&&vl(5,a);break;case 1:if(tr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){We(a,a.return,v)}else{var f=Qs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(f,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){We(a,a.return,v)}}l&64&&c0(a),l&512&&El(a,a.return);break;case 3:if(tr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{ey(t,i)}catch(v){We(a,a.return,v)}}break;case 27:i===null&&l&4&&m0(a);case 26:case 5:tr(t,a),i===null&&l&4&&f0(a),l&512&&El(a,a.return);break;case 12:tr(t,a);break;case 31:tr(t,a),l&4&&v0(t,a);break;case 13:tr(t,a),l&4&&E0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=E1.bind(null,a),z1(t,a))));break;case 22:if(l=a.memoizedState!==null||Zi,!l){i=i!==null&&i.memoizedState!==null||It,f=Zi;var d=It;Zi=l,(It=i)&&!d?nr(t,a,(a.subtreeFlags&8772)!==0):tr(t,a),Zi=f,It=d}break;case 30:break;default:tr(t,a)}}function y0(t){var i=t.alternate;i!==null&&(t.alternate=null,y0(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&ya(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ct=null,un=!1;function er(t,i,a){for(a=a.child;a!==null;)_0(t,i,a),a=a.sibling}function _0(t,i,a){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Gn,a)}catch{}switch(a.tag){case 26:It||Ii(a,i),er(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:It||Ii(a,i);var l=ct,f=un;Fr(a.type)&&(ct=a.stateNode,un=!1),er(t,i,a),Nl(a.stateNode),ct=l,un=f;break;case 5:It||Ii(a,i);case 6:if(l=ct,f=un,ct=null,er(t,i,a),ct=l,un=f,ct!==null)if(un)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(a.stateNode)}catch(d){We(a,i,d)}else try{ct.removeChild(a.stateNode)}catch(d){We(a,i,d)}break;case 18:ct!==null&&(un?(t=ct,c_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),to(t)):c_(ct,a.stateNode));break;case 4:l=ct,f=un,ct=a.stateNode.containerInfo,un=!0,er(t,i,a),ct=l,un=f;break;case 0:case 11:case 14:case 15:Lr(2,a,i),It||Lr(4,a,i),er(t,i,a);break;case 1:It||(Ii(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&h0(a,i,l)),er(t,i,a);break;case 21:er(t,i,a);break;case 22:It=(l=It)||a.memoizedState!==null,er(t,i,a),It=l;break;default:er(t,i,a)}}function v0(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{to(t)}catch(a){We(i,i.return,a)}}}function E0(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{to(t)}catch(a){We(i,i.return,a)}}function f1(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new p0),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new p0),i;default:throw Error(s(435,t.tag))}}function xc(t,i){var a=f1(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=b1.bind(null,t,l);l.then(f,f)}})}function cn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=t,v=i,w=v;e:for(;w!==null;){switch(w.tag){case 27:if(Fr(w.type)){ct=w.stateNode,un=!1;break e}break;case 5:ct=w.stateNode,un=!1;break e;case 3:case 4:ct=w.stateNode.containerInfo,un=!0;break e}w=w.return}if(ct===null)throw Error(s(160));_0(d,v,f),ct=null,un=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)b0(i,t),i=i.sibling}var ti=null;function b0(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:cn(i,t),hn(t),l&4&&(Lr(3,t,t.return),vl(3,t),Lr(5,t,t.return));break;case 1:cn(i,t),hn(t),l&512&&(It||a===null||Ii(a,a.return)),l&64&&Zi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ti;if(cn(i,t),hn(t),l&512&&(It||a===null||Ii(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[gi]||d[wt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Qt(d,l,a),d[wt]=t,At(d),l=d;break e;case"link":var v=b_("link","href",f).get(l+(a.href||""));if(v){for(var w=0;w<v.length;w++)if(d=v[w],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(w,1);break t}}d=f.createElement(l),Qt(d,l,a),f.head.appendChild(d);break;case"meta":if(v=b_("meta","content",f).get(l+(a.content||""))){for(w=0;w<v.length;w++)if(d=v[w],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(w,1);break t}}d=f.createElement(l),Qt(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[wt]=t,At(d),l=d}t.stateNode=l}else T_(f,t.type,t.stateNode);else t.stateNode=E_(f,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?T_(f,t.type,t.stateNode):E_(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Cd(t,t.memoizedProps,a.memoizedProps)}break;case 27:cn(i,t),hn(t),l&512&&(It||a===null||Ii(a,a.return)),a!==null&&l&4&&Cd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(cn(i,t),hn(t),l&512&&(It||a===null||Ii(a,a.return)),t.flags&32){f=t.stateNode;try{ln(f,"")}catch(fe){We(t,t.return,fe)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Cd(t,f,a!==null?a.memoizedProps:f)),l&1024&&(Dd=!0);break;case 6:if(cn(i,t),hn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(fe){We(t,t.return,fe)}}break;case 3:if(qc=null,f=ti,ti=zc(i.containerInfo),cn(i,t),ti=f,hn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{to(i.containerInfo)}catch(fe){We(t,t.return,fe)}Dd&&(Dd=!1,T0(t));break;case 4:l=ti,ti=zc(t.stateNode.containerInfo),cn(i,t),hn(t),ti=l;break;case 12:cn(i,t),hn(t);break;case 31:cn(i,t),hn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,xc(t,l)));break;case 13:cn(i,t),hn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Cc=rn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,xc(t,l)));break;case 22:f=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,F=Zi,W=It;if(Zi=F||f,It=W||O,cn(i,t),It=W,Zi=F,hn(t),l&8192)e:for(i=t.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||O||Zi||It||Ks(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){O=a=i;try{if(d=O.stateNode,f)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=O.stateNode;var te=O.memoizedProps.style,G=te!=null&&te.hasOwnProperty("display")?te.display:null;w.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(fe){We(O,O.return,fe)}}}else if(i.tag===6){if(a===null){O=i;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(fe){We(O,O.return,fe)}}}else if(i.tag===18){if(a===null){O=i;try{var Y=O.stateNode;f?h_(Y,!0):h_(O.stateNode,!1)}catch(fe){We(O,O.return,fe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,xc(t,a))));break;case 19:cn(i,t),hn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,xc(t,l)));break;case 30:break;case 21:break;default:cn(i,t),hn(t)}}function hn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(d0(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=Nd(t);Ac(t,d,f);break;case 5:var v=a.stateNode;a.flags&32&&(ln(v,""),a.flags&=-33);var w=Nd(t);Ac(t,w,v);break;case 3:case 4:var O=a.stateNode.containerInfo,F=Nd(t);Id(t,F,O);break;default:throw Error(s(161))}}catch(W){We(t,t.return,W)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function T0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;T0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function tr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)g0(t,i.alternate,i),i=i.sibling}function Ks(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Lr(4,i,i.return),Ks(i);break;case 1:Ii(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&h0(i,i.return,a),Ks(i);break;case 27:Nl(i.stateNode);case 26:case 5:Ii(i,i.return),Ks(i);break;case 22:i.memoizedState===null&&Ks(i);break;case 30:Ks(i);break;default:Ks(i)}t=t.sibling}}function nr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:nr(f,d,a),vl(4,d);break;case 1:if(nr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){We(l,l.return,F)}if(l=d,f=l.updateQueue,f!==null){var w=l.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)Zg(O[f],w)}catch(F){We(l,l.return,F)}}a&&v&64&&c0(d),El(d,d.return);break;case 27:m0(d);case 26:case 5:nr(f,d,a),a&&l===null&&v&4&&f0(d),El(d,d.return);break;case 12:nr(f,d,a);break;case 31:nr(f,d,a),a&&v&4&&v0(f,d);break;case 13:nr(f,d,a),a&&v&4&&E0(f,d);break;case 22:d.memoizedState===null&&nr(f,d,a),El(d,d.return);break;case 30:break;default:nr(f,d,a)}i=i.sibling}}function Od(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&al(a))}function Md(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&al(t))}function ni(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)S0(t,i,a,l),i=i.sibling}function S0(t,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ni(t,i,a,l),f&2048&&vl(9,i);break;case 1:ni(t,i,a,l);break;case 3:ni(t,i,a,l),f&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&al(t)));break;case 12:if(f&2048){ni(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,w=d.onPostCommit;typeof w=="function"&&w(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){We(i,i.return,O)}}else ni(t,i,a,l);break;case 31:ni(t,i,a,l);break;case 13:ni(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?ni(t,i,a,l):bl(t,i):d._visibility&2?ni(t,i,a,l):(d._visibility|=2,Fa(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Od(v,i);break;case 24:ni(t,i,a,l),f&2048&&Md(i.alternate,i);break;default:ni(t,i,a,l)}}function Fa(t,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,v=i,w=a,O=l,F=v.flags;switch(v.tag){case 0:case 11:case 15:Fa(d,v,w,O,f),vl(8,v);break;case 23:break;case 22:var W=v.stateNode;v.memoizedState!==null?W._visibility&2?Fa(d,v,w,O,f):bl(d,v):(W._visibility|=2,Fa(d,v,w,O,f)),f&&F&2048&&Od(v.alternate,v);break;case 24:Fa(d,v,w,O,f),f&&F&2048&&Md(v.alternate,v);break;default:Fa(d,v,w,O,f)}i=i.sibling}}function bl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,f=l.flags;switch(l.tag){case 22:bl(a,l),f&2048&&Od(l.alternate,l);break;case 24:bl(a,l),f&2048&&Md(l.alternate,l);break;default:bl(a,l)}i=i.sibling}}var Tl=8192;function Ga(t,i,a){if(t.subtreeFlags&Tl)for(t=t.child;t!==null;)w0(t,i,a),t=t.sibling}function w0(t,i,a){switch(t.tag){case 26:Ga(t,i,a),t.flags&Tl&&t.memoizedState!==null&&J1(a,ti,t.memoizedState,t.memoizedProps);break;case 5:Ga(t,i,a);break;case 3:case 4:var l=ti;ti=zc(t.stateNode.containerInfo),Ga(t,i,a),ti=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Tl,Tl=16777216,Ga(t,i,a),Tl=l):Ga(t,i,a));break;default:Ga(t,i,a)}}function A0(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Sl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];zt=l,R0(l,t)}A0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)x0(t),t=t.sibling}function x0(t){switch(t.tag){case 0:case 11:case 15:Sl(t),t.flags&2048&&Lr(9,t,t.return);break;case 3:Sl(t);break;case 12:Sl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Rc(t)):Sl(t);break;default:Sl(t)}}function Rc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];zt=l,R0(l,t)}A0(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Lr(8,i,i.return),Rc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Rc(i));break;default:Rc(i)}t=t.sibling}}function R0(t,i){for(;zt!==null;){var a=zt;switch(a.tag){case 0:case 11:case 15:Lr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:al(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,zt=l;else e:for(a=t;zt!==null;){l=zt;var f=l.sibling,d=l.return;if(y0(l),l===a){zt=null;break e}if(f!==null){f.return=d,zt=f;break e}zt=d}}}var d1={getCacheForType:function(t){var i=Gt(Rt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Gt(Rt).controller.signal}},m1=typeof WeakMap=="function"?WeakMap:Map,Qe=0,it=null,Oe=null,ke=0,Xe=0,Sn=null,Pr=!1,$a=!1,Vd=!1,ir=0,mt=0,Ur=0,Ys=0,kd=0,wn=0,Qa=0,wl=null,fn=null,jd=!1,Cc=0,C0=0,Nc=1/0,Ic=null,zr=null,jt=0,Br=null,Ka=null,rr=0,Ld=0,Pd=null,N0=null,Al=0,Ud=null;function An(){return(Qe&2)!==0&&ke!==0?ke&-ke:K.T!==null?Gd():Du()}function I0(){if(wn===0)if((ke&536870912)===0||ze){var t=Ts;Ts<<=1,(Ts&3932160)===0&&(Ts=262144),wn=t}else wn=536870912;return t=bn.current,t!==null&&(t.flags|=32),wn}function dn(t,i,a){(t===it&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)&&(Ya(t,0),qr(t,ke,wn,!1)),Ss(t,a),((Qe&2)===0||t!==it)&&(t===it&&((Qe&2)===0&&(Ys|=a),mt===4&&qr(t,ke,wn,!1)),Di(t))}function D0(t,i,a){if((Qe&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||$n(t,i),f=l?y1(t,i):Bd(t,i,!0),d=l;do{if(f===0){$a&&!l&&qr(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!p1(a)){f=Bd(t,i,!1),d=!1;continue}if(f===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var w=t;f=wl;var O=w.current.memoizedState.isDehydrated;if(O&&(Ya(w,v).flags|=256),v=Bd(w,v,!1),v!==2){if(Vd&&!O){w.errorRecoveryDisabledLanes|=d,Ys|=d,f=4;break e}d=fn,fn=f,d!==null&&(fn===null?fn=d:fn.push.apply(fn,d))}f=v}if(d=!1,f!==2)continue}}if(f===1){Ya(t,0),qr(t,i,0,!0);break}e:{switch(l=t,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:qr(l,i,wn,!Pr);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Cc+300-rn(),10<f)){if(qr(l,i,wn,!Pr),di(l,0,!0)!==0)break e;rr=i,l.timeoutHandle=l_(O0.bind(null,l,a,fn,Ic,jd,i,wn,Ys,Qa,Pr,d,"Throttled",-0,0),f);break e}O0(l,a,fn,Ic,jd,i,wn,Ys,Qa,Pr,d,null,-0,0)}}break}while(!0);Di(t)}function O0(t,i,a,l,f,d,v,w,O,F,W,te,G,Y){if(t.timeoutHandle=-1,te=i.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yn},w0(i,d,te);var fe=(d&62914560)===d?Cc-rn():(d&4194048)===d?C0-rn():0;if(fe=Z1(te,fe),fe!==null){rr=d,t.cancelPendingCommit=fe(z0.bind(null,t,i,d,a,l,f,v,w,O,W,te,null,G,Y)),qr(t,d,v,!F);return}}z0(t,i,d,a,l,f,v,w,O)}function p1(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!vn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function qr(t,i,a,l){i&=~kd,i&=~Ys,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var f=i;0<f;){var d=31-pt(f),v=1<<d;l[d]=-1,f&=~v}a!==0&&ws(t,a,i)}function Dc(){return(Qe&6)===0?(xl(0),!1):!0}function zd(){if(Oe!==null){if(Xe===0)var t=Oe.return;else t=Oe,Qi=zs=null,nd(t),Ua=null,ll=0,t=Oe;for(;t!==null;)u0(t.alternate,t),t=t.return;Oe=null}}function Ya(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,k1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),rr=0,zd(),it=t,Oe=a=Gi(t.current,null),ke=i,Xe=0,Sn=null,Pr=!1,$a=$n(t,i),Vd=!1,Qa=wn=kd=Ys=Ur=mt=0,fn=wl=null,jd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var f=31-pt(l),d=1<<f;i|=t[f],l&=~d}return ir=i,Ju(),a}function M0(t,i){Ne=null,K.H=gl,i===Pa||i===ac?(i=Yg(),Xe=3):i===Ff?(i=Yg(),Xe=4):Xe=i===_d?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Sn=i,Oe===null&&(mt=1,Ec(t,kn(i,t.current)))}function V0(){var t=bn.current;return t===null?!0:(ke&4194048)===ke?Un===null:(ke&62914560)===ke||(ke&536870912)!==0?t===Un:!1}function k0(){var t=K.H;return K.H=gl,t===null?gl:t}function j0(){var t=K.A;return K.A=d1,t}function Oc(){mt=4,Pr||(ke&4194048)!==ke&&bn.current!==null||($a=!0),(Ur&134217727)===0&&(Ys&134217727)===0||it===null||qr(it,ke,wn,!1)}function Bd(t,i,a){var l=Qe;Qe|=2;var f=k0(),d=j0();(it!==t||ke!==i)&&(Ic=null,Ya(t,i)),i=!1;var v=mt;e:do try{if(Xe!==0&&Oe!==null){var w=Oe,O=Sn;switch(Xe){case 8:zd(),v=6;break e;case 3:case 2:case 9:case 6:bn.current===null&&(i=!0);var F=Xe;if(Xe=0,Sn=null,Xa(t,w,O,F),a&&$a){v=0;break e}break;default:F=Xe,Xe=0,Sn=null,Xa(t,w,O,F)}}g1(),v=mt;break}catch(W){M0(t,W)}while(!0);return i&&t.shellSuspendCounter++,Qi=zs=null,Qe=l,K.H=f,K.A=d,Oe===null&&(it=null,ke=0,Ju()),v}function g1(){for(;Oe!==null;)L0(Oe)}function y1(t,i){var a=Qe;Qe|=2;var l=k0(),f=j0();it!==t||ke!==i?(Ic=null,Nc=rn()+500,Ya(t,i)):$a=$n(t,i);e:do try{if(Xe!==0&&Oe!==null){i=Oe;var d=Sn;t:switch(Xe){case 1:Xe=0,Sn=null,Xa(t,i,d,1);break;case 2:case 9:if(Qg(d)){Xe=0,Sn=null,P0(i);break}i=function(){Xe!==2&&Xe!==9||it!==t||(Xe=7),Di(t)},d.then(i,i);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:Qg(d)?(Xe=0,Sn=null,P0(i)):(Xe=0,Sn=null,Xa(t,i,d,7));break;case 5:var v=null;switch(Oe.tag){case 26:v=Oe.memoizedState;case 5:case 27:var w=Oe;if(v?S_(v):w.stateNode.complete){Xe=0,Sn=null;var O=w.sibling;if(O!==null)Oe=O;else{var F=w.return;F!==null?(Oe=F,Mc(F)):Oe=null}break t}}Xe=0,Sn=null,Xa(t,i,d,5);break;case 6:Xe=0,Sn=null,Xa(t,i,d,6);break;case 8:zd(),mt=6;break e;default:throw Error(s(462))}}_1();break}catch(W){M0(t,W)}while(!0);return Qi=zs=null,K.H=l,K.A=f,Qe=a,Oe!==null?0:(it=null,ke=0,Ju(),mt)}function _1(){for(;Oe!==null&&!yf();)L0(Oe)}function L0(t){var i=o0(t.alternate,t,ir);t.memoizedProps=t.pendingProps,i===null?Mc(t):Oe=i}function P0(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=t0(a,i,i.pendingProps,i.type,void 0,ke);break;case 11:i=t0(a,i,i.pendingProps,i.type.render,i.ref,ke);break;case 5:nd(i);default:u0(a,i),i=Oe=jg(i,ir),i=o0(a,i,ir)}t.memoizedProps=t.pendingProps,i===null?Mc(t):Oe=i}function Xa(t,i,a,l){Qi=zs=null,nd(i),Ua=null,ll=0;var f=i.return;try{if(a1(t,f,i,a,ke)){mt=1,Ec(t,kn(a,t.current)),Oe=null;return}}catch(d){if(f!==null)throw Oe=f,d;mt=1,Ec(t,kn(a,t.current)),Oe=null;return}i.flags&32768?(ze||l===1?t=!0:$a||(ke&536870912)!==0?t=!1:(Pr=t=!0,(l===2||l===9||l===3||l===6)&&(l=bn.current,l!==null&&l.tag===13&&(l.flags|=16384))),U0(i,t)):Mc(i)}function Mc(t){var i=t;do{if((i.flags&32768)!==0){U0(i,Pr);return}t=i.return;var a=u1(i.alternate,i,ir);if(a!==null){Oe=a;return}if(i=i.sibling,i!==null){Oe=i;return}Oe=i=t}while(i!==null);mt===0&&(mt=5)}function U0(t,i){do{var a=c1(t.alternate,t);if(a!==null){a.flags&=32767,Oe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=a}while(t!==null);mt=6,Oe=null}function z0(t,i,a,l,f,d,v,w,O){t.cancelPendingCommit=null;do Vc();while(jt!==0);if((Qe&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Nf,Ef(t,a,d,v,w,O),t===it&&(Oe=it=null,ke=0),Ka=i,Br=t,rr=a,Ld=d,Pd=f,N0=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,T1(_r,function(){return G0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,f=re.p,re.p=2,v=Qe,Qe|=4;try{h1(t,i,a)}finally{Qe=v,re.p=f,K.T=l}}jt=1,B0(),q0(),H0()}}function B0(){if(jt===1){jt=0;var t=Br,i=Ka,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=re.p;re.p=2;var f=Qe;Qe|=4;try{b0(i,t);var d=Zd,v=Rg(t.containerInfo),w=d.focusedElem,O=d.selectionRange;if(v!==w&&w&&w.ownerDocument&&xg(w.ownerDocument.documentElement,w)){if(O!==null&&wf(w)){var F=O.start,W=O.end;if(W===void 0&&(W=F),"selectionStart"in w)w.selectionStart=F,w.selectionEnd=Math.min(W,w.value.length);else{var te=w.ownerDocument||document,G=te&&te.defaultView||window;if(G.getSelection){var Y=G.getSelection(),fe=w.textContent.length,Ee=Math.min(O.start,fe),nt=O.end===void 0?Ee:Math.min(O.end,fe);!Y.extend&&Ee>nt&&(v=nt,nt=Ee,Ee=v);var z=Ag(w,Ee),L=Ag(w,nt);if(z&&L&&(Y.rangeCount!==1||Y.anchorNode!==z.node||Y.anchorOffset!==z.offset||Y.focusNode!==L.node||Y.focusOffset!==L.offset)){var H=te.createRange();H.setStart(z.node,z.offset),Y.removeAllRanges(),Ee>nt?(Y.addRange(H),Y.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),Y.addRange(H))}}}}for(te=[],Y=w;Y=Y.parentNode;)Y.nodeType===1&&te.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<te.length;w++){var Z=te[w];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}$c=!!Jd,Zd=Jd=null}finally{Qe=f,re.p=l,K.T=a}}t.current=i,jt=2}}function q0(){if(jt===2){jt=0;var t=Br,i=Ka,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=re.p;re.p=2;var f=Qe;Qe|=4;try{g0(t,i.alternate,i)}finally{Qe=f,re.p=l,K.T=a}}jt=3}}function H0(){if(jt===4||jt===3){jt=0,wu();var t=Br,i=Ka,a=rr,l=N0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?jt=5:(jt=0,Ka=Br=null,F0(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(zr=null),Bi(a),i=i.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Gn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=K.T,f=re.p,re.p=2,K.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var w=l[v];d(w.value,{componentStack:w.stack})}}finally{K.T=i,re.p=f}}(rr&3)!==0&&Vc(),Di(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===Ud?Al++:(Al=0,Ud=t):Al=0,xl(0)}}function F0(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,al(i)))}function Vc(){return B0(),q0(),H0(),G0()}function G0(){if(jt!==5)return!1;var t=Br,i=Ld;Ld=0;var a=Bi(rr),l=K.T,f=re.p;try{re.p=32>a?32:a,K.T=null,a=Pd,Pd=null;var d=Br,v=rr;if(jt=0,Ka=Br=null,rr=0,(Qe&6)!==0)throw Error(s(331));var w=Qe;if(Qe|=4,x0(d.current),S0(d,d.current,v,a),Qe=w,xl(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Gn,d)}catch{}return!0}finally{re.p=f,K.T=l,F0(t,i)}}function $0(t,i,a){i=kn(a,i),i=yd(t.stateNode,i,2),t=Vr(t,i,2),t!==null&&(Ss(t,2),Di(t))}function We(t,i,a){if(t.tag===3)$0(t,t,a);else for(;i!==null;){if(i.tag===3){$0(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(zr===null||!zr.has(l))){t=kn(a,t),a=Qy(2),l=Vr(i,a,2),l!==null&&(Ky(a,l,i,t),Ss(l,2),Di(l));break}}i=i.return}}function qd(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new m1;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Vd=!0,f.add(a),t=v1.bind(null,t,i,a),i.then(t,t))}function v1(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,it===t&&(ke&a)===a&&(mt===4||mt===3&&(ke&62914560)===ke&&300>rn()-Cc?(Qe&2)===0&&Ya(t,0):kd|=a,Qa===ke&&(Qa=0)),Di(t)}function Q0(t,i){i===0&&(i=Iu()),t=Ls(t,i),t!==null&&(Ss(t,i),Di(t))}function E1(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Q0(t,a)}function b1(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),Q0(t,a)}function T1(t,i){return kt(t,i)}var kc=null,Wa=null,Hd=!1,jc=!1,Fd=!1,Hr=0;function Di(t){t!==Wa&&t.next===null&&(Wa===null?kc=Wa=t:Wa=Wa.next=t),jc=!0,Hd||(Hd=!0,w1())}function xl(t,i){if(!Fd&&jc){Fd=!0;do for(var a=!1,l=kc;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var v=l.suspendedLanes,w=l.pingedLanes;d=(1<<31-pt(42|t)+1)-1,d&=f&~(v&~w),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,W0(l,d))}else d=ke,d=di(l,l===it?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||$n(l,d)||(a=!0,W0(l,d));l=l.next}while(a);Fd=!1}}function S1(){K0()}function K0(){jc=Hd=!1;var t=0;Hr!==0&&V1()&&(t=Hr);for(var i=rn(),a=null,l=kc;l!==null;){var f=l.next,d=Y0(l,i);d===0?(l.next=null,a===null?kc=f:a.next=f,f===null&&(Wa=a)):(a=l,(t!==0||(d&3)!==0)&&(jc=!0)),l=f}jt!==0&&jt!==5||xl(t),Hr!==0&&(Hr=0)}function Y0(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-pt(d),w=1<<v,O=f[v];O===-1?((w&a)===0||(w&l)!==0)&&(f[v]=vf(w,i)):O<=i&&(t.expiredLanes|=w),d&=~w}if(i=it,a=ke,a=di(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Xe===2||Xe===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&yr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||$n(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&yr(l),Bi(a)){case 2:case 8:a=jo;break;case 32:a=_r;break;case 268435456:a=Au;break;default:a=_r}return l=X0.bind(null,t),a=kt(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&yr(l),t.callbackPriority=2,t.callbackNode=null,2}function X0(t,i){if(jt!==0&&jt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Vc()&&t.callbackNode!==a)return null;var l=ke;return l=di(t,t===it?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(D0(t,l,i),Y0(t,rn()),t.callbackNode!=null&&t.callbackNode===a?X0.bind(null,t):null)}function W0(t,i){if(Vc())return null;D0(t,i,!0)}function w1(){j1(function(){(Qe&6)!==0?kt(ko,S1):K0()})}function Gd(){if(Hr===0){var t=ja;t===0&&(t=hi,hi<<=1,(hi&261888)===0&&(hi=256)),Hr=t}return Hr}function J0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ba(""+t)}function Z0(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function A1(t,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=J0((f[Pt]||null).action),v=l.submitter;v&&(i=(i=v[Pt]||null)?J0(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var w=new wi("action","action",null,l,f);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Hr!==0){var O=v?Z0(f,v):new FormData(f);hd(a,{pending:!0,data:O,method:f.method,action:d},null,O)}}else typeof d=="function"&&(w.preventDefault(),O=v?Z0(f,v):new FormData(f),hd(a,{pending:!0,data:O,method:f.method,action:d},d,O))},currentTarget:f}]})}}for(var $d=0;$d<Cf.length;$d++){var Qd=Cf[$d],x1=Qd.toLowerCase(),R1=Qd[0].toUpperCase()+Qd.slice(1);ei(x1,"on"+R1)}ei(Ig,"onAnimationEnd"),ei(Dg,"onAnimationIteration"),ei(Og,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(HS,"onTransitionRun"),ei(FS,"onTransitionStart"),ei(GS,"onTransitionCancel"),ei(Mg,"onTransitionEnd"),Ei("onMouseEnter",["mouseout","mouseover"]),Ei("onMouseLeave",["mouseout","mouseover"]),Ei("onPointerEnter",["pointerout","pointerover"]),Ei("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rl));function e_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var w=l[v],O=w.instance,F=w.currentTarget;if(w=w.listener,O!==d&&f.isPropagationStopped())break e;d=w,f.currentTarget=F;try{d(f)}catch(W){Wu(W)}f.currentTarget=null,d=O}else for(v=0;v<l.length;v++){if(w=l[v],O=w.instance,F=w.currentTarget,w=w.listener,O!==d&&f.isPropagationStopped())break e;d=w,f.currentTarget=F;try{d(f)}catch(W){Wu(W)}f.currentTarget=null,d=O}}}}function Me(t,i){var a=i[ga];a===void 0&&(a=i[ga]=new Set);var l=t+"__bubble";a.has(l)||(t_(i,t,2,!1),a.add(l))}function Kd(t,i,a){var l=0;i&&(l|=4),t_(a,t,l,i)}var Lc="_reactListening"+Math.random().toString(36).slice(2);function Yd(t){if(!t[Lc]){t[Lc]=!0,Uo.forEach(function(a){a!=="selectionchange"&&(C1.has(a)||Kd(a,!1,t),Kd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Lc]||(i[Lc]=!0,Kd("selectionchange",!1,i))}}function t_(t,i,a,l){switch(I_(i)){case 2:var f=nw;break;case 8:f=iw;break;default:f=cm}a=f.bind(null,i,a,t),f=void 0,!Ns||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(i,a,{capture:!0,passive:f}):t.addEventListener(i,a,!0):f!==void 0?t.addEventListener(i,a,{passive:f}):t.addEventListener(i,a,!1)}function Xd(t,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var w=l.stateNode.containerInfo;if(w===f)break;if(v===4)for(v=l.return;v!==null;){var O=v.tag;if((O===3||O===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;w!==null;){if(v=yi(w),v===null)return;if(O=v.tag,O===5||O===6||O===26||O===27){l=d=v;continue e}w=w.parentNode}}l=l.return}wr(function(){var F=d,W=Dn(a),te=[];e:{var G=Vg.get(t);if(G!==void 0){var Y=wi,fe=t;switch(t){case"keypress":if(Ds(a)===0)break e;case"keydown":case"keyup":Y=Ku;break;case"focusin":fe="focus",Y=Ms;break;case"focusout":fe="blur",Y=Ms;break;case"beforeblur":case"afterblur":Y=Ms;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Jo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Uu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=y;break;case Ig:case Dg:case Og:Y=Bu;break;case Mg:Y=x;break;case"scroll":case"scrollend":Y=Wo;break;case"wheel":Y=Q;break;case"copy":case"cut":case"paste":Y=qu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Fi;break;case"toggle":case"beforetoggle":Y=Ce}var Ee=(i&4)!==0,nt=!Ee&&(t==="scroll"||t==="scrollend"),z=Ee?G!==null?G+"Capture":null:G;Ee=[];for(var L=F,H;L!==null;){var Z=L;if(H=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||H===null||z===null||(Z=Xn(L,z),Z!=null&&Ee.push(Cl(L,Z,H))),nt)break;L=L.return}0<Ee.length&&(G=new Y(G,fe,null,a,W),te.push({event:G,listeners:Ee}))}}if((i&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",G&&a!==Ko&&(fe=a.relatedTarget||a.fromElement)&&(yi(fe)||fe[pi]))break e;if((Y||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(fe=a.relatedTarget||a.toElement,Y=F,fe=fe?yi(fe):null,fe!==null&&(nt=u(fe),Ee=fe.tag,fe!==nt||Ee!==5&&Ee!==27&&Ee!==6)&&(fe=null)):(Y=null,fe=F),Y!==fe)){if(Ee=Jo,Z="onMouseLeave",z="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(Ee=Fi,Z="onPointerLeave",z="onPointerEnter",L="pointer"),nt=Y==null?G:yn(Y),H=fe==null?G:yn(fe),G=new Ee(Z,L+"leave",Y,a,W),G.target=nt,G.relatedTarget=H,Z=null,yi(W)===F&&(Ee=new Ee(z,L+"enter",fe,a,W),Ee.target=H,Ee.relatedTarget=nt,Z=Ee),nt=Z,Y&&fe)t:{for(Ee=N1,z=Y,L=fe,H=0,Z=z;Z;Z=Ee(Z))H++;Z=0;for(var _e=L;_e;_e=Ee(_e))Z++;for(;0<H-Z;)z=Ee(z),H--;for(;0<Z-H;)L=Ee(L),Z--;for(;H--;){if(z===L||L!==null&&z===L.alternate){Ee=z;break t}z=Ee(z),L=Ee(L)}Ee=null}else Ee=null;Y!==null&&n_(te,G,Y,Ee,!1),fe!==null&&nt!==null&&n_(te,nt,fe,Ee,!0)}}e:{if(G=F?yn(F):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var Fe=vg;else if(yg(G))if(Eg)Fe=zS;else{Fe=PS;var pe=LS}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&Ea(F.elementType)&&(Fe=vg):Fe=US;if(Fe&&(Fe=Fe(t,F))){_g(te,Fe,a,W);break e}pe&&pe(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&Go(G,"number",G.value)}switch(pe=F?yn(F):window,t){case"focusin":(yg(pe)||pe.contentEditable==="true")&&(Ca=pe,Af=F,il=null);break;case"focusout":il=Af=Ca=null;break;case"mousedown":xf=!0;break;case"contextmenu":case"mouseup":case"dragend":xf=!1,Cg(te,a,W);break;case"selectionchange":if(qS)break;case"keydown":case"keyup":Cg(te,a,W)}var De;if($e)e:{switch(t){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else Ra?Vs(t,a)&&(je="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(je="onCompositionStart");je&&(Ri&&a.locale!=="ko"&&(Ra||je!=="onCompositionStart"?je==="onCompositionEnd"&&Ra&&(De=Xo()):(Si=W,Yo="value"in Si?Si.value:Si.textContent,Ra=!0)),pe=Pc(F,je),0<pe.length&&(je=new xi(je,t,null,a,W),te.push({event:je,listeners:pe}),De?je.data=De:(De=xa(a),De!==null&&(je.data=De)))),(De=Mn?MS(t,a):VS(t,a))&&(je=Pc(F,"onBeforeInput"),0<je.length&&(pe=new xi("onBeforeInput","beforeinput",null,a,W),te.push({event:pe,listeners:je}),pe.data=De)),A1(te,t,F,a,W)}e_(te,i)})}function Cl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Pc(t,i){for(var a=i+"Capture",l=[];t!==null;){var f=t,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Xn(t,a),f!=null&&l.unshift(Cl(t,f,d)),f=Xn(t,i),f!=null&&l.push(Cl(t,f,d))),t.tag===3)return l;t=t.return}return[]}function N1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function n_(t,i,a,l,f){for(var d=i._reactName,v=[];a!==null&&a!==l;){var w=a,O=w.alternate,F=w.stateNode;if(w=w.tag,O!==null&&O===l)break;w!==5&&w!==26&&w!==27||F===null||(O=F,f?(F=Xn(a,d),F!=null&&v.unshift(Cl(a,F,O))):f||(F=Xn(a,d),F!=null&&v.push(Cl(a,F,O)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var I1=/\r\n?/g,D1=/\u0000|\uFFFD/g;function i_(t){return(typeof t=="string"?t:""+t).replace(I1,`
`).replace(D1,"")}function r_(t,i){return i=i_(i),i_(t)===i}function tt(t,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||ln(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&ln(t,""+l);break;case"className":_n(t,"class",l);break;case"tabIndex":_n(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":_n(t,a,l);break;case"style":Qo(t,l,d);break;case"data":if(i!=="object"){_n(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ba(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&tt(t,i,"name",f.name,f,null),tt(t,i,"formEncType",f.formEncType,f,null),tt(t,i,"formMethod",f.formMethod,f,null),tt(t,i,"formTarget",f.formTarget,f,null)):(tt(t,i,"encType",f.encType,f,null),tt(t,i,"method",f.method,f,null),tt(t,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ba(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Yn);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ba(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Me("beforetoggle",t),Me("toggle",t),_a(t,"popover",l);break;case"xlinkActuate":xt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":xt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":xt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":xt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":xt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":xt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":xt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":xt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":xt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":_a(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Pu.get(a)||a,_a(t,a,l))}}function Wd(t,i,a,l,f,d){switch(a){case"style":Qo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?ln(t,l):(typeof l=="number"||typeof l=="bigint")&&ln(t,""+l);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Yn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=t[Pt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):_a(t,a,l)}}}function Qt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",t),Me("load",t);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:tt(t,i,d,v,a,null)}}f&&tt(t,i,"srcSet",a.srcSet,a,null),l&&tt(t,i,"src",a.src,a,null);return;case"input":Me("invalid",t);var w=d=v=f=null,O=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":f=W;break;case"type":v=W;break;case"checked":O=W;break;case"defaultChecked":F=W;break;case"value":d=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,i));break;default:tt(t,i,l,W,a,null)}}ku(t,d,w,O,F,v,f,!1);return;case"select":Me("invalid",t),l=v=d=null;for(f in a)if(a.hasOwnProperty(f)&&(w=a[f],w!=null))switch(f){case"value":d=w;break;case"defaultValue":v=w;break;case"multiple":l=w;default:tt(t,i,f,w,a,null)}i=d,a=v,t.multiple=!!l,i!=null?Er(t,!!l,i,!1):a!=null&&Er(t,!!l,a,!0);return;case"textarea":Me("invalid",t),d=f=l=null;for(v in a)if(a.hasOwnProperty(v)&&(w=a[v],w!=null))switch(v){case"value":l=w;break;case"defaultValue":f=w;break;case"children":d=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:tt(t,i,v,w,a,null)}br(t,l,f,d);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:tt(t,i,O,l,a,null)}return;case"dialog":Me("beforetoggle",t),Me("toggle",t),Me("cancel",t),Me("close",t);break;case"iframe":case"object":Me("load",t);break;case"video":case"audio":for(l=0;l<Rl.length;l++)Me(Rl[l],t);break;case"image":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"embed":case"source":case"link":Me("error",t),Me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:tt(t,i,F,l,a,null)}return;default:if(Ea(i)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&Wd(t,i,W,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&tt(t,i,w,l,a,null))}function O1(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,v=null,w=null,O=null,F=null,W=null;for(Y in a){var te=a[Y];if(a.hasOwnProperty(Y)&&te!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":O=te;default:l.hasOwnProperty(Y)||tt(t,i,Y,null,l,te)}}for(var G in l){var Y=l[G];if(te=a[G],l.hasOwnProperty(G)&&(Y!=null||te!=null))switch(G){case"type":d=Y;break;case"name":f=Y;break;case"checked":F=Y;break;case"defaultChecked":W=Y;break;case"value":v=Y;break;case"defaultValue":w=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Y!==te&&tt(t,i,G,Y,l,te)}}va(t,v,w,O,F,W,d,f);return;case"select":Y=v=w=G=null;for(d in a)if(O=a[d],a.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":Y=O;default:l.hasOwnProperty(d)||tt(t,i,d,null,l,O)}for(f in l)if(d=l[f],O=a[f],l.hasOwnProperty(f)&&(d!=null||O!=null))switch(f){case"value":G=d;break;case"defaultValue":w=d;break;case"multiple":v=d;default:d!==O&&tt(t,i,f,d,l,O)}i=w,a=v,l=Y,G!=null?Er(t,!!a,G,!1):!!l!=!!a&&(i!=null?Er(t,!!a,i,!0):Er(t,!!a,a?[]:"",!1));return;case"textarea":Y=G=null;for(w in a)if(f=a[w],a.hasOwnProperty(w)&&f!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:tt(t,i,w,null,l,f)}for(v in l)if(f=l[v],d=a[v],l.hasOwnProperty(v)&&(f!=null||d!=null))switch(v){case"value":G=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&tt(t,i,v,f,l,d)}ju(t,G,Y);return;case"option":for(var fe in a)if(G=a[fe],a.hasOwnProperty(fe)&&G!=null&&!l.hasOwnProperty(fe))switch(fe){case"selected":t.selected=!1;break;default:tt(t,i,fe,null,l,G)}for(O in l)if(G=l[O],Y=a[O],l.hasOwnProperty(O)&&G!==Y&&(G!=null||Y!=null))switch(O){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:tt(t,i,O,G,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)G=a[Ee],a.hasOwnProperty(Ee)&&G!=null&&!l.hasOwnProperty(Ee)&&tt(t,i,Ee,null,l,G);for(F in l)if(G=l[F],Y=a[F],l.hasOwnProperty(F)&&G!==Y&&(G!=null||Y!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:tt(t,i,F,G,l,Y)}return;default:if(Ea(i)){for(var nt in a)G=a[nt],a.hasOwnProperty(nt)&&G!==void 0&&!l.hasOwnProperty(nt)&&Wd(t,i,nt,void 0,l,G);for(W in l)G=l[W],Y=a[W],!l.hasOwnProperty(W)||G===Y||G===void 0&&Y===void 0||Wd(t,i,W,G,l,Y);return}}for(var z in a)G=a[z],a.hasOwnProperty(z)&&G!=null&&!l.hasOwnProperty(z)&&tt(t,i,z,null,l,G);for(te in l)G=l[te],Y=a[te],!l.hasOwnProperty(te)||G===Y||G==null&&Y==null||tt(t,i,te,G,l,Y)}function s_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function M1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,v=f.initiatorType,w=f.duration;if(d&&w&&s_(v)){for(v=0,w=f.responseEnd,l+=1;l<a.length;l++){var O=a[l],F=O.startTime;if(F>w)break;var W=O.transferSize,te=O.initiatorType;W&&s_(te)&&(O=O.responseEnd,v+=W*(O<w?1:(w-F)/(O-F)))}if(--l,i+=8*(d+v)/(f.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Jd=null,Zd=null;function Uc(t){return t.nodeType===9?t:t.ownerDocument}function a_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function o_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function em(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var tm=null;function V1(){var t=window.event;return t&&t.type==="popstate"?t===tm?!1:(tm=t,!0):(tm=null,!1)}var l_=typeof setTimeout=="function"?setTimeout:void 0,k1=typeof clearTimeout=="function"?clearTimeout:void 0,u_=typeof Promise=="function"?Promise:void 0,j1=typeof queueMicrotask=="function"?queueMicrotask:typeof u_<"u"?function(t){return u_.resolve(null).then(t).catch(L1)}:l_;function L1(t){setTimeout(function(){throw t})}function Fr(t){return t==="head"}function c_(t,i){var a=i,l=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(f),to(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Nl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Nl(a);for(var d=a.firstChild;d;){var v=d.nextSibling,w=d.nodeName;d[gi]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&Nl(t.ownerDocument.body);a=f}while(a);to(i)}function h_(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function nm(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":nm(a),ya(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function P1(t,i,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[gi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=zn(t.nextSibling),t===null)break}return null}function U1(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=zn(t.nextSibling),t===null))return null;return t}function f_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=zn(t.nextSibling),t===null))return null;return t}function im(t){return t.data==="$?"||t.data==="$~"}function rm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function z1(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function zn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var sm=null;function d_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return zn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function m_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function p_(t,i,a){switch(i=Uc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Nl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ya(t)}var Bn=new Map,g_=new Set;function zc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var sr=re.d;re.d={f:B1,r:q1,D:H1,C:F1,L:G1,m:$1,X:K1,S:Q1,M:Y1};function B1(){var t=sr.f(),i=Dc();return t||i}function q1(t){var i=In(t);i!==null&&i.tag===5&&i.type==="form"?My(i):sr.r(t)}var Ja=typeof document>"u"?null:document;function y_(t,i,a){var l=Ja;if(l&&typeof i=="string"&&i){var f=on(i);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),g_.has(f)||(g_.add(f),t={rel:t,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Qt(i,"link",t),At(i),l.head.appendChild(i)))}}function H1(t){sr.D(t),y_("dns-prefetch",t,null)}function F1(t,i){sr.C(t,i),y_("preconnect",t,i)}function G1(t,i,a){sr.L(t,i,a);var l=Ja;if(l&&t&&i){var f='link[rel="preload"][as="'+on(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+on(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+on(a.imageSizes)+'"]')):f+='[href="'+on(t)+'"]';var d=f;switch(i){case"style":d=Za(t);break;case"script":d=eo(t)}Bn.has(d)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Bn.set(d,t),l.querySelector(f)!==null||i==="style"&&l.querySelector(Il(d))||i==="script"&&l.querySelector(Dl(d))||(i=l.createElement("link"),Qt(i,"link",t),At(i),l.head.appendChild(i)))}}function $1(t,i){sr.m(t,i);var a=Ja;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+on(l)+'"][href="'+on(t)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=eo(t)}if(!Bn.has(d)&&(t=T({rel:"modulepreload",href:t},i),Bn.set(d,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Dl(d)))return}l=a.createElement("link"),Qt(l,"link",t),At(l),a.head.appendChild(l)}}}function Q1(t,i,a){sr.S(t,i,a);var l=Ja;if(l&&t){var f=_i(l).hoistableStyles,d=Za(t);i=i||"default";var v=f.get(d);if(!v){var w={loading:0,preload:null};if(v=l.querySelector(Il(d)))w.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Bn.get(d))&&am(t,a);var O=v=l.createElement("link");At(O),Qt(O,"link",t),O._p=new Promise(function(F,W){O.onload=F,O.onerror=W}),O.addEventListener("load",function(){w.loading|=1}),O.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Bc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:w},f.set(d,v)}}}function K1(t,i){sr.X(t,i);var a=Ja;if(a&&t){var l=_i(a).hoistableScripts,f=eo(t),d=l.get(f);d||(d=a.querySelector(Dl(f)),d||(t=T({src:t,async:!0},i),(i=Bn.get(f))&&om(t,i),d=a.createElement("script"),At(d),Qt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Y1(t,i){sr.M(t,i);var a=Ja;if(a&&t){var l=_i(a).hoistableScripts,f=eo(t),d=l.get(f);d||(d=a.querySelector(Dl(f)),d||(t=T({src:t,async:!0,type:"module"},i),(i=Bn.get(f))&&om(t,i),d=a.createElement("script"),At(d),Qt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function __(t,i,a,l){var f=(f=Ie.current)?zc(f):null;if(!f)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Za(a.href),a=_i(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Za(a.href);var d=_i(f).hoistableStyles,v=d.get(t);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=f.querySelector(Il(t)))&&!d._p&&(v.instance=d,v.state.loading=5),Bn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Bn.set(t,a),d||X1(f,t,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=eo(a),a=_i(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Za(t){return'href="'+on(t)+'"'}function Il(t){return'link[rel="stylesheet"]['+t+"]"}function v_(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function X1(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Qt(i,"link",a),At(i),t.head.appendChild(i))}function eo(t){return'[src="'+on(t)+'"]'}function Dl(t){return"script[async]"+t}function E_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+on(a.href)+'"]');if(l)return i.instance=l,At(l),l;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),At(l),Qt(l,"style",f),Bc(l,a.precedence,t),i.instance=l;case"stylesheet":f=Za(a.href);var d=t.querySelector(Il(f));if(d)return i.state.loading|=4,i.instance=d,At(d),d;l=v_(a),(f=Bn.get(f))&&am(l,f),d=(t.ownerDocument||t).createElement("link"),At(d);var v=d;return v._p=new Promise(function(w,O){v.onload=w,v.onerror=O}),Qt(d,"link",l),i.state.loading|=4,Bc(d,a.precedence,t),i.instance=d;case"script":return d=eo(a.src),(f=t.querySelector(Dl(d)))?(i.instance=f,At(f),f):(l=a,(f=Bn.get(d))&&(l=T({},a),om(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),At(f),Qt(f,"link",l),t.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Bc(l,a.precedence,t));return i.instance}function Bc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,v=0;v<l.length;v++){var w=l[v];if(w.dataset.precedence===i)d=w;else if(d!==f)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function am(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function om(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var qc=null;function b_(t,i,a){if(qc===null){var l=new Map,f=qc=new Map;f.set(a,l)}else f=qc,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var d=a[f];if(!(d[gi]||d[wt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var w=l.get(v);w?w.push(d):l.set(v,[d])}}return l}function T_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function W1(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function S_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function J1(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Za(l.href),d=i.querySelector(Il(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Hc.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,At(d);return}d=i.ownerDocument||i,l=v_(l),(f=Bn.get(f))&&am(l,f),d=d.createElement("link"),At(d);var v=d;v._p=new Promise(function(w,O){v.onload=w,v.onerror=O}),Qt(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Hc.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var lm=0;function Z1(t,i){return t.stylesheets&&t.count===0&&Gc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Gc(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&lm===0&&(lm=62500*M1());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Gc(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>lm?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Hc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Fc=null;function Gc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Fc=new Map,i.forEach(ew,t),Fc=null,Hc.call(t))}function ew(t,i){if(!(i.state.loading&4)){var a=Fc.get(t);if(a)var l=a.get(null);else{a=new Map,Fc.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var v=f[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}f=i.instance,v=f.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,f),a.set(v,f),this.count++,l=Hc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),i.state.loading|=4}}var Ol={$$typeof:X,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function tw(t,i,a,l,f,d,v,w,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mi(0),this.hiddenUpdates=mi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function w_(t,i,a,l,f,d,v,w,O,F,W,te){return t=new tw(t,i,a,v,O,F,W,te,w),i=1,d===!0&&(i|=24),d=En(3,null,null,i),t.current=d,d.stateNode=t,i=Bf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Gf(d),t}function A_(t){return t?(t=Da,t):Da}function x_(t,i,a,l,f,d){f=A_(f),l.context===null?l.context=f:l.pendingContext=f,l=Mr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Vr(t,l,i),a!==null&&(dn(a,t,i),cl(a,t,i))}function R_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function um(t,i){R_(t,i),(t=t.alternate)&&R_(t,i)}function C_(t){if(t.tag===13||t.tag===31){var i=Ls(t,67108864);i!==null&&dn(i,t,67108864),um(t,67108864)}}function N_(t){if(t.tag===13||t.tag===31){var i=An();i=As(i);var a=Ls(t,i);a!==null&&dn(a,t,i),um(t,i)}}var $c=!0;function nw(t,i,a,l){var f=K.T;K.T=null;var d=re.p;try{re.p=2,cm(t,i,a,l)}finally{re.p=d,K.T=f}}function iw(t,i,a,l){var f=K.T;K.T=null;var d=re.p;try{re.p=8,cm(t,i,a,l)}finally{re.p=d,K.T=f}}function cm(t,i,a,l){if($c){var f=hm(l);if(f===null)Xd(t,i,l,Qc,a),D_(t,l);else if(sw(f,t,i,a,l))l.stopPropagation();else if(D_(t,l),i&4&&-1<rw.indexOf(t)){for(;f!==null;){var d=In(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=fi(d.pendingLanes);if(v!==0){var w=d;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var O=1<<31-pt(v);w.entanglements[1]|=O,v&=~O}Di(d),(Qe&6)===0&&(Nc=rn()+500,xl(0))}}break;case 31:case 13:w=Ls(d,2),w!==null&&dn(w,d,2),Dc(),um(d,2)}if(d=hm(l),d===null&&Xd(t,i,l,Qc,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Xd(t,i,l,null,a)}}function hm(t){return t=Dn(t),fm(t)}var Qc=null;function fm(t){if(Qc=null,t=yi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=h(i),t!==null)return t;t=null}else if(a===31){if(t=m(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Qc=t,null}function I_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bs()){case ko:return 2;case jo:return 8;case _r:case _f:return 32;case Au:return 268435456;default:return 32}default:return 32}}var dm=!1,Gr=null,$r=null,Qr=null,Ml=new Map,Vl=new Map,Kr=[],rw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function D_(t,i){switch(t){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":Ml.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vl.delete(i.pointerId)}}function kl(t,i,a,l,f,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=In(i),i!==null&&C_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function sw(t,i,a,l,f){switch(i){case"focusin":return Gr=kl(Gr,t,i,a,l,f),!0;case"dragenter":return $r=kl($r,t,i,a,l,f),!0;case"mouseover":return Qr=kl(Qr,t,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return Ml.set(d,kl(Ml.get(d)||null,t,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Vl.set(d,kl(Vl.get(d)||null,t,i,a,l,f)),!0}return!1}function O_(t){var i=yi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){t.blockedOn=i,Qn(t.priority,function(){N_(a)});return}}else if(i===31){if(i=m(a),i!==null){t.blockedOn=i,Qn(t.priority,function(){N_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=hm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ko=l,a.target.dispatchEvent(l),Ko=null}else return i=In(a),i!==null&&C_(i),t.blockedOn=a,!1;i.shift()}return!0}function M_(t,i,a){Kc(t)&&a.delete(i)}function aw(){dm=!1,Gr!==null&&Kc(Gr)&&(Gr=null),$r!==null&&Kc($r)&&($r=null),Qr!==null&&Kc(Qr)&&(Qr=null),Ml.forEach(M_),Vl.forEach(M_)}function Yc(t,i){t.blockedOn===i&&(t.blockedOn=null,dm||(dm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,aw)))}var Xc=null;function V_(t){Xc!==t&&(Xc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Xc===t&&(Xc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],f=t[i+2];if(typeof l!="function"){if(fm(l||a)===null)continue;break}var d=In(a);d!==null&&(t.splice(i,3),i-=3,hd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function to(t){function i(O){return Yc(O,t)}Gr!==null&&Yc(Gr,t),$r!==null&&Yc($r,t),Qr!==null&&Yc(Qr,t),Ml.forEach(i),Vl.forEach(i);for(var a=0;a<Kr.length;a++){var l=Kr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Kr.length&&(a=Kr[0],a.blockedOn===null);)O_(a),a.blockedOn===null&&Kr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],v=f[Pt]||null;if(typeof d=="function")v||V_(a);else if(v){var w=null;if(d&&d.hasAttribute("formAction")){if(f=d,v=d[Pt]||null)w=v.formAction;else if(fm(f)!==null)continue}else w=v.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),V_(a)}}}function k_(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function mm(t){this._internalRoot=t}Wc.prototype.render=mm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=An();x_(a,l,t,i,null,null)},Wc.prototype.unmount=mm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;x_(t.current,2,null,t,null,null),Dc(),i[pi]=null}};function Wc(t){this._internalRoot=t}Wc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Du();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Kr.length&&i!==0&&i<Kr[a].priority;a++);Kr.splice(a,0,t),a===0&&O_(t)}};var j_=e.version;if(j_!=="19.2.0")throw Error(s(527,j_,"19.2.0"));re.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(i),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var ow={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jc.isDisabled&&Jc.supportsFiber)try{Gn=Jc.inject(ow),qt=Jc}catch{}}return Ll.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",f=Hy,d=Fy,v=Gy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=w_(t,1,!1,null,null,a,l,null,f,d,v,k_),t[pi]=i.current,Yd(t),new mm(i)},Ll.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,f="",d=Hy,v=Fy,w=Gy,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),i=w_(t,1,!0,i,a??null,l,f,O,d,v,w,k_),i.context=A_(null),a=i.current,l=An(),l=As(l),f=Mr(l),f.callback=null,Vr(a,f,l),a=l,i.current.lanes=a,Ss(i,a),Di(i),t[pi]=i.current,Yd(t),new Wc(i)},Ll.version="19.2.0",Ll}var $_;function yw(){if($_)return ym.exports;$_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ym.exports=gw(),ym.exports}var _w=yw();const vw=VE(_w);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Q_="popstate";function Ew(r={}){function e(o,u){let{pathname:h="/",search:m="",hash:g=""}=oa(o.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Pm("",{pathname:h,search:m,hash:g},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let h=o.document.querySelector("base"),m="";if(h&&h.getAttribute("href")){let g=o.location.href,p=g.indexOf("#");m=p===-1?g:g.slice(0,p)}return m+"#"+(typeof u=="string"?u:Jl(u))}function s(o,u){Hn(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return Tw(e,n,s,r)}function ht(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Hn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bw(){return Math.random().toString(36).substring(2,10)}function K_(r,e){return{usr:r.state,key:r.key,idx:e}}function Pm(r,e,n=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?oa(e):e,state:n,key:e&&e.key||s||bw()}}function Jl({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function oa(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function Tw(r,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,h=o.history,m="POP",g=null,p=E();p==null&&(p=0,h.replaceState({...h.state,idx:p},""));function E(){return(h.state||{idx:null}).idx}function T(){m="POP";let B=E(),$=B==null?null:B-p;p=B,g&&g({action:m,location:U.location,delta:$})}function A(B,$){m="PUSH";let J=Pm(U.location,B,$);n&&n(J,B),p=E()+1;let X=K_(J,p),se=U.createHref(J);try{h.pushState(X,"",se)}catch(ge){if(ge instanceof DOMException&&ge.name==="DataCloneError")throw ge;o.location.assign(se)}u&&g&&g({action:m,location:U.location,delta:1})}function k(B,$){m="REPLACE";let J=Pm(U.location,B,$);n&&n(J,B),p=E();let X=K_(J,p),se=U.createHref(J);h.replaceState(X,"",se),u&&g&&g({action:m,location:U.location,delta:0})}function j(B){return Sw(B)}let U={get action(){return m},get location(){return r(o,h)},listen(B){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Q_,T),g=B,()=>{o.removeEventListener(Q_,T),g=null}},createHref(B){return e(o,B)},createURL:j,encodeLocation(B){let $=j(B);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:A,replace:k,go(B){return h.go(B)}};return U}function Sw(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ht(n,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:Jl(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function kE(r,e,n="/"){return ww(r,e,n,!1)}function ww(r,e,n,s){let o=typeof e=="string"?oa(e):e,u=cr(o.pathname||"/",n);if(u==null)return null;let h=jE(r);Aw(h);let m=null;for(let g=0;m==null&&g<h.length;++g){let p=jw(u);m=Vw(h[g],p,s)}return m}function jE(r,e=[],n=[],s="",o=!1){let u=(h,m,g=o,p)=>{let E={relativePath:p===void 0?h.path||"":p,caseSensitive:h.caseSensitive===!0,childrenIndex:m,route:h};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(s)&&g)return;ht(E.relativePath.startsWith(s),`Absolute route path "${E.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(s.length)}let T=lr([s,E.relativePath]),A=n.concat(E);h.children&&h.children.length>0&&(ht(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),jE(h.children,e,A,T,g)),!(h.path==null&&!h.index)&&e.push({path:T,score:Ow(T,h.index),routesMeta:A})};return r.forEach((h,m)=>{var g;if(h.path===""||!((g=h.path)!=null&&g.includes("?")))u(h,m);else for(let p of LE(h.path))u(h,m,!0,p)}),e}function LE(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let h=LE(s.join("/")),m=[];return m.push(...h.map(g=>g===""?u:[u,g].join("/"))),o&&m.push(...h),m.map(g=>r.startsWith("/")&&g===""?"/":g)}function Aw(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:Mw(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var xw=/^:[\w-]+$/,Rw=3,Cw=2,Nw=1,Iw=10,Dw=-2,Y_=r=>r==="*";function Ow(r,e){let n=r.split("/"),s=n.length;return n.some(Y_)&&(s+=Dw),e&&(s+=Cw),n.filter(o=>!Y_(o)).reduce((o,u)=>o+(xw.test(u)?Rw:u===""?Nw:Iw),s)}function Mw(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function Vw(r,e,n=!1){let{routesMeta:s}=r,o={},u="/",h=[];for(let m=0;m<s.length;++m){let g=s[m],p=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",T=vh({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},E),A=g.route;if(!T&&p&&n&&!s[s.length-1].route.index&&(T=vh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},E)),!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:lr([u,T.pathname]),pathnameBase:zw(lr([u,T.pathnameBase])),route:A}),T.pathnameBase!=="/"&&(u=lr([u,T.pathnameBase]))}return h}function vh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=kw(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((p,{paramName:E,isOptional:T},A)=>{if(E==="*"){let j=m[A]||"";h=u.slice(0,u.length-j.length).replace(/(.)\/+$/,"$1")}const k=m[A];return T&&!k?p[E]=void 0:p[E]=(k||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:h,pattern:r}}function kw(r,e=!1,n=!0){Hn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,g)=>(s.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function jw(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function cr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}function Lw(r,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?oa(r):r;return{pathname:n?n.startsWith("/")?n:Pw(n,e):e,search:Bw(s),hash:qw(o)}}function Pw(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function bm(r,e,n,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Uw(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dp(r){let e=Uw(r);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function mp(r,e,n,s=!1){let o;typeof r=="string"?o=oa(r):(o={...r},ht(!o.pathname||!o.pathname.includes("?"),bm("?","pathname","search",o)),ht(!o.pathname||!o.pathname.includes("#"),bm("#","pathname","hash",o)),ht(!o.search||!o.search.includes("#"),bm("#","search","hash",o)));let u=r===""||o.pathname==="",h=u?"/":o.pathname,m;if(h==null)m=n;else{let T=e.length-1;if(!s&&h.startsWith("..")){let A=h.split("/");for(;A[0]==="..";)A.shift(),T-=1;o.pathname=A.join("/")}m=T>=0?e[T]:"/"}let g=Lw(o,m),p=h&&h!=="/"&&h.endsWith("/"),E=(u||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(p||E)&&(g.pathname+="/"),g}var lr=r=>r.join("/").replace(/\/\/+/g,"/"),zw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Bw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,qw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Hw(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var PE=["POST","PUT","PATCH","DELETE"];new Set(PE);var Fw=["GET",...PE];new Set(Fw);var bo=V.createContext(null);bo.displayName="DataRouter";var zh=V.createContext(null);zh.displayName="DataRouterState";V.createContext(!1);var UE=V.createContext({isTransitioning:!1});UE.displayName="ViewTransition";var Gw=V.createContext(new Map);Gw.displayName="Fetchers";var $w=V.createContext(null);$w.displayName="Await";var li=V.createContext(null);li.displayName="Navigation";var uu=V.createContext(null);uu.displayName="Location";var ui=V.createContext({outlet:null,matches:[],isDataRoute:!1});ui.displayName="Route";var pp=V.createContext(null);pp.displayName="RouteError";function Qw(r,{relative:e}={}){ht(To(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=V.useContext(li),{hash:o,pathname:u,search:h}=cu(r,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:lr([n,u])),s.createHref({pathname:m,search:h,hash:o})}function To(){return V.useContext(uu)!=null}function ms(){return ht(To(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(uu).location}var zE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function BE(r){V.useContext(li).static||V.useLayoutEffect(r)}function Bh(){let{isDataRoute:r}=V.useContext(ui);return r?lA():Kw()}function Kw(){ht(To(),"useNavigate() may be used only in the context of a <Router> component.");let r=V.useContext(bo),{basename:e,navigator:n}=V.useContext(li),{matches:s}=V.useContext(ui),{pathname:o}=ms(),u=JSON.stringify(dp(s)),h=V.useRef(!1);return BE(()=>{h.current=!0}),V.useCallback((g,p={})=>{if(Hn(h.current,zE),!h.current)return;if(typeof g=="number"){n.go(g);return}let E=mp(g,JSON.parse(u),o,p.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:lr([e,E.pathname])),(p.replace?n.replace:n.push)(E,p.state,p)},[e,n,u,o,r])}var Yw=V.createContext(null);function Xw(r){let e=V.useContext(ui).outlet;return V.useMemo(()=>e&&V.createElement(Yw.Provider,{value:r},e),[e,r])}function cu(r,{relative:e}={}){let{matches:n}=V.useContext(ui),{pathname:s}=ms(),o=JSON.stringify(dp(n));return V.useMemo(()=>mp(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function Ww(r,e){return qE(r,e)}function qE(r,e,n,s,o){var J;ht(To(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=V.useContext(li),{matches:h}=V.useContext(ui),m=h[h.length-1],g=m?m.params:{},p=m?m.pathname:"/",E=m?m.pathnameBase:"/",T=m&&m.route;{let X=T&&T.path||"";HE(p,!T||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let A=ms(),k;if(e){let X=typeof e=="string"?oa(e):e;ht(E==="/"||((J=X.pathname)==null?void 0:J.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${X.pathname}" was given in the \`location\` prop.`),k=X}else k=A;let j=k.pathname||"/",U=j;if(E!=="/"){let X=E.replace(/^\//,"").split("/");U="/"+j.replace(/^\//,"").split("/").slice(X.length).join("/")}let B=kE(r,{pathname:U});Hn(T||B!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),Hn(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=nA(B&&B.map(X=>Object.assign({},X,{params:Object.assign({},g,X.params),pathname:lr([E,u.encodeLocation?u.encodeLocation(X.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?E:lr([E,u.encodeLocation?u.encodeLocation(X.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathnameBase])})),h,n,s,o);return e&&$?V.createElement(uu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},$):$}function Jw(){let r=oA(),e=Hw(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=V.createElement(V.Fragment,null,V.createElement("p",null," Hey developer "),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:u},"ErrorBoundary")," or"," ",V.createElement("code",{style:u},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:o},n):null,h)}var Zw=V.createElement(Jw,null),eA=class extends V.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?V.createElement(ui.Provider,{value:this.props.routeContext},V.createElement(pp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tA({routeContext:r,match:e,children:n}){let s=V.useContext(bo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(ui.Provider,{value:r},n)}function nA(r,e=[],n=null,s=null,o=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let u=r,h=n==null?void 0:n.errors;if(h!=null){let p=u.findIndex(E=>E.route.id&&(h==null?void 0:h[E.route.id])!==void 0);ht(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,p+1))}let m=!1,g=-1;if(n)for(let p=0;p<u.length;p++){let E=u[p];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=p),E.route.id){let{loaderData:T,errors:A}=n,k=E.route.loader&&!T.hasOwnProperty(E.route.id)&&(!A||A[E.route.id]===void 0);if(E.route.lazy||k){m=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}return u.reduceRight((p,E,T)=>{let A,k=!1,j=null,U=null;n&&(A=h&&E.route.id?h[E.route.id]:void 0,j=E.route.errorElement||Zw,m&&(g<0&&T===0?(HE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,U=null):g===T&&(k=!0,U=E.route.hydrateFallbackElement||null)));let B=e.concat(u.slice(0,T+1)),$=()=>{let J;return A?J=j:k?J=U:E.route.Component?J=V.createElement(E.route.Component,null):E.route.element?J=E.route.element:J=p,V.createElement(tA,{match:E,routeContext:{outlet:p,matches:B,isDataRoute:n!=null},children:J})};return n&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?V.createElement(eA,{location:n.location,revalidation:n.revalidation,component:j,error:A,children:$(),routeContext:{outlet:null,matches:B,isDataRoute:!0},unstable_onError:s}):$()},null)}function gp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iA(r){let e=V.useContext(bo);return ht(e,gp(r)),e}function rA(r){let e=V.useContext(zh);return ht(e,gp(r)),e}function sA(r){let e=V.useContext(ui);return ht(e,gp(r)),e}function yp(r){let e=sA(r),n=e.matches[e.matches.length-1];return ht(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function aA(){return yp("useRouteId")}function oA(){var s;let r=V.useContext(pp),e=rA("useRouteError"),n=yp("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[n]}function lA(){let{router:r}=iA("useNavigate"),e=yp("useNavigate"),n=V.useRef(!1);return BE(()=>{n.current=!0}),V.useCallback(async(o,u={})=>{Hn(n.current,zE),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var X_={};function HE(r,e,n){!e&&!X_[r]&&(X_[r]=!0,Hn(!1,n))}V.memo(uA);function uA({routes:r,future:e,state:n,unstable_onError:s}){return qE(r,void 0,n,s,e)}function FE({to:r,replace:e,state:n,relative:s}){ht(To(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=V.useContext(li);Hn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=V.useContext(ui),{pathname:h}=ms(),m=Bh(),g=mp(r,dp(u),h,s==="path"),p=JSON.stringify(g);return V.useEffect(()=>{m(JSON.parse(p),{replace:e,state:n,relative:s})},[m,p,s,e,n]),null}function cA(r){return Xw(r.context)}function Ws(r){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hA({basename:r="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){ht(!To(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),m=V.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof n=="string"&&(n=oa(n));let{pathname:g="/",search:p="",hash:E="",state:T=null,key:A="default"}=n,k=V.useMemo(()=>{let j=cr(g,h);return j==null?null:{location:{pathname:j,search:p,hash:E,state:T,key:A},navigationType:s}},[h,g,p,E,T,A,s]);return Hn(k!=null,`<Router basename="${h}"> is not able to match the URL "${g}${p}${E}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:V.createElement(li.Provider,{value:m},V.createElement(uu.Provider,{children:e,value:k}))}function fA({children:r,location:e}){return Ww(Um(r),e)}function Um(r,e=[]){let n=[];return V.Children.forEach(r,(s,o)=>{if(!V.isValidElement(s))return;let u=[...e,o];if(s.type===V.Fragment){n.push.apply(n,Um(s.props.children,u));return}ht(s.type===Ws,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Um(s.props.children,u)),n.push(h)}),n}var ah="get",oh="application/x-www-form-urlencoded";function qh(r){return r!=null&&typeof r.tagName=="string"}function dA(r){return qh(r)&&r.tagName.toLowerCase()==="button"}function mA(r){return qh(r)&&r.tagName.toLowerCase()==="form"}function pA(r){return qh(r)&&r.tagName.toLowerCase()==="input"}function gA(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function yA(r,e){return r.button===0&&(!e||e==="_self")&&!gA(r)}var Zc=null;function _A(){if(Zc===null)try{new FormData(document.createElement("form"),0),Zc=!1}catch{Zc=!0}return Zc}var vA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tm(r){return r!=null&&!vA.has(r)?(Hn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${oh}"`),null):r}function EA(r,e){let n,s,o,u,h;if(mA(r)){let m=r.getAttribute("action");s=m?cr(m,e):null,n=r.getAttribute("method")||ah,o=Tm(r.getAttribute("enctype"))||oh,u=new FormData(r)}else if(dA(r)||pA(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=r.getAttribute("formaction")||m.getAttribute("action");if(s=g?cr(g,e):null,n=r.getAttribute("formmethod")||m.getAttribute("method")||ah,o=Tm(r.getAttribute("formenctype"))||Tm(m.getAttribute("enctype"))||oh,u=new FormData(m,r),!_A()){let{name:p,type:E,value:T}=r;if(E==="image"){let A=p?`${p}.`:"";u.append(`${A}x`,"0"),u.append(`${A}y`,"0")}else p&&u.append(p,T)}}else{if(qh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ah,s=null,o=oh,h=r}return u&&o==="text/plain"&&(h=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _p(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function bA(r,e,n){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&cr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function TA(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function SA(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function wA(r,e,n){let s=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let h=await TA(u,n);return h.links?h.links():[]}return[]}));return CA(s.flat(1).filter(SA).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function W_(r,e,n,s,o,u){let h=(g,p)=>n[p]?g.route.id!==n[p].route.id:!0,m=(g,p)=>{var E;return n[p].pathname!==g.pathname||((E=n[p].route.path)==null?void 0:E.endsWith("*"))&&n[p].params["*"]!==g.params["*"]};return u==="assets"?e.filter((g,p)=>h(g,p)||m(g,p)):u==="data"?e.filter((g,p)=>{var T;let E=s.routes[g.route.id];if(!E||!E.hasLoader)return!1;if(h(g,p)||m(g,p))return!0;if(g.route.shouldRevalidate){let A=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((T=n[0])==null?void 0:T.params)||{},nextUrl:new URL(r,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function AA(r,e,{includeHydrateFallback:n}={}){return xA(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function xA(r){return[...new Set(r)]}function RA(r){let e={},n=Object.keys(r).sort();for(let s of n)e[s]=r[s];return e}function CA(r,e){let n=new Set;return new Set(e),r.reduce((s,o)=>{let u=JSON.stringify(RA(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function GE(){let r=V.useContext(bo);return _p(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function NA(){let r=V.useContext(zh);return _p(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var vp=V.createContext(void 0);vp.displayName="FrameworkContext";function $E(){let r=V.useContext(vp);return _p(r,"You must render this element inside a <HydratedRouter> element"),r}function IA(r,e){let n=V.useContext(vp),[s,o]=V.useState(!1),[u,h]=V.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:p,onMouseLeave:E,onTouchStart:T}=e,A=V.useRef(null);V.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let U=$=>{$.forEach(J=>{h(J.isIntersecting)})},B=new IntersectionObserver(U,{threshold:.5});return A.current&&B.observe(A.current),()=>{B.disconnect()}}},[r]),V.useEffect(()=>{if(s){let U=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(U)}}},[s]);let k=()=>{o(!0)},j=()=>{o(!1),h(!1)};return n?r!=="intent"?[u,A,{}]:[u,A,{onFocus:Pl(m,k),onBlur:Pl(g,j),onMouseEnter:Pl(p,k),onMouseLeave:Pl(E,j),onTouchStart:Pl(T,k)}]:[!1,A,{}]}function Pl(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function DA({page:r,...e}){let{router:n}=GE(),s=V.useMemo(()=>kE(n.routes,r,n.basename),[n.routes,r,n.basename]);return s?V.createElement(MA,{page:r,matches:s,...e}):null}function OA(r){let{manifest:e,routeModules:n}=$E(),[s,o]=V.useState([]);return V.useEffect(()=>{let u=!1;return wA(r,e,n).then(h=>{u||o(h)}),()=>{u=!0}},[r,e,n]),s}function MA({page:r,matches:e,...n}){let s=ms(),{manifest:o,routeModules:u}=$E(),{basename:h}=GE(),{loaderData:m,matches:g}=NA(),p=V.useMemo(()=>W_(r,e,g,o,s,"data"),[r,e,g,o,s]),E=V.useMemo(()=>W_(r,e,g,o,s,"assets"),[r,e,g,o,s]),T=V.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let j=new Set,U=!1;if(e.forEach($=>{var X;let J=o.routes[$.route.id];!J||!J.hasLoader||(!p.some(se=>se.route.id===$.route.id)&&$.route.id in m&&((X=u[$.route.id])!=null&&X.shouldRevalidate)||J.hasClientLoader?U=!0:j.add($.route.id))}),j.size===0)return[];let B=bA(r,h,"data");return U&&j.size>0&&B.searchParams.set("_routes",e.filter($=>j.has($.route.id)).map($=>$.route.id).join(",")),[B.pathname+B.search]},[h,m,s,o,p,e,r,u]),A=V.useMemo(()=>AA(E,o),[E,o]),k=OA(E);return V.createElement(V.Fragment,null,T.map(j=>V.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...n})),A.map(j=>V.createElement("link",{key:j,rel:"modulepreload",href:j,...n})),k.map(({key:j,link:U})=>V.createElement("link",{key:j,nonce:n.nonce,...U})))}function VA(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var QE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{QE&&(window.__reactRouterVersion="7.9.4")}catch{}function kA({basename:r,children:e,window:n}){let s=V.useRef();s.current==null&&(s.current=Ew({window:n,v5Compat:!0}));let o=s.current,[u,h]=V.useState({action:o.action,location:o.location}),m=V.useCallback(g=>{V.startTransition(()=>h(g))},[h]);return V.useLayoutEffect(()=>o.listen(m),[o,m]),V.createElement(hA,{basename:r,children:e,location:u.location,navigationType:u.action,navigator:o})}var KE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YE=V.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:h,state:m,target:g,to:p,preventScrollReset:E,viewTransition:T,...A},k){let{basename:j}=V.useContext(li),U=typeof p=="string"&&KE.test(p),B,$=!1;if(typeof p=="string"&&U&&(B=p,QE))try{let C=new URL(window.location.href),M=p.startsWith("//")?new URL(C.protocol+p):new URL(p),D=cr(M.pathname,j);M.origin===C.origin&&D!=null?p=D+M.search+M.hash:$=!0}catch{Hn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let J=Qw(p,{relative:o}),[X,se,ge]=IA(s,A),ye=UA(p,{replace:h,state:m,target:g,preventScrollReset:E,relative:o,viewTransition:T});function N(C){e&&e(C),C.defaultPrevented||ye(C)}let S=V.createElement("a",{...A,...ge,href:B||J,onClick:$||u?e:N,ref:VA(k,se),target:g,"data-discover":!U&&n==="render"?"true":void 0});return X&&!U?V.createElement(V.Fragment,null,S,V.createElement(DA,{page:J})):S});YE.displayName="Link";var jA=V.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:h,viewTransition:m,children:g,...p},E){let T=cu(h,{relative:p.relative}),A=ms(),k=V.useContext(zh),{navigator:j,basename:U}=V.useContext(li),B=k!=null&&FA(T)&&m===!0,$=j.encodeLocation?j.encodeLocation(T).pathname:T.pathname,J=A.pathname,X=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;n||(J=J.toLowerCase(),X=X?X.toLowerCase():null,$=$.toLowerCase()),X&&U&&(X=cr(X,U)||X);const se=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let ge=J===$||!o&&J.startsWith($)&&J.charAt(se)==="/",ye=X!=null&&(X===$||!o&&X.startsWith($)&&X.charAt($.length)==="/"),N={isActive:ge,isPending:ye,isTransitioning:B},S=ge?e:void 0,C;typeof s=="function"?C=s(N):C=[s,ge?"active":null,ye?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let M=typeof u=="function"?u(N):u;return V.createElement(YE,{...p,"aria-current":S,className:C,ref:E,style:M,to:h,viewTransition:m},typeof g=="function"?g(N):g)});jA.displayName="NavLink";var LA=V.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:h=ah,action:m,onSubmit:g,relative:p,preventScrollReset:E,viewTransition:T,...A},k)=>{let j=qA(),U=HA(m,{relative:p}),B=h.toLowerCase()==="get"?"get":"post",$=typeof m=="string"&&KE.test(m),J=X=>{if(g&&g(X),X.defaultPrevented)return;X.preventDefault();let se=X.nativeEvent.submitter,ge=(se==null?void 0:se.getAttribute("formmethod"))||h;j(se||X.currentTarget,{fetcherKey:e,method:ge,navigate:n,replace:o,state:u,relative:p,preventScrollReset:E,viewTransition:T})};return V.createElement("form",{ref:k,method:B,action:U,onSubmit:s?g:J,...A,"data-discover":!$&&r==="render"?"true":void 0})});LA.displayName="Form";function PA(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XE(r){let e=V.useContext(bo);return ht(e,PA(r)),e}function UA(r,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:h}={}){let m=Bh(),g=ms(),p=cu(r,{relative:u});return V.useCallback(E=>{if(yA(E,e)){E.preventDefault();let T=n!==void 0?n:Jl(g)===Jl(p);m(r,{replace:T,state:s,preventScrollReset:o,relative:u,viewTransition:h})}},[g,m,p,n,s,e,r,o,u,h])}var zA=0,BA=()=>`__${String(++zA)}__`;function qA(){let{router:r}=XE("useSubmit"),{basename:e}=V.useContext(li),n=aA();return V.useCallback(async(s,o={})=>{let{action:u,method:h,encType:m,formData:g,body:p}=EA(s,e);if(o.navigate===!1){let E=o.fetcherKey||BA();await r.fetch(E,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:p,formMethod:o.method||h,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:p,formMethod:o.method||h,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,n])}function HA(r,{relative:e}={}){let{basename:n}=V.useContext(li),s=V.useContext(ui);ht(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...cu(r||".",{relative:e})},h=ms();if(r==null){u.search=h.search;let m=new URLSearchParams(u.search),g=m.getAll("index");if(g.some(E=>E==="")){m.delete("index"),g.filter(T=>T).forEach(T=>m.append("index",T));let E=m.toString();u.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:lr([n,u.pathname])),Jl(u)}function FA(r,{relative:e}={}){let n=V.useContext(UE);ht(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=XE("useViewTransitionState"),o=cu(r,{relative:e});if(!n.isTransitioning)return!1;let u=cr(n.currentLocation.pathname,s)||n.currentLocation.pathname,h=cr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return vh(o.pathname,h)!=null||vh(o.pathname,u)!=null}const GA=()=>{};var J_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},$A=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],h=r[n++],m=r[n++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[n++],h=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},JE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],h=o+1<r.length,m=h?r[o+1]:0,g=o+2<r.length,p=g?r[o+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let A=(m&15)<<2|p>>6,k=p&63;g||(k=64,h||(A=64)),s.push(n[E],n[T],n[A],n[k])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(WE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):$A(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const p=o<r.length?n[r.charAt(o)]:64;++o;const T=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||p==null||T==null)throw new QA;const A=u<<2|m>>4;if(s.push(A),p!==64){const k=m<<4&240|p>>2;if(s.push(k),T!==64){const j=p<<6&192|T;s.push(j)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class QA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KA=function(r){const e=WE(r);return JE.encodeByteArray(e,!0)},Eh=function(r){return KA(r).replace(/\./g,"")},ZE=function(r){try{return JE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=()=>YA().__FIREBASE_DEFAULTS__,WA=()=>{if(typeof process>"u"||typeof J_>"u")return;const r=J_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},JA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&ZE(r[1]);return e&&JSON.parse(e)},Hh=()=>{try{return GA()||XA()||WA()||JA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},eb=r=>{var e,n;return(n=(e=Hh())==null?void 0:e.emulatorHosts)==null?void 0:n[r]},ZA=r=>{const e=eb(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},tb=()=>{var r;return(r=Hh())==null?void 0:r.config},nb=r=>{var e;return(e=Hh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ib(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Eh(JSON.stringify(n)),Eh(JSON.stringify(h)),""].join(".")}const $l={};function nx(){const r={prod:[],emulator:[]};for(const e of Object.keys($l))$l[e]?r.emulator.push(e):r.prod.push(e);return r}function ix(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Z_=!1;function rb(r,e){if(typeof window>"u"||typeof document>"u"||!So(window.location.host)||$l[r]===e||$l[r]||Z_)return;$l[r]=e;function n(A){return`__firebase__banner__${A}`}const s="__firebase__banner",u=nx().prod.length>0;function h(){const A=document.getElementById(s);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,k){A.setAttribute("width","24"),A.setAttribute("id",k),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function p(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Z_=!0,h()},A}function E(A,k){A.setAttribute("id",k),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=ix(s),k=n("text"),j=document.getElementById(k)||document.createElement("span"),U=n("learnmore"),B=document.getElementById(U)||document.createElement("a"),$=n("preprendIcon"),J=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const X=A.element;m(X),E(B,U);const se=p();g(J,$),X.append(J,j,B,se),document.body.appendChild(X)}u?(j.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function sx(){var e;const r=(e=Hh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ax(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ox(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function lx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ux(){const r=nn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function cx(){return!sx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hx(){try{return typeof indexedDB=="object"}catch{return!1}}function fx(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="FirebaseError";class gr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=dx,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hu.prototype.create)}}class hu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?mx(u,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new gr(o,m,s)}}function mx(r,e){return r.replace(px,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const px=/\{\$([^}]+)}/g;function gx(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function na(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],h=e[o];if(ev(u)&&ev(h)){if(!na(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function ev(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ul(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function zl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function yx(r,e){const n=new _x(r,e);return n.subscribe.bind(n)}class _x{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");vx(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Sm),o.error===void 0&&(o.error=Sm),o.complete===void 0&&(o.complete=Sm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vx(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Sm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(r){return r&&r._delegate?r._delegate:r}class ia{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new ex;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Tx(e))try{this.getOrInitializeService({instanceIdentifier:Js})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Js){return this.instances.has(e)}getOptions(e=Js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&h.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:bx(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Js){return this.component?this.component.multipleInstances?e:Js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bx(r){return r===Js?void 0:r}function Tx(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ex(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Le||(Le={}));const wx={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},Ax=Le.INFO,xx={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},Rx=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=xx[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ep{constructor(e){this.name=e,this._logLevel=Ax,this._logHandler=Rx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const Cx=(r,e)=>e.some(n=>r instanceof n);let tv,nv;function Nx(){return tv||(tv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ix(){return nv||(nv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sb=new WeakMap,zm=new WeakMap,ab=new WeakMap,wm=new WeakMap,bp=new WeakMap;function Dx(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",h)},u=()=>{n(ns(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&sb.set(n,r)}).catch(()=>{}),bp.set(e,r),e}function Ox(r){if(zm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",h),r.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",h),r.addEventListener("abort",h)});zm.set(r,e)}let Bm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return zm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||ab.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ns(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Mx(r){Bm=r(Bm)}function Vx(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Am(this),e,...n);return ab.set(s,e.sort?e.sort():[e]),ns(s)}:Ix().includes(r)?function(...e){return r.apply(Am(this),e),ns(sb.get(this))}:function(...e){return ns(r.apply(Am(this),e))}}function kx(r){return typeof r=="function"?Vx(r):(r instanceof IDBTransaction&&Ox(r),Cx(r,Nx())?new Proxy(r,Bm):r)}function ns(r){if(r instanceof IDBRequest)return Dx(r);if(wm.has(r))return wm.get(r);const e=kx(r);return e!==r&&(wm.set(r,e),bp.set(e,r)),e}const Am=r=>bp.get(r);function jx(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(r,e),m=ns(h);return s&&h.addEventListener("upgradeneeded",g=>{s(ns(h.result),g.oldVersion,g.newVersion,ns(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const Lx=["get","getKey","getAll","getAllKeys","count"],Px=["put","add","delete","clear"],xm=new Map;function iv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(xm.get(e))return xm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=Px.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Lx.includes(n)))return;const u=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(m.shift())),(await Promise.all([p[n](...m),o&&g.done]))[0]};return xm.set(e,u),u}Mx(r=>({...r,get:(e,n,s)=>iv(e,n)||r.get(e,n,s),has:(e,n)=>!!iv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zx(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function zx(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qm="@firebase/app",rv="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr=new Ep("@firebase/app"),Bx="@firebase/app-compat",qx="@firebase/analytics-compat",Hx="@firebase/analytics",Fx="@firebase/app-check-compat",Gx="@firebase/app-check",$x="@firebase/auth",Qx="@firebase/auth-compat",Kx="@firebase/database",Yx="@firebase/data-connect",Xx="@firebase/database-compat",Wx="@firebase/functions",Jx="@firebase/functions-compat",Zx="@firebase/installations",e2="@firebase/installations-compat",t2="@firebase/messaging",n2="@firebase/messaging-compat",i2="@firebase/performance",r2="@firebase/performance-compat",s2="@firebase/remote-config",a2="@firebase/remote-config-compat",o2="@firebase/storage",l2="@firebase/storage-compat",u2="@firebase/firestore",c2="@firebase/ai",h2="@firebase/firestore-compat",f2="firebase",d2="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="[DEFAULT]",m2={[qm]:"fire-core",[Bx]:"fire-core-compat",[Hx]:"fire-analytics",[qx]:"fire-analytics-compat",[Gx]:"fire-app-check",[Fx]:"fire-app-check-compat",[$x]:"fire-auth",[Qx]:"fire-auth-compat",[Kx]:"fire-rtdb",[Yx]:"fire-data-connect",[Xx]:"fire-rtdb-compat",[Wx]:"fire-fn",[Jx]:"fire-fn-compat",[Zx]:"fire-iid",[e2]:"fire-iid-compat",[t2]:"fire-fcm",[n2]:"fire-fcm-compat",[i2]:"fire-perf",[r2]:"fire-perf-compat",[s2]:"fire-rc",[a2]:"fire-rc-compat",[o2]:"fire-gcs",[l2]:"fire-gcs-compat",[u2]:"fire-fst",[h2]:"fire-fst-compat",[c2]:"fire-vertex","fire-js":"fire-js",[f2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Map,p2=new Map,Fm=new Map;function sv(r,e){try{r.container.addComponent(e)}catch(n){hr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function ho(r){const e=r.name;if(Fm.has(e))return hr.debug(`There were multiple attempts to register component ${e}.`),!1;Fm.set(e,r);for(const n of bh.values())sv(n,r);for(const n of p2.values())sv(n,r);return!0}function Tp(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function ii(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},is=new hu("app","Firebase",g2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=d2;function ob(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:Hm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw is.create("bad-app-name",{appName:String(o)});if(n||(n=tb()),!n)throw is.create("no-options");const u=bh.get(o);if(u){if(na(n,u.options)&&na(s,u.config))return u;throw is.create("duplicate-app",{appName:o})}const h=new Sx(o);for(const g of Fm.values())h.addComponent(g);const m=new y2(n,s,h);return bh.set(o,m),m}function lb(r=Hm){const e=bh.get(r);if(!e&&r===Hm&&tb())return ob();if(!e)throw is.create("no-app",{appName:r});return e}function rs(r,e,n){let s=m2[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hr.warn(h.join(" "));return}ho(new ia(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="firebase-heartbeat-database",v2=1,Zl="firebase-heartbeat-store";let Rm=null;function ub(){return Rm||(Rm=jx(_2,v2,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Zl)}catch(n){console.warn(n)}}}}).catch(r=>{throw is.create("idb-open",{originalErrorMessage:r.message})})),Rm}async function E2(r){try{const n=(await ub()).transaction(Zl),s=await n.objectStore(Zl).get(cb(r));return await n.done,s}catch(e){if(e instanceof gr)hr.warn(e.message);else{const n=is.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hr.warn(n.message)}}}async function av(r,e){try{const s=(await ub()).transaction(Zl,"readwrite");await s.objectStore(Zl).put(e,cb(r)),await s.done}catch(n){if(n instanceof gr)hr.warn(n.message);else{const s=is.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});hr.warn(s.message)}}}function cb(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=1024,T2=30;class S2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new A2(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=ov();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>T2){const h=x2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){hr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ov(),{heartbeatsToSend:s,unsentEntries:o}=w2(this._heartbeatsCache.heartbeats),u=Eh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return hr.warn(n),""}}}function ov(){return new Date().toISOString().substring(0,10)}function w2(r,e=b2){const n=[];let s=r.slice();for(const o of r){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),lv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),lv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class A2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hx()?fx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await E2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return av(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return av(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function lv(r){return Eh(JSON.stringify({version:2,heartbeats:r})).length}function x2(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(r){ho(new ia("platform-logger",e=>new Ux(e),"PRIVATE")),ho(new ia("heartbeat",e=>new S2(e),"PRIVATE")),rs(qm,rv,r),rs(qm,rv,"esm2020"),rs("fire-js","")}R2("");function hb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const C2=hb,fb=new hu("auth","Firebase",hb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new Ep("@firebase/auth");function N2(r,...e){Th.logLevel<=Le.WARN&&Th.warn(`Auth (${wo}): ${r}`,...e)}function lh(r,...e){Th.logLevel<=Le.ERROR&&Th.error(`Auth (${wo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(r,...e){throw Sp(r,...e)}function Vi(r,...e){return Sp(r,...e)}function db(r,e,n){const s={...C2(),[e]:n};return new hu("auth","Firebase",s).create(e,{appName:r.name})}function ss(r){return db(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sp(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return fb.create(r,...e)}function be(r,e,...n){if(!r)throw Sp(e,...n)}function ar(r){const e="INTERNAL ASSERTION FAILED: "+r;throw lh(e),new Error(e)}function fr(r,e){r||ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function I2(){return uv()==="http:"||uv()==="https:"}function uv(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(I2()||ox()||"connection"in navigator)?navigator.onLine:!0}function O2(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n){this.shortDelay=e,this.longDelay=n,fr(n>e,"Short delay should be less than long delay!"),this.isMobile=rx()||lx()}get(){return D2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(r,e){fr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],k2=new du(3e4,6e4);function la(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ps(r,e,n,s,o={}){return pb(r,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const m=fu({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const p={method:e,headers:g,...u};return ax()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&So(r.emulatorConfig.host)&&(p.credentials="include"),mb.fetch()(await gb(r,r.config.apiHost,n,m),p)})}async function pb(r,e,n){r._canInitEmulator=!1;const s={...M2,...e};try{const o=new L2(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw eh(r,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw eh(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw eh(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw eh(r,"user-disabled",h);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw db(r,E,p);ai(r,E)}}catch(o){if(o instanceof gr)throw o;ai(r,"network-request-failed",{message:String(o)})}}async function Fh(r,e,n,s,o={}){const u=await ps(r,e,n,s,o);return"mfaPendingCredential"in u&&ai(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function gb(r,e,n,s){const o=`${e}${n}?${s}`,u=r,h=u.config.emulator?wp(r.config,o):`${r.config.apiScheme}://${o}`;return V2.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function j2(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class L2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Vi(this.auth,"network-request-failed")),k2.get())})}}function eh(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Vi(r,e,s);return o.customData._tokenResponse=n,o}function cv(r){return r!==void 0&&r.enterprise!==void 0}class P2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return j2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function U2(r,e){return ps(r,"GET","/v2/recaptchaConfig",la(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z2(r,e){return ps(r,"POST","/v1/accounts:delete",e)}async function Sh(r,e){return ps(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function B2(r,e=!1){const n=bt(r),s=await n.getIdToken(e),o=Ap(s);be(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:Ql(Cm(o.auth_time)),issuedAtTime:Ql(Cm(o.iat)),expirationTime:Ql(Cm(o.exp)),signInProvider:h||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Cm(r){return Number(r)*1e3}function Ap(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return lh("JWT malformed, contained fewer than 3 sections"),null;try{const o=ZE(n);return o?JSON.parse(o):(lh("Failed to decode base64 JWT payload"),null)}catch(o){return lh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function hv(r){const e=Ap(r);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eu(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof gr&&q2(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function q2({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ql(this.lastLoginAt),this.creationTime=Ql(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wh(r){var T;const e=r.auth,n=await r.getIdToken(),s=await eu(r,Sh(e,{idToken:n}));be(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=(T=o.providerUserInfo)!=null&&T.length?yb(o.providerUserInfo):[],h=G2(r.providerData,u),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!(h!=null&&h.length),p=m?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new $m(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(r,E)}async function F2(r){const e=bt(r);await wh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function G2(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function yb(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $2(r,e){const n=await pb(r,{},async()=>{const s=fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,h=await gb(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return r.emulatorConfig&&So(r.emulatorConfig.host)&&(g.credentials="include"),mb.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Q2(r,e){return ps(r,"POST","/v2/accounts:revokeToken",la(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=hv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await $2(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,h=new oo;return s&&(be(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(be(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(be(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oo,this.toJSON())}_performRefresh(){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(r,e){be(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class si{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new H2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new $m(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await eu(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return B2(this,e)}reload(){return F2(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new si({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await wh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ii(this.auth.app))return Promise.reject(ss(this.auth));const e=await this.getIdToken();return await eu(this,z2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,p=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:T,emailVerified:A,isAnonymous:k,providerData:j,stsTokenManager:U}=n;be(T&&U,e,"internal-error");const B=oo.fromJSON(this.name,U);be(typeof T=="string",e,"internal-error"),Xr(s,e.name),Xr(o,e.name),be(typeof A=="boolean",e,"internal-error"),be(typeof k=="boolean",e,"internal-error"),Xr(u,e.name),Xr(h,e.name),Xr(m,e.name),Xr(g,e.name),Xr(p,e.name),Xr(E,e.name);const $=new si({uid:T,auth:e,email:o,emailVerified:A,displayName:s,isAnonymous:k,photoURL:h,phoneNumber:u,tenantId:m,stsTokenManager:B,createdAt:p,lastLoginAt:E});return j&&Array.isArray(j)&&($.providerData=j.map(J=>({...J}))),g&&($._redirectEventId=g),$}static async _fromIdTokenResponse(e,n,s=!1){const o=new oo;o.updateFromServerResponse(n);const u=new si({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await wh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];be(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?yb(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new oo;m.updateFromIdToken(s);const g=new si({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new $m(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=new Map;function or(r){fr(r instanceof Function,"Expected a class definition");let e=fv.get(r);return e?(fr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,fv.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_b.type="NONE";const dv=_b;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(r,e,n){return`firebase:${r}:${e}:${n}`}class lo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=uh(this.userKey,o.apiKey,u),this.fullPersistenceKey=uh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Sh(this.auth,{idToken:e}).catch(()=>{});return n?si._fromGetAccountInfoResponse(this.auth,n,e):null}return si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new lo(or(dv),e,s);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||or(dv);const h=uh(s,e.config.apiKey,e.name);let m=null;for(const p of n)try{const E=await p._get(h);if(E){let T;if(typeof E=="string"){const A=await Sh(e,{idToken:E}).catch(()=>{});if(!A)break;T=await si._fromGetAccountInfoResponse(e,A,E)}else T=si._fromJSON(e,E);p!==u&&(m=T),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new lo(u,e,s):(u=g[0],m&&await u._set(h,m.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(h)}catch{}})),new lo(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Tb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wb(e))return"Blackberry";if(Ab(e))return"Webos";if(Eb(e))return"Safari";if((e.includes("chrome/")||bb(e))&&!e.includes("edge/"))return"Chrome";if(Sb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function vb(r=nn()){return/firefox\//i.test(r)}function Eb(r=nn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bb(r=nn()){return/crios\//i.test(r)}function Tb(r=nn()){return/iemobile/i.test(r)}function Sb(r=nn()){return/android/i.test(r)}function wb(r=nn()){return/blackberry/i.test(r)}function Ab(r=nn()){return/webos/i.test(r)}function xp(r=nn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function K2(r=nn()){var e;return xp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function Y2(){return ux()&&document.documentMode===10}function xb(r=nn()){return xp(r)||Sb(r)||Ab(r)||wb(r)||/windows phone/i.test(r)||Tb(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(r,e=[]){let n;switch(r){case"Browser":n=mv(nn());break;case"Worker":n=`${mv(nn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((h,m)=>{try{const g=e(u);h(g)}catch(g){m(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W2(r,e={}){return ps(r,"GET","/v2/passwordPolicy",la(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=6;class Z2{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??J2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pv(this),this.idTokenSubscription=new pv(this),this.beforeStateQueue=new X2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=or(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await lo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Sh(this,{idToken:e}),s=await si._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(ii(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(u=this.redirectUser)==null?void 0:u._redirectEventId,m=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===m)&&(g!=null&&g.user)&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(h){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await wh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=O2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ii(this.app))return Promise.reject(ss(this));const n=e?bt(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ii(this.app)?Promise.reject(ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ii(this.app)?Promise.reject(ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await W2(this),n=new Z2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Q2(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&or(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await lo.create(this,[or(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(ii(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&N2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ao(r){return bt(r)}class pv{constructor(e){this.auth=e,this.observer=null,this.addObserver=yx(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tR(r){Gh=r}function Cb(r){return Gh.loadJS(r)}function nR(){return Gh.recaptchaEnterpriseScript}function iR(){return Gh.gapiScript}function rR(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class sR{constructor(){this.enterprise=new aR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class aR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const oR="recaptcha-enterprise",Nb="NO_RECAPTCHA";class lR{constructor(e){this.type=oR,this.auth=Ao(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,m)=>{U2(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const p=new P2(g);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,h(p.siteKey)}}).catch(g=>{m(g)})})}function o(u,h,m){const g=window.grecaptcha;cv(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(p=>{h(p)}).catch(()=>{h(Nb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sR().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{s(this.auth).then(m=>{if(!n&&cv(window.grecaptcha))o(m,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=nR();g.length!==0&&(g+=m),Cb(g).then(()=>{o(m,u,h)}).catch(p=>{h(p)})}}).catch(m=>{h(m)})})}}async function gv(r,e,n,s=!1,o=!1){const u=new lR(r);let h;if(o)h=Nb;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,p=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function yv(r,e,n,s,o){var u;if((u=r._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await gv(r,e,n,n==="getOobCode");return s(r,h)}else return s(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await gv(r,e,n,n==="getOobCode");return s(r,m)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(r,e){const n=Tp(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(na(u,e??{}))return o;ai(o,"already-initialized")}return n.initialize({options:e})}function cR(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(or);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function hR(r,e,n){const s=Ao(r);be(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=Ib(e),{host:h,port:m}=fR(e),g=m===null?"":`:${m}`,p={url:`${u}//${h}${g}/`},E=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){be(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),be(na(p,s.config.emulator)&&na(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,So(h)?(ib(`${u}//${h}${g}`),rb("Auth",!0)):dR()}function Ib(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function fR(r){const e=Ib(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:_v(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:_v(h)}}}function _v(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function dR(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ar("not implemented")}_getIdTokenResponse(e){return ar("not implemented")}_linkToIdToken(e,n){return ar("not implemented")}_getReauthenticationResolver(e){return ar("not implemented")}}async function mR(r,e){return ps(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(r,e){return Fh(r,"POST","/v1/accounts:signInWithPassword",la(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(r,e){return Fh(r,"POST","/v1/accounts:signInWithEmailLink",la(r,e))}async function yR(r,e){return Fh(r,"POST","/v1/accounts:signInWithEmailLink",la(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends Rp{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new tu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new tu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yv(e,n,"signInWithPassword",pR);case"emailLink":return gR(e,{email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yv(e,s,"signUpPassword",mR);case"emailLink":return yR(e,{idToken:n,email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(r,e){return Fh(r,"POST","/v1/accounts:signInWithIdp",la(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="http://localhost";class ra extends Rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ai("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const h=new ra(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return uo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,uo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uo(e,n)}buildRequest(){const e={requestUri:_R,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ER(r){const e=Ul(zl(r)).link,n=e?Ul(zl(e)).deep_link_id:null,s=Ul(zl(r)).deep_link_id;return(s?Ul(zl(s)).link:null)||s||n||e||r}class Cp{constructor(e){const n=Ul(zl(e)),s=n.apiKey??null,o=n.oobCode??null,u=vR(n.mode??null);be(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=ER(e);try{return new Cp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.providerId=xo.PROVIDER_ID}static credential(e,n){return tu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Cp.parseLink(n);return be(s,"argument-error"),tu._fromEmailAndCode(e,s.code,s.tenantId)}}xo.PROVIDER_ID="password";xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu extends Db{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends mu{constructor(){super("facebook.com")}static credential(e){return ra._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ra._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Jr.credential(n,s)}catch{return null}}}Jr.GOOGLE_SIGN_IN_METHOD="google.com";Jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends mu{constructor(){super("github.com")}static credential(e){return ra._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zr.credential(e.oauthAccessToken)}catch{return null}}}Zr.GITHUB_SIGN_IN_METHOD="github.com";Zr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends mu{constructor(){super("twitter.com")}static credential(e,n){return ra._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return es.credential(n,s)}catch{return null}}}es.TWITTER_SIGN_IN_METHOD="twitter.com";es.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await si._fromIdTokenResponse(e,s,o),h=vv(s);return new fo({user:u,providerId:h,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=vv(s);return new fo({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function vv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends gr{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Ah.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Ah(e,n,s,o)}}function Ob(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Ah._fromErrorAndOperation(r,u,e,s):u})}async function bR(r,e,n=!1){const s=await eu(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return fo._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(r,e,n=!1){const{auth:s}=r;if(ii(s.app))return Promise.reject(ss(s));const o="reauthenticate";try{const u=await eu(r,Ob(s,o,e,r),n);be(u.idToken,s,"internal-error");const h=Ap(u.idToken);be(h,s,"internal-error");const{sub:m}=h;return be(r.uid===m,s,"user-mismatch"),fo._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&ai(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mb(r,e,n=!1){if(ii(r.app))return Promise.reject(ss(r));const s="signIn",o=await Ob(r,s,e),u=await fo._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function SR(r,e){return Mb(Ao(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(r){const e=Ao(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function AR(r,e,n){return ii(r.app)?Promise.reject(ss(r)):SR(bt(r),xo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&wR(r),s})}function xR(r,e,n,s){return bt(r).onIdTokenChanged(e,n,s)}function RR(r,e,n){return bt(r).beforeAuthStateChanged(e,n)}function CR(r,e,n,s){return bt(r).onAuthStateChanged(e,n,s)}function NR(r){return bt(r).signOut()}const xh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xh,"1"),this.storage.removeItem(xh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=1e3,DR=10;class kb extends Vb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!n&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);Y2()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,DR):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},IR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}kb.type="LOCAL";const OR=kb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb extends Vb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jb.type="SESSION";const Lb=jb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new $h(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(h).map(async p=>p(n.origin,u)),g=await MR(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,g)=>{const p=Np("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const A=T;if(A.data.eventId===p)switch(A.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(A.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(){return window}function kR(r){ki().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}async function jR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LR(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function PR(){return Pb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="firebaseLocalStorageDb",UR=1,Rh="firebaseLocalStorage",zb="fbase_key";class pu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qh(r,e){return r.transaction([Rh],e?"readwrite":"readonly").objectStore(Rh)}function zR(){const r=indexedDB.deleteDatabase(Ub);return new pu(r).toPromise()}function Qm(){const r=indexedDB.open(Ub,UR);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Rh,{keyPath:zb})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Rh)?e(s):(s.close(),await zR(),e(await Qm()))})})}async function Ev(r,e,n){const s=Qh(r,!0).put({[zb]:e,value:n});return new pu(s).toPromise()}async function BR(r,e){const n=Qh(r,!1).get(e),s=await new pu(n).toPromise();return s===void 0?null:s.value}function bv(r,e){const n=Qh(r,!0).delete(e);return new pu(n).toPromise()}const qR=800,HR=3;class Bb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>HR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Pb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$h._getInstance(PR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await jR(),!this.activeServiceWorker)return;this.sender=new VR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qm();return await Ev(e,xh,"1"),await bv(e,xh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Ev(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>BR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>bv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Qh(o,!1).getAll();return new pu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Bb.type="LOCAL";const FR=Bb;new du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(r,e){return e?or(e):(be(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip extends Rp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $R(r){return Mb(r.auth,new Ip(r),r.bypassAuthState)}function QR(r){const{auth:e,user:n}=r;return be(n,e,"internal-error"),TR(n,new Ip(r),r.bypassAuthState)}async function KR(r){const{auth:e,user:n}=r;return be(n,e,"internal-error"),bR(n,new Ip(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $R;case"linkViaPopup":case"linkViaRedirect":return KR;case"reauthViaPopup":case"reauthViaRedirect":return QR;default:ai(this.auth,"internal-error")}}resolve(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=new du(2e3,1e4);class ao extends qb{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,ao.currentPopupAction&&ao.currentPopupAction.cancel(),ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){fr(this.filter.length===1,"Popup operations only handle one event");const e=Np();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,YR.get())};e()}}ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR="pendingRedirect",ch=new Map;class WR extends qb{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ch.get(this.auth._key());if(!e){try{const s=await JR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ch.set(this.auth._key(),e)}return this.bypassAuthState||ch.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JR(r,e){const n=tC(e),s=eC(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function ZR(r,e){ch.set(r._key(),e)}function eC(r){return or(r._redirectPersistence)}function tC(r){return uh(XR,r.config.apiKey,r.name)}async function nC(r,e,n=!1){if(ii(r.app))return Promise.reject(ss(r));const s=Ao(r),o=GR(s,e),h=await new WR(s,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=600*1e3;class rC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!Hb(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(Vi(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tv(e))}saveEventToCache(e){this.cachedEventUids.add(Tv(e)),this.lastProcessedEventTime=Date.now()}}function Tv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Hb({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(r,e={}){return ps(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lC=/^https?/;async function uC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await aC(r);for(const n of e)try{if(cC(n))return}catch{}ai(r,"unauthorized-domain")}function cC(r){const e=Gm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===s}if(!lC.test(n))return!1;if(oC.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=new du(3e4,6e4);function Sv(){const r=ki().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function fC(r){return new Promise((e,n)=>{var o,u,h;function s(){Sv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sv(),n(Vi(r,"network-request-failed"))},timeout:hC.get()})}if((u=(o=ki().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((h=ki().gapi)!=null&&h.load)s();else{const m=rR("iframefcb");return ki()[m]=()=>{gapi.load?s():n(Vi(r,"network-request-failed"))},Cb(`${iR()}?onload=${m}`).catch(g=>n(g))}}).catch(e=>{throw hh=null,e})}let hh=null;function dC(r){return hh=hh||fC(r),hh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new du(5e3,15e3),pC="__/auth/iframe",gC="emulator/auth/iframe",yC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_C=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vC(r){const e=r.config;be(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?wp(e,gC):`https://${r.config.authDomain}/${pC}`,s={apiKey:e.apiKey,appName:r.name,v:wo},o=_C.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${fu(s).slice(1)}`}async function EC(r){const e=await dC(r),n=ki().gapi;return be(n,r,"internal-error"),e.open({where:document.body,url:vC(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yC,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=Vi(r,"network-request-failed"),m=ki().setTimeout(()=>{u(h)},mC.get());function g(){ki().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TC=500,SC=600,wC="_blank",AC="http://localhost";class wv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xC(r,e,n,s=TC,o=SC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...bC,width:s.toString(),height:o.toString(),top:u,left:h},p=nn().toLowerCase();n&&(m=bb(p)?wC:n),vb(p)&&(e=e||AC,g.scrollbars="yes");const E=Object.entries(g).reduce((A,[k,j])=>`${A}${k}=${j},`,"");if(K2(p)&&m!=="_self")return RC(e||"",m),new wv(null);const T=window.open(e||"",m,E);be(T,r,"popup-blocked");try{T.focus()}catch{}return new wv(T)}function RC(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="__/auth/handler",NC="emulator/auth/handler",IC=encodeURIComponent("fac");async function Av(r,e,n,s,o,u){be(r.config.authDomain,r,"auth-domain-config-required"),be(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:wo,eventId:o};if(e instanceof Db){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",gx(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))h[E]=T}if(e instanceof mu){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await r._getAppCheckToken(),p=g?`#${IC}=${encodeURIComponent(g)}`:"";return`${DC(r)}?${fu(m).slice(1)}${p}`}function DC({config:r}){return r.emulator?wp(r,NC):`https://${r.authDomain}/${CC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="webStorageSupport";class OC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lb,this._completeRedirectFn=nC,this._overrideRedirectResult=ZR}async _openPopup(e,n,s,o){var h;fr((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const u=await Av(e,n,s,Gm(),o);return xC(e,u,Np())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await Av(e,n,s,Gm(),o);return kR(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(fr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await EC(e),s=new rC(e);return n.register("authEvent",o=>(be(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Nm,{type:Nm},o=>{var h;const u=(h=o==null?void 0:o[0])==null?void 0:h[Nm];u!==void 0&&n(!!u),ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xb()||Eb()||xp()}}const MC=OC;var xv="@firebase/auth",Rv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jC(r){ho(new ia("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=s.options;be(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rb(r)},p=new eR(s,o,u,g);return cR(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ho(new ia("auth-internal",e=>{const n=Ao(e.getProvider("auth").getImmediate());return(s=>new VC(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rs(xv,Rv,kC(r)),rs(xv,Rv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=300,PC=nb("authIdTokenMaxAge")||LC;let Cv=null;const UC=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>PC)return;const o=n==null?void 0:n.token;Cv!==o&&(Cv=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function zC(r=lb()){const e=Tp(r,"auth");if(e.isInitialized())return e.getImmediate();const n=uR(r,{popupRedirectResolver:MC,persistence:[FR,OR,Lb]}),s=nb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=UC(u.toString());RR(n,h,()=>h(n.currentUser)),xR(n,m=>h(m))}}const o=eb("auth");return o&&hR(n,`http://${o}`),n}function BC(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}tR({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=Vi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",BC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jC("Browser");var Nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var as,Fb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,S){function C(){}C.prototype=S.prototype,N.F=S.prototype,N.prototype=new C,N.prototype.constructor=N,N.D=function(M,D,I){for(var R=Array(arguments.length-2),he=2;he<arguments.length;he++)R[he-2]=arguments[he];return S.prototype[D].apply(M,R)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,S,C){C||(C=0);const M=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)M[D]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(D=0;D<16;++D)M[D]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=N.g[0],C=N.g[1],D=N.g[2];let I=N.g[3],R;R=S+(I^C&(D^I))+M[0]+3614090360&4294967295,S=C+(R<<7&4294967295|R>>>25),R=I+(D^S&(C^D))+M[1]+3905402710&4294967295,I=S+(R<<12&4294967295|R>>>20),R=D+(C^I&(S^C))+M[2]+606105819&4294967295,D=I+(R<<17&4294967295|R>>>15),R=C+(S^D&(I^S))+M[3]+3250441966&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(I^C&(D^I))+M[4]+4118548399&4294967295,S=C+(R<<7&4294967295|R>>>25),R=I+(D^S&(C^D))+M[5]+1200080426&4294967295,I=S+(R<<12&4294967295|R>>>20),R=D+(C^I&(S^C))+M[6]+2821735955&4294967295,D=I+(R<<17&4294967295|R>>>15),R=C+(S^D&(I^S))+M[7]+4249261313&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(I^C&(D^I))+M[8]+1770035416&4294967295,S=C+(R<<7&4294967295|R>>>25),R=I+(D^S&(C^D))+M[9]+2336552879&4294967295,I=S+(R<<12&4294967295|R>>>20),R=D+(C^I&(S^C))+M[10]+4294925233&4294967295,D=I+(R<<17&4294967295|R>>>15),R=C+(S^D&(I^S))+M[11]+2304563134&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(I^C&(D^I))+M[12]+1804603682&4294967295,S=C+(R<<7&4294967295|R>>>25),R=I+(D^S&(C^D))+M[13]+4254626195&4294967295,I=S+(R<<12&4294967295|R>>>20),R=D+(C^I&(S^C))+M[14]+2792965006&4294967295,D=I+(R<<17&4294967295|R>>>15),R=C+(S^D&(I^S))+M[15]+1236535329&4294967295,C=D+(R<<22&4294967295|R>>>10),R=S+(D^I&(C^D))+M[1]+4129170786&4294967295,S=C+(R<<5&4294967295|R>>>27),R=I+(C^D&(S^C))+M[6]+3225465664&4294967295,I=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(I^S))+M[11]+643717713&4294967295,D=I+(R<<14&4294967295|R>>>18),R=C+(I^S&(D^I))+M[0]+3921069994&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(D^I&(C^D))+M[5]+3593408605&4294967295,S=C+(R<<5&4294967295|R>>>27),R=I+(C^D&(S^C))+M[10]+38016083&4294967295,I=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(I^S))+M[15]+3634488961&4294967295,D=I+(R<<14&4294967295|R>>>18),R=C+(I^S&(D^I))+M[4]+3889429448&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(D^I&(C^D))+M[9]+568446438&4294967295,S=C+(R<<5&4294967295|R>>>27),R=I+(C^D&(S^C))+M[14]+3275163606&4294967295,I=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(I^S))+M[3]+4107603335&4294967295,D=I+(R<<14&4294967295|R>>>18),R=C+(I^S&(D^I))+M[8]+1163531501&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(D^I&(C^D))+M[13]+2850285829&4294967295,S=C+(R<<5&4294967295|R>>>27),R=I+(C^D&(S^C))+M[2]+4243563512&4294967295,I=S+(R<<9&4294967295|R>>>23),R=D+(S^C&(I^S))+M[7]+1735328473&4294967295,D=I+(R<<14&4294967295|R>>>18),R=C+(I^S&(D^I))+M[12]+2368359562&4294967295,C=D+(R<<20&4294967295|R>>>12),R=S+(C^D^I)+M[5]+4294588738&4294967295,S=C+(R<<4&4294967295|R>>>28),R=I+(S^C^D)+M[8]+2272392833&4294967295,I=S+(R<<11&4294967295|R>>>21),R=D+(I^S^C)+M[11]+1839030562&4294967295,D=I+(R<<16&4294967295|R>>>16),R=C+(D^I^S)+M[14]+4259657740&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(C^D^I)+M[1]+2763975236&4294967295,S=C+(R<<4&4294967295|R>>>28),R=I+(S^C^D)+M[4]+1272893353&4294967295,I=S+(R<<11&4294967295|R>>>21),R=D+(I^S^C)+M[7]+4139469664&4294967295,D=I+(R<<16&4294967295|R>>>16),R=C+(D^I^S)+M[10]+3200236656&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(C^D^I)+M[13]+681279174&4294967295,S=C+(R<<4&4294967295|R>>>28),R=I+(S^C^D)+M[0]+3936430074&4294967295,I=S+(R<<11&4294967295|R>>>21),R=D+(I^S^C)+M[3]+3572445317&4294967295,D=I+(R<<16&4294967295|R>>>16),R=C+(D^I^S)+M[6]+76029189&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(C^D^I)+M[9]+3654602809&4294967295,S=C+(R<<4&4294967295|R>>>28),R=I+(S^C^D)+M[12]+3873151461&4294967295,I=S+(R<<11&4294967295|R>>>21),R=D+(I^S^C)+M[15]+530742520&4294967295,D=I+(R<<16&4294967295|R>>>16),R=C+(D^I^S)+M[2]+3299628645&4294967295,C=D+(R<<23&4294967295|R>>>9),R=S+(D^(C|~I))+M[0]+4096336452&4294967295,S=C+(R<<6&4294967295|R>>>26),R=I+(C^(S|~D))+M[7]+1126891415&4294967295,I=S+(R<<10&4294967295|R>>>22),R=D+(S^(I|~C))+M[14]+2878612391&4294967295,D=I+(R<<15&4294967295|R>>>17),R=C+(I^(D|~S))+M[5]+4237533241&4294967295,C=D+(R<<21&4294967295|R>>>11),R=S+(D^(C|~I))+M[12]+1700485571&4294967295,S=C+(R<<6&4294967295|R>>>26),R=I+(C^(S|~D))+M[3]+2399980690&4294967295,I=S+(R<<10&4294967295|R>>>22),R=D+(S^(I|~C))+M[10]+4293915773&4294967295,D=I+(R<<15&4294967295|R>>>17),R=C+(I^(D|~S))+M[1]+2240044497&4294967295,C=D+(R<<21&4294967295|R>>>11),R=S+(D^(C|~I))+M[8]+1873313359&4294967295,S=C+(R<<6&4294967295|R>>>26),R=I+(C^(S|~D))+M[15]+4264355552&4294967295,I=S+(R<<10&4294967295|R>>>22),R=D+(S^(I|~C))+M[6]+2734768916&4294967295,D=I+(R<<15&4294967295|R>>>17),R=C+(I^(D|~S))+M[13]+1309151649&4294967295,C=D+(R<<21&4294967295|R>>>11),R=S+(D^(C|~I))+M[4]+4149444226&4294967295,S=C+(R<<6&4294967295|R>>>26),R=I+(C^(S|~D))+M[11]+3174756917&4294967295,I=S+(R<<10&4294967295|R>>>22),R=D+(S^(I|~C))+M[2]+718787259&4294967295,D=I+(R<<15&4294967295|R>>>17),R=C+(I^(D|~S))+M[9]+3951481745&4294967295,N.g[0]=N.g[0]+S&4294967295,N.g[1]=N.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+I&4294967295}s.prototype.v=function(N,S){S===void 0&&(S=N.length);const C=S-this.blockSize,M=this.C;let D=this.h,I=0;for(;I<S;){if(D==0)for(;I<=C;)o(this,N,I),I+=this.blockSize;if(typeof N=="string"){for(;I<S;)if(M[D++]=N.charCodeAt(I++),D==this.blockSize){o(this,M),D=0;break}}else for(;I<S;)if(M[D++]=N[I++],D==this.blockSize){o(this,M),D=0;break}}this.h=D,this.o+=S},s.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var S=1;S<N.length-8;++S)N[S]=0;S=this.o*8;for(var C=N.length-8;C<N.length;++C)N[C]=S&255,S/=256;for(this.v(N),N=Array(16),S=0,C=0;C<4;++C)for(let M=0;M<32;M+=8)N[S++]=this.g[C]>>>M&255;return N};function u(N,S){var C=m;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=S(N)}function h(N,S){this.h=S;const C=[];let M=!0;for(let D=N.length-1;D>=0;D--){const I=N[D]|0;M&&I==S||(C[D]=I,M=!1)}this.g=C}var m={};function g(N){return-128<=N&&N<128?u(N,function(S){return new h([S|0],S<0?-1:0)}):new h([N|0],N<0?-1:0)}function p(N){if(isNaN(N)||!isFinite(N))return T;if(N<0)return B(p(-N));const S=[];let C=1;for(let M=0;N>=C;M++)S[M]=N/C|0,C*=4294967296;return new h(S,0)}function E(N,S){if(N.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(N.charAt(0)=="-")return B(E(N.substring(1),S));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(S,8));let M=T;for(let I=0;I<N.length;I+=8){var D=Math.min(8,N.length-I);const R=parseInt(N.substring(I,I+D),S);D<8?(D=p(Math.pow(S,D)),M=M.j(D).add(p(R))):(M=M.j(C),M=M.add(p(R)))}return M}var T=g(0),A=g(1),k=g(16777216);r=h.prototype,r.m=function(){if(U(this))return-B(this).m();let N=0,S=1;for(let C=0;C<this.g.length;C++){const M=this.i(C);N+=(M>=0?M:4294967296+M)*S,S*=4294967296}return N},r.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(j(this))return"0";if(U(this))return"-"+B(this).toString(N);const S=p(Math.pow(N,6));var C=this;let M="";for(;;){const D=se(C,S).g;C=$(C,D.j(S));let I=((C.g.length>0?C.g[0]:C.h)>>>0).toString(N);if(C=D,j(C))return I+M;for(;I.length<6;)I="0"+I;M=I+M}},r.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function j(N){if(N.h!=0)return!1;for(let S=0;S<N.g.length;S++)if(N.g[S]!=0)return!1;return!0}function U(N){return N.h==-1}r.l=function(N){return N=$(this,N),U(N)?-1:j(N)?0:1};function B(N){const S=N.g.length,C=[];for(let M=0;M<S;M++)C[M]=~N.g[M];return new h(C,~N.h).add(A)}r.abs=function(){return U(this)?B(this):this},r.add=function(N){const S=Math.max(this.g.length,N.g.length),C=[];let M=0;for(let D=0;D<=S;D++){let I=M+(this.i(D)&65535)+(N.i(D)&65535),R=(I>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);M=R>>>16,I&=65535,R&=65535,C[D]=R<<16|I}return new h(C,C[C.length-1]&-2147483648?-1:0)};function $(N,S){return N.add(B(S))}r.j=function(N){if(j(this)||j(N))return T;if(U(this))return U(N)?B(this).j(B(N)):B(B(this).j(N));if(U(N))return B(this.j(B(N)));if(this.l(k)<0&&N.l(k)<0)return p(this.m()*N.m());const S=this.g.length+N.g.length,C=[];for(var M=0;M<2*S;M++)C[M]=0;for(M=0;M<this.g.length;M++)for(let D=0;D<N.g.length;D++){const I=this.i(M)>>>16,R=this.i(M)&65535,he=N.i(D)>>>16,me=N.i(D)&65535;C[2*M+2*D]+=R*me,J(C,2*M+2*D),C[2*M+2*D+1]+=I*me,J(C,2*M+2*D+1),C[2*M+2*D+1]+=R*he,J(C,2*M+2*D+1),C[2*M+2*D+2]+=I*he,J(C,2*M+2*D+2)}for(N=0;N<S;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=S;N<2*S;N++)C[N]=0;return new h(C,0)};function J(N,S){for(;(N[S]&65535)!=N[S];)N[S+1]+=N[S]>>>16,N[S]&=65535,S++}function X(N,S){this.g=N,this.h=S}function se(N,S){if(j(S))throw Error("division by zero");if(j(N))return new X(T,T);if(U(N))return S=se(B(N),S),new X(B(S.g),B(S.h));if(U(S))return S=se(N,B(S)),new X(B(S.g),S.h);if(N.g.length>30){if(U(N)||U(S))throw Error("slowDivide_ only works with positive integers.");for(var C=A,M=S;M.l(N)<=0;)C=ge(C),M=ge(M);var D=ye(C,1),I=ye(M,1);for(M=ye(M,2),C=ye(C,2);!j(M);){var R=I.add(M);R.l(N)<=0&&(D=D.add(C),I=R),M=ye(M,1),C=ye(C,1)}return S=$(N,D.j(S)),new X(D,S)}for(D=T;N.l(S)>=0;){for(C=Math.max(1,Math.floor(N.m()/S.m())),M=Math.ceil(Math.log(C)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),I=p(C),R=I.j(S);U(R)||R.l(N)>0;)C-=M,I=p(C),R=I.j(S);j(I)&&(I=A),D=D.add(I),N=$(N,R)}return new X(D,N)}r.B=function(N){return se(this,N).h},r.and=function(N){const S=Math.max(this.g.length,N.g.length),C=[];for(let M=0;M<S;M++)C[M]=this.i(M)&N.i(M);return new h(C,this.h&N.h)},r.or=function(N){const S=Math.max(this.g.length,N.g.length),C=[];for(let M=0;M<S;M++)C[M]=this.i(M)|N.i(M);return new h(C,this.h|N.h)},r.xor=function(N){const S=Math.max(this.g.length,N.g.length),C=[];for(let M=0;M<S;M++)C[M]=this.i(M)^N.i(M);return new h(C,this.h^N.h)};function ge(N){const S=N.g.length+1,C=[];for(let M=0;M<S;M++)C[M]=N.i(M)<<1|N.i(M-1)>>>31;return new h(C,N.h)}function ye(N,S){const C=S>>5;S%=32;const M=N.g.length-C,D=[];for(let I=0;I<M;I++)D[I]=S>0?N.i(I+C)>>>S|N.i(I+C+1)<<32-S:N.i(I+C);return new h(D,N.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Fb=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=p,h.fromString=E,as=h}).apply(typeof Nv<"u"?Nv:typeof self<"u"?self:typeof window<"u"?window:{});var th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gb,Bl,$b,fh,Km,Qb,Kb,Yb;(function(){var r,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof th=="object"&&th];for(var y=0;y<c.length;++y){var b=c[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var b=s;c=c.split(".");for(var x=0;x<c.length-1;x++){var q=c[x];if(!(q in b))break e;b=b[q]}c=c[c.length-1],x=b[c],y=y(x),y!=x&&y!=null&&e(b,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var b=[],x;for(x in y)Object.prototype.hasOwnProperty.call(y,x)&&b.push([x,y[x]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function m(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function g(c,y,b){return c.call.apply(c.bind,arguments)}function p(c,y,b){return p=g,p.apply(null,arguments)}function E(c,y){var b=Array.prototype.slice.call(arguments,1);return function(){var x=b.slice();return x.push.apply(x,arguments),c.apply(this,x)}}function T(c,y){function b(){}b.prototype=y.prototype,c.Z=y.prototype,c.prototype=new b,c.prototype.constructor=c,c.Ob=function(x,q,Q){for(var ae=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)ae[Ce-2]=arguments[Ce];return y.prototype[q].apply(x,ae)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function k(c){const y=c.length;if(y>0){const b=Array(y);for(let x=0;x<y;x++)b[x]=c[x];return b}return[]}function j(c,y){for(let x=1;x<arguments.length;x++){const q=arguments[x];var b=typeof q;if(b=b!="object"?b:q?Array.isArray(q)?"array":b:"null",b=="array"||b=="object"&&typeof q.length=="number"){b=c.length||0;const Q=q.length||0;c.length=b+Q;for(let ae=0;ae<Q;ae++)c[b+ae]=q[ae]}else c.push(q)}}class U{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function B(c){h.setTimeout(()=>{throw c},0)}function $(){var c=N;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class J{constructor(){this.h=this.g=null}add(y,b){const x=X.get();x.set(y,b),this.h?this.h.next=x:this.g=x,this.h=x}}var X=new U(()=>new se,c=>c.reset());class se{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,ye=!1,N=new J,S=()=>{const c=Promise.resolve(void 0);ge=()=>{c.then(C)}};function C(){for(var c;c=$();){try{c.h.call(c.g)}catch(b){B(b)}var y=X;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}ye=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var I=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const b=()=>{};h.addEventListener("test",b,y),h.removeEventListener("test",b,y)}catch{}return c})();function R(c){return/^[\s\xa0]*$/.test(c)}function he(c,y){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}T(he,D),he.prototype.init=function(c,y){const b=this.type=c.type,x=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(b=="mouseover"?y=c.fromElement:b=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&he.Z.h.call(this)},he.prototype.h=function(){he.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),K=0;function re(c,y,b,x,q){this.listener=c,this.proxy=null,this.src=y,this.type=b,this.capture=!!x,this.ha=q,this.key=++K,this.da=this.fa=!1}function de(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Se(c,y,b){for(const x in c)y.call(b,c[x],x,c)}function He(c,y){for(const b in c)y.call(void 0,c[b],b,c)}function P(c){const y={};for(const b in c)y[b]=c[b];return y}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(c,y){let b,x;for(let q=1;q<arguments.length;q++){x=arguments[q];for(b in x)c[b]=x[b];for(let Q=0;Q<ne.length;Q++)b=ne[Q],Object.prototype.hasOwnProperty.call(x,b)&&(c[b]=x[b])}}function ce(c){this.src=c,this.g={},this.h=0}ce.prototype.add=function(c,y,b,x,q){const Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);const ae=Ie(c,y,x,q);return ae>-1?(y=c[ae],b||(y.fa=!1)):(y=new re(y,this.src,Q,!!x,q),y.fa=b,c.push(y)),y};function we(c,y){const b=y.type;if(b in c.g){var x=c.g[b],q=Array.prototype.indexOf.call(x,y,void 0),Q;(Q=q>=0)&&Array.prototype.splice.call(x,q,1),Q&&(de(y),c.g[b].length==0&&(delete c.g[b],c.h--))}}function Ie(c,y,b,x){for(let q=0;q<c.length;++q){const Q=c[q];if(!Q.da&&Q.listener==y&&Q.capture==!!b&&Q.ha==x)return q}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),Vt={};function lt(c,y,b,x,q){if(Array.isArray(y)){for(let Q=0;Q<y.length;Q++)lt(c,y[Q],b,x,q);return null}return b=Vo(b),c&&c[me]?c.J(y,b,m(x)?!!x.capture:!1,q):vs(c,y,b,!1,x,q)}function vs(c,y,b,x,q,Q){if(!y)throw Error("Invalid event type");const ae=m(q)?!!q.capture:!!q;let Ce=Es(c);if(Ce||(c[Be]=Ce=new ce(c)),b=Ce.add(y,b,x,ae,Q),b.proxy)return b;if(x=fa(),b.proxy=x,x.src=c,x.listener=b,c.addEventListener)I||(q=ae),q===void 0&&(q=!1),c.addEventListener(y.toString(),x,q);else if(c.attachEvent)c.attachEvent(ci(y.toString()),x);else if(c.addListener&&c.removeListener)c.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return b}function fa(){function c(b){return y.call(c.src,c.listener,b)}const y=Oo;return c}function da(c,y,b,x,q){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)da(c,y[Q],b,x,q);else x=m(x)?!!x.capture:!!x,b=Vo(b),c&&c[me]?(c=c.i,Q=String(y).toString(),Q in c.g&&(y=c.g[Q],b=Ie(y,b,x,q),b>-1&&(de(y[b]),Array.prototype.splice.call(y,b,1),y.length==0&&(delete c.g[Q],c.h--)))):c&&(c=Es(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Ie(y,b,x,q)),(b=c>-1?y[c]:null)&&ma(b))}function ma(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[me])we(y.i,c);else{var b=c.type,x=c.proxy;y.removeEventListener?y.removeEventListener(b,x,c.capture):y.detachEvent?y.detachEvent(ci(b),x):y.addListener&&y.removeListener&&y.removeListener(x),(b=Es(y))?(we(b,c),b.h==0&&(b.src=null,y[Be]=null)):de(c)}}}function ci(c){return c in Vt?Vt[c]:Vt[c]="on"+c}function Oo(c,y){if(c.da)c=!0;else{y=new he(y,this);const b=c.listener,x=c.ha||c.src;c.fa&&ma(c),c=b.call(x,y)}return c}function Es(c){return c=c[Be],c instanceof ce?c:null}var Mo="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vo(c){return typeof c=="function"?c:(c[Mo]||(c[Mo]=function(y){return c.handleEvent(y)}),c[Mo])}function Tt(){M.call(this),this.i=new ce(this),this.M=this,this.G=null}T(Tt,M),Tt.prototype[me]=!0,Tt.prototype.removeEventListener=function(c,y,b,x){da(this,c,y,b,x)};function kt(c,y){var b,x=c.G;if(x)for(b=[];x;x=x.G)b.push(x);if(c=c.M,x=y.type||y,typeof y=="string")y=new D(y,c);else if(y instanceof D)y.target=y.target||c;else{var q=y;y=new D(x,c),oe(y,q)}q=!0;let Q,ae;if(b)for(ae=b.length-1;ae>=0;ae--)Q=y.g=b[ae],q=yr(Q,x,!0,y)&&q;if(Q=y.g=c,q=yr(Q,x,!0,y)&&q,q=yr(Q,x,!1,y)&&q,b)for(ae=0;ae<b.length;ae++)Q=y.g=b[ae],q=yr(Q,x,!1,y)&&q}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const b=c.g[y];for(let x=0;x<b.length;x++)de(b[x]);delete c.g[y],c.h--}}this.G=null},Tt.prototype.J=function(c,y,b,x){return this.i.add(String(c),y,!1,b,x)},Tt.prototype.K=function(c,y,b,x){return this.i.add(String(c),y,!0,b,x)};function yr(c,y,b,x){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let Q=0;Q<y.length;++Q){const ae=y[Q];if(ae&&!ae.da&&ae.capture==b){const Ce=ae.listener,gt=ae.ha||ae.src;ae.fa&&we(c.i,ae),q=Ce.call(gt,x)!==!1&&q}}return q&&!x.defaultPrevented}function yf(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(c,y||0)}function wu(c){c.g=yf(()=>{c.g=null,c.i&&(c.i=!1,wu(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class rn extends M{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:wu(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bs(c){M.call(this),this.h=c,this.g={}}T(bs,M);var ko=[];function jo(c){Se(c.g,function(y,b){this.g.hasOwnProperty(b)&&ma(y)},c),c.g={}}bs.prototype.N=function(){bs.Z.N.call(this),jo(this)},bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _r=h.JSON.stringify,_f=h.JSON.parse,Au=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function xu(){}function Ru(){}var Gn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qt(){D.call(this,"d")}T(qt,D);function Nn(){D.call(this,"c")}T(Nn,D);var pt={},Cu=null;function pa(){return Cu=Cu||new Tt}pt.Ia="serverreachability";function Nu(c){D.call(this,pt.Ia,c)}T(Nu,D);function hi(c){const y=pa();kt(y,new Nu(y))}pt.STAT_EVENT="statevent";function Ts(c,y){D.call(this,pt.STAT_EVENT,c),this.stat=y}T(Ts,D);function St(c){const y=pa();kt(y,new Ts(y,c))}pt.Ja="timingevent";function fi(c,y){D.call(this,pt.Ja,c),this.size=y}T(fi,D);function di(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function $n(){this.g=!0}$n.prototype.ua=function(){this.g=!1};function vf(c,y,b,x,q,Q){c.info(function(){if(c.g)if(Q){var ae="",Ce=Q.split("&");for(let $e=0;$e<Ce.length;$e++){var gt=Ce[$e].split("=");if(gt.length>1){const ut=gt[0];gt=gt[1];const Mn=ut.split("_");ae=Mn.length>=2&&Mn[1]=="type"?ae+(ut+"="+gt+"&"):ae+(ut+"=redacted&")}}}else ae=null;else ae=Q;return"XMLHTTP REQ ("+x+") [attempt "+q+"]: "+y+`
`+b+`
`+ae})}function Iu(c,y,b,x,q,Q,ae){c.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+q+"]: "+y+`
`+b+`
`+Q+" "+ae})}function mi(c,y,b,x){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ef(c,b)+(x?" "+x:"")})}function Ss(c,y){c.info(function(){return"TIMEOUT: "+y})}$n.prototype.info=function(){};function Ef(c,y){if(!c.g)return y;if(!y)return null;try{const Q=JSON.parse(y);if(Q){for(c=0;c<Q.length;c++)if(Array.isArray(Q[c])){var b=Q[c];if(!(b.length<2)){var x=b[1];if(Array.isArray(x)&&!(x.length<1)){var q=x[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ae=1;ae<x.length;ae++)x[ae]=""}}}}return _r(Q)}catch{return y}}var ws={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Lo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Po;function As(){}T(As,xu),As.prototype.g=function(){return new XMLHttpRequest},Po=new As;function Bi(c){return encodeURIComponent(String(c))}function Du(c){var y=1;c=c.split(":");const b=[];for(;y>0&&c.length;)b.push(c.shift()),y--;return c.length&&b.push(c.join(":")),b}function Qn(c,y,b,x){this.j=c,this.i=y,this.l=b,this.S=x||1,this.V=new bs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Kn}function Kn(){this.i=null,this.g="",this.h=!1}var wt={},Pt={};function pi(c,y,b){c.M=1,c.A=xs(xt(y)),c.u=b,c.R=!0,ga(c,null)}function ga(c,y){c.F=Date.now(),gi(c),c.B=xt(c.A);var b=c.B,x=c.S;Array.isArray(x)||(x=[String(x)]),Ea(b.i,"t",x),c.C=0,b=c.j.L,c.h=new Kn,c.g=$u(c.j,b?y:null,!c.u),c.P>0&&(c.O=new rn(p(c.Y,c,c.g),c.P)),y=c.V,b=c.g,x=c.ba;var q="readystatechange";Array.isArray(q)||(q&&(ko[0]=q.toString()),q=ko);for(let Q=0;Q<q.length;Q++){const ae=lt(b,q[Q],x||y.handleEvent,!1,y.h||y);if(!ae)break;y.g[ae.key]=ae}y=c.J?P(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),hi(),vf(c.i,c.v,c.B,c.l,c.S,c.u)}Qn.prototype.ba=function(c){c=c.target;const y=this.O;y&&Wn(c)==3?y.j():this.Y(c)},Qn.prototype.Y=function(c){try{if(c==this.g)e:{const Ce=Wn(this.g),gt=this.g.ya(),$e=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||Ht(this.g)))){this.K||Ce!=4||gt==7||(gt==8||$e<=0?hi(3):hi(2)),yi(this);var y=this.g.ca();this.X=y;var b=bf(this);if(this.o=y==200,Iu(this.i,this.v,this.B,this.l,this.S,Ce,y),this.o){if(this.U&&!this.L){t:{if(this.g){var x,q=this.g;if((x=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(x)){var Q=x;break t}}Q=null}if(c=Q)mi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_i(this,c);else{this.o=!1,this.m=3,St(12),yn(this),In(this);break e}}if(this.R){c=!0;let ut;for(;!this.K&&this.C<b.length;)if(ut=Mu(this,b),ut==Pt){Ce==4&&(this.m=4,St(14),c=!1),mi(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==wt){this.m=4,St(15),mi(this.i,this.l,b,"[Invalid Chunk]"),c=!1;break}else mi(this.i,this.l,ut,null),_i(this,ut);if(Ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||b.length!=0||this.h.h||(this.m=1,St(16),c=!1),this.o=this.o&&c,!c)mi(this.i,this.l,b,"[Invalid Chunked Response]"),yn(this),In(this);else if(b.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Zo(ae),ae.P=!0,St(11))}}else mi(this.i,this.l,b,null),_i(this,b);Ce==4&&yn(this),this.o&&!this.K&&(Ce==4?qu(this.j,this):(this.o=!1,gi(this)))}else Hi(this.g),y==400&&b.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),yn(this),In(this)}}}catch{}finally{}};function bf(c){if(!Ou(c))return c.g.la();const y=Ht(c.g);if(y==="")return"";let b="";const x=y.length,q=Wn(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return yn(c),In(c),"";c.h.i=new h.TextDecoder}for(let Q=0;Q<x;Q++)c.h.h=!0,b+=c.h.i.decode(y[Q],{stream:!(q&&Q==x-1)});return y.length=0,c.h.g+=b,c.C=0,c.h.g}function Ou(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Mu(c,y){var b=c.C,x=y.indexOf(`
`,b);return x==-1?Pt:(b=Number(y.substring(b,x)),isNaN(b)?wt:(x+=1,x+b>y.length?Pt:(y=y.slice(x,x+b),c.C=x+b,y)))}Qn.prototype.cancel=function(){this.K=!0,yn(this)};function gi(c){c.T=Date.now()+c.H,ya(c,c.H)}function ya(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=di(p(c.aa,c),y)}function yi(c){c.D&&(h.clearTimeout(c.D),c.D=null)}Qn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Ss(this.i,this.B),this.M!=2&&(hi(),St(17)),yn(this),this.m=2,In(this)):ya(this,this.T-c)};function In(c){c.j.I==0||c.K||qu(c.j,c)}function yn(c){yi(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,jo(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function _i(c,y){try{var b=c.j;if(b.I!=0&&(b.g==c||Ei(b.h,c))){if(!c.L&&Ei(b.h,c)&&b.I==3){try{var x=b.Ba.g.parse(y)}catch{x=null}if(Array.isArray(x)&&x.length==3){var q=x;if(q[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<c.F)Aa(b),xr(b);else break e;Ms(b),St(18)}}else b.xa=q[1],0<b.xa-b.K&&q[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=di(p(b.Va,b),6e3));vi(b.h)<=1&&b.ta&&(b.ta=void 0)}else xi(b,11)}else if((c.L||b.g==c)&&Aa(b),!R(y))for(q=b.Ba.g.parse(y),y=0;y<q.length;y++){let $e=q[y];const ut=$e[0];if(!(ut<=b.K))if(b.K=ut,$e=$e[1],b.I==2)if($e[0]=="c"){b.M=$e[1],b.ba=$e[2];const Mn=$e[3];Mn!=null&&(b.ka=Mn,b.j.info("VER="+b.ka));const Ri=$e[4];Ri!=null&&(b.za=Ri,b.j.info("SVER="+b.za));const Jn=$e[5];Jn!=null&&typeof Jn=="number"&&Jn>0&&(x=1.5*Jn,b.O=x,b.j.info("backChannelRequestTimeoutMs_="+x)),x=b;const Zn=c.g;if(Zn){const Vs=Zn.g?Zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vs){var Q=x.h;Q.g||Vs.indexOf("spdy")==-1&&Vs.indexOf("quic")==-1&&Vs.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Bo(Q,Q.h),Q.h=null))}if(x.G){const xa=Zn.g?Zn.g.getResponseHeader("X-HTTP-Session-Id"):null;xa&&(x.wa=xa,Ye(x.J,x.G,xa))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-c.F,b.j.info("Handshake RTT: "+b.T+"ms")),x=b;var ae=c;if(x.na=Gu(x,x.L?x.ba:null,x.W),ae.L){qo(x.h,ae);var Ce=ae,gt=x.O;gt&&(Ce.H=gt),Ce.D&&(yi(Ce),gi(Ce)),x.g=ae}else zu(x);b.i.length>0&&Ai(b)}else $e[0]!="stop"&&$e[0]!="close"||xi(b,7);else b.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?xi(b,7):Wo(b):$e[0]!="noop"&&b.l&&b.l.qa($e),b.A=0)}}hi(4)}catch{}}var At=class{constructor(c,y){this.g=c,this.map=y}};function Uo(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function vi(c){return c.h?1:c.g?c.g.size:0}function Ei(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Bo(c,y){c.g?c.g.add(y):c.h=y}function qo(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Uo.prototype.cancel=function(){if(this.i=Ho(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ho(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const b of c.g.values())y=y.concat(b.G);return y}return k(c.i)}var Vu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _a(c,y){if(c){c=c.split("&");for(let b=0;b<c.length;b++){const x=c[b].indexOf("=");let q,Q=null;x>=0?(q=c[b].substring(0,x),Q=c[b].substring(x+1)):q=c[b],y(q,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function _n(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof _n?(this.l=c.l,Ut(this,c.j),this.o=c.o,this.g=c.g,vr(this,c.u),this.h=c.h,Fo(this,Pu(c.i)),this.m=c.m):c&&(y=String(c).match(Vu))?(this.l=!1,Ut(this,y[1]||"",!0),this.o=bi(y[2]||""),this.g=bi(y[3]||"",!0),vr(this,y[4]),this.h=bi(y[5]||"",!0),Fo(this,y[6]||"",!0),this.m=bi(y[7]||"")):(this.l=!1,this.i=new br(null,this.l))}_n.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(Rs(y,va,!0),":");var b=this.g;return(b||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Rs(y,va,!0),"@"),c.push(Bi(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&c.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&c.push("/"),c.push(Rs(b,b.charAt(0)=="/"?Go:ku,!0))),(b=this.i.toString())&&c.push("?",b),(b=this.m)&&c.push("#",Rs(b,ju)),c.join("")},_n.prototype.resolve=function(c){const y=xt(this);let b=!!c.j;b?Ut(y,c.j):b=!!c.o,b?y.o=c.o:b=!!c.g,b?y.g=c.g:b=c.u!=null;var x=c.h;if(b)vr(y,c.u);else if(b=!!c.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var q=y.h.lastIndexOf("/");q!=-1&&(x=y.h.slice(0,q+1)+x)}if(q=x,q==".."||q==".")x="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){x=q.lastIndexOf("/",0)==0,q=q.split("/");const Q=[];for(let ae=0;ae<q.length;){const Ce=q[ae++];Ce=="."?x&&ae==q.length&&Q.push(""):Ce==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),x&&ae==q.length&&Q.push("")):(Q.push(Ce),x=!0)}x=Q.join("/")}else x=q}return b?y.h=x:b=c.i.toString()!=="",b?Fo(y,Pu(c.i)):b=!!c.m,b&&(y.m=c.m),y};function xt(c){return new _n(c)}function Ut(c,y,b){c.j=b?bi(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function vr(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Fo(c,y,b){y instanceof br?(c.i=y,ba(c.i,c.l)):(b||(y=Rs(y,Er)),c.i=new br(y,c.l))}function Ye(c,y,b){c.i.set(y,b)}function xs(c){return Ye(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function bi(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Rs(c,y,b){return typeof c=="string"?(c=encodeURI(c).replace(y,on),b&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function on(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var va=/[#\/\?@]/g,ku=/[#\?:]/g,Go=/[#\?]/g,Er=/[#\?@]/g,ju=/#/g;function br(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function ln(c){c.g||(c.g=new Map,c.h=0,c.i&&_a(c.i,function(y,b){c.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}r=br.prototype,r.add=function(c,y){ln(this),this.i=null,c=Tr(this,c);let b=this.g.get(c);return b||this.g.set(c,b=[]),b.push(y),this.h+=1,this};function Lu(c,y){ln(c),y=Tr(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function $o(c,y){return ln(c),y=Tr(c,y),c.g.has(y)}r.forEach=function(c,y){ln(this),this.g.forEach(function(b,x){b.forEach(function(q){c.call(y,q,x,this)},this)},this)};function Qo(c,y){ln(c);let b=[];if(typeof y=="string")$o(c,y)&&(b=b.concat(c.g.get(Tr(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)b=b.concat(c[y]);return b}r.set=function(c,y){return ln(this),this.i=null,c=Tr(this,c),$o(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=Qo(this,c),c.length>0?String(c[0]):y):y};function Ea(c,y,b){Lu(c,y),b.length>0&&(c.i=null,c.g.set(Tr(c,y),k(b)),c.h+=b.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let x=0;x<y.length;x++){var b=y[x];const q=Bi(b);b=Qo(this,b);for(let Q=0;Q<b.length;Q++){let ae=q;b[Q]!==""&&(ae+="="+Bi(b[Q])),c.push(ae)}}return this.i=c.join("&")};function Pu(c){const y=new br;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function Tr(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function ba(c,y){y&&!c.j&&(ln(c),c.i=null,c.g.forEach(function(b,x){const q=x.toLowerCase();x!=q&&(Lu(this,x),Ea(this,q,b))},c)),c.j=y}function Yn(c,y){const b=new $n;if(h.Image){const x=new Image;x.onload=E(Dn,b,"TestLoadImage: loaded",!0,y,x),x.onerror=E(Dn,b,"TestLoadImage: error",!1,y,x),x.onabort=E(Dn,b,"TestLoadImage: abort",!1,y,x),x.ontimeout=E(Dn,b,"TestLoadImage: timeout",!1,y,x),h.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=c}else y(!1)}function Ko(c,y){const b=new $n,x=new AbortController,q=setTimeout(()=>{x.abort(),Dn(b,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:x.signal}).then(Q=>{clearTimeout(q),Q.ok?Dn(b,"TestPingServer: ok",!0,y):Dn(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Dn(b,"TestPingServer: error",!1,y)})}function Dn(c,y,b,x,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),x(b)}catch{}}function Sr(){this.g=new Au}function Ti(c){this.i=c.Sb||null,this.h=c.ab||!1}T(Ti,xu),Ti.prototype.g=function(){return new Cs(this.i,this.h)};function Cs(c,y){Tt.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Cs,Tt),r=Cs.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Xn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wr(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ta(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ta(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?wr(this):Xn(this),this.readyState==3&&Ta(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,wr(this))},r.Na=function(c){this.g&&(this.response=c,wr(this))},r.ga=function(){this.g&&wr(this)};function wr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Xn(c)}r.setRequestHeader=function(c,y){this.A.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,c.push(b[0]+": "+b[1]),b=y.next();return c.join(`\r
`)};function Xn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Cs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function On(c){let y="";return Se(c,function(b,x){y+=x,y+=":",y+=b,y+=`\r
`}),y}function Ns(c,y,b){e:{for(x in b){var x=!1;break e}x=!0}x||(b=On(b),typeof c=="string"?b!=null&&Bi(b):Ye(c,y,b))}function Ze(c){Tt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Ze,Tt);var Si=/^https?$/i,Yo=["POST","PUT"];r=Ze.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,y,b,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Po.g(),this.g.onreadystatechange=A(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Q){Is(this,Q);return}if(c=b||"",b=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var q in x)b.set(q,x[q]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const Q of x.keys())b.set(Q,x.get(Q));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(b.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(Yo,y,void 0)>=0)||x||q||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ae]of b)this.g.setRequestHeader(Q,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(Q){Is(this,Q)}};function Is(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,Xo(c),qi(c)}function Xo(c){c.A||(c.A=!0,kt(c,"complete"),kt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,kt(this,"complete"),kt(this,"abort"),qi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qi(this,!0)),Ze.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Ds(this):this.Xa())},r.Xa=function(){Ds(this)};function Ds(c){if(c.h&&typeof u<"u"){if(c.v&&Wn(c)==4)setTimeout(c.Ca.bind(c),0);else if(kt(c,"readystatechange"),Wn(c)==4){c.h=!1;try{const Q=c.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var x;if(x=Q===0){let ae=String(c.D).match(Vu)[1]||null;!ae&&h.self&&h.self.location&&(ae=h.self.location.protocol.slice(0,-1)),x=!Si.test(ae?ae.toLowerCase():"")}b=x}if(b)kt(c,"complete"),kt(c,"success");else{c.o=6;try{var q=Wn(c)>2?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.ca()+"]",Xo(c)}}finally{qi(c)}}}}function qi(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const b=c.g;c.g=null,y||kt(c,"ready");try{b.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Wn(c){return c.g?c.g.readyState:0}r.ca=function(){try{return Wn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),_f(y)}};function Ht(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Hi(c){const y={};c=(c.g&&Wn(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<c.length;x++){if(R(c[x]))continue;var b=Du(c[x]);const q=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Q=y[q]||[];y[q]=Q,Q.push(b)}He(y,function(x){return x.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(c,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[c]||y}function Ar(c){this.za=0,this.i=[],this.j=new $n,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wi("baseRetryDelayMs",5e3,c),this.Za=wi("retryDelaySeedMs",1e4,c),this.Ta=wi("forwardChannelMaxRetries",2,c),this.va=wi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Uo(c&&c.concurrentRequestLimit),this.Ba=new Sr,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ar.prototype,r.ka=8,r.I=1,r.connect=function(c,y,b,x){St(0),this.W=c,this.H=y||{},b&&x!==void 0&&(this.H.OSID=b,this.H.OAID=x),this.F=this.X,this.J=Gu(this,null,this.W),Ai(this)};function Wo(c){if(Sa(c),c.I==3){var y=c.V++,b=xt(c.J);if(Ye(b,"SID",c.M),Ye(b,"RID",y),Ye(b,"TYPE","terminate"),Os(c,b),y=new Qn(c,c.j,y),y.M=2,y.A=xs(xt(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!b&&h.Image&&(new Image().src=y.A,b=!0),b||(y.g=$u(y.j,null),y.g.ea(y.A)),y.F=Date.now(),gi(y)}Fu(c)}function xr(c){c.g&&(Zo(c),c.g.cancel(),c.g=null)}function Sa(c){xr(c),c.v&&(h.clearTimeout(c.v),c.v=null),Aa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function Ai(c){if(!zo(c.h)&&!c.m){c.m=!0;var y=c.Ea;ge||S(),ye||(ge(),ye=!0),N.add(y,c),c.D=0}}function wa(c,y){return vi(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=di(p(c.Ea,c,y),Hu(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const q=new Qn(this,this.j,c);let Q=this.o;if(this.U&&(Q?(Q=P(Q),oe(Q,this.U)):Q=this.U),this.u!==null||this.R||(q.J=Q,Q=null),this.S)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var x=this.i[b];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(y+=x,y>4096){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=Uu(this,q,y),b=xt(this.J),Ye(b,"RID",c),Ye(b,"CVER",22),this.G&&Ye(b,"X-HTTP-Session-Id",this.G),Os(this,b),Q&&(this.R?y="headers="+Bi(On(Q))+"&"+y:this.u&&Ns(b,this.u,Q)),Bo(this.h,q),this.Ra&&Ye(b,"TYPE","init"),this.S?(Ye(b,"$req",y),Ye(b,"SID","null"),q.U=!0,pi(q,b,null)):pi(q,b,y),this.I=2}}else this.I==3&&(c?Jo(this,c):this.i.length==0||zo(this.h)||Jo(this))};function Jo(c,y){var b;y?b=y.l:b=c.V++;const x=xt(c.J);Ye(x,"SID",c.M),Ye(x,"RID",b),Ye(x,"AID",c.K),Os(c,x),c.u&&c.o&&Ns(x,c.u,c.o),b=new Qn(c,c.j,b,c.D+1),c.u===null&&(b.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Uu(c,b,1e3),b.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Bo(c.h,b),pi(b,x,y)}function Os(c,y){c.H&&Se(c.H,function(b,x){Ye(y,x,b)}),c.l&&Se({},function(b,x){Ye(y,x,b)})}function Uu(c,y,b){b=Math.min(c.i.length,b);const x=c.l?p(c.l.Ka,c.l,c):null;e:{var q=c.i;let Ce=-1;for(;;){const gt=["count="+b];Ce==-1?b>0?(Ce=q[0].g,gt.push("ofs="+Ce)):Ce=0:gt.push("ofs="+Ce);let $e=!0;for(let ut=0;ut<b;ut++){var Q=q[ut].g;const Mn=q[ut].map;if(Q-=Ce,Q<0)Ce=Math.max(0,q[ut].g-100),$e=!1;else try{Q="req"+Q+"_"||"";try{var ae=Mn instanceof Map?Mn:Object.entries(Mn);for(const[Ri,Jn]of ae){let Zn=Jn;m(Jn)&&(Zn=_r(Jn)),gt.push(Q+Ri+"="+encodeURIComponent(Zn))}}catch(Ri){throw gt.push(Q+"type="+encodeURIComponent("_badmap")),Ri}}catch{x&&x(Mn)}}if($e){ae=gt.join("&");break e}}ae=void 0}return c=c.i.splice(0,b),y.G=c,ae}function zu(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;ge||S(),ye||(ge(),ye=!0),N.add(y,c),c.A=0}}function Ms(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=di(p(c.Da,c),Hu(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,Bu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=di(p(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),xr(this),Bu(this))};function Zo(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function Bu(c){c.g=new Qn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=xt(c.na);Ye(y,"RID","rpc"),Ye(y,"SID",c.M),Ye(y,"AID",c.K),Ye(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ye(y,"TO",c.ia),Ye(y,"TYPE","xmlhttp"),Os(c,y),c.u&&c.o&&Ns(y,c.u,c.o),c.O&&(c.g.H=c.O);var b=c.g;c=c.ba,b.M=1,b.A=xs(xt(y)),b.u=null,b.R=!0,ga(b,c)}r.Va=function(){this.C!=null&&(this.C=null,xr(this),Ms(this),St(19))};function Aa(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function qu(c,y){var b=null;if(c.g==y){Aa(c),Zo(c),c.g=null;var x=2}else if(Ei(c.h,y))b=y.G,qo(c.h,y),x=1;else return;if(c.I!=0){if(y.o)if(x==1){b=y.u?y.u.length:0,y=Date.now()-y.F;var q=c.D;x=pa(),kt(x,new fi(x,b)),Ai(c)}else zu(c);else if(q=y.m,q==3||q==0&&y.X>0||!(x==1&&wa(c,y)||x==2&&Ms(c)))switch(b&&b.length>0&&(y=c.h,y.i=y.i.concat(b)),q){case 1:xi(c,5);break;case 4:xi(c,10);break;case 3:xi(c,6);break;default:xi(c,2)}}}function Hu(c,y){let b=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(b*=2),b*y}function xi(c,y){if(c.j.info("Error code "+y),y==2){var b=p(c.bb,c),x=c.Ua;const q=!x;x=new _n(x||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ut(x,"https"),xs(x),q?Yn(x.toString(),b):Ko(x.toString(),b)}else St(2);c.I=0,c.l&&c.l.pa(y),Fu(c),Sa(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Fu(c){if(c.I=0,c.ja=[],c.l){const y=Ho(c.h);(y.length!=0||c.i.length!=0)&&(j(c.ja,y),j(c.ja,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.oa()}}function Gu(c,y,b){var x=b instanceof _n?xt(b):new _n(b);if(x.g!="")y&&(x.g=y+"."+x.g),vr(x,x.u);else{var q=h.location;x=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const Q=new _n(null);x&&Ut(Q,x),y&&(Q.g=y),q&&vr(Q,q),b&&(Q.h=b),x=Q}return b=c.G,y=c.wa,b&&y&&Ye(x,b,y),Ye(x,"VER",c.ka),Os(c,x),x}function $u(c,y,b){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new Ze(new Ti({ab:b})):new Ze(c.ma),y.Fa(c.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qu(){}r=Qu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Rr(){}Rr.prototype.g=function(c,y){return new sn(c,y)};function sn(c,y){Tt.call(this),this.g=new Ar(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!R(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Fi(this)}T(sn,Tt),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Wo(this.g)},sn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var b={};b.__data__=c,c=b}else this.v&&(b={},b.__data__=_r(c),c=b);y.i.push(new At(y.Ya++,c)),y.I==3&&Ai(y)},sn.prototype.N=function(){this.g.l=null,delete this.j,Wo(this.g),delete this.g,sn.Z.N.call(this)};function Ku(c){qt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const b in y){c=b;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}T(Ku,qt);function Yu(){Nn.call(this),this.status=1}T(Yu,Nn);function Fi(c){this.g=c}T(Fi,Qu),Fi.prototype.ra=function(){kt(this.g,"a")},Fi.prototype.qa=function(c){kt(this.g,new Ku(c))},Fi.prototype.pa=function(c){kt(this.g,new Yu)},Fi.prototype.oa=function(){kt(this.g,"b")},Rr.prototype.createWebChannel=Rr.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,Yb=function(){return new Rr},Kb=function(){return pa()},Qb=pt,Km={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ws.NO_ERROR=0,ws.TIMEOUT=8,ws.HTTP_ERROR=6,fh=ws,Lo.COMPLETE="complete",$b=Lo,Ru.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,Bl=Ru,Ze.prototype.listenOnce=Ze.prototype.K,Ze.prototype.getLastError=Ze.prototype.Ha,Ze.prototype.getLastErrorCode=Ze.prototype.ya,Ze.prototype.getStatus=Ze.prototype.ca,Ze.prototype.getResponseJson=Ze.prototype.La,Ze.prototype.getResponseText=Ze.prototype.la,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Fa,Gb=Ze}).apply(typeof th<"u"?th:typeof self<"u"?self:typeof window<"u"?window:{});const Iv="@firebase/firestore",Dv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=new Ep("@firebase/firestore");function no(){return sa.logLevel}function ue(r,...e){if(sa.logLevel<=Le.DEBUG){const n=e.map(Dp);sa.debug(`Firestore (${Ro}): ${r}`,...n)}}function dr(r,...e){if(sa.logLevel<=Le.ERROR){const n=e.map(Dp);sa.error(`Firestore (${Ro}): ${r}`,...n)}}function mo(r,...e){if(sa.logLevel<=Le.WARN){const n=e.map(Dp);sa.warn(`Firestore (${Ro}): ${r}`,...n)}}function Dp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Xb(r,s,n)}function Xb(r,e,n){let s=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw dr(s),new Error(s)}function Ke(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||Xb(e,o,s)}function Re(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends gr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Zt.UNAUTHENTICATED)))}shutdown(){}}class HC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class FC{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new ur;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ur,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ur)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ke(typeof s.accessToken=="string",31837,{l:s}),new Wb(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class GC{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $C{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new GC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ov{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ii(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const s=u=>{u.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,ue("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ov(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ov(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=KC(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Pe(r,e){return r<e?-1:r>e?1:0}function Ym(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return Im(o)===Im(u)?Pe(o,u):Im(o)?1:-1}return Pe(r.length,e.length)}const YC=55296,XC=57343;function Im(r){const e=r.charCodeAt(0);return e>=YC&&e<=XC}function po(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="__name__";class Oi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Te(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Oi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Oi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Oi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Pe(e.length,n.length)}static compareSegments(e,n){const s=Oi.isNumericId(e),o=Oi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Oi.extractNumericId(e).compare(Oi.extractNumericId(n)):Ym(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return as.fromString(e.substring(4,e.length-2))}}class rt extends Oi{construct(e,n,s){return new rt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new le(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new rt(n)}static emptyPath(){return new rt([])}}const WC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends Oi{construct(e,n,s){return new Yt(e,n,s)}static isValidIdentifier(e){return WC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Mv}static keyField(){return new Yt([Mv])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new le(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new le(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new le(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(u(),o++)}if(u(),h)throw new le(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(n)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(rt.fromString(e))}static fromName(e){return new ve(rt.fromString(e).popFirst(5))}static empty(){return new ve(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(r,e,n){if(!n)throw new le(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function JC(r,e,n,s){if(e===!0&&s===!0)throw new le(ee.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Vv(r){if(!ve.isDocumentKey(r))throw new le(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function kv(r){if(ve.isDocumentKey(r))throw new le(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Zb(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Kh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function Cn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new le(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kh(r);throw new le(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(r,e){const n={typeString:r};return e&&(n.value=e),n}function gu(r,e){if(!Zb(r))throw new le(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new le(ee.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=-62135596800,Lv=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Lv);return new Je(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<jv)throw new le(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Lv}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gu(e,Je._jsonSchema))return new Je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:Mt("string",Je._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Je(0,0))}static max(){return new Ae(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=-1;function ZC(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(s===1e9?new Je(n+1,0):new Je(n,s));return new ls(o,ve.empty(),e)}function eN(r){return new ls(r.readTime,r.key,nu)}class ls{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ls(Ae.min(),ve.empty(),nu)}static max(){return new ls(Ae.max(),ve.empty(),nu)}}function tN(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(r.documentKey,e.documentKey),n!==0?n:Pe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==nN)throw r;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.reject(n)}static resolve(e){return new ie(((n,s)=>{n(e)}))}static reject(e){return new ie(((n,s)=>{s(e)}))}static waitFor(e){return new ie(((n,s)=>{let o=0,u=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++u,h&&u===o&&n()}),(g=>s(g)))})),h=!0,u===o&&n()}))}static or(e){let n=ie.resolve(!1);for(const s of e)n=n.next((o=>o?ie.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ie(((s,o)=>{const u=e.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;n(e[p]).next((E=>{h[p]=E,++m,m===u&&s(h)}),(E=>o(E)))}}))}static doWhile(e,n){return new ie(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function rN(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function No(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=-1;function Xh(r){return r==null}function Ch(r){return r===0&&1/r==-1/0}function sN(r){return typeof r=="number"&&Number.isInteger(r)&&!Ch(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="";function aN(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=Pv(e)),e=oN(r.get(n),e);return Pv(e)}function oN(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case eT:n+="";break;default:n+=u}}return n}function Pv(r){return r+eT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function gs(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function tT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n){this.comparator=e,this.root=n||Kt.EMPTY}insert(e,n){return new ft(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nh(this.root,e,this.comparator,!0)}}class nh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Kt.RED,this.left=o??Kt.EMPTY,this.right=u??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Kt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Kt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zv(this.data.getIterator())}getIteratorFrom(e){return new zv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Lt(this.comparator);return n.data=e,n}}class zv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new Rn([])}unionWith(e){let n=new Lt(Yt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return po(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new nT("Invalid base64 string: "+u):u}})(e);return new Xt(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new Xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const lN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function us(r){if(Ke(!!r,39018),typeof r=="string"){let e=0;const n=lN.exec(r);if(Ke(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:vt(r.seconds),nanos:vt(r.nanos)}}function vt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function cs(r){return typeof r=="string"?Xt.fromBase64String(r):Xt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="server_timestamp",rT="__type__",sT="__previous_value__",aT="__local_write_time__";function Vp(r){var n,s;return((s=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[rT])==null?void 0:s.stringValue)===iT}function Wh(r){const e=r.mapValue.fields[sT];return Vp(e)?Wh(e):e}function iu(r){const e=us(r.mapValue.fields[aT].timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n,s,o,u,h,m,g,p,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=E}}const Nh="(default)";class ru{constructor(e,n){this.projectId=e,this.database=n||Nh}static empty(){return new ru("","")}get isDefaultDatabase(){return this.database===Nh}isEqual(e){return e instanceof ru&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="__type__",cN="__max__",ih={mapValue:{}},lT="__vector__",Ih="value";function hs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Vp(r)?4:fN(r)?9007199254740991:hN(r)?10:11:Te(28295,{value:r})}function zi(r,e){if(r===e)return!0;const n=hs(r);if(n!==hs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return iu(r).isEqual(iu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=us(o.timestampValue),m=us(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return cs(o.bytesValue).isEqual(cs(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return vt(o.geoPointValue.latitude)===vt(u.geoPointValue.latitude)&&vt(o.geoPointValue.longitude)===vt(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return vt(o.integerValue)===vt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=vt(o.doubleValue),m=vt(u.doubleValue);return h===m?Ch(h)===Ch(m):isNaN(h)&&isNaN(m)}return!1})(r,e);case 9:return po(r.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Uv(h)!==Uv(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!zi(h[g],m[g])))return!1;return!0})(r,e);default:return Te(52216,{left:r})}}function su(r,e){return(r.values||[]).find((n=>zi(n,e)))!==void 0}function go(r,e){if(r===e)return 0;const n=hs(r),s=hs(e);if(n!==s)return Pe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(r.booleanValue,e.booleanValue);case 2:return(function(u,h){const m=vt(u.integerValue||u.doubleValue),g=vt(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return Bv(r.timestampValue,e.timestampValue);case 4:return Bv(iu(r),iu(e));case 5:return Ym(r.stringValue,e.stringValue);case 6:return(function(u,h){const m=cs(u),g=cs(h);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(u,h){const m=u.split("/"),g=h.split("/");for(let p=0;p<m.length&&p<g.length;p++){const E=Pe(m[p],g[p]);if(E!==0)return E}return Pe(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,h){const m=Pe(vt(u.latitude),vt(h.latitude));return m!==0?m:Pe(vt(u.longitude),vt(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return qv(r.arrayValue,e.arrayValue);case 10:return(function(u,h){var A,k,j,U;const m=u.fields||{},g=h.fields||{},p=(A=m[Ih])==null?void 0:A.arrayValue,E=(k=g[Ih])==null?void 0:k.arrayValue,T=Pe(((j=p==null?void 0:p.values)==null?void 0:j.length)||0,((U=E==null?void 0:E.values)==null?void 0:U.length)||0);return T!==0?T:qv(p,E)})(r.mapValue,e.mapValue);case 11:return(function(u,h){if(u===ih.mapValue&&h===ih.mapValue)return 0;if(u===ih.mapValue)return 1;if(h===ih.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=h.fields||{},E=Object.keys(p);g.sort(),E.sort();for(let T=0;T<g.length&&T<E.length;++T){const A=Ym(g[T],E[T]);if(A!==0)return A;const k=go(m[g[T]],p[E[T]]);if(k!==0)return k}return Pe(g.length,E.length)})(r.mapValue,e.mapValue);default:throw Te(23264,{he:n})}}function Bv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Pe(r,e);const n=us(r),s=us(e),o=Pe(n.seconds,s.seconds);return o!==0?o:Pe(n.nanos,s.nanos)}function qv(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=go(n[o],s[o]);if(u)return u}return Pe(n.length,s.length)}function yo(r){return Xm(r)}function Xm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=us(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return cs(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ve.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Xm(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${Xm(n.fields[h])}`;return o+"}"})(r.mapValue):Te(61005,{value:r})}function dh(r){switch(hs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wh(r);return e?16+dh(e):16;case 5:return 2*r.stringValue.length;case 6:return cs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+dh(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return gs(s.fields,((u,h)=>{o+=u.length+dh(h)})),o})(r.mapValue);default:throw Te(13486,{value:r})}}function Hv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Wm(r){return!!r&&"integerValue"in r}function kp(r){return!!r&&"arrayValue"in r}function Fv(r){return!!r&&"nullValue"in r}function Gv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function mh(r){return!!r&&"mapValue"in r}function hN(r){var n,s;return((s=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[oT])==null?void 0:s.stringValue)===lT}function Kl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return gs(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Kl(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kl(r.arrayValue.values[n]);return e}return{...r}}function fN(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===cN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!mh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kl(n)}setAll(e){let n=Yt.emptyPath(),s={},o=[];e.forEach(((h,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=m.popLast()}h?s[m.lastSegment()]=Kl(h):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());mh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];mh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){gs(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new pn(Kl(this.value))}}function uT(r){const e=[];return gs(r.fields,((n,s)=>{const o=new Yt([n]);if(mh(s)){const u=uT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n,s,o,u,h,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new en(e,0,Ae.min(),Ae.min(),Ae.min(),pn.empty(),0)}static newFoundDocument(e,n,s,o){return new en(e,1,n,Ae.min(),s,o,0)}static newNoDocument(e,n){return new en(e,2,n,Ae.min(),Ae.min(),pn.empty(),0)}static newUnknownDocument(e,n){return new en(e,3,n,Ae.min(),Ae.min(),pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.position=e,this.inclusive=n}}function $v(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],h=r.position[o];if(u.field.isKeyField()?s=ve.comparator(ve.fromName(h.referenceValue),n.key):s=go(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function Qv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!zi(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n="asc"){this.field=e,this.dir=n}}function dN(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{}class Ot extends cT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new pN(e,n,s):n==="array-contains"?new _N(e,s):n==="in"?new vN(e,s):n==="not-in"?new EN(e,s):n==="array-contains-any"?new bN(e,s):new Ot(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new gN(e,s):new yN(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(go(n,this.value)):n!==null&&hs(this.value)===hs(n)&&this.matchesComparison(go(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oi extends cT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new oi(e,n)}matches(e){return hT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hT(r){return r.op==="and"}function fT(r){return mN(r)&&hT(r)}function mN(r){for(const e of r.filters)if(e instanceof oi)return!1;return!0}function Jm(r){if(r instanceof Ot)return r.field.canonicalString()+r.op.toString()+yo(r.value);if(fT(r))return r.filters.map((e=>Jm(e))).join(",");{const e=r.filters.map((n=>Jm(n))).join(",");return`${r.op}(${e})`}}function dT(r,e){return r instanceof Ot?(function(s,o){return o instanceof Ot&&s.op===o.op&&s.field.isEqual(o.field)&&zi(s.value,o.value)})(r,e):r instanceof oi?(function(s,o){return o instanceof oi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,h,m)=>u&&dT(h,o.filters[m])),!0):!1})(r,e):void Te(19439)}function mT(r){return r instanceof Ot?(function(n){return`${n.field.canonicalString()} ${n.op} ${yo(n.value)}`})(r):r instanceof oi?(function(n){return n.op.toString()+" {"+n.getFilters().map(mT).join(" ,")+"}"})(r):"Filter"}class pN extends Ot{constructor(e,n,s){super(e,n,s),this.key=ve.fromName(s.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class gN extends Ot{constructor(e,n){super(e,"in",n),this.keys=pT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class yN extends Ot{constructor(e,n){super(e,"not-in",n),this.keys=pT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function pT(r,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((s=>ve.fromName(s.referenceValue)))}class _N extends Ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return kp(n)&&su(n.arrayValue,this.value)}}class vN extends Ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&su(this.value.arrayValue,n)}}class EN extends Ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!su(this.value.arrayValue,n)}}class bN extends Ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!kp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>su(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n=null,s=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.Te=null}}function Kv(r,e=null,n=[],s=[],o=null,u=null,h=null){return new TN(r,e,n,s,o,u,h)}function jp(r){const e=Re(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Jm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>yo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>yo(s))).join(",")),e.Te=n}return e.Te}function Lp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!dN(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!dT(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Qv(r.startAt,e.startAt)&&Qv(r.endAt,e.endAt)}function Zm(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n=null,s=[],o=[],u=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function SN(r,e,n,s,o,u,h,m){return new Io(r,e,n,s,o,u,h,m)}function Jh(r){return new Io(r)}function Yv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function gT(r){return r.collectionGroup!==null}function Yl(r){const e=Re(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Lt(Yt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new au(u,s))})),n.has(Yt.keyField().canonicalString())||e.Ie.push(new au(Yt.keyField(),s))}return e.Ie}function ji(r){const e=Re(r);return e.Ee||(e.Ee=wN(e,Yl(r))),e.Ee}function wN(r,e){if(r.limitType==="F")return Kv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new au(o.field,u)}));const n=r.endAt?new Dh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Dh(r.startAt.position,r.startAt.inclusive):null;return Kv(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function ep(r,e){const n=r.filters.concat([e]);return new Io(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function tp(r,e,n){return new Io(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Zh(r,e){return Lp(ji(r),ji(e))&&r.limitType===e.limitType}function yT(r){return`${jp(ji(r))}|lt:${r.limitType}`}function io(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>mT(o))).join(", ")}]`),Xh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>yo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>yo(o))).join(",")),`Target(${s})`})(ji(r))}; limitType=${r.limitType})`}function ef(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ve.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of Yl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,m,g){const p=$v(h,m,g);return h.inclusive?p<=0:p<0})(s.startAt,Yl(s),o)||s.endAt&&!(function(h,m,g){const p=$v(h,m,g);return h.inclusive?p>=0:p>0})(s.endAt,Yl(s),o))})(r,e)}function AN(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function _T(r){return(e,n)=>{let s=!1;for(const o of Yl(r)){const u=xN(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function xN(r,e,n){const s=r.field.isKeyField()?ve.comparator(e.key,n.key):(function(u,h,m){const g=h.data.field(u),p=m.data.field(u);return g!==null&&p!==null?go(g,p):Te(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){gs(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return tT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=new ft(ve.comparator);function mr(){return RN}const vT=new ft(ve.comparator);function ql(...r){let e=vT;for(const n of r)e=e.insert(n.key,n);return e}function ET(r){let e=vT;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Zs(){return Xl()}function bT(){return Xl()}function Xl(){return new ua((r=>r.toString()),((r,e)=>r.isEqual(e)))}const CN=new ft(ve.comparator),NN=new Lt(ve.comparator);function Ue(...r){let e=NN;for(const n of r)e=e.add(n);return e}const IN=new Lt(Pe);function DN(){return IN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function TT(r){return{integerValue:""+r}}function ON(r,e){return sN(e)?TT(e):Pp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(){this._=void 0}}function MN(r,e,n){return r instanceof Oh?(function(o,u){const h={fields:{[rT]:{stringValue:iT},[aT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Vp(u)&&(u=Wh(u)),u&&(h.fields[sT]=u),{mapValue:h}})(n,e):r instanceof ou?wT(r,e):r instanceof lu?AT(r,e):(function(o,u){const h=ST(o,u),m=Xv(h)+Xv(o.Ae);return Wm(h)&&Wm(o.Ae)?TT(m):Pp(o.serializer,m)})(r,e)}function VN(r,e,n){return r instanceof ou?wT(r,e):r instanceof lu?AT(r,e):n}function ST(r,e){return r instanceof Mh?(function(s){return Wm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Oh extends tf{}class ou extends tf{constructor(e){super(),this.elements=e}}function wT(r,e){const n=xT(e);for(const s of r.elements)n.some((o=>zi(o,s)))||n.push(s);return{arrayValue:{values:n}}}class lu extends tf{constructor(e){super(),this.elements=e}}function AT(r,e){let n=xT(e);for(const s of r.elements)n=n.filter((o=>!zi(o,s)));return{arrayValue:{values:n}}}class Mh extends tf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Xv(r){return vt(r.integerValue||r.doubleValue)}function xT(r){return kp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function kN(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof ou&&o instanceof ou||s instanceof lu&&o instanceof lu?po(s.elements,o.elements,zi):s instanceof Mh&&o instanceof Mh?zi(s.Ae,o.Ae):s instanceof Oh&&o instanceof Oh})(r.transform,e.transform)}class jN{constructor(e,n){this.version=e,this.transformResults=n}}class gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ph(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class nf{}function RT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new rf(r.key,gn.none()):new yu(r.key,r.data,gn.none());{const n=r.data,s=pn.empty();let o=new Lt(Yt.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new ys(r.key,s,new Rn(o.toArray()),gn.none())}}function LN(r,e,n){r instanceof yu?(function(o,u,h){const m=o.value.clone(),g=Jv(o.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,n):r instanceof ys?(function(o,u,h){if(!ph(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=Jv(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(CT(o)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function Wl(r,e,n,s){return r instanceof yu?(function(u,h,m,g){if(!ph(u.precondition,h))return m;const p=u.value.clone(),E=Zv(u.fieldTransforms,g,h);return p.setAll(E),h.convertToFoundDocument(h.version,p).setHasLocalMutations(),null})(r,e,n,s):r instanceof ys?(function(u,h,m,g){if(!ph(u.precondition,h))return m;const p=Zv(u.fieldTransforms,g,h),E=h.data;return E.setAll(CT(u)),E.setAll(p),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(r,e,n,s):(function(u,h,m){return ph(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,e,n)}function PN(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=ST(s.transform,o||null);u!=null&&(n===null&&(n=pn.empty()),n.set(s.field,u))}return n||null}function Wv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&po(s,o,((u,h)=>kN(u,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class yu extends nf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ys extends nf{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function CT(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function Jv(r,e,n){const s=new Map;Ke(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],h=u.transform,m=e.data.field(u.field);s.set(u.field,VN(h,m,n[o]))}return s}function Zv(r,e,n){const s=new Map;for(const o of r){const u=o.transform,h=n.data.field(o.field);s.set(o.field,MN(u,h,e))}return s}class rf extends nf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UN extends nf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&LN(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Wl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Wl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=bT();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=n.has(o.key)?null:m;const g=RT(h,m);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Ae.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&po(this.mutations,e.mutations,((n,s)=>Wv(n,s)))&&po(this.baseMutations,e.baseMutations,((n,s)=>Wv(n,s)))}}class Up{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Ke(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return CN})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new Up(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,qe;function HN(r){switch(r){case ee.OK:return Te(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function NT(r){if(r===void 0)return dr("GRPC error has no .code"),ee.UNKNOWN;switch(r){case Dt.OK:return ee.OK;case Dt.CANCELLED:return ee.CANCELLED;case Dt.UNKNOWN:return ee.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return ee.INTERNAL;case Dt.UNAVAILABLE:return ee.UNAVAILABLE;case Dt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Dt.NOT_FOUND:return ee.NOT_FOUND;case Dt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Dt.ABORTED:return ee.ABORTED;case Dt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Dt.DATA_LOSS:return ee.DATA_LOSS;default:return Te(39323,{code:r})}}(qe=Dt||(Dt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=new as([4294967295,4294967295],0);function eE(r){const e=FN().encode(r),n=new Fb;return n.update(e),new Uint8Array(n.digest())}function tE(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new as([n,s],0),new as([o,u],0)]}class zp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Hl(`Invalid padding: ${n}`);if(s<0)throw new Hl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Hl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Hl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=as.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(as.fromNumber(s)));return o.compare(GN)===1&&(o=new as([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=eE(e),[s,o]=tE(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);if(!this.we(h))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new zp(u,o,n);return s.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const n=eE(e),[s,o]=tE(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);this.Se(h)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,_u.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new sf(Ae.min(),o,new ft(Pe),mr(),Ue())}}class _u{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new _u(s,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class IT{constructor(e,n){this.targetId=e,this.Ce=n}}class DT{constructor(e,n,s=Xt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class nE{constructor(){this.ve=0,this.Fe=iE(),this.Me=Xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),n=Ue(),s=Ue();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Te(38017,{changeType:u})}})),new _u(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=iE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class $N{constructor(e){this.Ge=e,this.ze=new Map,this.je=mr(),this.Je=rh(),this.He=rh(),this.Ye=new ft(Pe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Zm(u))if(s===0){const h=new ve(u.path);this.et(n,h,en.newNoDocument(h,Ae.min()))}else Ke(s===1,20013,{expectedCount:s});else{const h=this._t(n);if(h!==s){const m=this.ut(e),g=m?this.ct(m,e,h):1;if(g!==0){this.it(n);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let h,m;try{h=cs(s).toUint8Array()}catch(g){if(g instanceof nT)return mo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new zp(h,o,u)}catch(g){return mo(g instanceof Hl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const m=this.ot(h);if(m){if(u.current&&Zm(m.target)){const g=new ve(m.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,en.newNoDocument(g,e))}u.Be&&(n.set(h,u.ke()),u.qe())}}));let s=Ue();this.He.forEach(((u,h)=>{let m=!0;h.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new sf(e,n,this.Ye,this.je,s);return this.je=mr(),this.Je=rh(),this.He=rh(),this.Ye=new ft(Pe),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new nE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Lt(Pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Lt(Pe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function rh(){return new ft(ve.comparator)}function iE(){return new ft(ve.comparator)}const QN={asc:"ASCENDING",desc:"DESCENDING"},KN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YN={and:"AND",or:"OR"};class XN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function np(r,e){return r.useProto3Json||Xh(e)?e:{value:e}}function Vh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function WN(r,e){return Vh(r,e.toTimestamp())}function Li(r){return Ke(!!r,49232),Ae.fromTimestamp((function(n){const s=us(n);return new Je(s.seconds,s.nanos)})(r))}function Bp(r,e){return ip(r,e).canonicalString()}function ip(r,e){const n=(function(o){return new rt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function MT(r){const e=rt.fromString(r);return Ke(PT(e),10190,{key:e.toString()}),e}function rp(r,e){return Bp(r.databaseId,e.path)}function Dm(r,e){const n=MT(e);if(n.get(1)!==r.databaseId.projectId)throw new le(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new le(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ve(kT(n))}function VT(r,e){return Bp(r.databaseId,e)}function JN(r){const e=MT(r);return e.length===4?rt.emptyPath():kT(e)}function sp(r){return new rt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function kT(r){return Ke(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function rE(r,e,n){return{name:rp(r,e),fields:n.value.mapValue.fields}}function ZN(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Te(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,E){return p.useProto3Json?(Ke(E===void 0||typeof E=="string",58123),Xt.fromBase64String(E||"")):(Ke(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Xt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(p){const E=p.code===void 0?ee.UNKNOWN:NT(p.code);return new le(E,p.message||"")})(h);n=new DT(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Dm(r,s.document.name),u=Li(s.document.updateTime),h=s.document.createTime?Li(s.document.createTime):Ae.min(),m=new pn({mapValue:{fields:s.document.fields}}),g=en.newFoundDocument(o,u,h,m),p=s.targetIds||[],E=s.removedTargetIds||[];n=new gh(p,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Dm(r,s.document),u=s.readTime?Li(s.readTime):Ae.min(),h=en.newNoDocument(o,u),m=s.removedTargetIds||[];n=new gh([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Dm(r,s.document),u=s.removedTargetIds||[];n=new gh([],u,o,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new qN(o,u),m=s.targetId;n=new IT(m,h)}}return n}function eI(r,e){let n;if(e instanceof yu)n={update:rE(r,e.key,e.value)};else if(e instanceof rf)n={delete:rp(r,e.key)};else if(e instanceof ys)n={update:rE(r,e.key,e.data),updateMask:uI(e.fieldMask)};else{if(!(e instanceof UN))return Te(16599,{Vt:e.type});n={verify:rp(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,h){const m=h.transform;if(m instanceof Oh)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ou)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof lu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Mh)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw Te(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:WN(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Te(27497)})(r,e.precondition)),n}function tI(r,e){return r&&r.length>0?(Ke(e!==void 0,14353),r.map((n=>(function(o,u){let h=o.updateTime?Li(o.updateTime):Li(u);return h.isEqual(Ae.min())&&(h=Li(u)),new jN(h,o.transformResults||[])})(n,e)))):[]}function nI(r,e){return{documents:[VT(r,e.path)]}}function iI(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=VT(r,o);const u=(function(p){if(p.length!==0)return LT(oi.create(p,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(p){if(p.length!==0)return p.map((E=>(function(A){return{field:ro(A.field),direction:aI(A.dir)}})(E)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const m=np(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:o}}function rI(r){let e=JN(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ke(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=(function(T){const A=jT(T);return A instanceof oi&&fT(A)?A.getFilters():[A]})(n.where));let h=[];n.orderBy&&(h=(function(T){return T.map((A=>(function(j){return new au(so(j.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(A)))})(n.orderBy));let m=null;n.limit&&(m=(function(T){let A;return A=typeof T=="object"?T.value:T,Xh(A)?null:A})(n.limit));let g=null;n.startAt&&(g=(function(T){const A=!!T.before,k=T.values||[];return new Dh(k,A)})(n.startAt));let p=null;return n.endAt&&(p=(function(T){const A=!T.before,k=T.values||[];return new Dh(k,A)})(n.endAt)),SN(e,o,h,u,m,"F",g,p)}function sI(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jT(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=so(n.unaryFilter.field);return Ot.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=so(n.unaryFilter.field);return Ot.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=so(n.unaryFilter.field);return Ot.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=so(n.unaryFilter.field);return Ot.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Ot.create(so(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return oi.create(n.compositeFilter.filters.map((s=>jT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(n.compositeFilter.op))})(r):Te(30097,{filter:r})}function aI(r){return QN[r]}function oI(r){return KN[r]}function lI(r){return YN[r]}function ro(r){return{fieldPath:r.canonicalString()}}function so(r){return Yt.fromServerFormat(r.fieldPath)}function LT(r){return r instanceof Ot?(function(n){if(n.op==="=="){if(Gv(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NAN"}};if(Fv(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gv(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NAN"}};if(Fv(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ro(n.field),op:oI(n.op),value:n.value}}})(r):r instanceof oi?(function(n){const s=n.getFilters().map((o=>LT(o)));return s.length===1?s[0]:{compositeFilter:{op:lI(n.op),filters:s}}})(r):Te(54877,{filter:r})}function uI(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function PT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,s,o,u=Ae.min(),h=Ae.min(),m=Xt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.yt=e}}function hI(r){const e=rI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?tp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(){this.Cn=new dI}addToCollectionParentIndex(e,n){return this.Cn.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(ls.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(ls.min())}updateCollectionGroup(e,n,s){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class dI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Lt(rt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Lt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UT=41943040;class mn{static withCacheSize(e){return new mn(e,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(UT,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new _o(0)}static cr(){return new _o(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="LruGarbageCollector",mI=1048576;function oE([r,e],[n,s]){const o=Pe(r,n);return o===0?Pe(e,s):o}class pI{constructor(e){this.Ir=e,this.buffer=new Lt(oE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();oE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class gI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(aE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){No(n)?ue(aE,"Ignoring IndexedDB error during garbage collection: ",n):await Co(n)}await this.Vr(3e5)}))}}class yI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ie.resolve(Yh.ce);const s=new pI(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(sE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,h,m,g,p;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,m=Date.now(),this.removeTargets(e,s,n)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(p=Date.now(),no()<=Le.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-E}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function _I(r,e){return new yI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.changes=new ua((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ie.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Wl(s.mutation,o,Rn.empty(),Je.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Ue()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Ue()){const o=Zs();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let h=ql();return u.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const s=Zs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Ue())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,m)=>{n.set(h,m)}))}))}computeViews(e,n,s,o){let u=mr();const h=Xl(),m=(function(){return Xl()})();return n.forEach(((g,p)=>{const E=s.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof ys)?u=u.insert(p.key,p):E!==void 0?(h.set(p.key,E.mutation.getFieldMask()),Wl(E.mutation,p,E.mutation.getFieldMask(),Je.now())):h.set(p.key,Rn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((p,E)=>h.set(p,E))),n.forEach(((p,E)=>m.set(p,new EI(E,h.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=Xl();let o=new ft(((h,m)=>h-m)),u=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const m of h)m.keys().forEach((g=>{const p=n.get(g);if(p===null)return;let E=s.get(g)||Rn.empty();E=m.applyToLocalView(p,E),s.set(g,E);const T=(o.get(m.batchId)||Ue()).add(g);o=o.insert(m.batchId,T)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,E=g.value,T=bT();E.forEach((A=>{if(!u.has(A)){const k=RT(n.get(A),s.get(A));k!==null&&T.set(A,k),u=u.add(A)}})),h.push(this.documentOverlayCache.saveOverlays(e,p,T))}return ie.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(h){return ve.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ie.resolve(Zs());let m=nu,g=u;return h.next((p=>ie.forEach(p,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?ie.resolve():this.remoteDocumentCache.getEntry(e,E).next((A=>{g=g.insert(E,A)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,g,p,Ue()))).next((E=>({batchId:m,changes:ET(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next((s=>{let o=ql();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let h=ql();return this.indexManager.getCollectionParents(e,u).next((m=>ie.forEach(m,(g=>{const p=(function(T,A){return new Io(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,s,o).next((E=>{E.forEach(((T,A)=>{h=h.insert(T,A)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((h=>{u.forEach(((g,p)=>{const E=p.getKey();h.get(E)===null&&(h=h.insert(E,en.newInvalidDocument(E)))}));let m=ql();return h.forEach(((g,p)=>{const E=u.get(g);E!==void 0&&Wl(E.mutation,p,Rn.empty(),Je.now()),ef(n,p)&&(m=m.insert(g,p))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ie.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Li(o.createTime)}})(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:hI(o.bundledQuery),readTime:Li(o.readTime)}})(n)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.overlays=new ft(ve.comparator),this.qr=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Zs();return ie.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),ie.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ie.resolve()}getOverlaysForCollection(e,n,s){const o=Zs(),u=n.length+1,h=new ve(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new ft(((p,E)=>p-E));const h=this.overlays.getIterator();for(;h.hasNext();){const p=h.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>s){let E=u.get(p.largestBatchId);E===null&&(E=Zs(),u=u.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const m=Zs(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,E)=>m.set(p,E))),!(m.size()>=o)););return ie.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new BN(n,s));let u=this.qr.get(n);u===void 0&&(u=Ue(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this.Qr=new Lt(Bt.$r),this.Ur=new Lt(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Bt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Bt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ve(new rt([])),s=new Bt(n,e),o=new Bt(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ve(new rt([])),s=new Bt(n,e),o=new Bt(n,e+1);let u=Ue();return this.Ur.forEachInRange([s,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new Bt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Bt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ve.comparator(e.key,n.key)||Pe(e.Yr,n.Yr)}static Kr(e,n){return Pe(e.Yr,n.Yr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Lt(Bt.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new zN(u,n,s,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new Bt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ie.resolve(h)}lookupMutationBatch(e,n){return ie.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Mp:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Bt(n,0),o=new Bt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(h=>{const m=this.Xr(h.Yr);u.push(m)})),ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Lt(Pe);return n.forEach((o=>{const u=new Bt(o,0),h=new Bt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(m=>{s=s.add(m.Yr)}))})),ie.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;ve.isDocumentKey(u)||(u=u.child(""));const h=new Bt(new ve(u),0);let m=new Lt(Pe);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),h),ie.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ie.forEach(n.mutations,(o=>{const u=new Bt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Bt(n,0),o=this.Zr.firstAfterOrEqual(s);return ie.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.ri=e,this.docs=(function(){return new ft(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ie.resolve(s?s.document.mutableCopy():en.newInvalidDocument(n))}getEntries(e,n){let s=mr();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():en.newInvalidDocument(o))})),ie.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=mr();const h=n.path,m=new ve(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:E}}=g.getNext();if(!h.isPrefixOf(p.path))break;p.path.length>h.length+1||tN(eN(E),s)<=0||(o.has(E.key)||ef(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return ie.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Te(9500)}ii(e,n){return ie.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new RI(this)}getSize(e){return ie.resolve(this.size)}}class RI extends vI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ie.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.persistence=e,this.si=new ua((n=>jp(n)),Lp),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new qp,this.targetCount=0,this.ai=_o.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ie.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new _o(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.Pr(n),ie.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ie.waitFor(u).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ie.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ie.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),ie.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ie.resolve(s)}containsKey(e,n){return ie.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Yh(0),this.li=!1,this.li=!0,this.hi=new wI,this.referenceDelegate=e(this),this.Pi=new CI(this),this.indexManager=new fI,this.remoteDocumentCache=(function(o){return new xI(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new cI(n),this.Ii=new TI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new AI(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ue("MemoryPersistence","Starting transaction:",e);const o=new NI(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ie.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class NI extends iN{constructor(e){super(),this.currentSequenceNumber=e}}class Hp{constructor(e){this.persistence=e,this.Ri=new qp,this.Vi=null}static mi(e){return new Hp(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ie.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(s=>{const o=ve.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Ae.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ie.or([()=>ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class kh{constructor(e,n){this.persistence=e,this.pi=new ua((s=>aN(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=_I(this,n)}static mi(e,n){return new kh(e,n)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ie.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?ie.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,n).next((m=>{m||(s++,u.removeEntry(h,Ae.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=dh(e.data.value)),n}br(e,n,s){return ie.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ie.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Ue(),o=Ue();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Fp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return cx()?8:rN(nn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new II;return this.Ss(e,n,h).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,h,m.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(no()<=Le.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",io(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(no()<=Le.DEBUG&&ue("QueryEngine","Query:",io(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(no()<=Le.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",io(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ji(n))):ie.resolve())}ys(e,n){if(Yv(n))return ie.resolve(null);let s=ji(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=tp(n,null,"F"),s=ji(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const h=Ue(...u);return this.ps.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.Ds(n,m);return this.Cs(n,p,h,g.readTime)?this.ys(e,tp(n,null,"F")):this.vs(e,p,n,g)}))))})))))}ws(e,n,s,o){return Yv(n)||o.isEqual(Ae.min())?ie.resolve(null):this.ps.getDocuments(e,s).next((u=>{const h=this.Ds(n,u);return this.Cs(n,h,s,o)?ie.resolve(null):(no()<=Le.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),io(n)),this.vs(e,h,n,ZC(o,nu)).next((m=>m)))}))}Ds(e,n){let s=new Lt(_T(e));return n.forEach(((o,u)=>{ef(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return no()<=Le.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",io(n)),this.ps.getDocumentsMatchingQuery(e,n,ls.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="LocalStore",OI=3e8;class MI{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new ft(Pe),this.xs=new ua((u=>jp(u)),Lp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function VI(r,e,n,s){return new MI(r,e,n,s)}async function BT(r,e){const n=Re(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const h=[],m=[];let g=Ue();for(const p of o){h.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}for(const p of u){m.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}return n.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:h,addedBatchIds:m})))}))}))}function kI(r,e){const n=Re(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,E){const T=p.batch,A=T.keys();let k=ie.resolve();return A.forEach((j=>{k=k.next((()=>E.getEntry(g,j))).next((U=>{const B=p.docVersions.get(j);Ke(B!==null,48541),U.version.compareTo(B)<0&&(T.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),E.addEntry(U)))}))})),k.next((()=>m.mutationQueue.removeMutationBatch(g,T)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=Ue();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function qT(r){const e=Re(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function jI(r,e){const n=Re(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((E,T)=>{const A=o.get(T);if(!A)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,T))));let k=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?k=k.withResumeToken(Xt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):E.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(E.resumeToken,s)),o=o.insert(T,k),(function(U,B,$){return U.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=OI?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(A,k,E)&&m.push(n.Pi.updateTargetData(u,k))}));let g=mr(),p=Ue();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(LI(u,h,e.documentUpdates).next((E=>{g=E.ks,p=E.qs}))),!s.isEqual(Ae.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(E)}return ie.waitFor(m).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(n.Ms=o,u)))}function LI(r,e,n){let s=Ue(),o=Ue();return n.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let h=mr();return n.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ae.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):ue(Gp,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function PI(r,e){const n=Re(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Mp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function UI(r,e){const n=Re(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,ie.resolve(o)):n.Pi.allocateTargetId(s).next((h=>(o=new ts(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function ap(r,e,n){const s=Re(r),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!No(h))throw h;ue(Gp,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function lE(r,e,n){const s=Re(r);let o=Ae.min(),u=Ue();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,p,E){const T=Re(g),A=T.xs.get(E);return A!==void 0?ie.resolve(T.Ms.get(A)):T.Pi.getTargetData(p,E)})(s,h,ji(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,m.targetId).next((g=>{u=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,n?o:Ae.min(),n?u:Ue()))).next((m=>(zI(s,AN(e),m),{documents:m,Qs:u})))))}function zI(r,e,n){let s=r.Os.get(e)||Ae.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(e,s)}class uE{constructor(){this.activeTargetIds=DN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BI{constructor(){this.Mo=new uE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new uE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="ConnectivityMonitor";class hE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(cE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(cE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sh=null;function op(){return sh===null?sh=(function(){return 268435456+Math.round(2147483648*Math.random())})():sh++,"0x"+sh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="RestConnection",HI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Nh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const h=op(),m=this.zo(e,n.toUriEncodedString());ue(Om,`Sending RPC '${e}' ${h}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),E=So(p);return this.Jo(e,m,g,s,E).then((T=>(ue(Om,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw mo(Om,`RPC '${e}' ${h} failed with error: `,T,"url: ",m,"request:",s),T}))}Ho(e,n,s,o,u,h){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ro})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=HI[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class $I extends FI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const h=op();return new Promise(((m,g)=>{const p=new Gb;p.setWithCredentials(!0),p.listenOnce($b.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case fh.NO_ERROR:const T=p.getResponseJson();ue(Jt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),m(T);break;case fh.TIMEOUT:ue(Jt,`RPC '${e}' ${h} timed out`),g(new le(ee.DEADLINE_EXCEEDED,"Request time out"));break;case fh.HTTP_ERROR:const A=p.getStatus();if(ue(Jt,`RPC '${e}' ${h} failed with status:`,A,"response text:",p.getResponseText()),A>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);const j=k==null?void 0:k.error;if(j&&j.status&&j.message){const U=(function($){const J=$.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(J)>=0?J:ee.UNKNOWN})(j.status);g(new le(U,j.message))}else g(new le(ee.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new le(ee.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:h,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ue(Jt,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(o);ue(Jt,`RPC '${e}' ${h} sending request:`,o),p.send(n,"POST",E,s,15)}))}T_(e,n,s){const o=op(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Yb(),m=Kb(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const E=u.join("");ue(Jt,`Creating RPC '${e}' stream ${o}: ${E}`,g);const T=h.createWebChannel(E,g);this.I_(T);let A=!1,k=!1;const j=new GI({Yo:B=>{k?ue(Jt,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(A||(ue(Jt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),A=!0),ue(Jt,`RPC '${e}' stream ${o} sending:`,B),T.send(B))},Zo:()=>T.close()}),U=(B,$,J)=>{B.listen($,(X=>{try{J(X)}catch(se){setTimeout((()=>{throw se}),0)}}))};return U(T,Bl.EventType.OPEN,(()=>{k||(ue(Jt,`RPC '${e}' stream ${o} transport opened.`),j.o_())})),U(T,Bl.EventType.CLOSE,(()=>{k||(k=!0,ue(Jt,`RPC '${e}' stream ${o} transport closed`),j.a_(),this.E_(T))})),U(T,Bl.EventType.ERROR,(B=>{k||(k=!0,mo(Jt,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),j.a_(new le(ee.UNAVAILABLE,"The operation could not be completed")))})),U(T,Bl.EventType.MESSAGE,(B=>{var $;if(!k){const J=B.data[0];Ke(!!J,16349);const X=J,se=(X==null?void 0:X.error)||(($=X[0])==null?void 0:$.error);if(se){ue(Jt,`RPC '${e}' stream ${o} received error:`,se);const ge=se.status;let ye=(function(C){const M=Dt[C];if(M!==void 0)return NT(M)})(ge),N=se.message;ye===void 0&&(ye=ee.INTERNAL,N="Unknown error status: "+ge+" with message "+se.message),k=!0,j.a_(new le(ye,N)),T.close()}else ue(Jt,`RPC '${e}' stream ${o} received:`,J),j.u_(J)}})),U(m,Qb.STAT_EVENT,(B=>{B.stat===Km.PROXY?ue(Jt,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===Km.NOPROXY&&ue(Jt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{j.__()}),0),j}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Mm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(r){return new XN(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="PersistentStream";class FT{constructor(e,n,s,o,u,h,m,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new HT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(dr(n.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new le(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(fE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ue(fE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class QI extends FT{constructor(e,n,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ZN(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Ae.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Ae.min():h.readTime?Li(h.readTime):Ae.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=sp(this.serializer),n.addTarget=(function(u,h){let m;const g=h.target;if(m=Zm(g)?{documents:nI(u,g)}:{query:iI(u,g).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=OT(u,h.resumeToken);const p=np(u,h.expectedCount);p!==null&&(m.expectedCount=p)}else if(h.snapshotVersion.compareTo(Ae.min())>0){m.readTime=Vh(u,h.snapshotVersion.toTimestamp());const p=np(u,h.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const s=sI(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=sp(this.serializer),n.removeTarget=e,this.q_(n)}}class KI extends FT{constructor(e,n,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=tI(e.writeResults,e.commitTime),s=Li(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=sp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>eI(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{}class XI extends YI{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new le(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(e,ip(n,s),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new le(ee.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(e,ip(n,s),o,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new le(ee.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class WI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(dr(n),this.aa=!1):ue("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="RemoteStore";class JI{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{ca(this)&&(ue(aa,"Restarting streams for network reachability change."),await(async function(g){const p=Re(g);p.Ea.add(4),await vu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await of(p)})(this))}))})),this.Ra=new WI(s,o)}}async function of(r){if(ca(r))for(const e of r.da)await e(!0)}async function vu(r){for(const e of r.da)await e(!1)}function GT(r,e){const n=Re(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Yp(n)?Kp(n):Do(n).O_()&&Qp(n,e))}function $p(r,e){const n=Re(r),s=Do(n);n.Ia.delete(e),s.O_()&&$T(n,e),n.Ia.size===0&&(s.O_()?s.L_():ca(n)&&n.Ra.set("Unknown"))}function Qp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Do(r).Y_(e)}function $T(r,e){r.Va.Ue(e),Do(r).Z_(e)}function Kp(r){r.Va=new $N({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Do(r).start(),r.Ra.ua()}function Yp(r){return ca(r)&&!Do(r).x_()&&r.Ia.size>0}function ca(r){return Re(r).Ea.size===0}function QT(r){r.Va=void 0}async function ZI(r){r.Ra.set("Online")}async function eD(r){r.Ia.forEach(((e,n)=>{Qp(r,e)}))}async function tD(r,e){QT(r),Yp(r)?(r.Ra.ha(e),Kp(r)):r.Ra.set("Unknown")}async function nD(r,e,n){if(r.Ra.set("Online"),e instanceof DT&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(s){ue(aa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await jh(r,s)}else if(e instanceof gh?r.Va.Ze(e):e instanceof IT?r.Va.st(e):r.Va.tt(e),!n.isEqual(Ae.min()))try{const s=await qT(r.localStore);n.compareTo(s)>=0&&await(function(u,h){const m=u.Va.Tt(h);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(p);E&&u.Ia.set(p,E.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,p)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(Xt.EMPTY_BYTE_STRING,E.snapshotVersion)),$T(u,g);const T=new ts(E.target,g,p,E.sequenceNumber);Qp(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){ue(aa,"Failed to raise snapshot:",s),await jh(r,s)}}async function jh(r,e,n){if(!No(e))throw e;r.Ea.add(1),await vu(r),r.Ra.set("Offline"),n||(n=()=>qT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ue(aa,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await of(r)}))}function KT(r,e){return e().catch((n=>jh(r,n,e)))}async function lf(r){const e=Re(r),n=fs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Mp;for(;iD(e);)try{const o=await PI(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,rD(e,o)}catch(o){await jh(e,o)}YT(e)&&XT(e)}function iD(r){return ca(r)&&r.Ta.length<10}function rD(r,e){r.Ta.push(e);const n=fs(r);n.O_()&&n.X_&&n.ea(e.mutations)}function YT(r){return ca(r)&&!fs(r).x_()&&r.Ta.length>0}function XT(r){fs(r).start()}async function sD(r){fs(r).ra()}async function aD(r){const e=fs(r);for(const n of r.Ta)e.ea(n.mutations)}async function oD(r,e,n){const s=r.Ta.shift(),o=Up.from(s,e,n);await KT(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await lf(r)}async function lD(r,e){e&&fs(r).X_&&await(async function(s,o){if((function(h){return HN(h)&&h!==ee.ABORTED})(o.code)){const u=s.Ta.shift();fs(s).B_(),await KT(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await lf(s)}})(r,e),YT(r)&&XT(r)}async function dE(r,e){const n=Re(r);n.asyncQueue.verifyOperationInProgress(),ue(aa,"RemoteStore received new credentials");const s=ca(n);n.Ea.add(3),await vu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await of(n)}async function uD(r,e){const n=Re(r);e?(n.Ea.delete(2),await of(n)):e||(n.Ea.add(2),await vu(n),n.Ra.set("Unknown"))}function Do(r){return r.ma||(r.ma=(function(n,s,o){const u=Re(n);return u.sa(),new QI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:ZI.bind(null,r),t_:eD.bind(null,r),r_:tD.bind(null,r),H_:nD.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Yp(r)?Kp(r):r.Ra.set("Unknown")):(await r.ma.stop(),QT(r))}))),r.ma}function fs(r){return r.fa||(r.fa=(function(n,s,o){const u=Re(n);return u.sa(),new KI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:sD.bind(null,r),r_:lD.bind(null,r),ta:aD.bind(null,r),na:oD.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await lf(r)):(await r.fa.stop(),r.Ta.length>0&&(ue(aa,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const h=Date.now()+s,m=new Xp(e,n,h,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wp(r,e){if(dr("AsyncQueue",`${e}: ${r}`),No(r))return new le(ee.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{static emptySet(e){return new co(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ve.comparator(n.key,s.key):(n,s)=>ve.comparator(n.key,s.key),this.keyedMap=ql(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new co;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(){this.ga=new ft(ve.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class vo{constructor(e,n,s,o,u,h,m,g,p){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,n,s,o,u){const h=[];return n.forEach((m=>{h.push({type:0,doc:m})})),new vo(e,n,co.emptySet(n),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class hD{constructor(){this.queries=pE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Re(n),u=o.queries;o.queries=pE(),u.forEach(((h,m)=>{for(const g of m.Sa)g.onError(s)}))})(this,new le(ee.ABORTED,"Firestore shutting down"))}}function pE(){return new ua((r=>yT(r)),Zh)}async function Jp(r,e){const n=Re(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new cD,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const m=Wp(h,`Initialization of query '${io(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&eg(n)}async function Zp(r,e){const n=Re(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function fD(r,e){const n=Re(r);let s=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const m of h.Sa)m.Fa(o)&&(s=!0);h.wa=o}}s&&eg(n)}function dD(r,e,n){const s=Re(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function eg(r){r.Ca.forEach((e=>{e.next()}))}var lp,gE;(gE=lp||(lp={})).Ma="default",gE.Cache="cache";class tg{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new vo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==lp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){this.key=e}}class JT{constructor(e){this.key=e}}class mD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=_T(e),this.tu=new co(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new mE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,T)=>{const A=o.get(E),k=ef(this.query,T)?T:null,j=!!A&&this.mutatedKeys.has(A.key),U=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let B=!1;A&&k?A.data.isEqual(k.data)?j!==U&&(s.track({type:3,doc:k}),B=!0):this.su(A,k)||(s.track({type:2,doc:k}),B=!0,(g&&this.eu(k,g)>0||p&&this.eu(k,p)<0)&&(m=!0)):!A&&k?(s.track({type:0,doc:k}),B=!0):A&&!k&&(s.track({type:1,doc:A}),B=!0,(g||p)&&(m=!0)),B&&(k?(h=h.add(k),u=U?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:h,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((E,T)=>(function(k,j){const U=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:B})}};return U(k)-U(j)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,h.length!==0||p?{snapshot:new vo(this.query,e.tu,u,h,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new JT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new WT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ue();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return vo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ng="SyncEngine";class pD{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class gD{constructor(e){this.key=e,this.hu=!1}}class yD{constructor(e,n,s,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new ua((m=>yT(m)),Zh),this.Iu=new Map,this.Eu=new Set,this.du=new ft(ve.comparator),this.Au=new Map,this.Ru=new qp,this.Vu={},this.mu=new Map,this.fu=_o.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _D(r,e,n=!0){const s=rS(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await ZT(s,e,n,!0),o}async function vD(r,e){const n=rS(r);await ZT(n,e,!0,!1)}async function ZT(r,e,n,s){const o=await UI(r.localStore,ji(e)),u=o.targetId,h=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await ED(r,e,u,h==="current",o.resumeToken)),r.isPrimaryClient&&n&&GT(r.remoteStore,o),m}async function ED(r,e,n,s,o){r.pu=(T,A,k)=>(async function(U,B,$,J){let X=B.view.ru($);X.Cs&&(X=await lE(U.localStore,B.query,!1).then((({documents:N})=>B.view.ru(N,X))));const se=J&&J.targetChanges.get(B.targetId),ge=J&&J.targetMismatches.get(B.targetId)!=null,ye=B.view.applyChanges(X,U.isPrimaryClient,se,ge);return _E(U,B.targetId,ye.au),ye.snapshot})(r,T,A,k);const u=await lE(r.localStore,e,!0),h=new mD(e,u.Qs),m=h.ru(u.documents),g=_u.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),p=h.applyChanges(m,r.isPrimaryClient,g);_E(r,n,p.au);const E=new pD(e,n,h);return r.Tu.set(e,E),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),p.snapshot}async function bD(r,e,n){const s=Re(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((h=>!Zh(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await ap(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&$p(s.remoteStore,o.targetId),up(s,o.targetId)})).catch(Co)):(up(s,o.targetId),await ap(s.localStore,o.targetId,!0))}async function TD(r,e){const n=Re(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),$p(n.remoteStore,s.targetId))}async function SD(r,e,n){const s=ID(r);try{const o=await(function(h,m){const g=Re(h),p=Je.now(),E=m.reduce(((k,j)=>k.add(j.key)),Ue());let T,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let j=mr(),U=Ue();return g.Ns.getEntries(k,E).next((B=>{j=B,j.forEach((($,J)=>{J.isValidDocument()||(U=U.add($))}))})).next((()=>g.localDocuments.getOverlayedDocuments(k,j))).next((B=>{T=B;const $=[];for(const J of m){const X=PN(J,T.get(J.key).overlayedDocument);X!=null&&$.push(new ys(J.key,X,uT(X.value.mapValue),gn.exists(!0)))}return g.mutationQueue.addMutationBatch(k,p,$,m)})).next((B=>{A=B;const $=B.applyToLocalDocumentSet(T,U);return g.documentOverlayCache.saveOverlays(k,B.batchId,$)}))})).then((()=>({batchId:A.batchId,changes:ET(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,m,g){let p=h.Vu[h.currentUser.toKey()];p||(p=new ft(Pe)),p=p.insert(m,g),h.Vu[h.currentUser.toKey()]=p})(s,o.batchId,n),await Eu(s,o.changes),await lf(s.remoteStore)}catch(o){const u=Wp(o,"Failed to persist write");n.reject(u)}}async function eS(r,e){const n=Re(r);try{const s=await jI(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Ke(h.hu,14607):o.removedDocuments.size>0&&(Ke(h.hu,42227),h.hu=!1))})),await Eu(n,s,e)}catch(s){await Co(s)}}function yE(r,e,n){const s=Re(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const g=Re(h);g.onlineState=m;let p=!1;g.queries.forEach(((E,T)=>{for(const A of T.Sa)A.va(m)&&(p=!0)})),p&&eg(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function wD(r,e,n){const s=Re(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let h=new ft(ve.comparator);h=h.insert(u,en.newNoDocument(u,Ae.min()));const m=Ue().add(u),g=new sf(Ae.min(),new Map,new ft(Pe),h,m);await eS(s,g),s.du=s.du.remove(u),s.Au.delete(e),ig(s)}else await ap(s.localStore,e,!1).then((()=>up(s,e,n))).catch(Co)}async function AD(r,e){const n=Re(r),s=e.batch.batchId;try{const o=await kI(n.localStore,e);nS(n,s,null),tS(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Eu(n,o)}catch(o){await Co(o)}}async function xD(r,e,n){const s=Re(r);try{const o=await(function(h,m){const g=Re(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let E;return g.mutationQueue.lookupMutationBatch(p,m).next((T=>(Ke(T!==null,37113),E=T.keys(),g.mutationQueue.removeMutationBatch(p,T)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E))).next((()=>g.localDocuments.getDocuments(p,E)))}))})(s.localStore,e);nS(s,e,n),tS(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Eu(s,o)}catch(o){await Co(o)}}function tS(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function nS(r,e,n){const s=Re(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function up(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||iS(r,s)}))}function iS(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&($p(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),ig(r))}function _E(r,e,n){for(const s of n)s instanceof WT?(r.Ru.addReference(s.key,e),RD(r,s)):s instanceof JT?(ue(ng,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||iS(r,s.key)):Te(19791,{wu:s})}function RD(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(ue(ng,"New document in limbo: "+n),r.Eu.add(s),ig(r))}function ig(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new ve(rt.fromString(e)),s=r.fu.next();r.Au.set(s,new gD(n)),r.du=r.du.insert(n,s),GT(r.remoteStore,new ts(ji(Jh(n.path)),s,"TargetPurposeLimboResolution",Yh.ce))}}async function Eu(r,e,n){const s=Re(r),o=[],u=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{h.push(s.pu(g,e,n).then((p=>{var E;if((p||n)&&s.isPrimaryClient){const T=p?!p.fromCache:(E=n==null?void 0:n.targetChanges.get(g.targetId))==null?void 0:E.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(p){o.push(p);const T=Fp.As(g.targetId,p);u.push(T)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(g,p){const E=Re(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ie.forEach(p,(A=>ie.forEach(A.Es,(k=>E.persistence.referenceDelegate.addReference(T,A.targetId,k))).next((()=>ie.forEach(A.ds,(k=>E.persistence.referenceDelegate.removeReference(T,A.targetId,k)))))))))}catch(T){if(!No(T))throw T;ue(Gp,"Failed to update sequence numbers: "+T)}for(const T of p){const A=T.targetId;if(!T.fromCache){const k=E.Ms.get(A),j=k.snapshotVersion,U=k.withLastLimboFreeSnapshotVersion(j);E.Ms=E.Ms.insert(A,U)}}})(s.localStore,u))}async function CD(r,e){const n=Re(r);if(!n.currentUser.isEqual(e)){ue(ng,"User change. New user:",e.toKey());const s=await BT(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new le(ee.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Eu(n,s.Ls)}}function ND(r,e){const n=Re(r),s=n.Au.get(e);if(s&&s.hu)return Ue().add(s.key);{let o=Ue();const u=n.Iu.get(e);if(!u)return o;for(const h of u){const m=n.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function rS(r){const e=Re(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=eS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ND.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wD.bind(null,e),e.Pu.H_=fD.bind(null,e.eventManager),e.Pu.yu=dD.bind(null,e.eventManager),e}function ID(r){const e=Re(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xD.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=af(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return VI(this.persistence,new DI,e.initialUser,this.serializer)}Cu(e){return new zT(Hp.mi,this.serializer)}Du(e){return new BI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class DD extends Lh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof kh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new gI(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new zT((s=>kh.mi(s,n)),this.serializer)}}class cp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>yE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=CD.bind(null,this.syncEngine),await uD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new hD})()}createDatastore(e){const n=af(e.databaseInfo.databaseId),s=(function(u){return new $I(u)})(e.databaseInfo);return(function(u,h,m,g){return new XI(u,h,m,g)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,h,m){return new JI(s,o,u,h,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>yE(this.syncEngine,n,0)),(function(){return hE.v()?new hE:new qI})())}createSyncEngine(e,n){return(function(o,u,h,m,g,p,E){const T=new yD(o,u,h,m,g,p);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=Re(o);ue(aa,"RemoteStore shutting down."),u.Ea.add(5),await vu(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}cp.provider={build:()=>new cp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):dr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="FirestoreClient";class OD{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Zt.UNAUTHENTICATED,this.clientId=Op.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async h=>{ue(ds,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(ue(ds,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Wp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Vm(r,e){r.asyncQueue.verifyOperationInProgress(),ue(ds,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await BT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function vE(r,e){r.asyncQueue.verifyOperationInProgress();const n=await MD(r);ue(ds,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>dE(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>dE(e.remoteStore,o))),r._onlineComponents=e}async function MD(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ue(ds,"Using user provided OfflineComponentProvider");try{await Vm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;mo("Error using user provided cache. Falling back to memory cache: "+n),await Vm(r,new Lh)}}else ue(ds,"Using default OfflineComponentProvider"),await Vm(r,new DD(void 0));return r._offlineComponents}async function sS(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ue(ds,"Using user provided OnlineComponentProvider"),await vE(r,r._uninitializedComponentsProvider._online)):(ue(ds,"Using default OnlineComponentProvider"),await vE(r,new cp))),r._onlineComponents}function VD(r){return sS(r).then((e=>e.syncEngine))}async function Ph(r){const e=await sS(r),n=e.eventManager;return n.onListen=_D.bind(null,e.syncEngine),n.onUnlisten=bD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=vD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=TD.bind(null,e.syncEngine),n}function kD(r,e,n={}){const s=new ur;return r.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,g,p){const E=new rg({next:A=>{E.Nu(),h.enqueueAndForget((()=>Zp(u,T)));const k=A.docs.has(m);!k&&A.fromCache?p.reject(new le(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&A.fromCache&&g&&g.source==="server"?p.reject(new le(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(A)},error:A=>p.reject(A)}),T=new tg(Jh(m.path),E,{includeMetadataChanges:!0,qa:!0});return Jp(u,T)})(await Ph(r),r.asyncQueue,e,n,s))),s.promise}function jD(r,e,n={}){const s=new ur;return r.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,g,p){const E=new rg({next:A=>{E.Nu(),h.enqueueAndForget((()=>Zp(u,T))),A.fromCache&&g.source==="server"?p.reject(new le(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(A)},error:A=>p.reject(A)}),T=new tg(m,E,{includeMetadataChanges:!0,qa:!0});return Jp(u,T)})(await Ph(r),r.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="firestore.googleapis.com",bE=!0;class TE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oS,this.ssl=bE}else this.host=e.host,this.ssl=e.ssl??bE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mI)throw new le(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aS(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new le(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new le(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new le(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uf{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new qC;switch(s.type){case"firstParty":return new $C(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new le(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=EE.get(n);s&&(ue("ComponentProvider","Removing Datastore"),EE.delete(n),s.terminate())})(this),Promise.resolve()}}function LD(r,e,n,s={}){var p;r=Cn(r,uf);const o=So(e),u=r._getSettings(),h={...u,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${n}`;o&&(ib(`https://${m}`),rb("Firestore",!0)),u.host!==oS&&u.host!==m&&mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:s};if(!na(g,h)&&(r._setSettings(g),s.mockUserToken)){let E,T;if(typeof s.mockUserToken=="string")E=s.mockUserToken,T=Zt.MOCK_USER;else{E=tx(s.mockUserToken,(p=r._app)==null?void 0:p.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new le(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Zt(A)}r._authCredentials=new HC(new Wb(E,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new _s(this.firestore,e,this._query)}}class Et{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}toJSON(){return{type:Et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(gu(n,Et._jsonSchema))return new Et(e,s||null,new ve(rt.fromString(n.referencePath)))}}Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:Mt("string",Et._jsonSchemaVersion),referencePath:Mt("string")};class os extends _s{constructor(e,n,s){super(e,n,Jh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new ve(e))}withConverter(e){return new os(this.firestore,e,this._path)}}function st(r,e,...n){if(r=bt(r),Jb("collection","path",e),r instanceof uf){const s=rt.fromString(e,...n);return kv(s),new os(r,null,s)}{if(!(r instanceof Et||r instanceof os))throw new le(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(rt.fromString(e,...n));return kv(s),new os(r.firestore,null,s)}}function ri(r,e,...n){if(r=bt(r),arguments.length===1&&(e=Op.newId()),Jb("doc","path",e),r instanceof uf){const s=rt.fromString(e,...n);return Vv(s),new Et(r,null,new ve(s))}{if(!(r instanceof Et||r instanceof os))throw new le(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(rt.fromString(e,...n));return Vv(s),new Et(r.firestore,r instanceof os?r.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="AsyncQueue";class wE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new HT(this,"async_queue_retry"),this._c=()=>{const s=Mm();s&&ue(SE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Mm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Mm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ur;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!No(e))throw e;ue(SE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,dr("INTERNAL UNHANDLED ERROR: ",AE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Xp.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:AE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function AE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class pr extends uf{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new wE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wE(e),this._firestoreClient=void 0,await e}}}function PD(r,e){const n=typeof r=="object"?r:lb(),s=typeof r=="string"?r:Nh,o=Tp(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=ZA("firestore");u&&LD(o,...u)}return o}function bu(r){if(r._terminated)throw new le(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||UD(r),r._firestoreClient}function UD(r){var s,o,u;const e=r._freezeSettings(),n=(function(m,g,p,E){return new uN(m,g,p,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,aS(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new OD(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qn(Xt.fromBase64String(e))}catch(n){throw new le(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qn(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gu(e,qn._jsonSchema))return qn.fromBase64String(e.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:Mt("string",qn._jsonSchemaVersion),bytes:Mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pi._jsonSchemaVersion}}static fromJSON(e){if(gu(e,Pi._jsonSchema))return new Pi(e.latitude,e.longitude)}}Pi._jsonSchemaVersion="firestore/geoPoint/1.0",Pi._jsonSchema={type:Mt("string",Pi._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gu(e,Ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ui(e.vectorValues);throw new le(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ui._jsonSchemaVersion="firestore/vectorValue/1.0",Ui._jsonSchema={type:Mt("string",Ui._jsonSchemaVersion),vectorValues:Mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=/^__.*__$/;class BD{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ys(e,this.data,this.fieldMask,n,this.fieldTransforms):new yu(e,this.data,n,this.fieldTransforms)}}class lS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ys(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function uS(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:r})}}class ag{constructor(e,n,s,o,u,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ag({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Uh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(uS(this.Ac)&&zD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class qD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||af(e)}Cc(e,n,s,o=!1){return new ag({Ac:e,methodName:n,Dc:s,path:Yt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cf(r){const e=r._freezeSettings(),n=af(r._databaseId);return new qD(r._databaseId,!!e.ignoreUndefinedProperties,n)}function cS(r,e,n,s,o,u={}){const h=r.Cc(u.merge||u.mergeFields?2:0,e,n,o);og("Data must be an object, but it was:",h,s);const m=dS(s,h);let g,p;if(u.merge)g=new Rn(h.fieldMask),p=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const A=hp(e,T,n);if(!h.contains(A))throw new le(ee.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);pS(E,A)||E.push(A)}g=new Rn(E),p=h.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,p=h.fieldTransforms;return new BD(new pn(m),g,p)}class hf extends sg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hf}}function hS(r,e,n,s){const o=r.Cc(1,e,n);og("Data must be an object, but it was:",o,s);const u=[],h=pn.empty();gs(s,((g,p)=>{const E=lg(e,g,n);p=bt(p);const T=o.yc(E);if(p instanceof hf)u.push(E);else{const A=Su(p,T);A!=null&&(u.push(E),h.set(E,A))}}));const m=new Rn(u);return new lS(h,m,o.fieldTransforms)}function fS(r,e,n,s,o,u){const h=r.Cc(1,e,n),m=[hp(e,s,n)],g=[o];if(u.length%2!=0)throw new le(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)m.push(hp(e,u[A])),g.push(u[A+1]);const p=[],E=pn.empty();for(let A=m.length-1;A>=0;--A)if(!pS(p,m[A])){const k=m[A];let j=g[A];j=bt(j);const U=h.yc(k);if(j instanceof hf)p.push(k);else{const B=Su(j,U);B!=null&&(p.push(k),E.set(k,B))}}const T=new Rn(p);return new lS(E,T,h.fieldTransforms)}function HD(r,e,n,s=!1){return Su(n,r.Cc(s?4:3,e))}function Su(r,e){if(mS(r=bt(r)))return og("Unsupported field value:",e,r),dS(r,e);if(r instanceof sg)return(function(s,o){if(!uS(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let h=0;for(const m of s){let g=Su(m,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=bt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return ON(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Je.fromDate(s);return{timestampValue:Vh(o.serializer,u)}}if(s instanceof Je){const u=new Je(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Vh(o.serializer,u)}}if(s instanceof Pi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof qn)return{bytesValue:OT(o.serializer,s._byteString)};if(s instanceof Et){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Bp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Ui)return(function(h,m){return{mapValue:{fields:{[oT]:{stringValue:lT},[Ih]:{arrayValue:{values:h.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return Pp(m.serializer,p)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Kh(s)}`)})(r,e)}function dS(r,e){const n={};return tT(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gs(r,((s,o)=>{const u=Su(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function mS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Je||r instanceof Pi||r instanceof qn||r instanceof Et||r instanceof sg||r instanceof Ui)}function og(r,e,n){if(!mS(n)||!Zb(n)){const s=Kh(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function hp(r,e,n){if((e=bt(e))instanceof Tu)return e._internalPath;if(typeof e=="string")return lg(r,e);throw Uh("Field path arguments must be of type string or ",r,!1,void 0,n)}const FD=new RegExp("[~\\*/\\[\\]]");function lg(r,e,n){if(e.search(FD)>=0)throw Uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Tu(...e.split("."))._internalPath}catch{throw Uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Uh(r,e,n,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new le(ee.INVALID_ARGUMENT,m+r+g)}function pS(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ff("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class GD extends gS{data(){return super.data()}}function ff(r,e){return typeof e=="string"?lg(r,e):e instanceof Tu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new le(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ug{}class _S extends ug{}function Mi(r,e,...n){let s=[];e instanceof ug&&s.push(e),s=s.concat(n),(function(u){const h=u.filter((g=>g instanceof cg)).length,m=u.filter((g=>g instanceof df)).length;if(h>1||h>0&&m>0)throw new le(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class df extends _S{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new df(e,n,s)}_apply(e){const n=this._parse(e);return vS(e._query,n),new _s(e.firestore,e.converter,ep(e._query,n))}_parse(e){const n=cf(e.firestore);return(function(u,h,m,g,p,E,T){let A;if(p.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new le(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){CE(T,E);const j=[];for(const U of T)j.push(RE(g,u,U));A={arrayValue:{values:j}}}else A=RE(g,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||CE(T,E),A=HD(m,h,T,E==="in"||E==="not-in");return Ot.create(p,E,A)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function xn(r,e,n){const s=e,o=ff("where",r);return df._create(o,s,n)}class cg extends ug{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:oi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let h=o;const m=u.getFlattenedFilters();for(const g of m)vS(h,g),h=ep(h,g)})(e._query,n),new _s(e.firestore,e.converter,ep(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hg extends _S{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new hg(e,n)}_apply(e){const n=(function(o,u,h){if(o.startAt!==null)throw new le(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new le(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new au(u,h)})(e._query,this._field,this._direction);return new _s(e.firestore,e.converter,(function(o,u){const h=o.explicitOrderBy.concat([u]);return new Io(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function $D(r,e="asc"){const n=e,s=ff("orderBy",r);return hg._create(s,n)}function RE(r,e,n){if(typeof(n=bt(n))=="string"){if(n==="")throw new le(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gT(e)&&n.indexOf("/")!==-1)throw new le(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(rt.fromString(n));if(!ve.isDocumentKey(s))throw new le(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Hv(r,new ve(s))}if(n instanceof Et)return Hv(r,n._key);throw new le(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kh(n)}.`)}function CE(r,e){if(!Array.isArray(r)||r.length===0)throw new le(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vS(r,e){const n=(function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new le(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class QD{convertValue(e,n="none"){switch(hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return gs(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){var s,o,u;const n=(u=(o=(s=e.fields)==null?void 0:s[Ih].arrayValue)==null?void 0:o.values)==null?void 0:u.map((h=>vt(h.doubleValue)));return new Ui(n)}convertGeoPoint(e){return new Pi(vt(e.latitude),vt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Wh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(iu(e));default:return null}}convertTimestamp(e){const n=us(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=rt.fromString(e);Ke(PT(s),9688,{name:e});const o=new ru(s.get(1),s.get(3)),u=new ve(s.popFirst(5));return o.isEqual(n)||dr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class Fl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ea extends gS{constructor(e,n,s,o,u,h){super(e,n,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(ff("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ea._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ea._jsonSchemaVersion="firestore/documentSnapshot/1.0",ea._jsonSchema={type:Mt("string",ea._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class yh extends ea{data(e={}){return super.data(e)}}class ta{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Fl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new yh(this._firestore,this._userDataWriter,s.key,s,new Fl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const g=new yh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Fl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new yh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Fl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return m.type!==0&&(p=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:KD(m.type),doc:g,oldIndex:p,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ta._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Op.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function KD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(r){r=Cn(r,Et);const e=Cn(r.firestore,pr);return kD(bu(e),r._key).then((n=>bS(e,r,n)))}ta._jsonSchemaVersion="firestore/querySnapshot/1.0",ta._jsonSchema={type:Mt("string",ta._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class fg extends QD{constructor(e){super(),this.firestore=e}convertBytes(e){return new qn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}function tn(r){r=Cn(r,_s);const e=Cn(r.firestore,pr),n=bu(e),s=new fg(e);return yS(r._query),jD(n,r._query).then((o=>new ta(e,s,r,o)))}function dg(r,e,n,...s){r=Cn(r,Et);const o=Cn(r.firestore,pr),u=cf(o);let h;return h=typeof(e=bt(e))=="string"||e instanceof Tu?fS(u,"updateDoc",r._key,e,n,s):hS(u,"updateDoc",r._key,e),pf(o,[h.toMutation(r._key,gn.exists(!0))])}function Gl(r){return pf(Cn(r.firestore,pr),[new rf(r._key,gn.none())])}function mf(r,e){const n=Cn(r.firestore,pr),s=ri(r),o=ES(r.converter,e);return pf(n,[cS(cf(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,gn.exists(!1))]).then((()=>s))}function Eo(r,...e){var g,p,E;r=bt(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||xE(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(xE(e[s])){const T=e[s];e[s]=(g=T.next)==null?void 0:g.bind(T),e[s+1]=(p=T.error)==null?void 0:p.bind(T),e[s+2]=(E=T.complete)==null?void 0:E.bind(T)}let u,h,m;if(r instanceof Et)h=Cn(r.firestore,pr),m=Jh(r._key.path),u={next:T=>{e[s]&&e[s](bS(h,r,T))},error:e[s+1],complete:e[s+2]};else{const T=Cn(r,_s);h=Cn(T.firestore,pr),m=T._query;const A=new fg(h);u={next:k=>{e[s]&&e[s](new ta(h,A,T,k))},error:e[s+1],complete:e[s+2]},yS(r._query)}return(function(A,k,j,U){const B=new rg(U),$=new tg(k,B,j);return A.asyncQueue.enqueueAndForget((async()=>Jp(await Ph(A),$))),()=>{B.Nu(),A.asyncQueue.enqueueAndForget((async()=>Zp(await Ph(A),$)))}})(bu(h),m,o,u)}function pf(r,e){return(function(s,o){const u=new ur;return s.asyncQueue.enqueueAndForget((async()=>SD(await VD(s),o,u))),u.promise})(bu(r),e)}function bS(r,e,n){const s=n.docs.get(e._key),o=new fg(r);return new ea(r,o,e._key,s,new Fl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=cf(e)}set(e,n,s){this._verifyNotCommitted();const o=km(e,this._firestore),u=ES(o.converter,n,s),h=cS(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,gn.none())),this}update(e,n,s,...o){this._verifyNotCommitted();const u=km(e,this._firestore);let h;return h=typeof(n=bt(n))=="string"||n instanceof Tu?fS(this._dataReader,"WriteBatch.update",u._key,n,s,o):hS(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(h.toMutation(u._key,gn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=km(e,this._firestore);return this._mutations=this._mutations.concat(new rf(n._key,gn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function km(r,e){if((r=bt(r)).firestore!==e)throw new le(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(r){return bu(r=Cn(r,pr)),new XD(r,(e=>pf(r,e)))}(function(e,n=!0){(function(o){Ro=o})(wo),ho(new ia("firestore",((s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),m=new pr(new FC(s.getProvider("auth-internal")),new QC(h,s.getProvider("app-check-internal")),(function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new le(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ru(p.options.projectId,E)})(h,o),h);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),rs(Iv,Dv,e),rs(Iv,Dv,"esm2020")})();var WD="firebase",JD="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rs(WD,JD,"app");const ZD={apiKey:"AIzaSyD5230yNYk6WneHum7z-HJH5mnqto_t1AM",authDomain:"biometric-attendace-a4bfe.firebaseapp.com",projectId:"biometric-attendace-a4bfe",storageBucket:"biometric-attendace-a4bfe.firebasestorage.app",messagingSenderId:"17500864277",appId:"1:17500864277:web:fa2e70843ff97d152bf31c",measurementId:"G-6Y38QMXG0V"},SS=ob(ZD),mg=zC(SS),Ve=PD(SS),wS=V.createContext(void 0);function pg(){const r=V.useContext(wS);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r}function e4({children:r}){const[e,n]=V.useState(null),[s,o]=V.useState(null),[u,h]=V.useState(!0);V.useEffect(()=>CR(mg,async p=>{if(n(p),p)try{const E=ri(Ve,"admins",p.uid),T=await YD(E);T.exists()?o(T.data()):o({name:p.displayName||"Admin",role:"Administrator",email:p.email||"No email"})}catch(E){console.error("Failed to fetch admin data:",E),o(null)}else o(null);h(!1)}),[]);const m={currentUser:e,adminData:s,loading:u};return _.jsx(wS.Provider,{value:m,children:r})}function t4(){const[r,e]=V.useState(""),[n,s]=V.useState(""),[o,u]=V.useState(""),[h,m]=V.useState(!1),g=Bh(),{currentUser:p}=pg();V.useEffect(()=>{p&&g("/dashboard",{replace:!0})},[p,g]);const E=async T=>{if(T.preventDefault(),u(""),m(!0),!r||!n){u("Please enter both email and password."),m(!1);return}try{await AR(mg,r,n),g("/dashboard")}catch(A){switch(A.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":u("Incorrect email or password. Please try again.");break;case"auth/invalid-email":u("Please enter a valid email address.");break;default:u("Failed to log in. Please check your credentials.");break}}finally{m(!1)}};return _.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:_.jsxs("div",{className:"max-w-md w-full space-y-8 p-10 bg-white shadow-lg rounded-xl",children:[_.jsx("div",{children:_.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Admin Sign In"})}),_.jsxs("form",{className:"mt-8 space-y-6",onSubmit:E,children:[o&&_.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:_.jsx("span",{className:"block sm:inline",children:o})}),_.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),_.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:r,onChange:T=>e(T.target.value)})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),_.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:n,onChange:T=>s(T.target.value)})]})]}),_.jsx("div",{children:_.jsx("button",{type:"submit",disabled:h,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-300 disabled:cursor-not-allowed",children:h?"Signing in...":"Sign in"})})]})]})})}function ha(){return _.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-10 w-10 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[_.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),_.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}const jm=["Computer Science","Software Engineering","Information Technology","Cyber Security","Electrical Electronics"],Lm=["100","200","300","400","500"];function n4({isOpen:r,onClose:e,onSubmit:n,studentData:s}){const[o,u]=V.useState(""),[h,m]=V.useState(""),[g,p]=V.useState(jm[0]),[E,T]=V.useState(Lm[0]),[A,k]=V.useState(""),[j,U]=V.useState("idle"),[B,$]=V.useState("Not Captured"),[J,X]=V.useState(""),se=V.useRef(null);if(V.useEffect(()=>{s?(u(s.name),m(s.studentId||""),p(s.department),T(s.level),s.fingerprintTemplate?(k(s.fingerprintTemplate),U("success"),$("Template captured")):(k(""),U("idle"),$("Not Captured"))):(u(""),m(""),p(jm[0]),T(Lm[0]),k(""),U("idle"),$("Not Captured")),X("")},[s,r]),V.useEffect(()=>{if(r){se.current=new WebSocket("ws://localhost:5000");let S=!0;return se.current.onopen=()=>{S&&(console.log("Successfully connected to fingerprint bridge."),U("idle"),$("Ready to capture"))},se.current.onmessage=C=>{if(S)try{const M=JSON.parse(C.data);M.type==="ENROLL_RESPONSE"?M.success?(k(M.id.toString()),U("success"),$(`Template captured successfully! (ID: ${M.id})`)):(U("error"),$(M.error||"Capture failed.")):M.type}catch{console.log("Non-JSON message:",C.data)}},se.current.onerror=C=>{S&&(console.error("WebSocket Error:",C),U("error"),$("Bridge connection failed."))},se.current.onclose=()=>{S&&(console.log("Disconnected from fingerprint bridge."),j!=="success"&&j!=="error"&&(U("idle"),$("Bridge disconnected.")))},()=>{S=!1,se.current&&se.current.readyState===WebSocket.OPEN&&se.current.close()}}},[r]),!r)return null;const ge=()=>{if(!se.current||se.current.readyState!==WebSocket.OPEN){U("error"),$("Bridge not connected. Re-open form.");return}U("capturing"),$("Sending capture command..."),se.current.send("CAPTURE_FINGERPRINT")},ye=()=>{switch(j){case"success":return"bg-green-100 text-green-800";case"capturing":return"bg-blue-100 text-blue-800 animate-pulse";case"error":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},N=S=>{if(S.preventDefault(),!o||!h||!g||!E){X("All fields except fingerprint are required.");return}if(!A||j!=="success"){X("A fingerprint must be successfully captured.");return}n({name:o,studentId:h,department:g,level:E,fingerprintTemplate:A})};return _.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 z-50 flex justify-center items-center p-4",children:_.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-md",children:[_.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:s?"Edit Student":"Add Student"}),_.jsxs("form",{onSubmit:N,className:"space-y-4",children:[J&&_.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:_.jsx("span",{className:"block sm:inline",children:J})}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),_.jsx("input",{type:"text",id:"name",value:o,onChange:S=>u(S.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"studentId",className:"block text-sm font-medium text-gray-700",children:"Student ID"}),_.jsx("input",{type:"text",id:"studentId",value:h,onChange:S=>m(S.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700",children:"Department"}),_.jsx("select",{id:"department",value:g,onChange:S=>p(S.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:jm.map(S=>_.jsx("option",{value:S,children:S},S))})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"level",className:"block text-sm font-medium text-gray-700",children:"Level"}),_.jsx("select",{id:"level",value:E,onChange:S=>T(S.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:Lm.map(S=>_.jsx("option",{value:S,children:S},S))})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fingerprint"}),_.jsxs("div",{className:"mt-1 flex items-center space-x-4 p-2 border border-gray-300 rounded-md",children:[_.jsx("button",{type:"button",onClick:ge,disabled:j==="capturing",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-300 disabled:cursor-wait",children:j==="capturing"?"Capturing...":"Capture"}),_.jsx("div",{className:"flex-1 text-center",children:_.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full transition-colors duration-300 ${ye()}`,children:B})})]})]}),_.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[_.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),_.jsx("button",{type:"submit",disabled:j!=="success",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-gray-400",children:"Save"})]})]})]})})}/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r4=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),NE=r=>{const e=r4(r);return e.charAt(0).toUpperCase()+e.slice(1)},AS=(...r)=>r.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),s4=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var a4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=V.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:h,...m},g)=>V.createElement("svg",{ref:g,...a4,width:e,height:e,stroke:r,strokeWidth:s?Number(n)*24/Number(e):n,className:AS("lucide",o),...!u&&!s4(m)&&{"aria-hidden":"true"},...m},[...h.map(([p,E])=>V.createElement(p,E)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=(r,e)=>{const n=V.forwardRef(({className:s,...o},u)=>V.createElement(o4,{ref:u,iconNode:e,className:AS(`lucide-${i4(NE(r))}`,`lucide-${r}`,s),...o}));return n.displayName=NE(r),n};/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],u4=Fn("circle-alert",l4);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],gg=Fn("circle-check-big",c4);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],gf=Fn("circle-x",h4);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],d4=Fn("download",f4);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],xS=Fn("fingerprint-pattern",m4);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],g4=Fn("funnel",p4);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],_4=Fn("info",y4);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],RS=Fn("loader",v4);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"m13.5 6.5-3.148-3.148a1.205 1.205 0 0 0-1.704 0L6.352 5.648a1.205 1.205 0 0 0 0 1.704L9.5 10.5",key:"dzhfyz"}],["path",{d:"M16.5 7.5 19 5",key:"1ltcjm"}],["path",{d:"m17.5 10.5 3.148 3.148a1.205 1.205 0 0 1 0 1.704l-2.296 2.296a1.205 1.205 0 0 1-1.704 0L13.5 14.5",key:"nfoymv"}],["path",{d:"M9 21a6 6 0 0 0-6-6",key:"1iajcf"}],["path",{d:"M9.352 10.648a1.205 1.205 0 0 0 0 1.704l2.296 2.296a1.205 1.205 0 0 0 1.704 0l4.296-4.296a1.205 1.205 0 0 0 0-1.704l-2.296-2.296a1.205 1.205 0 0 0-1.704 0z",key:"nv9zqy"}]],b4=Fn("satellite",E4);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],IE=Fn("trash-2",T4);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],CS=Fn("triangle-alert",S4);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],A4=Fn("x",w4);function NS({type:r,message:e,onClose:n}){const o={success:{bg:"bg-green-50",border:"border-green-200",text:"text-green-800",icon:_.jsx(gg,{className:"w-5 h-5 text-green-500"})},error:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon:_.jsx(gf,{className:"w-5 h-5 text-red-500"})},info:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon:_.jsx(u4,{className:"w-5 h-5 text-blue-500"})}}[r];return _.jsxs("div",{className:"fixed top-4 right-4 z-50",style:{animation:"slideInRight 0.3s ease-out"},children:[_.jsx("style",{children:`
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        @keyframes scaleIn {
          from {
            transform: scale(0.9);
            opacity: 0;
          }
          to {
            transform: scale(1);
            opacity: 1;
          }
        }
      `}),_.jsx("div",{className:`${o.bg} ${o.border} border rounded-lg shadow-lg p-4 pr-12 max-w-md min-w-[300px]`,children:_.jsxs("div",{className:"flex items-start gap-3",children:[o.icon,_.jsx("p",{className:`${o.text} text-sm font-medium flex-1`,children:e}),_.jsx("button",{onClick:n,className:`${o.text} hover:opacity-70 transition-opacity absolute top-3 right-3`,children:_.jsx(A4,{className:"w-4 h-4"})})]})})]})}function IS({isOpen:r,title:e,message:n,confirmText:s="Confirm",cancelText:o="Cancel",onConfirm:u,onCancel:h,variant:m="warning"}){if(!r)return null;const p={danger:{icon:"bg-red-100",iconColor:"text-red-600",button:"bg-red-600 hover:bg-red-700"},warning:{icon:"bg-yellow-100",iconColor:"text-yellow-600",button:"bg-yellow-600 hover:bg-yellow-700"},info:{icon:"bg-blue-100",iconColor:"text-blue-600",button:"bg-blue-600 hover:bg-blue-700"}}[m];return _.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:_.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",style:{animation:"scaleIn 0.2s ease-out"},children:[_.jsx("style",{children:`
          @keyframes scaleIn {
            from {
              transform: scale(0.9);
              opacity: 0;
            }
            to {
              transform: scale(1);
              opacity: 1;
            }
          }
        `}),_.jsx("div",{className:"p-6",children:_.jsxs("div",{className:"flex items-start gap-4",children:[_.jsx("div",{className:`${p.icon} p-3 rounded-full flex-shrink-0`,children:_.jsx(CS,{className:`w-6 h-6 ${p.iconColor}`})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e}),_.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-line",children:n})]})]})}),_.jsxs("div",{className:"bg-gray-50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[_.jsx("button",{onClick:h,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:o}),_.jsx("button",{onClick:u,className:`px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors ${p.button}`,children:s})]})]})})}function x4(){const[r,e]=V.useState([]),[n,s]=V.useState(!0),[o,u]=V.useState(!1),[h,m]=V.useState(null),[g,p]=V.useState(null),[E,T]=V.useState(!1),[A,k]=V.useState({current:0,total:0}),[j,U]=V.useState(!1),[B,$]=V.useState(null),[J,X]=V.useState({isOpen:!1,title:"",message:"",variant:"warning",onConfirm:()=>{}});V.useEffect(()=>{s(!0);const I=Eo(st(Ve,"students"),R=>{const he=R.docs.map(me=>({id:me.id,...me.data()}));e(he),s(!1)},R=>{console.error("Error fetching students:",R),s(!1)});return()=>I()},[]),V.useEffect(()=>{if(B){const I=setTimeout(()=>$(null),5e3);return()=>clearTimeout(I)}},[B]);const se=(I=null)=>{m(I),u(!0)},ge=()=>{u(!1),m(null)},ye=async I=>{try{if(h){const R=ri(Ve,"students",h.id);await dg(R,I)}else await mf(st(Ve,"students"),I);ge()}catch(R){console.error("Error saving student:",R)}},N=async I=>{const R=r.find(he=>he.id===I);if(!R){console.error("Student not found for deletion.");return}if(!R.fingerprintTemplate){X({isOpen:!0,title:"Delete Student",message:"This student has no fingerprint registered. Are you sure you want to delete them from the database?",variant:"danger",onConfirm:async()=>{X({...J,isOpen:!1});try{p(I),await Gl(ri(Ve,"students",I)),$({type:"success",message:"Student deleted successfully!"})}catch(he){console.error("Error deleting student from Firestore:",he),$({type:"error",message:"Error deleting student from database."})}finally{p(null)}}});return}X({isOpen:!0,title:"Delete Student",message:"Are you sure you want to delete this student? This will also remove their fingerprint from the scanner module.",variant:"danger",onConfirm:()=>{X({...J,isOpen:!1}),p(I);const he=new WebSocket("ws://localhost:5000");he.onopen=()=>{console.log("Connected to fingerprint bridge for deletion."),he.send(`DELETE_FINGERPRINT:${R.fingerprintTemplate}`)},he.onmessage=async me=>{try{const K=JSON.parse(me.data);if(K.type==="DELETE_RESPONSE"){if(K.success)try{await Gl(ri(Ve,"students",I)),$({type:"success",message:"Student and fingerprint deleted successfully!"})}catch(re){console.error("Firestore delete error:",re),$({type:"error",message:"Fingerprint deleted, but database cleanup failed."})}else $({type:"error",message:`Failed to delete fingerprint: ${K.error||"Unknown error"}`});he.close()}}catch{console.log("Ignored non-JSON message during delete")}},he.onerror=me=>{console.error("WebSocket Error:",me),$({type:"error",message:"Could not connect to the fingerprint bridge. Please ensure it is running."}),p(null),(he.readyState===WebSocket.OPEN||he.readyState===WebSocket.CONNECTING)&&he.close()},he.onclose=()=>{console.log("Disconnected from fingerprint bridge."),p(null)}}})},S=async()=>{if(r.length===0){$({type:"info",message:"No students to delete."});return}X({isOpen:!0,title:"Delete All Students",message:`Are you sure you want to delete ALL ${r.length} students? This will:

1. Delete all fingerprint templates from the scanner module
2. Remove all students from the database

This action CANNOT be undone!`,variant:"danger",onConfirm:()=>{X({...J,isOpen:!1}),C()}})},C=async()=>{T(!0),k({current:0,total:r.length});const I=new WebSocket("ws://localhost:5000");let R=0;const he=[...r],me={success:0,failed:0};I.onopen=()=>{console.log("Connected to bridge for bulk deletion."),K()};const K=async()=>{if(R>=he.length){I.close(),T(!1),$({type:me.failed===0?"success":"info",message:`Deletion complete!  ${me.success} deleted,  ${me.failed} failed`});return}const re=he[R];if(k({current:R+1,total:he.length}),!re.fingerprintTemplate){try{await Gl(ri(Ve,"students",re.id)),me.success++,console.log(` Deleted student (no fingerprint): ${re.name}`)}catch(de){console.error(` Failed to delete ${re.name}:`,de),me.failed++}R++,K();return}console.log(`Deleting fingerprint ${re.fingerprintTemplate} for ${re.name}...`),I.send(`DELETE_FINGERPRINT:${re.fingerprintTemplate}`)};I.onmessage=async re=>{try{const de=JSON.parse(re.data);if(de.type==="DELETE_RESPONSE"){const Se=he[R];if(de.success)try{await Gl(ri(Ve,"students",Se.id)),me.success++,console.log(` Deleted: ${Se.name}`)}catch(He){console.error(` Hardware deleted but DB failed for ${Se.name}:`,He),me.failed++}else console.error(` Hardware delete failed for ${Se.name}`),me.failed++;R++,K()}}catch{console.log("Non-JSON message during bulk delete")}},I.onerror=re=>{console.error("WebSocket error during bulk delete:",re),$({type:"error",message:`Connection error after deleting ${me.success} students. Please check the bridge.`}),T(!1),I.close()},I.onclose=()=>{console.log("Bulk deletion connection closed."),T(!1)}},M=()=>{X({isOpen:!0,title:"Clear All Fingerprints",message:`Are you sure you want to clear ALL fingerprints from the sensor module?

This will:
1. Erase all fingerprint templates from the hardware
2. Students will need to re-enroll their fingerprints

This action CANNOT be undone!`,variant:"danger",onConfirm:()=>{X({...J,isOpen:!1}),D()}})},D=()=>{U(!0);const I=new WebSocket("ws://localhost:5000");let R=!1;I.onopen=()=>{console.log("Connected to bridge for clearing fingerprints."),I.send("CLEAR_ALL_FINGERPRINTS")},I.onmessage=he=>{try{const me=JSON.parse(he.data);me.type==="CLEAR_ALL_RESPONSE"&&(R=!0,me.success?($({type:"success",message:"All fingerprints cleared from sensor module!"}),console.log(" All fingerprints cleared from hardware")):($({type:"error",message:`Failed to clear fingerprints: ${me.error||"Unknown error"}`}),console.error(" Clear all failed:",me.error)),I.close(),U(!1))}catch{console.log("Non-JSON message:",he.data)}},I.onerror=he=>{console.error("WebSocket error:",he),$({type:"error",message:"Could not connect to fingerprint bridge. Please ensure it is running."}),U(!1),I.close()},I.onclose=()=>{R||($({type:"error",message:"Connection closed before receiving response."}),U(!1)),console.log("Clear all fingerprints connection closed.")},setTimeout(()=>{!R&&I.readyState===WebSocket.OPEN&&(I.close(),$({type:"error",message:"Operation timed out. Please try again."}),U(!1))},1e4)};return n?_.jsx("div",{className:"flex justify-center items-center p-8",children:_.jsx(ha,{})}):_.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-6 md:p-8",children:[_.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center mb-6 gap-4",children:[_.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Manage Students"}),_.jsxs("div",{className:"flex gap-3",children:[_.jsx("button",{onClick:M,disabled:j,className:"px-5 py-2.5 bg-orange-600 text-white font-semibold rounded-lg hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200 flex items-center gap-2",children:j?_.jsxs(_.Fragment,{children:[_.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[_.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),_.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Clearing..."]}):"Clear All Fingerprints"}),_.jsx("button",{onClick:S,disabled:E||r.length===0,className:"px-5 py-2.5 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200 flex items-center gap-2",children:E?_.jsxs(_.Fragment,{children:[_.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[_.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),_.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting ",A.current,"/",A.total]}):"Delete All Students"}),_.jsx("button",{onClick:()=>se(),className:"px-5 py-2.5 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Add Student"})]})]}),_.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsx("thead",{className:"bg-gray-50",children:_.jsxs("tr",{children:[_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student ID"}),_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Level"}),_.jsx("th",{scope:"col",className:"relative px-6 py-3",children:_.jsx("span",{className:"sr-only",children:"Actions"})})]})}),_.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.length>0?r.map(I=>_.jsxs("tr",{className:"hover:bg-gray-50",children:[_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:I.name}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:I.studentId}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:I.department}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:I.level}),_.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-4",children:[_.jsx("button",{onClick:()=>se(I),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),_.jsx("button",{onClick:()=>N(I.id),disabled:g===I.id,className:"text-red-600 hover:text-red-900 disabled:text-gray-400 disabled:cursor-wait",children:g===I.id?"Deleting...":"Delete"})]})]},I.id)):_.jsx("tr",{children:_.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No students found."})})})]})}),o&&_.jsx(n4,{isOpen:o,onClose:ge,onSubmit:ye,studentData:h}),B&&_.jsx(NS,{type:B.type,message:B.message,onClose:()=>$(null)}),_.jsx(IS,{isOpen:J.isOpen,title:J.title,message:J.message,variant:J.variant,confirmText:"Delete",onConfirm:J.onConfirm,onCancel:()=>X({...J,isOpen:!1})})]})}const DE=["Computer Science","Software Engineering","Information Technology","Cyber Security","Electrical Electronics"],OE=["100","200","300","400","500"];function R4({isOpen:r,onClose:e,onSubmit:n}){const[s,o]=V.useState(""),[u,h]=V.useState(""),[m,g]=V.useState(DE[0]),[p,E]=V.useState(OE[0]),[T,A]=V.useState("");if(!r)return null;const k=j=>{if(j.preventDefault(),!s||!u||!m||!p){A("All fields are required.");return}n({name:s,code:u,department:m,level:p})};return _.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:_.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl p-8 w-full max-w-md",children:[_.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add Course"}),_.jsxs("form",{onSubmit:k,className:"space-y-4",children:[T&&_.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:_.jsx("span",{className:"block sm:inline",children:T})}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-white",children:"Course Name"}),_.jsx("input",{type:"text",id:"name",value:s,onChange:j=>o(j.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm  text-black focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"code",className:"block text-sm font-medium text-white",children:"Course Code"}),_.jsx("input",{type:"text",id:"code",value:u,onChange:j=>h(j.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-black focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-white",children:"Department"}),_.jsx("select",{id:"department",value:m,onChange:j=>g(j.target.value),className:"mt-1 block w-full px-3 py-2 border border-indigo-500 bg-gray-800 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:DE.map(j=>_.jsx("option",{value:j,children:j},j))})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"level",className:"block text-sm font-medium text-white",children:"Level"}),_.jsx("select",{id:"level",value:p,onChange:j=>E(j.target.value),className:"mt-1 block w-full px-3 py-2 border border-indigo-500 bg-gray-800 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:OE.map(j=>_.jsx("option",{value:j,children:j},j))})]}),_.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[_.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),_.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Save"})]})]})]})})}function C4(){const[r,e]=V.useState([]),[n,s]=V.useState(!0),[o,u]=V.useState(!1);V.useEffect(()=>{s(!0);const p=Eo(st(Ve,"courses"),E=>{const T=E.docs.map(A=>({id:A.id,...A.data()}));e(T),s(!1)},E=>{console.error("Error fetching courses:",E),s(!1)});return()=>p()},[]);const h=()=>{u(!0)},m=()=>{u(!1)},g=async p=>{try{const T=(await mf(st(Ve,"courses"),p)).id,A=Mi(st(Ve,"students"),xn("department","==",p.department),xn("level","==",p.level)),k=await tn(A);if(!k.empty){const j=TS(Ve);k.forEach(U=>{const B=ri(st(Ve,"courseStudents"));j.set(B,{courseId:T,studentId:U.id})}),await j.commit()}m()}catch(E){console.error("Error saving course and enrolling students:",E)}};return n?_.jsx("div",{className:"flex justify-center items-center p-8",children:_.jsx(ha,{})}):_.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-8",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Manage Courses"}),_.jsx("button",{onClick:h,className:"px-4 py-2 bg-indigo-600 text-white font-medium rounded-md hover:bg-indigo-700",children:"Add Course"})]}),_.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsx("thead",{className:"bg-gray-50",children:_.jsxs("tr",{children:[_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course Name"}),_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course Code"}),_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Level"})]})}),_.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.length>0?r.map(p=>_.jsxs("tr",{children:[_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p.name}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p.code}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p.department}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p.level})]},p.id)):_.jsx("tr",{children:_.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No courses found."})})})]})}),o&&_.jsx(R4,{isOpen:o,onClose:m,onSubmit:g})]})}function N4(){const[r,e]=V.useState([]),[n,s]=V.useState([]),[o,u]=V.useState(!0);V.useEffect(()=>{const m=async()=>{try{const E=(await tn(st(Ve,"courses"))).docs.map(T=>({id:T.id,...T.data()}));e(E)}catch(p){console.error("Error fetching courses:",p)}},g=Eo(st(Ve,"sessions"),p=>{const E=p.docs.map(T=>({id:T.id,...T.data()}));s(E),u(!1)},p=>{console.error("Error fetching sessions:",p),u(!1)});return m(),()=>g()},[]);const h=async m=>{const g=Mi(st(Ve,"sessions"),xn("courseId","==",m),xn("active","==",!0)),p=await tn(g);if(p.empty)await mf(st(Ve,"sessions"),{courseId:m,startTime:Je.now(),endTime:null,active:!0});else{const E=p.docs[0];await dg(ri(Ve,"sessions",E.id),{endTime:Je.now(),active:!1})}};return o?_.jsx("div",{className:"flex justify-center items-center p-8",children:_.jsx(ha,{})}):_.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-8",children:[_.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Manage Class Sessions"}),_.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsx("thead",{className:"bg-gray-50",children:_.jsxs("tr",{children:[_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course Name"}),_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),_.jsx("th",{scope:"col",className:"relative px-6 py-3",children:_.jsx("span",{className:"sr-only",children:"Actions"})})]})}),_.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.length>0?r.map(m=>{const g=n.some(p=>p.courseId===m.id&&p.active);return _.jsxs("tr",{children:[_.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[m.name," (",m.code,")"]}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:_.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${g?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g?"Active":"Inactive"})}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:_.jsx("button",{onClick:()=>h(m.id),className:`px-4 py-2 text-white font-medium rounded-md ${g?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:g?"End Session":"Start Session"})})]},m.id)}):_.jsx("tr",{children:_.jsx("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No courses found. Add courses first."})})})]})})]})}function DS({isOpen:r,onClose:e,latitude:n,longitude:s,title:o="Attendance Location"}){return!r||n===void 0||s===void 0?null:_.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:_.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl overflow-hidden animate-fade-in-scale",children:[_.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 bg-gray-50",children:[_.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:o}),_.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:_.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),_.jsx("div",{className:"p-0 h-96 bg-gray-100 relative",children:_.jsx("iframe",{title:"Location Map",width:"100%",height:"100%",frameBorder:"0",style:{border:0},src:`https://maps.google.com/maps?q=${n},${s}&z=15&output=embed`,allowFullScreen:!0})}),_.jsxs("div",{className:"p-4 bg-gray-50 flex justify-between items-center text-sm text-gray-500",children:[_.jsxs("span",{children:["Lat: ",n.toFixed(6),", Lon: ",s.toFixed(6)]}),_.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${n},${s}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-medium",children:"Open in Google Maps"})]})]})})}function I4(){var N;const[r,e]=V.useState([]),[n,s]=V.useState(new Map),[o,u]=V.useState(new Map),[h,m]=V.useState(!0),[g,p]=V.useState(null),[E,T]=V.useState("all"),[A,k]=V.useState(null),[j,U]=V.useState(null),[B,$]=V.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}});V.useEffect(()=>{(async()=>{try{const D=await tn(st(Ve,"students")),I=new Map(D.docs.map(me=>[me.id,{id:me.id,...me.data()}]));s(I);const R=await tn(st(Ve,"courses")),he=new Map(R.docs.map(me=>[me.id,{id:me.id,...me.data()}]));u(he)}catch(D){console.error("Error fetching students and courses:",D)}})();const C=Mi(st(Ve,"attendance"),$D("joinTime","desc")),M=Eo(C,D=>{const I=D.docs.map(R=>({id:R.id,...R.data()}));e(I),m(!1)},D=>{console.error("Error fetching attendance:",D),m(!1)});return()=>M()},[]),V.useEffect(()=>{if(A){const S=setTimeout(()=>k(null),5e3);return()=>clearTimeout(S)}},[A]);const J=()=>{var me,K;const S=E==="all"?X:se,C=E==="all"?"All_Courses":((K=(me=o.get(E))==null?void 0:me.name)==null?void 0:K.replace(/\s+/g,"_"))||"Unknown",M=["Student Name","Course Name","Join Time","Sign Out Time","Status","Latitude","Longitude","Location"],D=S.map(re=>[re.studentName,re.courseName,re.joinTime.toDate().toLocaleString(),re.signOutTime?re.signOutTime.toDate().toLocaleString():"-",re.signOutTime?"Signed Out":"Signed In",re.latitude||"",re.longitude||"",re.locationName||""]),I=[M.join(","),...D.map(re=>re.map(de=>`"${de}"`).join(","))].join(`
`),R=new Blob([I],{type:"text/csv;charset=utf-8;"}),he=document.createElement("a");if(he.download!==void 0){const re=URL.createObjectURL(R);he.setAttribute("href",re),he.setAttribute("download",`attendance_${C}.csv`),he.style.visibility="hidden",document.body.appendChild(he),he.click(),document.body.removeChild(he)}},X=V.useMemo(()=>r.map(S=>{var C,M;return{...S,studentName:((C=n.get(S.studentId))==null?void 0:C.name)||"Unknown Student",courseName:((M=o.get(S.courseId))==null?void 0:M.name)||"Unknown Course"}}),[r,n,o]),se=V.useMemo(()=>E==="all"?X:X.filter(S=>S.courseId===E),[X,E]),ge=()=>{r.length!==0&&$({isOpen:!0,title:"Clear All History",message:`Are you sure you want to delete ALL ${r.length} attendance records?

This action CANNOT be undone.`,onConfirm:async()=>{$({...B,isOpen:!1}),m(!0);try{const C=r;for(let M=0;M<C.length;M+=500){const D=TS(Ve);C.slice(M,M+500).forEach(R=>{const he=ri(Ve,"attendance",R.id);D.delete(he)}),await D.commit()}k({type:"success",message:"All attendance history cleared successfully."})}catch(S){console.error("Error clearing history:",S),k({type:"error",message:"Failed to clear history."})}finally{m(!1)}}})},ye=S=>{$({isOpen:!0,title:"Delete Attendance Record",message:`Are you sure you want to delete this attendance record?

Student: ${S.studentName}
Course: ${S.courseName}
Time: ${S.joinTime.toDate().toLocaleString()}

This action cannot be undone!`,onConfirm:async()=>{$({...B,isOpen:!1}),U(S.id);try{await Gl(ri(Ve,"attendance",S.id)),k({type:"success",message:"Attendance record deleted successfully!"})}catch(C){console.error("Error deleting attendance:",C),k({type:"error",message:"Failed to delete attendance record."})}finally{U(null)}}})};return h?_.jsx("div",{className:"flex justify-center items-center p-8",children:_.jsx(ha,{})}):_.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-8",children:[_.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center mb-6 gap-4",children:[_.jsxs("div",{children:[_.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Live Attendance Log"}),_.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[se.length," ",se.length===1?"record":"records",E!=="all"&&` for ${(N=o.get(E))==null?void 0:N.name}`]})]}),_.jsxs("div",{className:"flex flex-wrap gap-3",children:[_.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg",children:[_.jsx(g4,{size:16,className:"text-gray-500"}),_.jsxs("select",{value:E,onChange:S=>T(S.target.value),className:"bg-transparent border-none text-sm text-gray-900 focus:ring-0 focus:outline-none cursor-pointer",children:[_.jsx("option",{value:"all",children:"All Courses"}),Array.from(o.values()).map(S=>_.jsx("option",{value:S.id,children:S.name},S.id))]})]}),_.jsxs("button",{onClick:J,disabled:se.length===0,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[_.jsx(d4,{size:18}),"Export CSV"]}),_.jsxs("button",{onClick:ge,disabled:h||r.length===0,className:"flex items-center gap-2 px-4 py-2 bg-red-100 text-red-700 border border-red-200 rounded-lg hover:bg-red-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[_.jsx(IE,{size:18}),"Clear History"]})]})]}),_.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsx("thead",{className:"bg-gray-50",children:_.jsxs("tr",{children:[_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course Name"}),_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Join Time"}),_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coordinates"}),_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Map"}),_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),_.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:se.length>0?se.map(S=>_.jsxs("tr",{children:[_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:S.studentName}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S.courseName}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S.joinTime.toDate().toLocaleString()}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-bold ${S.signOutTime?"bg-gray-100 text-gray-400 border border-gray-200":"bg-green-100 text-green-700 border border-green-200"}`,children:[_.jsx("div",{className:`w-2 h-2 rounded-full ${S.signOutTime?"bg-gray-400":"bg-green-500"}`}),"IN"]}),_.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-bold ${S.signOutTime?"bg-red-100 text-red-700 border border-red-200":"bg-gray-100 text-gray-400 border border-gray-200"}`,children:[_.jsx("div",{className:`w-2 h-2 rounded-full ${S.signOutTime?"bg-red-500":"bg-gray-400"}`}),"OUT"]})]})}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S.latitude&&S.longitude?_.jsxs("span",{className:"font-mono text-xs",children:[S.latitude.toFixed(6),", ",S.longitude.toFixed(6)]}):_.jsx("span",{className:"text-gray-400",children:"No Data"})}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S.latitude&&S.longitude?_.jsxs("button",{onClick:()=>p({lat:S.latitude,lon:S.longitude}),className:"text-blue-600 hover:text-blue-900 flex items-center text-xs font-medium",children:[_.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"View Map"]}):_.jsx("span",{className:"text-gray-400",children:""})}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:_.jsxs("button",{onClick:()=>ye(S),disabled:j===S.id,className:"text-red-600 hover:text-red-800 disabled:text-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-1",title:"Delete record",children:[_.jsx(IE,{size:16}),j===S.id&&_.jsx("span",{className:"text-xs",children:"Deleting..."})]})})]},S.id)):_.jsx("tr",{children:_.jsx("td",{colSpan:8,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No attendance records yet."})})})]})}),_.jsx(DS,{isOpen:!!g,onClose:()=>p(null),latitude:g==null?void 0:g.lat,longitude:g==null?void 0:g.lon}),A&&_.jsx(NS,{type:A.type,message:A.message,onClose:()=>k(null)}),_.jsx(IS,{isOpen:B.isOpen,title:B.title,message:B.message,variant:"danger",confirmText:"Delete",onConfirm:B.onConfirm,onCancel:()=>$({...B,isOpen:!1})})]})}function D4(){const[r,e]=V.useState(!0),[n,s]=V.useState([]),[o,u]=V.useState(new Map),[h,m]=V.useState([]),[g,p]=V.useState([]),[E,T]=V.useState(""),[A,k]=V.useState(null);V.useEffect(()=>{(async()=>{e(!0);try{const[B,$,J,X]=await Promise.all([tn(st(Ve,"courses")),tn(st(Ve,"students")),tn(st(Ve,"sessions")),tn(st(Ve,"attendance"))]),se=B.docs.map(S=>({id:S.id,...S.data()})),ge=new Map($.docs.map(S=>[S.id,{id:S.id,...S.data()}])),ye=J.docs.map(S=>({id:S.id,...S.data()})),N=X.docs.map(S=>({id:S.id,...S.data()}));s(se),u(ge),m(ye),p(N),se.length>0&&T(se[0].id)}catch(B){console.error("Error fetching analytics data:",B)}finally{e(!1)}})()},[]);const j=V.useMemo(()=>{if(!E||o.size===0)return[];const U=n.find(J=>J.id===E);if(!U)return[];const B=h.filter(J=>J.courseId===E).length,$=Array.from(o.values()).filter(J=>J.department===U.department&&J.level===U.level);return $.length===0?[]:$.map(J=>{const X=g.filter(S=>S.studentId===J.id&&S.courseId===E),se=X.length,ge=B>0?se/B*100:0;let ye,N;if(X.length>0){const S=X[X.length-1];ye=S.latitude,N=S.longitude}return{studentDocId:J.id,studentId:J.studentId,studentName:J.name,totalClasses:B,attendedClasses:se,attendancePercentage:Math.round(ge),latitude:ye,longitude:N}})},[E,n,o,h,g]);return r?_.jsx("div",{className:"flex justify-center items-center p-8",children:_.jsx(ha,{})}):_.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-6 md:p-8",children:[_.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center mb-6 gap-4",children:[_.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Attendance Analytics"}),n.length>0&&_.jsxs("div",{children:[_.jsx("label",{htmlFor:"course-select",className:"sr-only",children:"Select a course"}),_.jsx("select",{id:"course-select",value:E,onChange:U=>T(U.target.value),className:"block w-full md:w-auto pl-3 pr-10 py-2 text-base bg-white border-gray-300 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:n.map(U=>_.jsxs("option",{value:U.id,children:[U.name," (",U.code,")"]},U.id))})]})]}),_.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[_.jsx("thead",{className:"bg-gray-50",children:_.jsxs("tr",{children:[_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student ID"}),_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Classes"}),_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Classes Attended"}),_.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attendance %"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coordinates"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Map"})]})}),_.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.length>0?j.map(U=>_.jsxs("tr",{className:"hover:bg-gray-50",children:[_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:U.studentName}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:U.studentId}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:U.totalClasses}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:U.attendedClasses}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_.jsxs("div",{className:"flex items-center",children:[_.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:_.jsx("div",{className:"bg-indigo-600 h-2.5 rounded-full",style:{width:`${U.attendancePercentage}%`}})}),_.jsxs("span",{className:"ml-3 font-medium w-12 text-right",children:[U.attendancePercentage,"%"]})]})}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:U.latitude&&U.longitude?_.jsxs("span",{className:"font-mono text-xs",children:[U.latitude.toFixed(6),", ",U.longitude.toFixed(6)]}):_.jsx("span",{className:"text-gray-400",children:"No Data"})}),_.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:U.latitude&&U.longitude?_.jsxs("button",{onClick:()=>k({lat:U.latitude,lon:U.longitude}),className:"text-blue-600 hover:text-blue-900 flex items-center text-xs font-medium",children:[_.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"View Map"]}):_.jsx("span",{className:"text-gray-400",children:""})})]},U.studentDocId)):_.jsx("tr",{children:_.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-sm text-gray-500",children:n.length===0?"No courses found.":"No analytics to display. Ensure students are enrolled and sessions have been conducted."})})})]})}),_.jsx(DS,{isOpen:!!A,onClose:()=>k(null),latitude:A==null?void 0:A.lat,longitude:A==null?void 0:A.lon})]})}function O4(){var u,h,m,g;const[r,e]=V.useState({esp32Connected:!1,webClients:0,uptime:0,timestamp:""}),[n,s]=V.useState(!1),o=V.useRef(null);return V.useEffect(()=>{const p=()=>{o.current=new WebSocket("ws://localhost:5000"),o.current.onopen=()=>{s(!0)},o.current.onclose=()=>{s(!1),setTimeout(p,3e3)},o.current.onerror=()=>{s(!1)},o.current.onmessage=E=>{try{const T=JSON.parse(E.data);T.type==="ESP32_CONNECTION"?e(A=>({...A,esp32Connected:T.connected})):T.type==="ESP32_STATUS"&&e(A=>({...A,esp32Connected:!0,esp32Status:T.data}))}catch(T){console.error("Failed to parse status message",T)}}};return p(),()=>{o.current&&o.current.close()}},[]),_.jsxs("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:[_.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-3",children:"System Status"}),_.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[_.jsxs("div",{className:"flex flex-col",children:[_.jsx("span",{className:"text-xs text-gray-500 uppercase",children:"Connection Server"}),_.jsxs("div",{className:"flex items-center mt-1",children:[_.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${n?"bg-green-500":"bg-red-500"}`}),_.jsx("span",{className:`font-medium ${n?"text-green-700":"text-red-700"}`,children:n?"Online":"Offline"})]})]}),_.jsxs("div",{className:"flex flex-col",children:[_.jsx("span",{className:"text-xs text-gray-500 uppercase",children:"ESP32 Device"}),_.jsxs("div",{className:"flex items-center mt-1",children:[_.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${r.esp32Connected?"bg-green-500":"bg-gray-400"}`}),_.jsx("span",{className:"font-medium text-gray-800",children:r.esp32Connected?"Connected":"Disconnected"})]})]}),_.jsxs("div",{className:"flex flex-col",children:[_.jsx("span",{className:"text-xs text-gray-500 uppercase",children:"Modules"}),_.jsxs("div",{className:"flex flex-col mt-1 space-y-1",children:[_.jsxs("div",{className:"flex items-center text-sm",children:[_.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${(u=r.esp32Status)!=null&&u.fingerprint?"bg-green-500":"bg-red-400"}`}),_.jsx("span",{className:"text-gray-600",children:"Fingerprint"})]}),_.jsxs("div",{className:"flex items-center text-sm",children:[_.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${(h=r.esp32Status)!=null&&h.gps?"bg-green-500":"bg-red-400"}`}),_.jsxs("span",{className:"text-gray-600",children:["GPS ",(m=r.esp32Status)!=null&&m.gpsFixed?"(Fixed)":""]})]})]})]}),_.jsxs("div",{className:"flex flex-col",children:[_.jsx("span",{className:"text-xs text-gray-500 uppercase",children:"Satellites"}),_.jsx("span",{className:"text-lg font-bold text-gray-800",children:((g=r.esp32Status)==null?void 0:g.satellites)||0})]})]})]})}const ME=[{id:"dashboard",label:"Dashboard",icon:r=>_.jsx("svg",{...r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})},{id:"studentManagement",label:"Students",icon:r=>_.jsx("svg",{...r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1a6 6 0 00-5.176-5.97M15 21h6m-6-1a6 6 0 00-5.176-5.97M12 12a4 4 0 100-8 4 4 0 000 8z"})})},{id:"courseManagement",label:"Courses",icon:r=>_.jsx("svg",{...r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v11.494m-9-5.747h18"})})},{id:"sessionManagement",label:"Sessions",icon:r=>_.jsx("svg",{...r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},{id:"attendanceLog",label:"Attendance Log",icon:r=>_.jsx("svg",{...r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})},{id:"attendanceAnalytics",label:"Analytics",icon:r=>_.jsxs("svg",{...r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"}),_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"})]})}];function M4(){var T;const{adminData:r,loading:e}=pg(),n=Bh(),[s,o]=V.useState("dashboard"),[u,h]=V.useState(!1),m=async()=>{try{await NR(mg),n("/login")}catch(A){console.error("Failed to sign out:",A)}};if(e||!r)return _.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:_.jsx(ha,{})});const g=()=>{const A={studentManagement:_.jsx(x4,{}),courseManagement:_.jsx(C4,{}),sessionManagement:_.jsx(N4,{}),attendanceLog:_.jsx(I4,{}),attendanceAnalytics:_.jsx(D4,{}),dashboard:_.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-8 text-gray-800",children:[_.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Dashboard"}),_.jsx(O4,{}),_.jsxs("p",{className:"text-lg text-gray-500",children:["Welcome back, ",r.name,"."]}),_.jsx("div",{className:"mt-8 border-t border-gray-200 pt-8",children:_.jsxs("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2",children:[_.jsxs("div",{className:"sm:col-span-1",children:[_.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),_.jsx("dd",{className:"mt-1 text-lg text-gray-800",children:r.name})]}),_.jsxs("div",{className:"sm:col-span-1",children:[_.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Email address"}),_.jsx("dd",{className:"mt-1 text-lg text-gray-800",children:r.email})]}),_.jsxs("div",{className:"sm:col-span-1",children:[_.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Role"}),_.jsx("dd",{className:"mt-1 text-lg text-gray-800",children:r.role})]})]})})]})};return A[s]||A.dashboard},p=A=>`w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg transition-colors duration-200 ${s===A?"bg-blue-600 text-white font-semibold":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,E=()=>_.jsxs(_.Fragment,{children:[_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center space-x-3 mb-10 px-2",children:[_.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:_.jsxs("svg",{className:"w-6 h-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0 3.517-1.009 6.789-2.75 9.566l-2.75-2.75a2.25 2.25 0 01-3.182 0l-2.75 2.75A18.003 18.003 0 0112 11z"}),_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0-3.517 1.009-6.789 2.75-9.566l2.75 2.75a2.25 2.25 0 013.182 0l2.75-2.75A18.003 18.003 0 0112 11z"})]})}),_.jsx("h1",{className:"text-xl font-bold text-white",children:"Admin Panel"})]}),_.jsx("nav",{className:"space-y-2",children:ME.map(A=>_.jsxs("button",{onClick:()=>{o(A.id),h(!1)},className:p(A.id),children:[A.icon({className:"w-6 h-6 flex-shrink-0"}),_.jsx("span",{className:"truncate",children:A.label})]},A.id))})]}),_.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[_.jsxs("div",{className:"flex items-center space-x-3 px-2 mb-4",children:[_.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center text-blue-400 font-bold",children:r.name.charAt(0)}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm font-semibold text-white truncate",children:r.name}),_.jsx("p",{className:"text-xs text-gray-400 truncate",children:r.email})]})]}),_.jsxs("button",{onClick:m,className:"w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-red-400 hover:bg-red-500 hover:text-white transition-colors duration-200",children:[_.jsx("svg",{className:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),_.jsx("span",{children:"Sign Out"})]})]})]});return _.jsxs("div",{className:"relative min-h-screen md:flex",children:[u&&_.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden",onClick:()=>h(!1),"aria-hidden":"true"}),_.jsx("aside",{className:`fixed inset-y-0 left-0 w-64 bg-gray-800 p-4 flex flex-col justify-between transform ${u?"translate-x-0":"-translate-x-full"} md:relative md:translate-x-0 transition-transform duration-300 ease-in-out z-40`,children:_.jsx(E,{})}),_.jsxs("div",{className:"flex-1 flex flex-col",children:[_.jsxs("header",{className:"md:hidden flex justify-between items-center bg-white p-4 shadow-md sticky top-0 z-20",children:[_.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:((T=ME.find(A=>A.id===s))==null?void 0:T.label)||"Dashboard"}),_.jsxs("button",{onClick:()=>h(!0),className:"text-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-500 rounded",children:[_.jsx("span",{className:"sr-only",children:"Open sidebar"}),_.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})]}),_.jsx("main",{className:"flex-1 p-6 lg:p-10 overflow-y-auto",children:g()})]})]})}function V4(){const{currentUser:r,loading:e}=pg();return e?_.jsx("div",{className:"min-h-screen flex items-center justify-center",children:_.jsx(ha,{})}):r?_.jsx(cA,{}):_.jsx(FE,{to:"/login",replace:!0})}function k4({data:r,onClose:e}){const n=V.useRef(null),s=r.status==="exit";return r.status==="entry"||r.status,_.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:_.jsx("div",{ref:n,className:"relative w-full max-w-md transform transition-all duration-500 ease-out animate-slide-up",children:_.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-200",children:[_.jsxs("div",{className:"bg-gray-100 px-6 py-3 border-b border-gray-200 flex justify-between items-center",children:[_.jsxs("div",{className:"flex items-center space-x-2",children:[_.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${s?"bg-orange-500":"bg-green-500"}`}),_.jsx("span",{className:"text-xs font-bold text-gray-500 tracking-widest uppercase",children:"ATTENDANCE LOG"})]}),_.jsx("div",{className:"flex items-center space-x-1",children:_.jsx("span",{className:"text-[10px] text-gray-400 font-mono",children:new Date().toLocaleTimeString()})})]}),_.jsxs("div",{className:"p-8 relative overflow-hidden",children:[_.jsx("div",{className:"absolute top-0 right-0 -mr-16 -mt-16 w-32 h-32 bg-blue-50 rounded-full"}),_.jsx("div",{className:"absolute bottom-0 left-0 -ml-16 -mb-16 w-32 h-32 bg-purple-50 rounded-full"}),_.jsxs("div",{className:"relative z-10 text-center",children:[_.jsx("div",{className:`inline-block p-1 rounded-full bg-gradient-to-br mb-4 shadow-lg ${s?"from-orange-500 to-red-600":"from-blue-500 to-indigo-600"}`,children:_.jsx("div",{className:"bg-white p-3 rounded-full",children:_.jsx("svg",{className:`w-10 h-10 ${s?"text-orange-600":"text-indigo-600"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s?_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"}):_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})})})}),_.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:r.name}),_.jsxs("p",{className:"text-sm font-medium text-gray-400 mt-1 uppercase tracking-wide",children:["ID: ",r.studentId]}),_.jsx("div",{className:"my-6 border-t border-gray-100"}),_.jsx("div",{className:"space-y-4",children:_.jsxs("div",{className:`p-4 rounded-xl border ${s?"bg-orange-50 border-orange-100 text-orange-800":"bg-blue-50 border-blue-100 text-blue-800"}`,children:[_.jsx("p",{className:"font-medium text-lg",children:s?"Just signed out of":"Just signed in to"}),_.jsx("p",{className:"font-bold text-xl mt-1",children:r.courseName})]})})]})]}),_.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200 text-center",children:_.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-800 font-medium text-sm transition-colors",children:"Close"})})]})})})}function j4({isOpen:r,onClose:e,type:n,title:s,message:o}){if(!r)return null;const u={error:"bg-red-50",warning:"bg-yellow-50",info:"bg-blue-50"},h={error:"text-red-800",warning:"text-yellow-800",info:"text-blue-800"},m={error:"border-red-200",warning:"border-yellow-200",info:"border-blue-200"},g={error:gf,warning:CS,info:_4}[n];return _h.useEffect(()=>{const p=setTimeout(e,5e3);return()=>clearTimeout(p)},[e]),_.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:_.jsxs("div",{className:`relative w-full max-w-sm transform transition-all duration-300 animate-scale-in bg-white rounded-2xl shadow-2xl overflow-hidden border ${m[n]}`,children:[_.jsxs("div",{className:`p-6 text-center ${u[n]}`,children:[_.jsx("div",{className:"flex justify-center mb-4",children:_.jsx("div",{className:`p-3 rounded-full bg-white shadow-sm ${h[n]}`,children:_.jsx(g,{size:48,strokeWidth:1.5})})}),_.jsx("h3",{className:`text-xl font-bold mb-2 ${h[n]}`,children:s}),_.jsx("p",{className:"text-gray-600 font-medium",children:o})]}),_.jsx("div",{className:"bg-white p-4 border-t border-gray-100",children:_.jsx("button",{onClick:e,className:`w-full py-3 rounded-xl font-semibold transition-colors ${n==="error"?"bg-red-600 hover:bg-red-700 text-white":n==="warning"?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:"Close"})})]})})}function L4(){const[r,e]=V.useState("idle"),[n,s]=V.useState("Initializing..."),[o,u]=V.useState("offline"),[h,m]=V.useState(null),[g,p]=V.useState({isOpen:!1,type:"info",title:"",message:""}),E=V.useRef(null),T=V.useRef(!1);V.useEffect(()=>{E.current=new WebSocket("ws://localhost:5000");let j=!0;return E.current.onopen=()=>{j&&(console.log("Portal connected to bridge."),s("Syncing Satellite Data..."),u("searching"))},E.current.onmessage=U=>{var X,se,ge,ye,N;if(!j)return;let B=U.data.toString(),$="",J="";try{const S=JSON.parse(B);if(S.type==="ESP32_STATUS"){const C=S.data;C.gpsFixed===!0&&C.satellites>0?o!=="ready"&&(u("ready"),s("Ready to authenticate"),T.current||(T.current=!0)):o!=="searching"&&(u("searching"),s("Syncing Satellite Data..."));return}if(S.type==="ATTENDANCE"){e("success"),s("Signed In"),m({name:S.studentName||((X=S.data)==null?void 0:X.studentName)||"Student",studentId:S.studentId||((se=S.data)==null?void 0:se.studentId)||"N/A",department:S.department||((ge=S.data)==null?void 0:ge.department)||"N/A",courseName:S.courseName||((ye=S.data)==null?void 0:ye.courseName)||"Course",attendancePercentage:S.attendancePercentage||((N=S.data)==null?void 0:N.attendancePercentage)||0,status:"entry"});return}else if(S.type==="DUPLICATE_ATTENDANCE"){p({isOpen:!0,type:"warning",title:"Already Marked",message:`${S.studentName}: Attendance has already been taken for this session.`}),e("idle");return}else if(S.type==="SIGNED_OUT"){e("success"),s(`${S.studentName}: Signed Out`),m({name:S.studentName,studentId:S.studentId,department:S.department,courseName:S.courseName,attendancePercentage:S.attendancePercentage,status:"exit"});return}else if(S.type==="SESSION_COMPLETED"){p({isOpen:!0,type:"info",title:"Session Closed",message:`${S.studentName}: You have already signed out of this session.`}),e("idle");return}else if(S.type==="NO_ACTIVE_SESSION"){p({isOpen:!0,type:"error",title:"No Session",message:`${S.studentName}: There are no active sessions available right now.`}),e("idle");return}else if(S.type==="NO_MATCHING_SESSION"){p({isOpen:!0,type:"error",title:"Wrong Session",message:`${S.studentName}: No active session matches your Department (${S.department}) and Level.`}),e("idle");return}else if(S.type==="ENROLL_RESPONSE")$=S.success?"SUCCESS":"ERROR",J=S.error||S.id||"Enrollment failed";else if(S.type==="VERIFY_RESPONSE")if(S.success){e("success"),s("Fingerprint verified, processing...");return}else{p({isOpen:!0,type:"error",title:"Not Recognized",message:"Fingerprint did not match any student record."}),e("error"),s("Fingerprint not recognized");return}else $=S.type||"UNKNOWN"}catch{const C=B.split(":",2);$=C[0],J=C[1]}$==="SUCCESS"||$==="STATUS"&&o==="ready"&&typeof J=="string"&&J.length<50&&s(J)},E.current.onerror=async()=>{j&&(e("error"),u("offline"),s("Bridge Offline"))},()=>{j=!1,E.current&&E.current.readyState===WebSocket.OPEN&&E.current.close()}},[]),V.useEffect(()=>{let j;return(r==="error"||r==="success")&&(j=setTimeout(()=>{!h&&!g.isOpen&&(e("idle"),s(o==="ready"?"Ready to authenticate":"Syncing Satellite Data..."))},4e3)),()=>clearTimeout(j)},[r,h,g.isOpen,o]),V.useEffect(()=>{let j;return h&&(j=setTimeout(()=>{m(null),e("idle"),s(o==="ready"?"Ready to authenticate":"Syncing Satellite Data...")},8e3)),()=>clearTimeout(j)},[h,o]);const A=()=>{if(!E.current||E.current.readyState!==WebSocket.OPEN){p({isOpen:!0,type:"error",title:"Connection Error",message:"The system is not connected to the bridge server."});return}if(o!=="ready"){p({isOpen:!0,type:"warning",title:"GPS Offline",message:"Waiting for satellite synchronization. Please wait for GPS Lock."});return}e("scanning"),s("Place your finger"),E.current.send("VERIFY_FINGERPRINT")},k=()=>{m(null),e("idle"),s(o==="ready"?"Ready to authenticate":"Syncing Satellite Data...")};return _.jsxs("div",{className:"min-h-screen  bg-black-800  flex flex-col items-center justify-center p-6",children:[h&&_.jsx(k4,{data:h,onClose:k}),_.jsx(j4,{isOpen:g.isOpen,onClose:()=>p(j=>({...j,isOpen:!1})),type:g.type,title:g.title,message:g.message}),_.jsxs("div",{className:"w-full max-w-md",children:[_.jsxs("div",{className:"text-center mb-12 relative",children:[_.jsx("div",{className:"absolute -top-4 right-0 flex gap-2",children:_.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold transition-all duration-300 shadow-md ${o==="ready"?"bg-green-500/20 text-green-300 border border-green-400/30 shadow-lg shadow-green-500/20":o==="searching"?"bg-blue-500/20 text-blue-300 border border-blue-400/30 animate-pulse":"bg-gray-500/20 text-gray-400 border border-gray-400/20"}`,children:[_.jsx(b4,{className:`w-3.5 h-3.5 ${o==="ready"?"":o==="searching"?"animate-spin":""}`}),_.jsx("span",{children:o==="ready"?"GPS LOCKED":o==="searching"?"ACQUIRING...":"OFFLINE"})]})}),_.jsx("h1",{className:"text-3xl font-semibold text-gray-300 mb-2",children:"Biometric Login"}),_.jsx("p",{className:"text-gray-500",children:"Authenticate using your fingerprint"})]}),_.jsxs("div",{className:"bg-gray-800  rounded-3xl shadow-lg p-8",children:[_.jsx("div",{className:"flex justify-center mb-8",children:_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:`absolute inset-0 rounded-full blur-2xl opacity-20 transition-all duration-500 ${r==="scanning"?"bg-blue-500 scale-150":r==="success"?"bg-green-500 scale-150":r==="error"?"bg-red-500 scale-150":"bg-transparent"}`}),_.jsxs("div",{className:`relative w-32 h-32 rounded-full flex items-center justify-center transition-all duration-300 ${r==="scanning"?"bg-blue-50 border-2 border-blue-500":r==="success"?"bg-green-50 border-2 border-green-500":r==="error"?"bg-red-50 border-2 border-red-500":"bg-gray-50 border-2 border-gray-200"}`,children:[r==="scanning"&&_.jsx(RS,{className:"w-12 h-12 text-blue-600 animate-spin"}),r==="success"&&_.jsx(gg,{className:"w-12 h-12 text-green-600"}),r==="error"&&_.jsx(gf,{className:"w-12 h-12 text-red-600"}),r==="idle"&&_.jsx(xS,{className:"w-12 h-12 text-gray-400"})]})]})}),_.jsxs("div",{className:"text-center mb-8",children:[_.jsx("p",{className:`text-lg font-semibold transition-all duration-300 ${r==="scanning"?"text-blue-600":r==="success"?"text-green-600":r==="error"?"text-red-600":o==="searching"?"text-blue-400":"text-gray-300"}`,children:n}),o==="searching"&&_.jsx("p",{className:"text-xs text-gray-500 mt-2 animate-pulse",children:"Waiting for satellite lock..."})]}),_.jsx("button",{onClick:A,disabled:r==="scanning"||o!=="ready",className:`w-full py-4 rounded-xl font-medium text-base transition-all duration-200 ${r==="scanning"||o!=="ready"?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 active:scale-[0.98] shadow-md hover:shadow-lg"}`,children:r==="scanning"?"Scanning...":o!=="ready"?"Waiting for GPS...":"Start Authentication"})]}),_.jsx("div",{className:"text-center mt-8",children:_.jsx("p",{className:"text-sm text-gray-400",children:"Secured by Dern Technology"})})]})]})}function P4({data:r,onClose:e}){const n=V.useRef(null),s=r.status==="exit";return _.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:_.jsx("div",{ref:n,className:"relative w-full max-w-md transform transition-all duration-500 ease-out animate-slide-up",children:_.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-200",children:[_.jsxs("div",{className:"bg-gray-100 px-6 py-3 border-b border-gray-200 flex justify-between items-center",children:[_.jsxs("div",{className:"flex items-center space-x-2",children:[_.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${s?"bg-orange-500":"bg-green-500"}`}),_.jsx("span",{className:"text-xs font-bold text-gray-500 tracking-widest uppercase",children:s?"SESSION ENDED":"EXAM VERIFIED"})]}),_.jsx("div",{className:"flex items-center space-x-1",children:_.jsx("span",{className:"text-[10px] text-gray-400 font-mono",children:new Date().toLocaleTimeString()})})]}),_.jsxs("div",{className:"p-8 relative overflow-hidden",children:[_.jsx("div",{className:"absolute top-0 right-0 -mr-16 -mt-16 w-32 h-32 bg-blue-50 rounded-full"}),_.jsx("div",{className:"absolute bottom-0 left-0 -ml-16 -mb-16 w-32 h-32 bg-purple-50 rounded-full"}),_.jsxs("div",{className:"relative z-10 text-center",children:[_.jsx("div",{className:`inline-block p-1 rounded-full bg-gradient-to-br mb-4 shadow-lg ${s?"from-orange-500 to-red-600":"from-indigo-500 to-purple-600"}`,children:_.jsx("div",{className:"bg-white p-3 rounded-full",children:_.jsx("svg",{className:`w-10 h-10 ${s?"text-orange-600":"text-indigo-600"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),_.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:r.name}),_.jsxs("p",{className:"text-sm font-medium text-gray-400 mt-1 uppercase tracking-wide",children:["ID: ",r.studentId]}),_.jsx("div",{className:"my-6 border-t border-gray-100"}),_.jsxs("div",{className:"grid grid-cols-2 gap-4 text-left",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold",children:"Department"}),_.jsx("p",{className:"text-sm font-bold text-gray-800",children:r.department})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold",children:"Course"}),_.jsx("p",{className:"text-sm font-bold text-gray-800 truncate",children:r.courseName})]})]}),_.jsxs("div",{className:"mt-6 bg-gray-50 rounded-xl p-4 border border-gray-100",children:[_.jsxs("div",{className:"flex justify-between items-end mb-2",children:[_.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Avg. Attendance"}),_.jsxs("span",{className:`text-2xl font-bold ${s?"text-orange-600":"text-indigo-600"}`,children:[r.attendancePercentage,"%"]})]}),_.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:_.jsx("div",{className:`h-2 rounded-full transition-all duration-1000 ${s?"bg-orange-500":"bg-indigo-600"}`,style:{width:`${r.attendancePercentage}%`}})})]})]})]}),_.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200 text-center",children:_.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-800 font-medium text-sm transition-colors",children:"Close Verification"})})]})})})}function U4(){const[r,e]=V.useState("idle"),[n,s]=V.useState("Click button to begin verification"),[o,u]=V.useState(null),h=V.useRef(null);V.useEffect(()=>{h.current=new WebSocket("ws://localhost:5000");let E=!0;return h.current.onopen=()=>{E&&console.log("Verification portal connected to bridge.")},h.current.onerror=()=>{E&&(e("error"),s("Bridge connection failed."))},h.current.onmessage=T=>{if(!E)return;let A=T.data.toString(),k="",j="";try{const U=JSON.parse(A);if(U.type==="VERIFY_RESPONSE")if(U.success){m(U.id.toString());return}else k="ERROR",j="No match found";else if(U.type==="SIGNED_OUT"){e("success"),s(`${U.studentName}: Signed Out`),u({name:U.studentName,studentId:U.studentId,department:U.department,courseName:U.courseName,attendancePercentage:U.attendancePercentage,status:"exit"});return}else{if(U.type==="ESP32_STATUS")return;k=U.type||"UNKNOWN",j=U.data||""}}catch{const B=A.split(":",2);k=B[0],j=B[1]}k==="SUCCESS"?m(j):k==="STATUS"?s(j):k!=="ATTENDANCE"&&(e("error"),s(typeof j=="string"?j:"Verification failed"))},()=>{var T;E=!1,((T=h.current)==null?void 0:T.readyState)===WebSocket.OPEN&&h.current.close()}},[]),V.useEffect(()=>{let E;return r==="error"&&(E=setTimeout(()=>{e("idle"),s("Click button to begin verification"),u(null)},5e3)),()=>clearTimeout(E)},[r]);const m=async E=>{try{const T=Mi(st(Ve,"students"),xn("fingerprintTemplate","==",E)),A=await tn(T);if(A.empty){e("error"),s("Fingerprint not recognized. Please contact the exam officer.");return}const k=A.docs[0],j={id:k.id,...k.data()},U=Mi(st(Ve,"sessions"),xn("active","==",!0)),B=await tn(U);if(B.empty){e("error"),s("No active exam session found.");return}const $=await tn(st(Ve,"courses")),J=new Map($.docs.map(D=>[D.id,D.data()]));let X=null,se=null;for(const D of B.docs){const I=D.data(),R=J.get(I.courseId);if(R&&R.department===j.department&&R.level===j.level){X=D,se={id:I.courseId,...R};break}}if(!X||!se){e("error"),s("No active exam for your department/level.");return}const ge=se.id,N=(await tn(Mi(st(Ve,"sessions"),xn("courseId","==",ge)))).docs.length,C=(await tn(Mi(st(Ve,"attendance"),xn("studentId","==",j.id),xn("courseId","==",ge)))).docs.length,M=N>0?Math.round(C/N*100):0;if(M<70){e("error"),s(`Access Denied: Minimum 70% attendance required. Yours is ${M}%.`);return}e("success"),s("Verified"),u({name:j.name,studentId:j.studentId,department:j.department,courseName:`${se.name} (${se.code})`,attendancePercentage:M})}catch(T){console.error("Verification Error:",T),e("error"),s("An unexpected server error occurred.")}},g=()=>{if(!h.current||h.current.readyState!==WebSocket.OPEN){e("error"),s("Bridge not connected. Please refresh.");return}e("scanning"),s("Place your finger on the scanner..."),h.current.send("VERIFY_FINGERPRINT")},p=()=>{u(null),e("idle"),s("Click button to begin verification")};return _.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col items-center justify-center p-6",children:[o&&_.jsx(P4,{data:o,onClose:p}),_.jsxs("div",{className:"w-full max-w-md",children:[_.jsxs("div",{className:"text-center mb-12 relative",children:[_.jsx("h1",{className:"text-3xl font-semibold text-gray-300 mb-2",children:"Exam Verification"}),_.jsx("p",{className:"text-gray-500",children:"Verify eligibility for exam entry"})]}),_.jsxs("div",{className:"bg-gray-800 rounded-3xl shadow-lg p-8",children:[_.jsx("div",{className:"flex justify-center mb-8",children:_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:`absolute inset-0 rounded-full blur-2xl opacity-20 transition-all duration-500 ${r==="scanning"?"bg-blue-500 scale-150":r==="success"?"bg-green-500 scale-150":r==="error"?"bg-red-500 scale-150":"bg-transparent"}`}),_.jsxs("div",{className:`relative w-32 h-32 rounded-full flex items-center justify-center transition-all duration-300 ${r==="scanning"?"bg-blue-50 border-2 border-blue-500":r==="success"?"bg-green-50 border-2 border-green-500":r==="error"?"bg-red-50 border-2 border-red-500":"bg-gray-50 border-2 border-gray-200"}`,children:[r==="scanning"&&_.jsx(RS,{className:"w-12 h-12 text-blue-600 animate-spin"}),r==="success"&&_.jsx(gg,{className:"w-12 h-12 text-green-600"}),r==="error"&&_.jsx(gf,{className:"w-12 h-12 text-red-600"}),r==="idle"&&_.jsx(xS,{className:"w-12 h-12 text-gray-400"})]})]})}),_.jsx("div",{className:"text-center mb-8",children:_.jsx("p",{className:`text-lg font-semibold transition-all duration-300 ${r==="scanning"?"text-blue-600":r==="success"?"text-green-600":r==="error"?"text-red-600":"text-gray-300"}`,children:n})}),_.jsx("button",{onClick:g,disabled:r==="scanning",className:`w-full py-4 rounded-xl font-medium text-base transition-all duration-200 ${r==="scanning"?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 active:scale-[0.98] shadow-md hover:shadow-lg"}`,children:r==="scanning"?"Verifying...":"Start Verification"})]}),_.jsx("div",{className:"text-center mt-8",children:_.jsx("p",{className:"text-sm text-gray-400",children:"Secured by Dern Technology"})})]})]})}async function z4(r,e){try{const n=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${r}&lon=${e}&zoom=18&addressdetails=1`,{headers:{"User-Agent":"BiometricAttendanceSystem/1.0"}});if(!n.ok)throw new Error("Geocoding failed");const o=(await n.json()).address||{},u=o.building||o.amenity||o.road||o.suburb||o.city||o.town||o.village||"Unknown Location",h=o.city||o.state||"";return h?`${u}, ${h}`:u}catch(n){return console.error("Reverse geocoding error:",n),`${r.toFixed(4)}, ${e.toFixed(4)}`}}const Xs=new Set;function B4(){const r=V.useRef(null),e=V.useRef({latitude:null,longitude:null}),[n,s]=_h.useState(new Map),[o,u]=_h.useState([]),h=V.useRef(new Map),m=V.useRef([]),g=V.useRef({id:null,timestamp:0});V.useEffect(()=>{h.current=n},[n]),V.useEffect(()=>{m.current=o},[o]),V.useEffect(()=>{const E=Eo(st(Ve,"courses"),k=>{const j=new Map;k.docs.forEach(U=>j.set(U.id,{id:U.id,...U.data()})),s(j),console.log(` Cached ${k.size} courses`)}),T=Mi(st(Ve,"sessions"),xn("active","==",!0)),A=Eo(T,k=>{const j=k.docs.map(U=>({id:U.id,...U.data()}));u(j),console.log(` Cached ${k.size} active sessions`)});return()=>{E(),A()}},[]),V.useEffect(()=>(r.current=new WebSocket("ws://localhost:5000"),r.current.onopen=()=>{console.log("Global Listener connected to bridge.")},r.current.onmessage=async E=>{var T;try{const A=JSON.parse(E.data);if(A.type==="ESP32_STATUS")A.data&&A.data.type==="STATUS"&&A.data.lat&&A.data.lon&&(e.current={latitude:A.data.lat,longitude:A.data.lon});else if(A.type==="VERIFY_RESPONSE"&&A.success){const k=(T=A.id)==null?void 0:T.toString(),j=Date.now(),U=j-g.current.timestamp;if(g.current.id===k&&U<5e3)console.log(` Skipping duplicate verification for ID ${k}`);else{g.current={id:k,timestamp:j};const $=A.latitude||A.lat||e.current.latitude,J=A.longitude||A.lon||e.current.longitude;await p({id:A.id,latitude:$,longitude:J})}}}catch{}},r.current.onclose=()=>{},()=>{r.current&&r.current.close()}),[]);const p=async E=>{var R,he;const{id:T,latitude:A,longitude:k}=E,j=A||e.current.latitude,U=k||e.current.longitude,B=st(Ve,"students"),$=Mi(B,xn("fingerprintTemplate","==",T.toString())),J=await tn($);if(J.empty){console.warn(` Unknown fingerprint ID: ${T}`);return}const X=J.docs[0],se=X.data(),ge=X.id,ye=m.current,N=h.current;if(ye.length===0){r.current&&r.current.readyState===WebSocket.OPEN&&r.current.send(JSON.stringify({type:"NO_ACTIVE_SESSION",studentName:se.name,message:"No active sessions available"}));return}let S=null,C=null;for(const me of ye){const K=N.get(me.courseId);if(K&&K.department===se.department&&K.level===se.level){S=me,C=me.courseId;break}}if(!S){r.current&&r.current.readyState===WebSocket.OPEN&&r.current.send(JSON.stringify({type:"NO_MATCHING_SESSION",studentName:se.name,department:se.department,level:se.level,message:"No active session for your department and level"}));return}const M=S.id,D=C,I=`${ge}-${M}`;if(Xs.has(I)){console.warn(` Blocked duplicate processing for ${se.name} (Global Locked)`),r.current&&r.current.readyState===WebSocket.OPEN&&r.current.send(JSON.stringify({type:"DUPLICATE_ATTENDANCE",studentName:se.name,message:"Processing previous request..."}));return}Xs.add(I);try{const me=st(Ve,"attendance"),K=Mi(me,xn("studentId","==",ge),xn("sessionId","==",M)),re=await tn(K);if(!re.empty){const Se=re.docs[0];if(Se.data().signOutTime){r.current&&r.current.readyState===WebSocket.OPEN&&r.current.send(JSON.stringify({type:"SESSION_COMPLETED",studentName:se.name,message:"Session already completed"}));return}r.current&&r.current.readyState===WebSocket.OPEN&&r.current.send(JSON.stringify({type:"SIGNED_OUT",studentName:se.name,studentId:se.studentId,department:se.department,courseName:((R=N.get(D))==null?void 0:R.name)||"Unknown Course",attendancePercentage:0,message:"Signed Out Successfully"})),console.log(` Signing out ${se.name} (Background)`),dg(Se.ref,{signOutTime:Je.now()}).then(()=>Xs.delete(I)).catch(P=>{console.error(" SignOut Write Failed:",P),Xs.delete(I)});return}const de=((he=N.get(D))==null?void 0:he.name)||"Unknown Course";r.current&&r.current.readyState===WebSocket.OPEN&&r.current.send(JSON.stringify({type:"ATTENDANCE",studentName:se.name,studentId:se.studentId,department:se.department,courseName:de,attendancePercentage:0,message:"Signed In Successfully"})),(async()=>{const Se=j&&U?await z4(j,U):"No GPS";await mf(me,{studentId:ge,courseId:D,sessionId:M,joinTime:Je.now(),verified:!0,verificationMethod:"fingerprint",latitude:j||null,longitude:U||null,locationName:Se}),console.log(` Attendance Logged: ${se.name} |  ${Se}`)})().then(()=>Xs.delete(I)).catch(Se=>{console.error(" Attendance Write Failed:",Se),Xs.delete(I)})}catch(me){console.error(" Attendance error:",me),Xs.delete(I)}};return null}function q4(){return _.jsxs(e4,{children:[_.jsx(B4,{}),_.jsx(kA,{children:_.jsxs(fA,{children:[_.jsx(Ws,{path:"/login",element:_.jsx(t4,{})}),_.jsx(Ws,{path:"/portal",element:_.jsx(L4,{})}),_.jsx(Ws,{path:"/verify",element:_.jsx(U4,{})}),_.jsx(Ws,{element:_.jsx(V4,{}),children:_.jsx(Ws,{path:"/dashboard",element:_.jsx(M4,{})})}),_.jsx(Ws,{path:"*",element:_.jsx(FE,{to:"/dashboard",replace:!0})})]})})]})}const OS=document.getElementById("root");if(!OS)throw new Error("Could not find root element to mount to");const H4=vw.createRoot(OS);H4.render(_.jsx(_h.StrictMode,{children:_.jsx(q4,{})}));
