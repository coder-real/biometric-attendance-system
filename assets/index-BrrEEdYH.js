(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function IE(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var hm={exports:{}},Vl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O0;function iw(){if(O0)return Vl;O0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:h,ref:o!==void 0?o:null,props:u}}return Vl.Fragment=e,Vl.jsx=n,Vl.jsxs=n,Vl}var M0;function rw(){return M0||(M0=1,hm.exports=iw()),hm.exports}var T=rw(),fm={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0;function sw(){if(V0)return be;V0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),w=Symbol.iterator;function D(P){return P===null||typeof P!="object"?null:(P=w&&P[w]||P["@@iterator"],typeof P=="function"?P:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,U={};function G(P,ne,oe){this.props=P,this.context=ne,this.refs=U,this.updater=oe||V}G.prototype.isReactComponent={},G.prototype.setState=function(P,ne){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,ne,"setState")},G.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function X(){}X.prototype=G.prototype;function $(P,ne,oe){this.props=P,this.context=ne,this.refs=U,this.updater=oe||V}var se=$.prototype=new X;se.constructor=$,j(se,G.prototype),se.isPureReactComponent=!0;var ye=Array.isArray;function pe(){}var I={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function C(P,ne,oe){var ce=oe.ref;return{$$typeof:r,type:P,key:ne,ref:ce!==void 0?ce:null,props:oe}}function M(P,ne){return C(P.type,ne,P.props)}function O(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function z(P){var ne={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(oe){return ne[oe]})}var R=/\/+/g;function Be(P,ne){return typeof P=="object"&&P!==null&&P.key!=null?z(""+P.key):ne.toString(36)}function Ke(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(pe,pe):(P.status="pending",P.then(function(ne){P.status==="pending"&&(P.status="fulfilled",P.value=ne)},function(ne){P.status==="pending"&&(P.status="rejected",P.reason=ne)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function J(P,ne,oe,ce,Te){var Re=typeof P;(Re==="undefined"||Re==="boolean")&&(P=null);var je=!1;if(P===null)je=!0;else switch(Re){case"bigint":case"string":case"number":je=!0;break;case"object":switch(P.$$typeof){case r:case e:je=!0;break;case E:return je=P._init,J(je(P._payload),ne,oe,ce,Te)}}if(je)return Te=Te(P),je=ce===""?"."+Be(P,0):ce,ye(Te)?(oe="",je!=null&&(oe=je.replace(R,"$&/")+"/"),J(Te,ne,oe,"",function(ys){return ys})):Te!=null&&(O(Te)&&(Te=M(Te,oe+(Te.key==null||P&&P.key===Te.key?"":(""+Te.key).replace(R,"$&/")+"/")+je)),ne.push(Te)),1;je=0;var kt=ce===""?".":ce+":";if(ye(P))for(var lt=0;lt<P.length;lt++)ce=P[lt],Re=kt+Be(ce,lt),je+=J(ce,ne,oe,Re,Te);else if(lt=D(P),typeof lt=="function")for(P=lt.call(P),lt=0;!(ce=P.next()).done;)ce=ce.value,Re=kt+Be(ce,lt++),je+=J(ce,ne,oe,Re,Te);else if(Re==="object"){if(typeof P.then=="function")return J(Ke(P),ne,oe,ce,Te);throw ne=String(P),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return je}function ae(P,ne,oe){if(P==null)return P;var ce=[],Te=0;return J(P,ce,"","",function(Re){return ne.call(oe,Re,Te++)}),ce}function ge(P){if(P._status===-1){var ne=P._result;ne=ne(),ne.then(function(oe){(P._status===0||P._status===-1)&&(P._status=1,P._result=oe)},function(oe){(P._status===0||P._status===-1)&&(P._status=2,P._result=oe)}),P._status===-1&&(P._status=0,P._result=ne)}if(P._status===1)return P._result.default;throw P._result}var ze=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},$e={map:ae,forEach:function(P,ne,oe){ae(P,function(){ne.apply(this,arguments)},oe)},count:function(P){var ne=0;return ae(P,function(){ne++}),ne},toArray:function(P){return ae(P,function(ne){return ne})||[]},only:function(P){if(!O(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return be.Activity=S,be.Children=$e,be.Component=G,be.Fragment=n,be.Profiler=o,be.PureComponent=$,be.StrictMode=s,be.Suspense=p,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,be.__COMPILER_RUNTIME={__proto__:null,c:function(P){return I.H.useMemoCache(P)}},be.cache=function(P){return function(){return P.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(P,ne,oe){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ce=j({},P.props),Te=P.key;if(ne!=null)for(Re in ne.key!==void 0&&(Te=""+ne.key),ne)!x.call(ne,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&ne.ref===void 0||(ce[Re]=ne[Re]);var Re=arguments.length-2;if(Re===1)ce.children=oe;else if(1<Re){for(var je=Array(Re),kt=0;kt<Re;kt++)je[kt]=arguments[kt+2];ce.children=je}return C(P.type,Te,ce)},be.createContext=function(P){return P={$$typeof:h,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},be.createElement=function(P,ne,oe){var ce,Te={},Re=null;if(ne!=null)for(ce in ne.key!==void 0&&(Re=""+ne.key),ne)x.call(ne,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Te[ce]=ne[ce]);var je=arguments.length-2;if(je===1)Te.children=oe;else if(1<je){for(var kt=Array(je),lt=0;lt<je;lt++)kt[lt]=arguments[lt+2];Te.children=kt}if(P&&P.defaultProps)for(ce in je=P.defaultProps,je)Te[ce]===void 0&&(Te[ce]=je[ce]);return C(P,Re,Te)},be.createRef=function(){return{current:null}},be.forwardRef=function(P){return{$$typeof:m,render:P}},be.isValidElement=O,be.lazy=function(P){return{$$typeof:E,_payload:{_status:-1,_result:P},_init:ge}},be.memo=function(P,ne){return{$$typeof:g,type:P,compare:ne===void 0?null:ne}},be.startTransition=function(P){var ne=I.T,oe={};I.T=oe;try{var ce=P(),Te=I.S;Te!==null&&Te(oe,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(pe,ze)}catch(Re){ze(Re)}finally{ne!==null&&oe.types!==null&&(ne.types=oe.types),I.T=ne}},be.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},be.use=function(P){return I.H.use(P)},be.useActionState=function(P,ne,oe){return I.H.useActionState(P,ne,oe)},be.useCallback=function(P,ne){return I.H.useCallback(P,ne)},be.useContext=function(P){return I.H.useContext(P)},be.useDebugValue=function(){},be.useDeferredValue=function(P,ne){return I.H.useDeferredValue(P,ne)},be.useEffect=function(P,ne){return I.H.useEffect(P,ne)},be.useEffectEvent=function(P){return I.H.useEffectEvent(P)},be.useId=function(){return I.H.useId()},be.useImperativeHandle=function(P,ne,oe){return I.H.useImperativeHandle(P,ne,oe)},be.useInsertionEffect=function(P,ne){return I.H.useInsertionEffect(P,ne)},be.useLayoutEffect=function(P,ne){return I.H.useLayoutEffect(P,ne)},be.useMemo=function(P,ne){return I.H.useMemo(P,ne)},be.useOptimistic=function(P,ne){return I.H.useOptimistic(P,ne)},be.useReducer=function(P,ne,oe){return I.H.useReducer(P,ne,oe)},be.useRef=function(P){return I.H.useRef(P)},be.useState=function(P){return I.H.useState(P)},be.useSyncExternalStore=function(P,ne,oe){return I.H.useSyncExternalStore(P,ne,oe)},be.useTransition=function(){return I.H.useTransition()},be.version="19.2.0",be}var k0;function lp(){return k0||(k0=1,fm.exports=sw()),fm.exports}var k=lp();const aw=IE(k);var dm={exports:{}},kl={},mm={exports:{}},pm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0;function ow(){return L0||(L0=1,(function(r){function e(J,ae){var ge=J.length;J.push(ae);e:for(;0<ge;){var ze=ge-1>>>1,$e=J[ze];if(0<o($e,ae))J[ze]=ae,J[ge]=$e,ge=ze;else break e}}function n(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var ae=J[0],ge=J.pop();if(ge!==ae){J[0]=ge;e:for(var ze=0,$e=J.length,P=$e>>>1;ze<P;){var ne=2*(ze+1)-1,oe=J[ne],ce=ne+1,Te=J[ce];if(0>o(oe,ge))ce<$e&&0>o(Te,oe)?(J[ze]=Te,J[ce]=ge,ze=ce):(J[ze]=oe,J[ne]=ge,ze=ne);else if(ce<$e&&0>o(Te,ge))J[ze]=Te,J[ce]=ge,ze=ce;else break e}}return ae}function o(J,ae){var ge=J.sortIndex-ae.sortIndex;return ge!==0?ge:J.id-ae.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var p=[],g=[],E=1,S=null,w=3,D=!1,V=!1,j=!1,U=!1,G=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function se(J){for(var ae=n(g);ae!==null;){if(ae.callback===null)s(g);else if(ae.startTime<=J)s(g),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=n(g)}}function ye(J){if(j=!1,se(J),!V)if(n(p)!==null)V=!0,pe||(pe=!0,z());else{var ae=n(g);ae!==null&&Ke(ye,ae.startTime-J)}}var pe=!1,I=-1,x=5,C=-1;function M(){return U?!0:!(r.unstable_now()-C<x)}function O(){if(U=!1,pe){var J=r.unstable_now();C=J;var ae=!0;try{e:{V=!1,j&&(j=!1,X(I),I=-1),D=!0;var ge=w;try{t:{for(se(J),S=n(p);S!==null&&!(S.expirationTime>J&&M());){var ze=S.callback;if(typeof ze=="function"){S.callback=null,w=S.priorityLevel;var $e=ze(S.expirationTime<=J);if(J=r.unstable_now(),typeof $e=="function"){S.callback=$e,se(J),ae=!0;break t}S===n(p)&&s(p),se(J)}else s(p);S=n(p)}if(S!==null)ae=!0;else{var P=n(g);P!==null&&Ke(ye,P.startTime-J),ae=!1}}break e}finally{S=null,w=ge,D=!1}ae=void 0}}finally{ae?z():pe=!1}}}var z;if(typeof $=="function")z=function(){$(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Be=R.port2;R.port1.onmessage=O,z=function(){Be.postMessage(null)}}else z=function(){G(O,0)};function Ke(J,ae){I=G(function(){J(r.unstable_now())},ae)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_next=function(J){switch(w){case 1:case 2:case 3:var ae=3;break;default:ae=w}var ge=w;w=ae;try{return J()}finally{w=ge}},r.unstable_requestPaint=function(){U=!0},r.unstable_runWithPriority=function(J,ae){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ge=w;w=J;try{return ae()}finally{w=ge}},r.unstable_scheduleCallback=function(J,ae,ge){var ze=r.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?ze+ge:ze):ge=ze,J){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=ge+$e,J={id:E++,callback:ae,priorityLevel:J,startTime:ge,expirationTime:$e,sortIndex:-1},ge>ze?(J.sortIndex=ge,e(g,J),n(p)===null&&J===n(g)&&(j?(X(I),I=-1):j=!0,Ke(ye,ge-ze))):(J.sortIndex=$e,e(p,J),V||D||(V=!0,pe||(pe=!0,z()))),J},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(J){var ae=w;return function(){var ge=w;w=ae;try{return J.apply(this,arguments)}finally{w=ge}}}})(pm)),pm}var P0;function lw(){return P0||(P0=1,mm.exports=ow()),mm.exports}var gm={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function uw(){if(j0)return Zt;j0=1;var r=lp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,E){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:p,containerInfo:g,implementation:E}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Zt.createPortal=function(p,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,E)},Zt.flushSync=function(p){var g=h.T,E=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=g,s.p=E,s.d.f()}},Zt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},Zt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Zt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var E=g.as,S=m(E,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,D=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:S,integrity:w,fetchPriority:D}):E==="script"&&s.d.X(p,{crossOrigin:S,integrity:w,fetchPriority:D,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Zt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},Zt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,S=m(E,g.crossOrigin);s.d.L(p,E,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Zt.preloadModule=function(p,g){if(typeof p=="string")if(g){var E=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},Zt.requestFormReset=function(p){s.d.r(p)},Zt.unstable_batchedUpdates=function(p,g){return p(g)},Zt.useFormState=function(p,g,E){return h.H.useFormState(p,g,E)},Zt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Zt.version="19.2.0",Zt}var U0;function cw(){if(U0)return gm.exports;U0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),gm.exports=uw(),gm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0;function hw(){if(z0)return kl;z0=1;var r=lw(),e=lp(),n=cw();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(s(188))}function g(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return p(f),t;if(d===l)return p(f),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,b=f.child;b;){if(b===a){_=!0,a=f,l=d;break}if(b===l){_=!0,l=f,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,l=f;break}if(b===l){_=!0,l=d,a=f;break}b=b.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function E(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=E(t),i!==null)return i;t=t.sibling}return null}var S=Object.assign,w=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),$=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function Be(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case j:return"Fragment";case G:return"Profiler";case U:return"StrictMode";case ye:return"Suspense";case pe:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case V:return"Portal";case $:return t.displayName||"Context";case X:return(t._context.displayName||"Context")+".Consumer";case se:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return i=t.displayName||null,i!==null?i:Be(t.type)||"Memo";case x:i=t._payload,t=t._init;try{return Be(t(i))}catch{}}return null}var Ke=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},ze=[],$e=-1;function P(t){return{current:t}}function ne(t){0>$e||(t.current=ze[$e],ze[$e]=null,$e--)}function oe(t,i){$e++,ze[$e]=t.current,t.current=i}var ce=P(null),Te=P(null),Re=P(null),je=P(null);function kt(t,i){switch(oe(Re,i),oe(Te,t),oe(ce,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?t0(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=t0(i),t=n0(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ne(ce),oe(ce,t)}function lt(){ne(ce),ne(Te),ne(Re)}function ys(t){t.memoizedState!==null&&oe(je,t);var i=ce.current,a=n0(i,t.type);i!==a&&(oe(Te,t),oe(ce,a))}function ca(t){Te.current===t&&(ne(ce),ne(Te)),je.current===t&&(ne(je),Nl._currentValue=ge)}var ha,fa;function ui(t){if(ha===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ha=i&&i[1]||"",fa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ha+t+fa}var No=!1;function _s(t,i){if(!t||No)return"";No=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(Y){var Q=Y}Reflect.construct(t,[],te)}else{try{te.call()}catch(Y){Q=Y}t.call(te.prototype)}}else{try{throw Error()}catch(Y){Q=Y}(te=t())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(Y){if(Y&&Q&&typeof Y.stack=="string")return[Y.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var N=_.split(`
`),F=b.split(`
`);for(f=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(l===N.length||f===F.length)for(l=N.length-1,f=F.length-1;1<=l&&0<=f&&N[l]!==F[f];)f--;for(;1<=l&&0<=f;l--,f--)if(N[l]!==F[f]){if(l!==1||f!==1)do if(l--,f--,0>f||N[l]!==F[f]){var W=`
`+N[l].replace(" at new "," at ");return t.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",t.displayName)),W}while(1<=l&&0<=f);break}}}finally{No=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ui(a):""}function Do(t,i){switch(t.tag){case 26:case 27:case 5:return ui(t.type);case 16:return ui("Lazy");case 13:return t.child!==i&&i!==null?ui("Suspense Fallback"):ui("Suspense");case 19:return ui("SuspenseList");case 0:case 15:return _s(t.type,!1);case 11:return _s(t.type.render,!1);case 1:return _s(t.type,!0);case 31:return ui("Activity");default:return""}}function Oo(t){try{var i="",a=null;do i+=Do(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var bt=Object.prototype.hasOwnProperty,Lt=r.unstable_scheduleCallback,pr=r.unstable_cancelCallback,df=r.unstable_shouldYield,Tu=r.unstable_requestPaint,sn=r.unstable_now,vs=r.unstable_getCurrentPriorityLevel,Mo=r.unstable_ImmediatePriority,Vo=r.unstable_UserBlockingPriority,gr=r.unstable_NormalPriority,mf=r.unstable_LowPriority,Su=r.unstable_IdlePriority,bu=r.log,wu=r.unstable_setDisableYieldValue,Gn=null,Ft=null;function Nn(t){if(typeof bu=="function"&&wu(t),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Gn,t)}catch{}}var gt=Math.clz32?Math.clz32:xu,Au=Math.log,da=Math.LN2;function xu(t){return t>>>=0,t===0?32:31-(Au(t)/da|0)|0}var ci=256,Es=262144,wt=4194304;function hi(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function fi(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?f=hi(l):(_&=b,_!==0?f=hi(_):a||(a=b&~t,a!==0&&(f=hi(a))))):(b=l&~d,b!==0?f=hi(b):_!==0?f=hi(_):a||(a=l&~t,a!==0&&(f=hi(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function Qn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function pf(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ru(){var t=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),t}function di(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ts(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function gf(t,i,a,l,f,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,N=t.expirationTimes,F=t.hiddenUpdates;for(a=_&~a;0<a;){var W=31-gt(a),te=1<<W;b[W]=0,N[W]=-1;var Q=F[W];if(Q!==null)for(F[W]=null,W=0;W<Q.length;W++){var Y=Q[W];Y!==null&&(Y.lane&=-536870913)}a&=~te}l!==0&&Ss(t,l,0),d!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~i))}function Ss(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-gt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function ko(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-gt(a),f=1<<l;f&i|t[l]&i&&(t[l]|=i),a&=~f}}function Lo(t,i){var a=i&-i;return a=(a&42)!==0?1:bs(a),(a&(t.suspendedLanes|i))!==0?0:a}function bs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ui(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Cu(){var t=ae.p;return t!==0?t:(t=window.event,t===void 0?32:A0(t.type))}function Kn(t,i){var a=ae.p;try{return ae.p=t,i()}finally{ae.p=a}}var Yn=Math.random().toString(36).slice(2),At="__reactFiber$"+Yn,Ut="__reactProps$"+Yn,mi="__reactContainer$"+Yn,ma="__reactEvents$"+Yn,yf="__reactListeners$"+Yn,Iu="__reactHandles$"+Yn,Nu="__reactResources$"+Yn,pi="__reactMarker$"+Yn;function pa(t){delete t[At],delete t[Ut],delete t[ma],delete t[yf],delete t[Iu]}function gi(t){var i=t[At];if(i)return i;for(var a=t.parentNode;a;){if(i=a[mi]||a[At]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=u0(t);t!==null;){if(a=t[At])return a;t=u0(t)}return i}t=a,a=t.parentNode}return null}function Dn(t){if(t=t[At]||t[mi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function vn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function yi(t){var i=t[Nu];return i||(i=t[Nu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function xt(t){t[pi]=!0}var Po=new Set,jo={};function _i(t,i){vi(t,i),vi(t+"Capture",i)}function vi(t,i){for(jo[t]=i,t=0;t<i.length;t++)Po.add(i[t])}var Uo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zo={},Bo={};function Du(t){return bt.call(Bo,t)?!0:bt.call(zo,t)?!1:Uo.test(t)?Bo[t]=!0:(zo[t]=!0,!1)}function ga(t,i,a){if(Du(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function En(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Rt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function zt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yr(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function qo(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Xe(t){if(!t._valueTracker){var i=yr(t)?"checked":"value";t._valueTracker=qo(t,i,""+t[i])}}function ws(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=yr(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Ei(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var As=/[\n"\\]/g;function ln(t){return t.replace(As,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ya(t,i,a,l,f,d,_,b){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+zt(i)):t.value!==""+zt(i)&&(t.value=""+zt(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?Ho(t,_,zt(i)):a!=null?Ho(t,_,zt(a)):l!=null&&t.removeAttribute("value"),f==null&&d!=null&&(t.defaultChecked=!!d),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+zt(b):t.removeAttribute("name")}function Ou(t,i,a,l,f,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Xe(t);return}a=a!=null?""+zt(a):"",i=i!=null?""+zt(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),Xe(t)}function Ho(t,i,a){i==="number"&&Ei(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function _r(t,i,a,l){if(t=t.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=i.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+zt(a),i=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function Mu(t,i,a){if(i!=null&&(i=""+zt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+zt(a):""}function vr(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(Ke(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=zt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Xe(t)}function un(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Vu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fo(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Vu.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Go(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Fo(t,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Fo(t,d,i[d])}function _a(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ku=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Er=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function va(t){return Er.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function $n(){}var Qo=null;function On(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tr=null,Ti=null;function xs(t){var i=Dn(t);if(i&&(t=i.stateNode)){var a=t[Ut]||null;e:switch(t=i.stateNode,i.type){case"input":if(ya(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ln(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var f=l[Ut]||null;if(!f)throw Error(s(90));ya(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&ws(l)}break e;case"textarea":Mu(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&_r(t,!!a.multiple,i,!1)}}}var Ea=!1;function Sr(t,i,a){if(Ea)return t(i,a);Ea=!0;try{var l=t(i);return l}finally{if(Ea=!1,(Tr!==null||Ti!==null)&&(Cc(),Tr&&(i=Tr,t=Ti,Ti=Tr=null,xs(i),t)))for(i=0;i<t.length;i++)xs(t[i])}}function Xn(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Ut]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rs=!1;if(Mn)try{var et={};Object.defineProperty(et,"passive",{get:function(){Rs=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{Rs=!1}var Si=null,Ko=null,Cs=null;function Yo(){if(Cs)return Cs;var t,i=Ko,a=i.length,l,f="value"in Si?Si.value:Si.textContent,d=f.length;for(t=0;t<a&&i[t]===f[t];t++);var _=a-t;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return Cs=f.slice(t,1<l?1-l:void 0)}function Is(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function zi(){return!0}function Wn(){return!1}function Gt(t){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?zi:Wn,this.isPropagationStopped=Wn,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),i}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bi=Gt(Bi),br=S({},Bi,{view:0,detail:0}),$o=Gt(br),wr,Ta,wi,Sa=S({},br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ar,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wi&&(wi&&t.type==="mousemove"?(wr=t.screenX-wi.screenX,Ta=t.screenY-wi.screenY):Ta=wr=0,wi=t),wr)},movementY:function(t){return"movementY"in t?t.movementY:Ta}}),Xo=Gt(Sa),Ns=S({},Sa,{dataTransfer:0}),Lu=Gt(Ns),Pu=S({},br,{relatedTarget:0}),Ds=Gt(Pu),Wo=S({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),ju=Gt(Wo),ba=S({},Bi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Uu=Gt(ba),zu=S({},Bi,{data:0}),Ai=Gt(zu),Bu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fu(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Hu[t])?!!i[t]:!1}function Ar(){return Fu}var an=S({},br,{key:function(t){if(t.key){var i=Bu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Is(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ar,charCode:function(t){return t.type==="keypress"?Is(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Is(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gu=Gt(an),Qu=S({},Sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qi=Gt(Qu),c=S({},br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ar}),y=Gt(c),v=S({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Gt(v),q=S({},Sa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K=Gt(q),re=S({},Bi,{newState:0,oldState:0}),Ae=Gt(re),yt=[9,13,27,32],Fe=Mn&&"CompositionEvent"in window,ut=null;Mn&&"documentMode"in document&&(ut=document.documentMode);var Vn=Mn&&"TextEvent"in window&&!ut,xi=Mn&&(!Fe||ut&&8<ut&&11>=ut),Jn=" ",Zn=!1;function Os(t,i){switch(t){case"keyup":return yt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Aa=!1;function Rb(t,i){switch(t){case"compositionend":return wa(i);case"keypress":return i.which!==32?null:(Zn=!0,Jn);case"textInput":return t=i.data,t===Jn&&Zn?null:t;default:return null}}function Cb(t,i){if(Aa)return t==="compositionend"||!Fe&&Os(t,i)?(t=Yo(),Cs=Ko=Si=null,Aa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return xi&&i.locale!=="ko"?null:i.data;default:return null}}var Ib={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ib[t.type]:i==="textarea"}function dg(t,i,a,l){Tr?Ti?Ti.push(l):Ti=[l]:Tr=l,i=kc(i,"onChange"),0<i.length&&(a=new bi("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Jo=null,Zo=null;function Nb(t){$_(t,0)}function Ku(t){var i=vn(t);if(ws(i))return t}function mg(t,i){if(t==="change")return i}var pg=!1;if(Mn){var _f;if(Mn){var vf="oninput"in document;if(!vf){var gg=document.createElement("div");gg.setAttribute("oninput","return;"),vf=typeof gg.oninput=="function"}_f=vf}else _f=!1;pg=_f&&(!document.documentMode||9<document.documentMode)}function yg(){Jo&&(Jo.detachEvent("onpropertychange",_g),Zo=Jo=null)}function _g(t){if(t.propertyName==="value"&&Ku(Zo)){var i=[];dg(i,Zo,t,On(t)),Sr(Nb,i)}}function Db(t,i,a){t==="focusin"?(yg(),Jo=i,Zo=a,Jo.attachEvent("onpropertychange",_g)):t==="focusout"&&yg()}function Ob(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ku(Zo)}function Mb(t,i){if(t==="click")return Ku(i)}function Vb(t,i){if(t==="input"||t==="change")return Ku(i)}function kb(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Tn=typeof Object.is=="function"?Object.is:kb;function el(t,i){if(Tn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!bt.call(i,f)||!Tn(t[f],i[f]))return!1}return!0}function vg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Eg(t,i){var a=vg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=vg(a)}}function Tg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Tg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Sg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Ei(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Ei(t.document)}return i}function Ef(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var Lb=Mn&&"documentMode"in document&&11>=document.documentMode,xa=null,Tf=null,tl=null,Sf=!1;function bg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sf||xa==null||xa!==Ei(l)||(l=xa,"selectionStart"in l&&Ef(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),tl&&el(tl,l)||(tl=l,l=kc(Tf,"onSelect"),0<l.length&&(i=new bi("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=xa)))}function Ms(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Ra={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},bf={},wg={};Mn&&(wg=document.createElement("div").style,"AnimationEvent"in window||(delete Ra.animationend.animation,delete Ra.animationiteration.animation,delete Ra.animationstart.animation),"TransitionEvent"in window||delete Ra.transitionend.transition);function Vs(t){if(bf[t])return bf[t];if(!Ra[t])return t;var i=Ra[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in wg)return bf[t]=i[a];return t}var Ag=Vs("animationend"),xg=Vs("animationiteration"),Rg=Vs("animationstart"),Pb=Vs("transitionrun"),jb=Vs("transitionstart"),Ub=Vs("transitioncancel"),Cg=Vs("transitionend"),Ig=new Map,wf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wf.push("scrollEnd");function ei(t,i){Ig.set(t,i),_i(i,[t])}var Yu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},kn=[],Ca=0,Af=0;function $u(){for(var t=Ca,i=Af=Ca=0;i<t;){var a=kn[i];kn[i++]=null;var l=kn[i];kn[i++]=null;var f=kn[i];kn[i++]=null;var d=kn[i];if(kn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&Ng(a,f,d)}}function Xu(t,i,a,l){kn[Ca++]=t,kn[Ca++]=i,kn[Ca++]=a,kn[Ca++]=l,Af|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function xf(t,i,a,l){return Xu(t,i,a,l),Wu(t)}function ks(t,i){return Xu(t,null,null,i),Wu(t)}function Ng(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(f=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,f&&i!==null&&(f=31-gt(a),t=d.hiddenUpdates,l=t[f],l===null?t[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Wu(t){if(50<bl)throw bl=0,kd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ia={};function zb(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(t,i,a,l){return new zb(t,i,a,l)}function Rf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hi(t,i){var a=t.alternate;return a===null?(a=Sn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Dg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Ju(t,i,a,l,f,d){var _=0;if(l=t,typeof t=="function")Rf(t)&&(_=1);else if(typeof t=="string")_=G1(t,a,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=Sn(31,a,i,f),t.elementType=C,t.lanes=d,t;case j:return Ls(a.children,f,d,i);case U:_=8,f|=24;break;case G:return t=Sn(12,a,i,f|2),t.elementType=G,t.lanes=d,t;case ye:return t=Sn(13,a,i,f),t.elementType=ye,t.lanes=d,t;case pe:return t=Sn(19,a,i,f),t.elementType=pe,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $:_=10;break e;case X:_=9;break e;case se:_=11;break e;case I:_=14;break e;case x:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=Sn(_,a,i,f),i.elementType=t,i.type=l,i.lanes=d,i}function Ls(t,i,a,l){return t=Sn(7,t,l,i),t.lanes=a,t}function Cf(t,i,a){return t=Sn(6,t,null,i),t.lanes=a,t}function Og(t){var i=Sn(18,null,null,0);return i.stateNode=t,i}function If(t,i,a){return i=Sn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Mg=new WeakMap;function Ln(t,i){if(typeof t=="object"&&t!==null){var a=Mg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Oo(i)},Mg.set(t,i),i)}return{value:t,source:i,stack:Oo(i)}}var Na=[],Da=0,Zu=null,nl=0,Pn=[],jn=0,xr=null,Ri=1,Ci="";function Fi(t,i){Na[Da++]=nl,Na[Da++]=Zu,Zu=t,nl=i}function Vg(t,i,a){Pn[jn++]=Ri,Pn[jn++]=Ci,Pn[jn++]=xr,xr=t;var l=Ri;t=Ci;var f=32-gt(l)-1;l&=~(1<<f),a+=1;var d=32-gt(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Ri=1<<32-gt(i)+f|a<<f|l,Ci=d+t}else Ri=1<<d|a<<f|l,Ci=t}function Nf(t){t.return!==null&&(Fi(t,1),Vg(t,1,0))}function Df(t){for(;t===Zu;)Zu=Na[--Da],Na[Da]=null,nl=Na[--Da],Na[Da]=null;for(;t===xr;)xr=Pn[--jn],Pn[jn]=null,Ci=Pn[--jn],Pn[jn]=null,Ri=Pn[--jn],Pn[jn]=null}function kg(t,i){Pn[jn++]=Ri,Pn[jn++]=Ci,Pn[jn++]=xr,Ri=i.id,Ci=i.overflow,xr=t}var Qt=null,at=null,Pe=!1,Rr=null,Un=!1,Of=Error(s(519));function Cr(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw il(Ln(i,t)),Of}function Lg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[At]=t,i[Ut]=l,a){case"dialog":Ne("cancel",i),Ne("close",i);break;case"iframe":case"object":case"embed":Ne("load",i);break;case"video":case"audio":for(a=0;a<Al.length;a++)Ne(Al[a],i);break;case"source":Ne("error",i);break;case"img":case"image":case"link":Ne("error",i),Ne("load",i);break;case"details":Ne("toggle",i);break;case"input":Ne("invalid",i),Ou(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ne("invalid",i);break;case"textarea":Ne("invalid",i),vr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Z_(i.textContent,a)?(l.popover!=null&&(Ne("beforetoggle",i),Ne("toggle",i)),l.onScroll!=null&&Ne("scroll",i),l.onScrollEnd!=null&&Ne("scrollend",i),l.onClick!=null&&(i.onclick=$n),i=!0):i=!1,i||Cr(t,!0)}function Pg(t){for(Qt=t.return;Qt;)switch(Qt.tag){case 5:case 31:case 13:Un=!1;return;case 27:case 3:Un=!0;return;default:Qt=Qt.return}}function Oa(t){if(t!==Qt)return!1;if(!Pe)return Pg(t),Pe=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Xd(t.type,t.memoizedProps)),a=!a),a&&at&&Cr(t),Pg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));at=l0(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));at=l0(t)}else i===27?(i=at,qr(t.type)?(t=tm,tm=null,at=t):at=i):at=Qt?Bn(t.stateNode.nextSibling):null;return!0}function Ps(){at=Qt=null,Pe=!1}function Mf(){var t=Rr;return t!==null&&(dn===null?dn=t:dn.push.apply(dn,t),Rr=null),t}function il(t){Rr===null?Rr=[t]:Rr.push(t)}var Vf=P(null),js=null,Gi=null;function Ir(t,i,a){oe(Vf,i._currentValue),i._currentValue=a}function Qi(t){t._currentValue=Vf.current,ne(Vf)}function kf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Lf(t,i,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=f;for(var N=0;N<i.length;N++)if(b.context===i[N]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),kf(d.return,a,t),l||(_=null);break e}d=b.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),kf(_,a,t),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===t){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Ma(t,i,a,l){t=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var b=f.type;Tn(f.pendingProps.value,_.value)||(t!==null?t.push(b):t=[b])}}else if(f===je.current){if(_=f.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Nl):t=[Nl])}f=f.return}t!==null&&Lf(i,t,a,l),i.flags|=262144}function ec(t){for(t=t.firstContext;t!==null;){if(!Tn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Us(t){js=t,Gi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Kt(t){return jg(js,t)}function tc(t,i){return js===null&&Us(t),jg(t,i)}function jg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Gi===null){if(t===null)throw Error(s(308));Gi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Gi=Gi.next=i;return a}var Bb=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},qb=r.unstable_scheduleCallback,Hb=r.unstable_NormalPriority,Ct={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pf(){return{controller:new Bb,data:new Map,refCount:0}}function rl(t){t.refCount--,t.refCount===0&&qb(Hb,function(){t.controller.abort()})}var sl=null,jf=0,Va=0,ka=null;function Fb(t,i){if(sl===null){var a=sl=[];jf=0,Va=Bd(),ka={status:"pending",value:void 0,then:function(l){a.push(l)}}}return jf++,i.then(Ug,Ug),i}function Ug(){if(--jf===0&&sl!==null){ka!==null&&(ka.status="fulfilled");var t=sl;sl=null,Va=0,ka=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function Gb(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var zg=J.S;J.S=function(t,i){b_=sn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Fb(t,i),zg!==null&&zg(t,i)};var zs=P(null);function Uf(){var t=zs.current;return t!==null?t:rt.pooledCache}function nc(t,i){i===null?oe(zs,zs.current):oe(zs,i.pool)}function Bg(){var t=Uf();return t===null?null:{parent:Ct._currentValue,pool:t}}var La=Error(s(460)),zf=Error(s(474)),ic=Error(s(542)),rc={then:function(){}};function qg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Hg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then($n,$n),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Gg(t),t;default:if(typeof i.status=="string")i.then($n,$n);else{if(t=rt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Gg(t),t}throw qs=i,La}}function Bs(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(qs=a,La):a}}var qs=null;function Fg(){if(qs===null)throw Error(s(459));var t=qs;return qs=null,t}function Gg(t){if(t===La||t===ic)throw Error(s(483))}var Pa=null,al=0;function sc(t){var i=al;return al+=1,Pa===null&&(Pa=[]),Hg(Pa,t,i)}function ol(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function ac(t,i){throw i.$$typeof===w?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Qg(t){function i(B,L){if(t){var H=B.deletions;H===null?(B.deletions=[L],B.flags|=16):H.push(L)}}function a(B,L){if(!t)return null;for(;L!==null;)i(B,L),L=L.sibling;return null}function l(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function f(B,L){return B=Hi(B,L),B.index=0,B.sibling=null,B}function d(B,L,H){return B.index=H,t?(H=B.alternate,H!==null?(H=H.index,H<L?(B.flags|=67108866,L):H):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function _(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function b(B,L,H,Z){return L===null||L.tag!==6?(L=Cf(H,B.mode,Z),L.return=B,L):(L=f(L,H),L.return=B,L)}function N(B,L,H,Z){var de=H.type;return de===j?W(B,L,H.props.children,Z,H.key):L!==null&&(L.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===x&&Bs(de)===L.type)?(L=f(L,H.props),ol(L,H),L.return=B,L):(L=Ju(H.type,H.key,H.props,null,B.mode,Z),ol(L,H),L.return=B,L)}function F(B,L,H,Z){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=If(H,B.mode,Z),L.return=B,L):(L=f(L,H.children||[]),L.return=B,L)}function W(B,L,H,Z,de){return L===null||L.tag!==7?(L=Ls(H,B.mode,Z,de),L.return=B,L):(L=f(L,H),L.return=B,L)}function te(B,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Cf(""+L,B.mode,H),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case D:return H=Ju(L.type,L.key,L.props,null,B.mode,H),ol(H,L),H.return=B,H;case V:return L=If(L,B.mode,H),L.return=B,L;case x:return L=Bs(L),te(B,L,H)}if(Ke(L)||z(L))return L=Ls(L,B.mode,H,null),L.return=B,L;if(typeof L.then=="function")return te(B,sc(L),H);if(L.$$typeof===$)return te(B,tc(B,L),H);ac(B,L)}return null}function Q(B,L,H,Z){var de=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return de!==null?null:b(B,L,""+H,Z);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case D:return H.key===de?N(B,L,H,Z):null;case V:return H.key===de?F(B,L,H,Z):null;case x:return H=Bs(H),Q(B,L,H,Z)}if(Ke(H)||z(H))return de!==null?null:W(B,L,H,Z,null);if(typeof H.then=="function")return Q(B,L,sc(H),Z);if(H.$$typeof===$)return Q(B,L,tc(B,H),Z);ac(B,H)}return null}function Y(B,L,H,Z,de){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return B=B.get(H)||null,b(L,B,""+Z,de);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case D:return B=B.get(Z.key===null?H:Z.key)||null,N(L,B,Z,de);case V:return B=B.get(Z.key===null?H:Z.key)||null,F(L,B,Z,de);case x:return Z=Bs(Z),Y(B,L,H,Z,de)}if(Ke(Z)||z(Z))return B=B.get(H)||null,W(L,B,Z,de,null);if(typeof Z.then=="function")return Y(B,L,H,sc(Z),de);if(Z.$$typeof===$)return Y(B,L,H,tc(L,Z),de);ac(L,Z)}return null}function he(B,L,H,Z){for(var de=null,qe=null,fe=L,Ce=L=0,Me=null;fe!==null&&Ce<H.length;Ce++){fe.index>Ce?(Me=fe,fe=null):Me=fe.sibling;var He=Q(B,fe,H[Ce],Z);if(He===null){fe===null&&(fe=Me);break}t&&fe&&He.alternate===null&&i(B,fe),L=d(He,L,Ce),qe===null?de=He:qe.sibling=He,qe=He,fe=Me}if(Ce===H.length)return a(B,fe),Pe&&Fi(B,Ce),de;if(fe===null){for(;Ce<H.length;Ce++)fe=te(B,H[Ce],Z),fe!==null&&(L=d(fe,L,Ce),qe===null?de=fe:qe.sibling=fe,qe=fe);return Pe&&Fi(B,Ce),de}for(fe=l(fe);Ce<H.length;Ce++)Me=Y(fe,B,Ce,H[Ce],Z),Me!==null&&(t&&Me.alternate!==null&&fe.delete(Me.key===null?Ce:Me.key),L=d(Me,L,Ce),qe===null?de=Me:qe.sibling=Me,qe=Me);return t&&fe.forEach(function(Kr){return i(B,Kr)}),Pe&&Fi(B,Ce),de}function _e(B,L,H,Z){if(H==null)throw Error(s(151));for(var de=null,qe=null,fe=L,Ce=L=0,Me=null,He=H.next();fe!==null&&!He.done;Ce++,He=H.next()){fe.index>Ce?(Me=fe,fe=null):Me=fe.sibling;var Kr=Q(B,fe,He.value,Z);if(Kr===null){fe===null&&(fe=Me);break}t&&fe&&Kr.alternate===null&&i(B,fe),L=d(Kr,L,Ce),qe===null?de=Kr:qe.sibling=Kr,qe=Kr,fe=Me}if(He.done)return a(B,fe),Pe&&Fi(B,Ce),de;if(fe===null){for(;!He.done;Ce++,He=H.next())He=te(B,He.value,Z),He!==null&&(L=d(He,L,Ce),qe===null?de=He:qe.sibling=He,qe=He);return Pe&&Fi(B,Ce),de}for(fe=l(fe);!He.done;Ce++,He=H.next())He=Y(fe,B,Ce,He.value,Z),He!==null&&(t&&He.alternate!==null&&fe.delete(He.key===null?Ce:He.key),L=d(He,L,Ce),qe===null?de=He:qe.sibling=He,qe=He);return t&&fe.forEach(function(nw){return i(B,nw)}),Pe&&Fi(B,Ce),de}function it(B,L,H,Z){if(typeof H=="object"&&H!==null&&H.type===j&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case D:e:{for(var de=H.key;L!==null;){if(L.key===de){if(de=H.type,de===j){if(L.tag===7){a(B,L.sibling),Z=f(L,H.props.children),Z.return=B,B=Z;break e}}else if(L.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===x&&Bs(de)===L.type){a(B,L.sibling),Z=f(L,H.props),ol(Z,H),Z.return=B,B=Z;break e}a(B,L);break}else i(B,L);L=L.sibling}H.type===j?(Z=Ls(H.props.children,B.mode,Z,H.key),Z.return=B,B=Z):(Z=Ju(H.type,H.key,H.props,null,B.mode,Z),ol(Z,H),Z.return=B,B=Z)}return _(B);case V:e:{for(de=H.key;L!==null;){if(L.key===de)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(B,L.sibling),Z=f(L,H.children||[]),Z.return=B,B=Z;break e}else{a(B,L);break}else i(B,L);L=L.sibling}Z=If(H,B.mode,Z),Z.return=B,B=Z}return _(B);case x:return H=Bs(H),it(B,L,H,Z)}if(Ke(H))return he(B,L,H,Z);if(z(H)){if(de=z(H),typeof de!="function")throw Error(s(150));return H=de.call(H),_e(B,L,H,Z)}if(typeof H.then=="function")return it(B,L,sc(H),Z);if(H.$$typeof===$)return it(B,L,tc(B,H),Z);ac(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(B,L.sibling),Z=f(L,H),Z.return=B,B=Z):(a(B,L),Z=Cf(H,B.mode,Z),Z.return=B,B=Z),_(B)):a(B,L)}return function(B,L,H,Z){try{al=0;var de=it(B,L,H,Z);return Pa=null,de}catch(fe){if(fe===La||fe===ic)throw fe;var qe=Sn(29,fe,null,B.mode);return qe.lanes=Z,qe.return=B,qe}finally{}}}var Hs=Qg(!0),Kg=Qg(!1),Nr=!1;function Bf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Dr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Or(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ge&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Wu(t),Ng(t,null,a),i}return Xu(t,l,i,a),Wu(t)}function ll(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,ko(t,a)}}function Hf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Ff=!1;function ul(){if(Ff){var t=ka;if(t!==null)throw t}}function cl(t,i,a,l){Ff=!1;var f=t.updateQueue;Nr=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var N=b,F=N.next;N.next=null,_===null?d=F:_.next=F,_=N;var W=t.alternate;W!==null&&(W=W.updateQueue,b=W.lastBaseUpdate,b!==_&&(b===null?W.firstBaseUpdate=F:b.next=F,W.lastBaseUpdate=N))}if(d!==null){var te=f.baseState;_=0,W=F=N=null,b=d;do{var Q=b.lane&-536870913,Y=Q!==b.lane;if(Y?(Oe&Q)===Q:(l&Q)===Q){Q!==0&&Q===Va&&(Ff=!0),W!==null&&(W=W.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var he=t,_e=b;Q=i;var it=a;switch(_e.tag){case 1:if(he=_e.payload,typeof he=="function"){te=he.call(it,te,Q);break e}te=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=_e.payload,Q=typeof he=="function"?he.call(it,te,Q):he,Q==null)break e;te=S({},te,Q);break e;case 2:Nr=!0}}Q=b.callback,Q!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[Q]:Y.push(Q))}else Y={lane:Q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},W===null?(F=W=Y,N=te):W=W.next=Y,_|=Q;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;Y=b,b=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);W===null&&(N=te),f.baseState=N,f.firstBaseUpdate=F,f.lastBaseUpdate=W,d===null&&(f.shared.lanes=0),Pr|=_,t.lanes=_,t.memoizedState=te}}function Yg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function $g(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Yg(a[t],i)}var ja=P(null),oc=P(0);function Xg(t,i){t=tr,oe(oc,t),oe(ja,i),tr=t|i.baseLanes}function Gf(){oe(oc,tr),oe(ja,ja.current)}function Qf(){tr=oc.current,ne(ja),ne(oc)}var bn=P(null),zn=null;function Mr(t){var i=t.alternate;oe(_t,_t.current&1),oe(bn,t),zn===null&&(i===null||ja.current!==null||i.memoizedState!==null)&&(zn=t)}function Kf(t){oe(_t,_t.current),oe(bn,t),zn===null&&(zn=t)}function Wg(t){t.tag===22?(oe(_t,_t.current),oe(bn,t),zn===null&&(zn=t)):Vr()}function Vr(){oe(_t,_t.current),oe(bn,bn.current)}function wn(t){ne(bn),zn===t&&(zn=null),ne(_t)}var _t=P(0);function lc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Zd(a)||em(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ki=0,xe=null,tt=null,It=null,uc=!1,Ua=!1,Fs=!1,cc=0,hl=0,za=null,Qb=0;function mt(){throw Error(s(321))}function Yf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Tn(t[a],i[a]))return!1;return!0}function $f(t,i,a,l,f,d){return Ki=d,xe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,J.H=t===null||t.memoizedState===null?Vy:cd,Fs=!1,d=a(l,f),Fs=!1,Ua&&(d=Zg(i,a,l,f)),Jg(t),d}function Jg(t){J.H=ml;var i=tt!==null&&tt.next!==null;if(Ki=0,It=tt=xe=null,uc=!1,hl=0,za=null,i)throw Error(s(300));t===null||Nt||(t=t.dependencies,t!==null&&ec(t)&&(Nt=!0))}function Zg(t,i,a,l){xe=t;var f=0;do{if(Ua&&(za=null),hl=0,Ua=!1,25<=f)throw Error(s(301));if(f+=1,It=tt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}J.H=ky,d=i(a,l)}while(Ua);return d}function Kb(){var t=J.H,i=t.useState()[0];return i=typeof i.then=="function"?fl(i):i,t=t.useState()[0],(tt!==null?tt.memoizedState:null)!==t&&(xe.flags|=1024),i}function Xf(){var t=cc!==0;return cc=0,t}function Wf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Jf(t){if(uc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}uc=!1}Ki=0,It=tt=xe=null,Ua=!1,hl=cc=0,za=null}function on(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?xe.memoizedState=It=t:It=It.next=t,It}function vt(){if(tt===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=tt.next;var i=It===null?xe.memoizedState:It.next;if(i!==null)It=i,tt=t;else{if(t===null)throw xe.alternate===null?Error(s(467)):Error(s(310));tt=t,t={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},It===null?xe.memoizedState=It=t:It=It.next=t}return It}function hc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fl(t){var i=hl;return hl+=1,za===null&&(za=[]),t=Hg(za,t,i),i=xe,(It===null?i.memoizedState:It.next)===null&&(i=i.alternate,J.H=i===null||i.memoizedState===null?Vy:cd),t}function fc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return fl(t);if(t.$$typeof===$)return Kt(t)}throw Error(s(438,String(t)))}function Zf(t){var i=null,a=xe.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=xe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=hc(),xe.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=M;return i.index++,a}function Yi(t,i){return typeof i=="function"?i(t):i}function dc(t){var i=vt();return ed(i,tt,t)}function ed(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=t.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=t.baseState,f===null)t.memoizedState=d;else{i=f.next;var b=_=null,N=null,F=i,W=!1;do{var te=F.lane&-536870913;if(te!==F.lane?(Oe&te)===te:(Ki&te)===te){var Q=F.revertLane;if(Q===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),te===Va&&(W=!0);else if((Ki&Q)===Q){F=F.next,Q===Va&&(W=!0);continue}else te={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},N===null?(b=N=te,_=d):N=N.next=te,xe.lanes|=Q,Pr|=Q;te=F.action,Fs&&a(d,te),d=F.hasEagerState?F.eagerState:a(d,te)}else Q={lane:te,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},N===null?(b=N=Q,_=d):N=N.next=Q,xe.lanes|=te,Pr|=te;F=F.next}while(F!==null&&F!==i);if(N===null?_=d:N.next=b,!Tn(d,t.memoizedState)&&(Nt=!0,W&&(a=ka,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=N,l.lastRenderedState=d}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function td(t){var i=vt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=t(d,_.action),_=_.next;while(_!==f);Tn(d,i.memoizedState)||(Nt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function ey(t,i,a){var l=xe,f=vt(),d=Pe;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!Tn((tt||f).memoizedState,a);if(_&&(f.memoizedState=a,Nt=!0),f=f.queue,rd(iy.bind(null,l,f,t),[t]),f.getSnapshot!==i||_||It!==null&&It.memoizedState.tag&1){if(l.flags|=2048,Ba(9,{destroy:void 0},ny.bind(null,l,f,a,i),null),rt===null)throw Error(s(349));d||(Ki&127)!==0||ty(l,i,a)}return a}function ty(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=xe.updateQueue,i===null?(i=hc(),xe.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function ny(t,i,a,l){i.value=a,i.getSnapshot=l,ry(i)&&sy(t)}function iy(t,i,a){return a(function(){ry(i)&&sy(t)})}function ry(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Tn(t,a)}catch{return!0}}function sy(t){var i=ks(t,2);i!==null&&mn(i,t,2)}function nd(t){var i=on();if(typeof t=="function"){var a=t;if(t=a(),Fs){Nn(!0);try{a()}finally{Nn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:t},i}function ay(t,i,a,l){return t.baseState=a,ed(t,tt,typeof l=="function"?l:Yi)}function Yb(t,i,a,l,f){if(gc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};J.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,oy(i,d)):(d.next=a.next,i.pending=a.next=d)}}function oy(t,i){var a=i.action,l=i.payload,f=t.state;if(i.isTransition){var d=J.T,_={};J.T=_;try{var b=a(f,l),N=J.S;N!==null&&N(_,b),ly(t,i,b)}catch(F){id(t,i,F)}finally{d!==null&&_.types!==null&&(d.types=_.types),J.T=d}}else try{d=a(f,l),ly(t,i,d)}catch(F){id(t,i,F)}}function ly(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){uy(t,i,l)},function(l){return id(t,i,l)}):uy(t,i,a)}function uy(t,i,a){i.status="fulfilled",i.value=a,cy(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,oy(t,a)))}function id(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,cy(i),i=i.next;while(i!==l)}t.action=null}function cy(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function hy(t,i){return i}function fy(t,i){if(Pe){var a=rt.formState;if(a!==null){e:{var l=xe;if(Pe){if(at){t:{for(var f=at,d=Un;f.nodeType!==8;){if(!d){f=null;break t}if(f=Bn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){at=Bn(f.nextSibling),l=f.data==="F!";break e}}Cr(l)}l=!1}l&&(i=a[0])}}return a=on(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hy,lastRenderedState:i},a.queue=l,a=Dy.bind(null,xe,l),l.dispatch=a,l=nd(!1),d=ud.bind(null,xe,!1,l.queue),l=on(),f={state:i,dispatch:null,action:t,pending:null},l.queue=f,a=Yb.bind(null,xe,f,d,a),f.dispatch=a,l.memoizedState=t,[i,a,!1]}function dy(t){var i=vt();return my(i,tt,t)}function my(t,i,a){if(i=ed(t,i,hy)[0],t=dc(Yi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=fl(i)}catch(_){throw _===La?ic:_}else l=i;i=vt();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(xe.flags|=2048,Ba(9,{destroy:void 0},$b.bind(null,f,a),null)),[l,d,t]}function $b(t,i){t.action=i}function py(t){var i=vt(),a=tt;if(a!==null)return my(i,a,t);vt(),i=i.memoizedState,a=vt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Ba(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=xe.updateQueue,i===null&&(i=hc(),xe.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function gy(){return vt().memoizedState}function mc(t,i,a,l){var f=on();xe.flags|=t,f.memoizedState=Ba(1|i,{destroy:void 0},a,l===void 0?null:l)}function pc(t,i,a,l){var f=vt();l=l===void 0?null:l;var d=f.memoizedState.inst;tt!==null&&l!==null&&Yf(l,tt.memoizedState.deps)?f.memoizedState=Ba(i,d,a,l):(xe.flags|=t,f.memoizedState=Ba(1|i,d,a,l))}function yy(t,i){mc(8390656,8,t,i)}function rd(t,i){pc(2048,8,t,i)}function Xb(t){xe.flags|=4;var i=xe.updateQueue;if(i===null)i=hc(),xe.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function _y(t){var i=vt().memoizedState;return Xb({ref:i,nextImpl:t}),function(){if((Ge&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function vy(t,i){return pc(4,2,t,i)}function Ey(t,i){return pc(4,4,t,i)}function Ty(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Sy(t,i,a){a=a!=null?a.concat([t]):null,pc(4,4,Ty.bind(null,i,t),a)}function sd(){}function by(t,i){var a=vt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Yf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function wy(t,i){var a=vt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Yf(i,l[1]))return l[0];if(l=t(),Fs){Nn(!0);try{t()}finally{Nn(!1)}}return a.memoizedState=[l,i],l}function ad(t,i,a){return a===void 0||(Ki&1073741824)!==0&&(Oe&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=A_(),xe.lanes|=t,Pr|=t,a)}function Ay(t,i,a,l){return Tn(a,i)?a:ja.current!==null?(t=ad(t,a,l),Tn(t,i)||(Nt=!0),t):(Ki&42)===0||(Ki&1073741824)!==0&&(Oe&261930)===0?(Nt=!0,t.memoizedState=a):(t=A_(),xe.lanes|=t,Pr|=t,i)}function xy(t,i,a,l,f){var d=ae.p;ae.p=d!==0&&8>d?d:8;var _=J.T,b={};J.T=b,ud(t,!1,i,a);try{var N=f(),F=J.S;if(F!==null&&F(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var W=Gb(N,l);dl(t,i,W,Rn(t))}else dl(t,i,l,Rn(t))}catch(te){dl(t,i,{then:function(){},status:"rejected",reason:te},Rn())}finally{ae.p=d,_!==null&&b.types!==null&&(_.types=b.types),J.T=_}}function Wb(){}function od(t,i,a,l){if(t.tag!==5)throw Error(s(476));var f=Ry(t).queue;xy(t,f,i,ge,a===null?Wb:function(){return Cy(t),a(l)})}function Ry(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:ge},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Cy(t){var i=Ry(t);i.next===null&&(i=t.alternate.memoizedState),dl(t,i.next.queue,{},Rn())}function ld(){return Kt(Nl)}function Iy(){return vt().memoizedState}function Ny(){return vt().memoizedState}function Jb(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Rn();t=Dr(a);var l=Or(i,t,a);l!==null&&(mn(l,i,a),ll(l,i,a)),i={cache:Pf()},t.payload=i;return}i=i.return}}function Zb(t,i,a){var l=Rn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},gc(t)?Oy(i,a):(a=xf(t,i,a,l),a!==null&&(mn(a,t,l),My(a,i,l)))}function Dy(t,i,a){var l=Rn();dl(t,i,a,l)}function dl(t,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(gc(t))Oy(i,f);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(f.hasEagerState=!0,f.eagerState=b,Tn(b,_))return Xu(t,i,f,0),rt===null&&$u(),!1}catch{}finally{}if(a=xf(t,i,f,l),a!==null)return mn(a,t,l),My(a,i,l),!0}return!1}function ud(t,i,a,l){if(l={lane:2,revertLane:Bd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},gc(t)){if(i)throw Error(s(479))}else i=xf(t,a,l,2),i!==null&&mn(i,t,2)}function gc(t){var i=t.alternate;return t===xe||i!==null&&i===xe}function Oy(t,i){Ua=uc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function My(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,ko(t,a)}}var ml={readContext:Kt,use:fc,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};ml.useEffectEvent=mt;var Vy={readContext:Kt,use:fc,useCallback:function(t,i){return on().memoizedState=[t,i===void 0?null:i],t},useContext:Kt,useEffect:yy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,mc(4194308,4,Ty.bind(null,i,t),a)},useLayoutEffect:function(t,i){return mc(4194308,4,t,i)},useInsertionEffect:function(t,i){mc(4,2,t,i)},useMemo:function(t,i){var a=on();i=i===void 0?null:i;var l=t();if(Fs){Nn(!0);try{t()}finally{Nn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=on();if(a!==void 0){var f=a(i);if(Fs){Nn(!0);try{a(i)}finally{Nn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=Zb.bind(null,xe,t),[l.memoizedState,t]},useRef:function(t){var i=on();return t={current:t},i.memoizedState=t},useState:function(t){t=nd(t);var i=t.queue,a=Dy.bind(null,xe,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:sd,useDeferredValue:function(t,i){var a=on();return ad(a,t,i)},useTransition:function(){var t=nd(!1);return t=xy.bind(null,xe,t.queue,!0,!1),on().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=xe,f=on();if(Pe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),rt===null)throw Error(s(349));(Oe&127)!==0||ty(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,yy(iy.bind(null,l,d,t),[t]),l.flags|=2048,Ba(9,{destroy:void 0},ny.bind(null,l,d,a,i),null),a},useId:function(){var t=on(),i=rt.identifierPrefix;if(Pe){var a=Ci,l=Ri;a=(l&~(1<<32-gt(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=cc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=Qb++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:ld,useFormState:fy,useActionState:fy,useOptimistic:function(t){var i=on();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=ud.bind(null,xe,!0,a),a.dispatch=i,[t,i]},useMemoCache:Zf,useCacheRefresh:function(){return on().memoizedState=Jb.bind(null,xe)},useEffectEvent:function(t){var i=on(),a={impl:t};return i.memoizedState=a,function(){if((Ge&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},cd={readContext:Kt,use:fc,useCallback:by,useContext:Kt,useEffect:rd,useImperativeHandle:Sy,useInsertionEffect:vy,useLayoutEffect:Ey,useMemo:wy,useReducer:dc,useRef:gy,useState:function(){return dc(Yi)},useDebugValue:sd,useDeferredValue:function(t,i){var a=vt();return Ay(a,tt.memoizedState,t,i)},useTransition:function(){var t=dc(Yi)[0],i=vt().memoizedState;return[typeof t=="boolean"?t:fl(t),i]},useSyncExternalStore:ey,useId:Iy,useHostTransitionStatus:ld,useFormState:dy,useActionState:dy,useOptimistic:function(t,i){var a=vt();return ay(a,tt,t,i)},useMemoCache:Zf,useCacheRefresh:Ny};cd.useEffectEvent=_y;var ky={readContext:Kt,use:fc,useCallback:by,useContext:Kt,useEffect:rd,useImperativeHandle:Sy,useInsertionEffect:vy,useLayoutEffect:Ey,useMemo:wy,useReducer:td,useRef:gy,useState:function(){return td(Yi)},useDebugValue:sd,useDeferredValue:function(t,i){var a=vt();return tt===null?ad(a,t,i):Ay(a,tt.memoizedState,t,i)},useTransition:function(){var t=td(Yi)[0],i=vt().memoizedState;return[typeof t=="boolean"?t:fl(t),i]},useSyncExternalStore:ey,useId:Iy,useHostTransitionStatus:ld,useFormState:py,useActionState:py,useOptimistic:function(t,i){var a=vt();return tt!==null?ay(a,tt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Zf,useCacheRefresh:Ny};ky.useEffectEvent=_y;function hd(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:S({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var fd={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Rn(),f=Dr(l);f.payload=i,a!=null&&(f.callback=a),i=Or(t,f,l),i!==null&&(mn(i,t,l),ll(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Rn(),f=Dr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Or(t,f,l),i!==null&&(mn(i,t,l),ll(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Rn(),l=Dr(a);l.tag=2,i!=null&&(l.callback=i),i=Or(t,l,a),i!==null&&(mn(i,t,a),ll(i,t,a))}};function Ly(t,i,a,l,f,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!el(a,l)||!el(f,d):!0}function Py(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&fd.enqueueReplaceState(i,i.state,null)}function Gs(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=S({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function jy(t){Yu(t)}function Uy(t){console.error(t)}function zy(t){Yu(t)}function yc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function By(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function dd(t,i,a){return a=Dr(a),a.tag=3,a.payload={element:null},a.callback=function(){yc(t,i)},a}function qy(t){return t=Dr(t),t.tag=3,t}function Hy(t,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;t.payload=function(){return f(d)},t.callback=function(){By(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){By(i,a,l),typeof f!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function e1(t,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ma(i,a,f,!0),a=bn.current,a!==null){switch(a.tag){case 31:case 13:return zn===null?Ic():a.alternate===null&&pt===0&&(pt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===rc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),jd(t,l,f)),!1;case 22:return a.flags|=65536,l===rc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),jd(t,l,f)),!1}throw Error(s(435,a.tag))}return jd(t,l,f),Ic(),!1}if(Pe)return i=bn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Of&&(t=Error(s(422),{cause:l}),il(Ln(t,a)))):(l!==Of&&(i=Error(s(423),{cause:l}),il(Ln(i,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Ln(l,a),f=dd(t.stateNode,l,f),Hf(t,f),pt!==4&&(pt=2)),!1;var d=Error(s(520),{cause:l});if(d=Ln(d,a),Sl===null?Sl=[d]:Sl.push(d),pt!==4&&(pt=2),i===null)return!0;l=Ln(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=dd(a.stateNode,l,t),Hf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(jr===null||!jr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=qy(f),Hy(f,t,a,l),Hf(a,f),!1}a=a.return}while(a!==null);return!1}var md=Error(s(461)),Nt=!1;function Yt(t,i,a,l){i.child=t===null?Kg(i,null,a,l):Hs(i,t.child,a,l)}function Fy(t,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return Us(i),l=$f(t,i,a,_,d,f),b=Xf(),t!==null&&!Nt?(Wf(t,i,f),$i(t,i,f)):(Pe&&b&&Nf(i),i.flags|=1,Yt(t,i,l,f),i.child)}function Gy(t,i,a,l,f){if(t===null){var d=a.type;return typeof d=="function"&&!Rf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Qy(t,i,d,l,f)):(t=Ju(a.type,null,l,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!Sd(t,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:el,a(_,l)&&t.ref===i.ref)return $i(t,i,f)}return i.flags|=1,t=Hi(d,l),t.ref=i.ref,t.return=i,i.child=t}function Qy(t,i,a,l,f){if(t!==null){var d=t.memoizedProps;if(el(d,l)&&t.ref===i.ref)if(Nt=!1,i.pendingProps=l=d,Sd(t,f))(t.flags&131072)!==0&&(Nt=!0);else return i.lanes=t.lanes,$i(t,i,f)}return pd(t,i,a,l,f)}function Ky(t,i,a,l){var f=l.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=i.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return Yy(t,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&nc(i,d!==null?d.cachePool:null),d!==null?Xg(i,d):Gf(),Wg(i);else return l=i.lanes=536870912,Yy(t,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(nc(i,d.cachePool),Xg(i,d),Vr(),i.memoizedState=null):(t!==null&&nc(i,null),Gf(),Vr());return Yt(t,i,f,a),i.child}function pl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Yy(t,i,a,l,f){var d=Uf();return d=d===null?null:{parent:Ct._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&nc(i,null),Gf(),Wg(i),t!==null&&Ma(t,i,l,!0),i.childLanes=f,null}function _c(t,i){return i=Ec({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function $y(t,i,a){return Hs(i,t.child,null,a),t=_c(i,i.pendingProps),t.flags|=2,wn(i),i.memoizedState=null,t}function t1(t,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Pe){if(l.mode==="hidden")return t=_c(i,l),i.lanes=536870912,pl(null,t);if(Kf(i),(t=at)?(t=o0(t,Un),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:xr!==null?{id:Ri,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},a=Og(t),a.return=i,i.child=a,Qt=i,at=null)):t=null,t===null)throw Cr(i);return i.lanes=536870912,null}return _c(i,l)}var d=t.memoizedState;if(d!==null){var _=d.dehydrated;if(Kf(i),f)if(i.flags&256)i.flags&=-257,i=$y(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(Nt||Ma(t,i,a,!1),f=(a&t.childLanes)!==0,Nt||f){if(l=rt,l!==null&&(_=Lo(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,ks(t,_),mn(l,t,_),md;Ic(),i=$y(t,i,a)}else t=d.treeContext,at=Bn(_.nextSibling),Qt=i,Pe=!0,Rr=null,Un=!1,t!==null&&kg(i,t),i=_c(i,l),i.flags|=4096;return i}return t=Hi(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function vc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function pd(t,i,a,l,f){return Us(i),a=$f(t,i,a,l,void 0,f),l=Xf(),t!==null&&!Nt?(Wf(t,i,f),$i(t,i,f)):(Pe&&l&&Nf(i),i.flags|=1,Yt(t,i,a,f),i.child)}function Xy(t,i,a,l,f,d){return Us(i),i.updateQueue=null,a=Zg(i,l,a,f),Jg(t),l=Xf(),t!==null&&!Nt?(Wf(t,i,d),$i(t,i,d)):(Pe&&l&&Nf(i),i.flags|=1,Yt(t,i,a,d),i.child)}function Wy(t,i,a,l,f){if(Us(i),i.stateNode===null){var d=Ia,_=a.contextType;typeof _=="object"&&_!==null&&(d=Kt(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=fd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Bf(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Kt(_):Ia,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(hd(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&fd.enqueueReplaceState(d,d.state,null),cl(i,l,d,f),ul(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var b=i.memoizedProps,N=Gs(a,b);d.props=N;var F=d.context,W=a.contextType;_=Ia,typeof W=="object"&&W!==null&&(_=Kt(W));var te=a.getDerivedStateFromProps;W=typeof te=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,W||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||F!==_)&&Py(i,d,l,_),Nr=!1;var Q=i.memoizedState;d.state=Q,cl(i,l,d,f),ul(),F=i.memoizedState,b||Q!==F||Nr?(typeof te=="function"&&(hd(i,a,te,l),F=i.memoizedState),(N=Nr||Ly(i,a,N,l,Q,F,_))?(W||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=F),d.props=l,d.state=F,d.context=_,l=N):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,qf(t,i),_=i.memoizedProps,W=Gs(a,_),d.props=W,te=i.pendingProps,Q=d.context,F=a.contextType,N=Ia,typeof F=="object"&&F!==null&&(N=Kt(F)),b=a.getDerivedStateFromProps,(F=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==te||Q!==N)&&Py(i,d,l,N),Nr=!1,Q=i.memoizedState,d.state=Q,cl(i,l,d,f),ul();var Y=i.memoizedState;_!==te||Q!==Y||Nr||t!==null&&t.dependencies!==null&&ec(t.dependencies)?(typeof b=="function"&&(hd(i,a,b,l),Y=i.memoizedState),(W=Nr||Ly(i,a,W,l,Q,Y,N)||t!==null&&t.dependencies!==null&&ec(t.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Y,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Y,N)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&Q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&Q===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=Y),d.props=l,d.state=Y,d.context=N,l=W):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&Q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&Q===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,vc(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=Hs(i,t.child,null,f),i.child=Hs(i,null,a,f)):Yt(t,i,a,f),i.memoizedState=d.state,t=i.child):t=$i(t,i,f),t}function Jy(t,i,a,l){return Ps(),i.flags|=256,Yt(t,i,a,l),i.child}var gd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yd(t){return{baseLanes:t,cachePool:Bg()}}function _d(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=xn),t}function Zy(t,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(_t.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Pe){if(f?Mr(i):Vr(),(t=at)?(t=o0(t,Un),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:xr!==null?{id:Ri,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},a=Og(t),a.return=i,i.child=a,Qt=i,at=null)):t=null,t===null)throw Cr(i);return em(t)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,f?(Vr(),f=i.mode,b=Ec({mode:"hidden",children:b},f),l=Ls(l,f,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=yd(a),l.childLanes=_d(t,_,a),i.memoizedState=gd,pl(null,l)):(Mr(i),vd(i,b))}var N=t.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(d)i.flags&256?(Mr(i),i.flags&=-257,i=Ed(t,i,a)):i.memoizedState!==null?(Vr(),i.child=t.child,i.flags|=128,i=null):(Vr(),b=l.fallback,f=i.mode,l=Ec({mode:"visible",children:l.children},f),b=Ls(b,f,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,Hs(i,t.child,null,a),l=i.child,l.memoizedState=yd(a),l.childLanes=_d(t,_,a),i.memoizedState=gd,i=pl(null,l));else if(Mr(i),em(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var F=_.dgst;_=F,l=Error(s(419)),l.stack="",l.digest=_,il({value:l,source:null,stack:null}),i=Ed(t,i,a)}else if(Nt||Ma(t,i,a,!1),_=(a&t.childLanes)!==0,Nt||_){if(_=rt,_!==null&&(l=Lo(_,a),l!==0&&l!==N.retryLane))throw N.retryLane=l,ks(t,l),mn(_,t,l),md;Zd(b)||Ic(),i=Ed(t,i,a)}else Zd(b)?(i.flags|=192,i.child=t.child,i=null):(t=N.treeContext,at=Bn(b.nextSibling),Qt=i,Pe=!0,Rr=null,Un=!1,t!==null&&kg(i,t),i=vd(i,l.children),i.flags|=4096);return i}return f?(Vr(),b=l.fallback,f=i.mode,N=t.child,F=N.sibling,l=Hi(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,F!==null?b=Hi(F,b):(b=Ls(b,f,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,pl(null,l),l=i.child,b=t.child.memoizedState,b===null?b=yd(a):(f=b.cachePool,f!==null?(N=Ct._currentValue,f=f.parent!==N?{parent:N,pool:N}:f):f=Bg(),b={baseLanes:b.baseLanes|a,cachePool:f}),l.memoizedState=b,l.childLanes=_d(t,_,a),i.memoizedState=gd,pl(t.child,l)):(Mr(i),a=t.child,t=a.sibling,a=Hi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function vd(t,i){return i=Ec({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Ec(t,i){return t=Sn(22,t,null,i),t.lanes=0,t}function Ed(t,i,a){return Hs(i,t.child,null,a),t=vd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function e_(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),kf(t.return,i,a)}function Td(t,i,a,l,f,d){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function t_(t,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=_t.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,oe(_t,_),Yt(t,i,l,a),l=Pe?nl:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&e_(t,a,i);else if(t.tag===19)e_(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)t=a.alternate,t!==null&&lc(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Td(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&lc(t)===null){i.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}Td(i,!0,a,null,d,l);break;case"together":Td(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function $i(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Pr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Ma(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Hi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Hi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Sd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&ec(t)))}function n1(t,i,a){switch(i.tag){case 3:kt(i,i.stateNode.containerInfo),Ir(i,Ct,t.memoizedState.cache),Ps();break;case 27:case 5:ys(i);break;case 4:kt(i,i.stateNode.containerInfo);break;case 10:Ir(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Kf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Mr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Zy(t,i,a):(Mr(i),t=$i(t,i,a),t!==null?t.sibling:null);Mr(i);break;case 19:var f=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ma(t,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return t_(t,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(_t,_t.current),l)break;return null;case 22:return i.lanes=0,Ky(t,i,a,i.pendingProps);case 24:Ir(i,Ct,t.memoizedState.cache)}return $i(t,i,a)}function n_(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Nt=!0;else{if(!Sd(t,a)&&(i.flags&128)===0)return Nt=!1,n1(t,i,a);Nt=(t.flags&131072)!==0}else Nt=!1,Pe&&(i.flags&1048576)!==0&&Vg(i,nl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=Bs(i.elementType),i.type=t,typeof t=="function")Rf(t)?(l=Gs(t,l),i.tag=1,i=Wy(null,i,t,l,a)):(i.tag=0,i=pd(null,i,t,l,a));else{if(t!=null){var f=t.$$typeof;if(f===se){i.tag=11,i=Fy(null,i,t,l,a);break e}else if(f===I){i.tag=14,i=Gy(null,i,t,l,a);break e}}throw i=Be(t)||t,Error(s(306,i,""))}}return i;case 0:return pd(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Gs(l,i.pendingProps),Wy(t,i,l,f,a);case 3:e:{if(kt(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,qf(t,i),cl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Ir(i,Ct,l),l!==d.cache&&Lf(i,[Ct],a,!0),ul(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Jy(t,i,l,a);break e}else if(l!==f){f=Ln(Error(s(424)),i),il(f),i=Jy(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(at=Bn(t.firstChild),Qt=i,Pe=!0,Rr=null,Un=!0,a=Kg(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ps(),l===f){i=$i(t,i,a);break e}Yt(t,i,l,a)}i=i.child}return i;case 26:return vc(t,i),t===null?(a=d0(i.type,null,i.pendingProps,null))?i.memoizedState=a:Pe||(a=i.type,t=i.pendingProps,l=Lc(Re.current).createElement(a),l[At]=i,l[Ut]=t,$t(l,a,t),xt(l),i.stateNode=l):i.memoizedState=d0(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return ys(i),t===null&&Pe&&(l=i.stateNode=c0(i.type,i.pendingProps,Re.current),Qt=i,Un=!0,f=at,qr(i.type)?(tm=f,at=Bn(l.firstChild)):at=f),Yt(t,i,i.pendingProps.children,a),vc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Pe&&((f=l=at)&&(l=O1(l,i.type,i.pendingProps,Un),l!==null?(i.stateNode=l,Qt=i,at=Bn(l.firstChild),Un=!1,f=!0):f=!1),f||Cr(i)),ys(i),f=i.type,d=i.pendingProps,_=t!==null?t.memoizedProps:null,l=d.children,Xd(f,d)?l=null:_!==null&&Xd(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=$f(t,i,Kb,null,null,a),Nl._currentValue=f),vc(t,i),Yt(t,i,l,a),i.child;case 6:return t===null&&Pe&&((t=a=at)&&(a=M1(a,i.pendingProps,Un),a!==null?(i.stateNode=a,Qt=i,at=null,t=!0):t=!1),t||Cr(i)),null;case 13:return Zy(t,i,a);case 4:return kt(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Hs(i,null,l,a):Yt(t,i,l,a),i.child;case 11:return Fy(t,i,i.type,i.pendingProps,a);case 7:return Yt(t,i,i.pendingProps,a),i.child;case 8:return Yt(t,i,i.pendingProps.children,a),i.child;case 12:return Yt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Ir(i,i.type,l.value),Yt(t,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Us(i),f=Kt(f),l=l(f),i.flags|=1,Yt(t,i,l,a),i.child;case 14:return Gy(t,i,i.type,i.pendingProps,a);case 15:return Qy(t,i,i.type,i.pendingProps,a);case 19:return t_(t,i,a);case 31:return t1(t,i,a);case 22:return Ky(t,i,a,i.pendingProps);case 24:return Us(i),l=Kt(Ct),t===null?(f=Uf(),f===null&&(f=rt,d=Pf(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},Bf(i),Ir(i,Ct,f)):((t.lanes&a)!==0&&(qf(t,i),cl(i,null,null,a),ul()),f=t.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Ir(i,Ct,l)):(l=d.cache,Ir(i,Ct,l),l!==f.cache&&Lf(i,[Ct],a,!0))),Yt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Xi(t){t.flags|=4}function bd(t,i,a,l,f){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(I_())t.flags|=8192;else throw qs=rc,zf}else t.flags&=-16777217}function i_(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!_0(i))if(I_())t.flags|=8192;else throw qs=rc,zf}function Tc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Ru():536870912,t.lanes|=i,Ga|=i)}function gl(t,i){if(!Pe)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ot(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function i1(t,i,a){var l=i.pendingProps;switch(Df(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(i),null;case 1:return ot(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Qi(Ct),lt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Oa(i)?Xi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Mf())),ot(i),null;case 26:var f=i.type,d=i.memoizedState;return t===null?(Xi(i),d!==null?(ot(i),i_(i,d)):(ot(i),bd(i,f,null,l,a))):d?d!==t.memoizedState?(Xi(i),ot(i),i_(i,d)):(ot(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&Xi(i),ot(i),bd(i,f,t,l,a)),null;case 27:if(ca(i),a=Re.current,f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Xi(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ot(i),null}t=ce.current,Oa(i)?Lg(i):(t=c0(f,l,a),i.stateNode=t,Xi(i))}return ot(i),null;case 5:if(ca(i),f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Xi(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ot(i),null}if(d=ce.current,Oa(i))Lg(i);else{var _=Lc(Re.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[At]=i,d[Ut]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch($t(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Xi(i)}}return ot(i),bd(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Xi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=Re.current,Oa(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,f=Qt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[At]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Z_(t.nodeValue,a)),t||Cr(i,!0)}else t=Lc(t).createTextNode(l),t[At]=i,i.stateNode=t}return ot(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=Oa(i),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[At]=i}else Ps(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ot(i),t=!1}else a=Mf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(wn(i),i):(wn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return ot(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Oa(i),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[At]=i}else Ps(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ot(i),f=!1}else f=Mf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(wn(i),i):(wn(i),null)}return wn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Tc(i,i.updateQueue),ot(i),null);case 4:return lt(),t===null&&Gd(i.stateNode.containerInfo),ot(i),null;case 10:return Qi(i.type),ot(i),null;case 19:if(ne(_t),l=i.memoizedState,l===null)return ot(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)gl(l,!1);else{if(pt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=lc(t),d!==null){for(i.flags|=128,gl(l,!1),t=d.updateQueue,i.updateQueue=t,Tc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Dg(a,t),a=a.sibling;return oe(_t,_t.current&1|2),Pe&&Fi(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&sn()>xc&&(i.flags|=128,f=!0,gl(l,!1),i.lanes=4194304)}else{if(!f)if(t=lc(d),t!==null){if(i.flags|=128,f=!0,t=t.updateQueue,i.updateQueue=t,Tc(i,t),gl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Pe)return ot(i),null}else 2*sn()-l.renderingStartTime>xc&&a!==536870912&&(i.flags|=128,f=!0,gl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(t=l.last,t!==null?t.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=sn(),t.sibling=null,a=_t.current,oe(_t,f?a&1|2:a&1),Pe&&Fi(i,l.treeForkCount),t):(ot(i),null);case 22:case 23:return wn(i),Qf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ot(i),i.subtreeFlags&6&&(i.flags|=8192)):ot(i),a=i.updateQueue,a!==null&&Tc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&ne(zs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Qi(Ct),ot(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function r1(t,i){switch(Df(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Qi(Ct),lt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return ca(i),null;case 31:if(i.memoizedState!==null){if(wn(i),i.alternate===null)throw Error(s(340));Ps()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(wn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ps()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ne(_t),null;case 4:return lt(),null;case 10:return Qi(i.type),null;case 22:case 23:return wn(i),Qf(),t!==null&&ne(zs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Qi(Ct),null;case 25:return null;default:return null}}function r_(t,i){switch(Df(i),i.tag){case 3:Qi(Ct),lt();break;case 26:case 27:case 5:ca(i);break;case 4:lt();break;case 31:i.memoizedState!==null&&wn(i);break;case 13:wn(i);break;case 19:ne(_t);break;case 10:Qi(i.type);break;case 22:case 23:wn(i),Qf(),t!==null&&ne(zs);break;case 24:Qi(Ct)}}function yl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(b){Je(i,i.return,b)}}function kr(t,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&t)===t){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,f=i;var N=a,F=b;try{F()}catch(W){Je(f,N,W)}}}l=l.next}while(l!==d)}}catch(W){Je(i,i.return,W)}}function s_(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{$g(i,a)}catch(l){Je(t,t.return,l)}}}function a_(t,i,a){a.props=Gs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Je(t,i,l)}}function _l(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){Je(t,i,f)}}function Ii(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Je(t,i,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Je(t,i,f)}else a.current=null}function o_(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Je(t,t.return,f)}}function wd(t,i,a){try{var l=t.stateNode;x1(l,t.type,a,i),l[Ut]=i}catch(f){Je(t,t.return,f)}}function l_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&qr(t.type)||t.tag===4}function Ad(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||l_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&qr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=$n));else if(l!==4&&(l===27&&qr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(xd(t,i,a),t=t.sibling;t!==null;)xd(t,i,a),t=t.sibling}function Sc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&qr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Sc(t,i,a),t=t.sibling;t!==null;)Sc(t,i,a),t=t.sibling}function u_(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);$t(i,l,a),i[At]=t,i[Ut]=a}catch(d){Je(t,t.return,d)}}var Wi=!1,Dt=!1,Rd=!1,c_=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function s1(t,i){if(t=t.containerInfo,Yd=Hc,t=Sg(t),Ef(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,b=-1,N=-1,F=0,W=0,te=t,Q=null;t:for(;;){for(var Y;te!==a||f!==0&&te.nodeType!==3||(b=_+f),te!==d||l!==0&&te.nodeType!==3||(N=_+l),te.nodeType===3&&(_+=te.nodeValue.length),(Y=te.firstChild)!==null;)Q=te,te=Y;for(;;){if(te===t)break t;if(Q===a&&++F===f&&(b=_),Q===d&&++W===l&&(N=_),(Y=te.nextSibling)!==null)break;te=Q,Q=te.parentNode}te=Y}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for($d={focusedElem:t,selectionRange:a},Hc=!1,Bt=i;Bt!==null;)if(i=Bt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Bt=t;else for(;Bt!==null;){switch(i=Bt,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var he=Gs(a.type,f);t=l.getSnapshotBeforeUpdate(he,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(_e){Je(a,a.return,_e)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Jd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Jd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Bt=t;break}Bt=i.return}}function h_(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Zi(t,a),l&4&&yl(5,a);break;case 1:if(Zi(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){Je(a,a.return,_)}else{var f=Gs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(f,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Je(a,a.return,_)}}l&64&&s_(a),l&512&&_l(a,a.return);break;case 3:if(Zi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{$g(t,i)}catch(_){Je(a,a.return,_)}}break;case 27:i===null&&l&4&&u_(a);case 26:case 5:Zi(t,a),i===null&&l&4&&o_(a),l&512&&_l(a,a.return);break;case 12:Zi(t,a);break;case 31:Zi(t,a),l&4&&m_(t,a);break;case 13:Zi(t,a),l&4&&p_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=m1.bind(null,a),V1(t,a))));break;case 22:if(l=a.memoizedState!==null||Wi,!l){i=i!==null&&i.memoizedState!==null||Dt,f=Wi;var d=Dt;Wi=l,(Dt=i)&&!d?er(t,a,(a.subtreeFlags&8772)!==0):Zi(t,a),Wi=f,Dt=d}break;case 30:break;default:Zi(t,a)}}function f_(t){var i=t.alternate;i!==null&&(t.alternate=null,f_(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&pa(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ct=null,cn=!1;function Ji(t,i,a){for(a=a.child;a!==null;)d_(t,i,a),a=a.sibling}function d_(t,i,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Gn,a)}catch{}switch(a.tag){case 26:Dt||Ii(a,i),Ji(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Dt||Ii(a,i);var l=ct,f=cn;qr(a.type)&&(ct=a.stateNode,cn=!1),Ji(t,i,a),Rl(a.stateNode),ct=l,cn=f;break;case 5:Dt||Ii(a,i);case 6:if(l=ct,f=cn,ct=null,Ji(t,i,a),ct=l,cn=f,ct!==null)if(cn)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(a.stateNode)}catch(d){Je(a,i,d)}else try{ct.removeChild(a.stateNode)}catch(d){Je(a,i,d)}break;case 18:ct!==null&&(cn?(t=ct,s0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Za(t)):s0(ct,a.stateNode));break;case 4:l=ct,f=cn,ct=a.stateNode.containerInfo,cn=!0,Ji(t,i,a),ct=l,cn=f;break;case 0:case 11:case 14:case 15:kr(2,a,i),Dt||kr(4,a,i),Ji(t,i,a);break;case 1:Dt||(Ii(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&a_(a,i,l)),Ji(t,i,a);break;case 21:Ji(t,i,a);break;case 22:Dt=(l=Dt)||a.memoizedState!==null,Ji(t,i,a),Dt=l;break;default:Ji(t,i,a)}}function m_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Za(t)}catch(a){Je(i,i.return,a)}}}function p_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Za(t)}catch(a){Je(i,i.return,a)}}function a1(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new c_),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new c_),i;default:throw Error(s(435,t.tag))}}function bc(t,i){var a=a1(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=p1.bind(null,t,l);l.then(f,f)}})}function hn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=t,_=i,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(qr(b.type)){ct=b.stateNode,cn=!1;break e}break;case 5:ct=b.stateNode,cn=!1;break e;case 3:case 4:ct=b.stateNode.containerInfo,cn=!0;break e}b=b.return}if(ct===null)throw Error(s(160));d_(d,_,f),ct=null,cn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)g_(i,t),i=i.sibling}var ti=null;function g_(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:hn(i,t),fn(t),l&4&&(kr(3,t,t.return),yl(3,t),kr(5,t,t.return));break;case 1:hn(i,t),fn(t),l&512&&(Dt||a===null||Ii(a,a.return)),l&64&&Wi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ti;if(hn(i,t),fn(t),l&512&&(Dt||a===null||Ii(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[pi]||d[At]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),$t(d,l,a),d[At]=t,xt(d),l=d;break e;case"link":var _=g0("link","href",f).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}d=f.createElement(l),$t(d,l,a),f.head.appendChild(d);break;case"meta":if(_=g0("meta","content",f).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}d=f.createElement(l),$t(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[At]=t,xt(d),l=d}t.stateNode=l}else y0(f,t.type,t.stateNode);else t.stateNode=p0(f,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?y0(f,t.type,t.stateNode):p0(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&wd(t,t.memoizedProps,a.memoizedProps)}break;case 27:hn(i,t),fn(t),l&512&&(Dt||a===null||Ii(a,a.return)),a!==null&&l&4&&wd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(hn(i,t),fn(t),l&512&&(Dt||a===null||Ii(a,a.return)),t.flags&32){f=t.stateNode;try{un(f,"")}catch(he){Je(t,t.return,he)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,wd(t,f,a!==null?a.memoizedProps:f)),l&1024&&(Rd=!0);break;case 6:if(hn(i,t),fn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(he){Je(t,t.return,he)}}break;case 3:if(Uc=null,f=ti,ti=Pc(i.containerInfo),hn(i,t),ti=f,fn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Za(i.containerInfo)}catch(he){Je(t,t.return,he)}Rd&&(Rd=!1,y_(t));break;case 4:l=ti,ti=Pc(t.stateNode.containerInfo),hn(i,t),fn(t),ti=l;break;case 12:hn(i,t),fn(t);break;case 31:hn(i,t),fn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,bc(t,l)));break;case 13:hn(i,t),fn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ac=sn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,bc(t,l)));break;case 22:f=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,F=Wi,W=Dt;if(Wi=F||f,Dt=W||N,hn(i,t),Dt=W,Wi=F,fn(t),l&8192)e:for(i=t.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||N||Wi||Dt||Qs(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(d=N.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=N.stateNode;var te=N.memoizedProps.style,Q=te!=null&&te.hasOwnProperty("display")?te.display:null;b.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(he){Je(N,N.return,he)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=f?"":N.memoizedProps}catch(he){Je(N,N.return,he)}}}else if(i.tag===18){if(a===null){N=i;try{var Y=N.stateNode;f?a0(Y,!0):a0(N.stateNode,!1)}catch(he){Je(N,N.return,he)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,bc(t,a))));break;case 19:hn(i,t),fn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,bc(t,l)));break;case 30:break;case 21:break;default:hn(i,t),fn(t)}}function fn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(l_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=Ad(t);Sc(t,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(un(_,""),a.flags&=-33);var b=Ad(t);Sc(t,b,_);break;case 3:case 4:var N=a.stateNode.containerInfo,F=Ad(t);xd(t,F,N);break;default:throw Error(s(161))}}catch(W){Je(t,t.return,W)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function y_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;y_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Zi(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)h_(t,i.alternate,i),i=i.sibling}function Qs(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:kr(4,i,i.return),Qs(i);break;case 1:Ii(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&a_(i,i.return,a),Qs(i);break;case 27:Rl(i.stateNode);case 26:case 5:Ii(i,i.return),Qs(i);break;case 22:i.memoizedState===null&&Qs(i);break;case 30:Qs(i);break;default:Qs(i)}t=t.sibling}}function er(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=t,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:er(f,d,a),yl(4,d);break;case 1:if(er(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){Je(l,l.return,F)}if(l=d,f=l.updateQueue,f!==null){var b=l.stateNode;try{var N=f.shared.hiddenCallbacks;if(N!==null)for(f.shared.hiddenCallbacks=null,f=0;f<N.length;f++)Yg(N[f],b)}catch(F){Je(l,l.return,F)}}a&&_&64&&s_(d),_l(d,d.return);break;case 27:u_(d);case 26:case 5:er(f,d,a),a&&l===null&&_&4&&o_(d),_l(d,d.return);break;case 12:er(f,d,a);break;case 31:er(f,d,a),a&&_&4&&m_(f,d);break;case 13:er(f,d,a),a&&_&4&&p_(f,d);break;case 22:d.memoizedState===null&&er(f,d,a),_l(d,d.return);break;case 30:break;default:er(f,d,a)}i=i.sibling}}function Cd(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&rl(a))}function Id(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&rl(t))}function ni(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)__(t,i,a,l),i=i.sibling}function __(t,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ni(t,i,a,l),f&2048&&yl(9,i);break;case 1:ni(t,i,a,l);break;case 3:ni(t,i,a,l),f&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&rl(t)));break;case 12:if(f&2048){ni(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){Je(i,i.return,N)}}else ni(t,i,a,l);break;case 31:ni(t,i,a,l);break;case 13:ni(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?ni(t,i,a,l):vl(t,i):d._visibility&2?ni(t,i,a,l):(d._visibility|=2,qa(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Cd(_,i);break;case 24:ni(t,i,a,l),f&2048&&Id(i.alternate,i);break;default:ni(t,i,a,l)}}function qa(t,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,_=i,b=a,N=l,F=_.flags;switch(_.tag){case 0:case 11:case 15:qa(d,_,b,N,f),yl(8,_);break;case 23:break;case 22:var W=_.stateNode;_.memoizedState!==null?W._visibility&2?qa(d,_,b,N,f):vl(d,_):(W._visibility|=2,qa(d,_,b,N,f)),f&&F&2048&&Cd(_.alternate,_);break;case 24:qa(d,_,b,N,f),f&&F&2048&&Id(_.alternate,_);break;default:qa(d,_,b,N,f)}i=i.sibling}}function vl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,f=l.flags;switch(l.tag){case 22:vl(a,l),f&2048&&Cd(l.alternate,l);break;case 24:vl(a,l),f&2048&&Id(l.alternate,l);break;default:vl(a,l)}i=i.sibling}}var El=8192;function Ha(t,i,a){if(t.subtreeFlags&El)for(t=t.child;t!==null;)v_(t,i,a),t=t.sibling}function v_(t,i,a){switch(t.tag){case 26:Ha(t,i,a),t.flags&El&&t.memoizedState!==null&&Q1(a,ti,t.memoizedState,t.memoizedProps);break;case 5:Ha(t,i,a);break;case 3:case 4:var l=ti;ti=Pc(t.stateNode.containerInfo),Ha(t,i,a),ti=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=El,El=16777216,Ha(t,i,a),El=l):Ha(t,i,a));break;default:Ha(t,i,a)}}function E_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Tl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Bt=l,S_(l,t)}E_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)T_(t),t=t.sibling}function T_(t){switch(t.tag){case 0:case 11:case 15:Tl(t),t.flags&2048&&kr(9,t,t.return);break;case 3:Tl(t);break;case 12:Tl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,wc(t)):Tl(t);break;default:Tl(t)}}function wc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Bt=l,S_(l,t)}E_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:kr(8,i,i.return),wc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,wc(i));break;default:wc(i)}t=t.sibling}}function S_(t,i){for(;Bt!==null;){var a=Bt;switch(a.tag){case 0:case 11:case 15:kr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:rl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Bt=l;else e:for(a=t;Bt!==null;){l=Bt;var f=l.sibling,d=l.return;if(f_(l),l===a){Bt=null;break e}if(f!==null){f.return=d,Bt=f;break e}Bt=d}}}var o1={getCacheForType:function(t){var i=Kt(Ct),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Kt(Ct).controller.signal}},l1=typeof WeakMap=="function"?WeakMap:Map,Ge=0,rt=null,Ie=null,Oe=0,We=0,An=null,Lr=!1,Fa=!1,Nd=!1,tr=0,pt=0,Pr=0,Ks=0,Dd=0,xn=0,Ga=0,Sl=null,dn=null,Od=!1,Ac=0,b_=0,xc=1/0,Rc=null,jr=null,Pt=0,Ur=null,Qa=null,nr=0,Md=0,Vd=null,w_=null,bl=0,kd=null;function Rn(){return(Ge&2)!==0&&Oe!==0?Oe&-Oe:J.T!==null?Bd():Cu()}function A_(){if(xn===0)if((Oe&536870912)===0||Pe){var t=Es;Es<<=1,(Es&3932160)===0&&(Es=262144),xn=t}else xn=536870912;return t=bn.current,t!==null&&(t.flags|=32),xn}function mn(t,i,a){(t===rt&&(We===2||We===9)||t.cancelPendingCommit!==null)&&(Ka(t,0),zr(t,Oe,xn,!1)),Ts(t,a),((Ge&2)===0||t!==rt)&&(t===rt&&((Ge&2)===0&&(Ks|=a),pt===4&&zr(t,Oe,xn,!1)),Ni(t))}function x_(t,i,a){if((Ge&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||Qn(t,i),f=l?h1(t,i):Pd(t,i,!0),d=l;do{if(f===0){Fa&&!l&&zr(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!u1(a)){f=Pd(t,i,!1),d=!1;continue}if(f===2){if(d=i,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var b=t;f=Sl;var N=b.current.memoizedState.isDehydrated;if(N&&(Ka(b,_).flags|=256),_=Pd(b,_,!1),_!==2){if(Nd&&!N){b.errorRecoveryDisabledLanes|=d,Ks|=d,f=4;break e}d=dn,dn=f,d!==null&&(dn===null?dn=d:dn.push.apply(dn,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){Ka(t,0),zr(t,i,0,!0);break}e:{switch(l=t,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:zr(l,i,xn,!Lr);break e;case 2:dn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Ac+300-sn(),10<f)){if(zr(l,i,xn,!Lr),fi(l,0,!0)!==0)break e;nr=i,l.timeoutHandle=i0(R_.bind(null,l,a,dn,Rc,Od,i,xn,Ks,Ga,Lr,d,"Throttled",-0,0),f);break e}R_(l,a,dn,Rc,Od,i,xn,Ks,Ga,Lr,d,null,-0,0)}}break}while(!0);Ni(t)}function R_(t,i,a,l,f,d,_,b,N,F,W,te,Q,Y){if(t.timeoutHandle=-1,te=i.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$n},v_(i,d,te);var he=(d&62914560)===d?Ac-sn():(d&4194048)===d?b_-sn():0;if(he=K1(te,he),he!==null){nr=d,t.cancelPendingCommit=he(k_.bind(null,t,i,d,a,l,f,_,b,N,W,te,null,Q,Y)),zr(t,d,_,!F);return}}k_(t,i,d,a,l,f,_,b,N)}function u1(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Tn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function zr(t,i,a,l){i&=~Dd,i&=~Ks,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var f=i;0<f;){var d=31-gt(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&Ss(t,a,i)}function Cc(){return(Ge&6)===0?(wl(0),!1):!0}function Ld(){if(Ie!==null){if(We===0)var t=Ie.return;else t=Ie,Gi=js=null,Jf(t),Pa=null,al=0,t=Ie;for(;t!==null;)r_(t.alternate,t),t=t.return;Ie=null}}function Ka(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,I1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),nr=0,Ld(),rt=t,Ie=a=Hi(t.current,null),Oe=i,We=0,An=null,Lr=!1,Fa=Qn(t,i),Nd=!1,Ga=xn=Dd=Ks=Pr=pt=0,dn=Sl=null,Od=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var f=31-gt(l),d=1<<f;i|=t[f],l&=~d}return tr=i,$u(),a}function C_(t,i){xe=null,J.H=ml,i===La||i===ic?(i=Fg(),We=3):i===zf?(i=Fg(),We=4):We=i===md?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,An=i,Ie===null&&(pt=1,yc(t,Ln(i,t.current)))}function I_(){var t=bn.current;return t===null?!0:(Oe&4194048)===Oe?zn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?t===zn:!1}function N_(){var t=J.H;return J.H=ml,t===null?ml:t}function D_(){var t=J.A;return J.A=o1,t}function Ic(){pt=4,Lr||(Oe&4194048)!==Oe&&bn.current!==null||(Fa=!0),(Pr&134217727)===0&&(Ks&134217727)===0||rt===null||zr(rt,Oe,xn,!1)}function Pd(t,i,a){var l=Ge;Ge|=2;var f=N_(),d=D_();(rt!==t||Oe!==i)&&(Rc=null,Ka(t,i)),i=!1;var _=pt;e:do try{if(We!==0&&Ie!==null){var b=Ie,N=An;switch(We){case 8:Ld(),_=6;break e;case 3:case 2:case 9:case 6:bn.current===null&&(i=!0);var F=We;if(We=0,An=null,Ya(t,b,N,F),a&&Fa){_=0;break e}break;default:F=We,We=0,An=null,Ya(t,b,N,F)}}c1(),_=pt;break}catch(W){C_(t,W)}while(!0);return i&&t.shellSuspendCounter++,Gi=js=null,Ge=l,J.H=f,J.A=d,Ie===null&&(rt=null,Oe=0,$u()),_}function c1(){for(;Ie!==null;)O_(Ie)}function h1(t,i){var a=Ge;Ge|=2;var l=N_(),f=D_();rt!==t||Oe!==i?(Rc=null,xc=sn()+500,Ka(t,i)):Fa=Qn(t,i);e:do try{if(We!==0&&Ie!==null){i=Ie;var d=An;t:switch(We){case 1:We=0,An=null,Ya(t,i,d,1);break;case 2:case 9:if(qg(d)){We=0,An=null,M_(i);break}i=function(){We!==2&&We!==9||rt!==t||(We=7),Ni(t)},d.then(i,i);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:qg(d)?(We=0,An=null,M_(i)):(We=0,An=null,Ya(t,i,d,7));break;case 5:var _=null;switch(Ie.tag){case 26:_=Ie.memoizedState;case 5:case 27:var b=Ie;if(_?_0(_):b.stateNode.complete){We=0,An=null;var N=b.sibling;if(N!==null)Ie=N;else{var F=b.return;F!==null?(Ie=F,Nc(F)):Ie=null}break t}}We=0,An=null,Ya(t,i,d,5);break;case 6:We=0,An=null,Ya(t,i,d,6);break;case 8:Ld(),pt=6;break e;default:throw Error(s(462))}}f1();break}catch(W){C_(t,W)}while(!0);return Gi=js=null,J.H=l,J.A=f,Ge=a,Ie!==null?0:(rt=null,Oe=0,$u(),pt)}function f1(){for(;Ie!==null&&!df();)O_(Ie)}function O_(t){var i=n_(t.alternate,t,tr);t.memoizedProps=t.pendingProps,i===null?Nc(t):Ie=i}function M_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Xy(a,i,i.pendingProps,i.type,void 0,Oe);break;case 11:i=Xy(a,i,i.pendingProps,i.type.render,i.ref,Oe);break;case 5:Jf(i);default:r_(a,i),i=Ie=Dg(i,tr),i=n_(a,i,tr)}t.memoizedProps=t.pendingProps,i===null?Nc(t):Ie=i}function Ya(t,i,a,l){Gi=js=null,Jf(i),Pa=null,al=0;var f=i.return;try{if(e1(t,f,i,a,Oe)){pt=1,yc(t,Ln(a,t.current)),Ie=null;return}}catch(d){if(f!==null)throw Ie=f,d;pt=1,yc(t,Ln(a,t.current)),Ie=null;return}i.flags&32768?(Pe||l===1?t=!0:Fa||(Oe&536870912)!==0?t=!1:(Lr=t=!0,(l===2||l===9||l===3||l===6)&&(l=bn.current,l!==null&&l.tag===13&&(l.flags|=16384))),V_(i,t)):Nc(i)}function Nc(t){var i=t;do{if((i.flags&32768)!==0){V_(i,Lr);return}t=i.return;var a=i1(i.alternate,i,tr);if(a!==null){Ie=a;return}if(i=i.sibling,i!==null){Ie=i;return}Ie=i=t}while(i!==null);pt===0&&(pt=5)}function V_(t,i){do{var a=r1(t.alternate,t);if(a!==null){a.flags&=32767,Ie=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ie=t;return}Ie=t=a}while(t!==null);pt=6,Ie=null}function k_(t,i,a,l,f,d,_,b,N){t.cancelPendingCommit=null;do Dc();while(Pt!==0);if((Ge&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Af,gf(t,a,d,_,b,N),t===rt&&(Ie=rt=null,Oe=0),Qa=i,Ur=t,nr=a,Md=d,Vd=f,w_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,g1(gr,function(){return z_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=J.T,J.T=null,f=ae.p,ae.p=2,_=Ge,Ge|=4;try{s1(t,i,a)}finally{Ge=_,ae.p=f,J.T=l}}Pt=1,L_(),P_(),j_()}}function L_(){if(Pt===1){Pt=0;var t=Ur,i=Qa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=J.T,J.T=null;var l=ae.p;ae.p=2;var f=Ge;Ge|=4;try{g_(i,t);var d=$d,_=Sg(t.containerInfo),b=d.focusedElem,N=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&Tg(b.ownerDocument.documentElement,b)){if(N!==null&&Ef(b)){var F=N.start,W=N.end;if(W===void 0&&(W=F),"selectionStart"in b)b.selectionStart=F,b.selectionEnd=Math.min(W,b.value.length);else{var te=b.ownerDocument||document,Q=te&&te.defaultView||window;if(Q.getSelection){var Y=Q.getSelection(),he=b.textContent.length,_e=Math.min(N.start,he),it=N.end===void 0?_e:Math.min(N.end,he);!Y.extend&&_e>it&&(_=it,it=_e,_e=_);var B=Eg(b,_e),L=Eg(b,it);if(B&&L&&(Y.rangeCount!==1||Y.anchorNode!==B.node||Y.anchorOffset!==B.offset||Y.focusNode!==L.node||Y.focusOffset!==L.offset)){var H=te.createRange();H.setStart(B.node,B.offset),Y.removeAllRanges(),_e>it?(Y.addRange(H),Y.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),Y.addRange(H))}}}}for(te=[],Y=b;Y=Y.parentNode;)Y.nodeType===1&&te.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<te.length;b++){var Z=te[b];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Hc=!!Yd,$d=Yd=null}finally{Ge=f,ae.p=l,J.T=a}}t.current=i,Pt=2}}function P_(){if(Pt===2){Pt=0;var t=Ur,i=Qa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=J.T,J.T=null;var l=ae.p;ae.p=2;var f=Ge;Ge|=4;try{h_(t,i.alternate,i)}finally{Ge=f,ae.p=l,J.T=a}}Pt=3}}function j_(){if(Pt===4||Pt===3){Pt=0,Tu();var t=Ur,i=Qa,a=nr,l=w_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Pt=5:(Pt=0,Qa=Ur=null,U_(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(jr=null),Ui(a),i=i.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Gn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=J.T,f=ae.p,ae.p=2,J.T=null;try{for(var d=t.onRecoverableError,_=0;_<l.length;_++){var b=l[_];d(b.value,{componentStack:b.stack})}}finally{J.T=i,ae.p=f}}(nr&3)!==0&&Dc(),Ni(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===kd?bl++:(bl=0,kd=t):bl=0,wl(0)}}function U_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,rl(i)))}function Dc(){return L_(),P_(),j_(),z_()}function z_(){if(Pt!==5)return!1;var t=Ur,i=Md;Md=0;var a=Ui(nr),l=J.T,f=ae.p;try{ae.p=32>a?32:a,J.T=null,a=Vd,Vd=null;var d=Ur,_=nr;if(Pt=0,Qa=Ur=null,nr=0,(Ge&6)!==0)throw Error(s(331));var b=Ge;if(Ge|=4,T_(d.current),__(d,d.current,_,a),Ge=b,wl(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Gn,d)}catch{}return!0}finally{ae.p=f,J.T=l,U_(t,i)}}function B_(t,i,a){i=Ln(a,i),i=dd(t.stateNode,i,2),t=Or(t,i,2),t!==null&&(Ts(t,2),Ni(t))}function Je(t,i,a){if(t.tag===3)B_(t,t,a);else for(;i!==null;){if(i.tag===3){B_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(jr===null||!jr.has(l))){t=Ln(a,t),a=qy(2),l=Or(i,a,2),l!==null&&(Hy(a,l,i,t),Ts(l,2),Ni(l));break}}i=i.return}}function jd(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new l1;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Nd=!0,f.add(a),t=d1.bind(null,t,i,a),i.then(t,t))}function d1(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,rt===t&&(Oe&a)===a&&(pt===4||pt===3&&(Oe&62914560)===Oe&&300>sn()-Ac?(Ge&2)===0&&Ka(t,0):Dd|=a,Ga===Oe&&(Ga=0)),Ni(t)}function q_(t,i){i===0&&(i=Ru()),t=ks(t,i),t!==null&&(Ts(t,i),Ni(t))}function m1(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),q_(t,a)}function p1(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),q_(t,a)}function g1(t,i){return Lt(t,i)}var Oc=null,$a=null,Ud=!1,Mc=!1,zd=!1,Br=0;function Ni(t){t!==$a&&t.next===null&&($a===null?Oc=$a=t:$a=$a.next=t),Mc=!0,Ud||(Ud=!0,_1())}function wl(t,i){if(!zd&&Mc){zd=!0;do for(var a=!1,l=Oc;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-gt(42|t)+1)-1,d&=f&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Q_(l,d))}else d=Oe,d=fi(l,l===rt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Qn(l,d)||(a=!0,Q_(l,d));l=l.next}while(a);zd=!1}}function y1(){H_()}function H_(){Mc=Ud=!1;var t=0;Br!==0&&C1()&&(t=Br);for(var i=sn(),a=null,l=Oc;l!==null;){var f=l.next,d=F_(l,i);d===0?(l.next=null,a===null?Oc=f:a.next=f,f===null&&($a=a)):(a=l,(t!==0||(d&3)!==0)&&(Mc=!0)),l=f}Pt!==0&&Pt!==5||wl(t),Br!==0&&(Br=0)}function F_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-gt(d),b=1<<_,N=f[_];N===-1?((b&a)===0||(b&l)!==0)&&(f[_]=pf(b,i)):N<=i&&(t.expiredLanes|=b),d&=~b}if(i=rt,a=Oe,a=fi(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(We===2||We===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&pr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Qn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&pr(l),Ui(a)){case 2:case 8:a=Vo;break;case 32:a=gr;break;case 268435456:a=Su;break;default:a=gr}return l=G_.bind(null,t),a=Lt(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&pr(l),t.callbackPriority=2,t.callbackNode=null,2}function G_(t,i){if(Pt!==0&&Pt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Dc()&&t.callbackNode!==a)return null;var l=Oe;return l=fi(t,t===rt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(x_(t,l,i),F_(t,sn()),t.callbackNode!=null&&t.callbackNode===a?G_.bind(null,t):null)}function Q_(t,i){if(Dc())return null;x_(t,i,!0)}function _1(){N1(function(){(Ge&6)!==0?Lt(Mo,y1):H_()})}function Bd(){if(Br===0){var t=Va;t===0&&(t=ci,ci<<=1,(ci&261888)===0&&(ci=256)),Br=t}return Br}function K_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:va(""+t)}function Y_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function v1(t,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=K_((f[Ut]||null).action),_=l.submitter;_&&(i=(i=_[Ut]||null)?K_(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new bi("action","action",null,l,f);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Br!==0){var N=_?Y_(f,_):new FormData(f);od(a,{pending:!0,data:N,method:f.method,action:d},null,N)}}else typeof d=="function"&&(b.preventDefault(),N=_?Y_(f,_):new FormData(f),od(a,{pending:!0,data:N,method:f.method,action:d},d,N))},currentTarget:f}]})}}for(var qd=0;qd<wf.length;qd++){var Hd=wf[qd],E1=Hd.toLowerCase(),T1=Hd[0].toUpperCase()+Hd.slice(1);ei(E1,"on"+T1)}ei(Ag,"onAnimationEnd"),ei(xg,"onAnimationIteration"),ei(Rg,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(Pb,"onTransitionRun"),ei(jb,"onTransitionStart"),ei(Ub,"onTransitionCancel"),ei(Cg,"onTransitionEnd"),vi("onMouseEnter",["mouseout","mouseover"]),vi("onMouseLeave",["mouseout","mouseover"]),vi("onPointerEnter",["pointerout","pointerover"]),vi("onPointerLeave",["pointerout","pointerover"]),_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_i("onBeforeInput",["compositionend","keypress","textInput","paste"]),_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Al));function $_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var b=l[_],N=b.instance,F=b.currentTarget;if(b=b.listener,N!==d&&f.isPropagationStopped())break e;d=b,f.currentTarget=F;try{d(f)}catch(W){Yu(W)}f.currentTarget=null,d=N}else for(_=0;_<l.length;_++){if(b=l[_],N=b.instance,F=b.currentTarget,b=b.listener,N!==d&&f.isPropagationStopped())break e;d=b,f.currentTarget=F;try{d(f)}catch(W){Yu(W)}f.currentTarget=null,d=N}}}}function Ne(t,i){var a=i[ma];a===void 0&&(a=i[ma]=new Set);var l=t+"__bubble";a.has(l)||(X_(i,t,2,!1),a.add(l))}function Fd(t,i,a){var l=0;i&&(l|=4),X_(a,t,l,i)}var Vc="_reactListening"+Math.random().toString(36).slice(2);function Gd(t){if(!t[Vc]){t[Vc]=!0,Po.forEach(function(a){a!=="selectionchange"&&(S1.has(a)||Fd(a,!1,t),Fd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Vc]||(i[Vc]=!0,Fd("selectionchange",!1,i))}}function X_(t,i,a,l){switch(A0(i)){case 2:var f=X1;break;case 8:f=W1;break;default:f=am}a=f.bind(null,i,a,t),f=void 0,!Rs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(i,a,{capture:!0,passive:f}):t.addEventListener(i,a,!0):f!==void 0?t.addEventListener(i,a,{passive:f}):t.addEventListener(i,a,!1)}function Qd(t,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===f)break;if(_===4)for(_=l.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;b!==null;){if(_=gi(b),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){l=d=_;continue e}b=b.parentNode}}l=l.return}Sr(function(){var F=d,W=On(a),te=[];e:{var Q=Ig.get(t);if(Q!==void 0){var Y=bi,he=t;switch(t){case"keypress":if(Is(a)===0)break e;case"keydown":case"keyup":Y=Gu;break;case"focusin":he="focus",Y=Ds;break;case"focusout":he="blur",Y=Ds;break;case"beforeblur":case"afterblur":Y=Ds;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Xo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=y;break;case Ag:case xg:case Rg:Y=ju;break;case Cg:Y=A;break;case"scroll":case"scrollend":Y=$o;break;case"wheel":Y=K;break;case"copy":case"cut":case"paste":Y=Uu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=qi;break;case"toggle":case"beforetoggle":Y=Ae}var _e=(i&4)!==0,it=!_e&&(t==="scroll"||t==="scrollend"),B=_e?Q!==null?Q+"Capture":null:Q;_e=[];for(var L=F,H;L!==null;){var Z=L;if(H=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||H===null||B===null||(Z=Xn(L,B),Z!=null&&_e.push(xl(L,Z,H))),it)break;L=L.return}0<_e.length&&(Q=new Y(Q,he,null,a,W),te.push({event:Q,listeners:_e}))}}if((i&7)===0){e:{if(Q=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",Q&&a!==Qo&&(he=a.relatedTarget||a.fromElement)&&(gi(he)||he[mi]))break e;if((Y||Q)&&(Q=W.window===W?W:(Q=W.ownerDocument)?Q.defaultView||Q.parentWindow:window,Y?(he=a.relatedTarget||a.toElement,Y=F,he=he?gi(he):null,he!==null&&(it=u(he),_e=he.tag,he!==it||_e!==5&&_e!==27&&_e!==6)&&(he=null)):(Y=null,he=F),Y!==he)){if(_e=Xo,Z="onMouseLeave",B="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(_e=qi,Z="onPointerLeave",B="onPointerEnter",L="pointer"),it=Y==null?Q:vn(Y),H=he==null?Q:vn(he),Q=new _e(Z,L+"leave",Y,a,W),Q.target=it,Q.relatedTarget=H,Z=null,gi(W)===F&&(_e=new _e(B,L+"enter",he,a,W),_e.target=H,_e.relatedTarget=it,Z=_e),it=Z,Y&&he)t:{for(_e=b1,B=Y,L=he,H=0,Z=B;Z;Z=_e(Z))H++;Z=0;for(var de=L;de;de=_e(de))Z++;for(;0<H-Z;)B=_e(B),H--;for(;0<Z-H;)L=_e(L),Z--;for(;H--;){if(B===L||L!==null&&B===L.alternate){_e=B;break t}B=_e(B),L=_e(L)}_e=null}else _e=null;Y!==null&&W_(te,Q,Y,_e,!1),he!==null&&it!==null&&W_(te,it,he,_e,!0)}}e:{if(Q=F?vn(F):window,Y=Q.nodeName&&Q.nodeName.toLowerCase(),Y==="select"||Y==="input"&&Q.type==="file")var qe=mg;else if(fg(Q))if(pg)qe=Vb;else{qe=Ob;var fe=Db}else Y=Q.nodeName,!Y||Y.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?F&&_a(F.elementType)&&(qe=mg):qe=Mb;if(qe&&(qe=qe(t,F))){dg(te,qe,a,W);break e}fe&&fe(t,Q,F),t==="focusout"&&F&&Q.type==="number"&&F.memoizedProps.value!=null&&Ho(Q,"number",Q.value)}switch(fe=F?vn(F):window,t){case"focusin":(fg(fe)||fe.contentEditable==="true")&&(xa=fe,Tf=F,tl=null);break;case"focusout":tl=Tf=xa=null;break;case"mousedown":Sf=!0;break;case"contextmenu":case"mouseup":case"dragend":Sf=!1,bg(te,a,W);break;case"selectionchange":if(Lb)break;case"keydown":case"keyup":bg(te,a,W)}var Ce;if(Fe)e:{switch(t){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Aa?Os(t,a)&&(Me="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Me="onCompositionStart");Me&&(xi&&a.locale!=="ko"&&(Aa||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Aa&&(Ce=Yo()):(Si=W,Ko="value"in Si?Si.value:Si.textContent,Aa=!0)),fe=kc(F,Me),0<fe.length&&(Me=new Ai(Me,t,null,a,W),te.push({event:Me,listeners:fe}),Ce?Me.data=Ce:(Ce=wa(a),Ce!==null&&(Me.data=Ce)))),(Ce=Vn?Rb(t,a):Cb(t,a))&&(Me=kc(F,"onBeforeInput"),0<Me.length&&(fe=new Ai("onBeforeInput","beforeinput",null,a,W),te.push({event:fe,listeners:Me}),fe.data=Ce)),v1(te,t,F,a,W)}$_(te,i)})}function xl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function kc(t,i){for(var a=i+"Capture",l=[];t!==null;){var f=t,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Xn(t,a),f!=null&&l.unshift(xl(t,f,d)),f=Xn(t,i),f!=null&&l.push(xl(t,f,d))),t.tag===3)return l;t=t.return}return[]}function b1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function W_(t,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var b=a,N=b.alternate,F=b.stateNode;if(b=b.tag,N!==null&&N===l)break;b!==5&&b!==26&&b!==27||F===null||(N=F,f?(F=Xn(a,d),F!=null&&_.unshift(xl(a,F,N))):f||(F=Xn(a,d),F!=null&&_.push(xl(a,F,N)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var w1=/\r\n?/g,A1=/\u0000|\uFFFD/g;function J_(t){return(typeof t=="string"?t:""+t).replace(w1,`
`).replace(A1,"")}function Z_(t,i){return i=J_(i),J_(t)===i}function nt(t,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||un(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&un(t,""+l);break;case"className":En(t,"class",l);break;case"tabIndex":En(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":En(t,a,l);break;case"style":Go(t,l,d);break;case"data":if(i!=="object"){En(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=va(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&nt(t,i,"name",f.name,f,null),nt(t,i,"formEncType",f.formEncType,f,null),nt(t,i,"formMethod",f.formMethod,f,null),nt(t,i,"formTarget",f.formTarget,f,null)):(nt(t,i,"encType",f.encType,f,null),nt(t,i,"method",f.method,f,null),nt(t,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=va(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=$n);break;case"onScroll":l!=null&&Ne("scroll",t);break;case"onScrollEnd":l!=null&&Ne("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=va(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ne("beforetoggle",t),Ne("toggle",t),ga(t,"popover",l);break;case"xlinkActuate":Rt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Rt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Rt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Rt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Rt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Rt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Rt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Rt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Rt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ga(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ku.get(a)||a,ga(t,a,l))}}function Kd(t,i,a,l,f,d){switch(a){case"style":Go(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?un(t,l):(typeof l=="number"||typeof l=="bigint")&&un(t,""+l);break;case"onScroll":l!=null&&Ne("scroll",t);break;case"onScrollEnd":l!=null&&Ne("scrollend",t);break;case"onClick":l!=null&&(t.onclick=$n);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=t[Ut]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ga(t,a,l)}}}function $t(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",t),Ne("load",t);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(t,i,d,_,a,null)}}f&&nt(t,i,"srcSet",a.srcSet,a,null),l&&nt(t,i,"src",a.src,a,null);return;case"input":Ne("invalid",t);var b=d=_=f=null,N=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":f=W;break;case"type":_=W;break;case"checked":N=W;break;case"defaultChecked":F=W;break;case"value":d=W;break;case"defaultValue":b=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,i));break;default:nt(t,i,l,W,a,null)}}Ou(t,d,b,N,F,_,f,!1);return;case"select":Ne("invalid",t),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(b=a[f],b!=null))switch(f){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:nt(t,i,f,b,a,null)}i=d,a=_,t.multiple=!!l,i!=null?_r(t,!!l,i,!1):a!=null&&_r(t,!!l,a,!0);return;case"textarea":Ne("invalid",t),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":f=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:nt(t,i,_,b,a,null)}vr(t,l,f,d);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:nt(t,i,N,l,a,null)}return;case"dialog":Ne("beforetoggle",t),Ne("toggle",t),Ne("cancel",t),Ne("close",t);break;case"iframe":case"object":Ne("load",t);break;case"video":case"audio":for(l=0;l<Al.length;l++)Ne(Al[l],t);break;case"image":Ne("error",t),Ne("load",t);break;case"details":Ne("toggle",t);break;case"embed":case"source":case"link":Ne("error",t),Ne("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(t,i,F,l,a,null)}return;default:if(_a(i)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&Kd(t,i,W,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&nt(t,i,b,l,a,null))}function x1(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,b=null,N=null,F=null,W=null;for(Y in a){var te=a[Y];if(a.hasOwnProperty(Y)&&te!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":N=te;default:l.hasOwnProperty(Y)||nt(t,i,Y,null,l,te)}}for(var Q in l){var Y=l[Q];if(te=a[Q],l.hasOwnProperty(Q)&&(Y!=null||te!=null))switch(Q){case"type":d=Y;break;case"name":f=Y;break;case"checked":F=Y;break;case"defaultChecked":W=Y;break;case"value":_=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Y!==te&&nt(t,i,Q,Y,l,te)}}ya(t,_,b,N,F,W,d,f);return;case"select":Y=_=b=Q=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":Y=N;default:l.hasOwnProperty(d)||nt(t,i,d,null,l,N)}for(f in l)if(d=l[f],N=a[f],l.hasOwnProperty(f)&&(d!=null||N!=null))switch(f){case"value":Q=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==N&&nt(t,i,f,d,l,N)}i=b,a=_,l=Y,Q!=null?_r(t,!!a,Q,!1):!!l!=!!a&&(i!=null?_r(t,!!a,i,!0):_r(t,!!a,a?[]:"",!1));return;case"textarea":Y=Q=null;for(b in a)if(f=a[b],a.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:nt(t,i,b,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":Q=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&nt(t,i,_,f,l,d)}Mu(t,Q,Y);return;case"option":for(var he in a)if(Q=a[he],a.hasOwnProperty(he)&&Q!=null&&!l.hasOwnProperty(he))switch(he){case"selected":t.selected=!1;break;default:nt(t,i,he,null,l,Q)}for(N in l)if(Q=l[N],Y=a[N],l.hasOwnProperty(N)&&Q!==Y&&(Q!=null||Y!=null))switch(N){case"selected":t.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:nt(t,i,N,Q,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)Q=a[_e],a.hasOwnProperty(_e)&&Q!=null&&!l.hasOwnProperty(_e)&&nt(t,i,_e,null,l,Q);for(F in l)if(Q=l[F],Y=a[F],l.hasOwnProperty(F)&&Q!==Y&&(Q!=null||Y!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:nt(t,i,F,Q,l,Y)}return;default:if(_a(i)){for(var it in a)Q=a[it],a.hasOwnProperty(it)&&Q!==void 0&&!l.hasOwnProperty(it)&&Kd(t,i,it,void 0,l,Q);for(W in l)Q=l[W],Y=a[W],!l.hasOwnProperty(W)||Q===Y||Q===void 0&&Y===void 0||Kd(t,i,W,Q,l,Y);return}}for(var B in a)Q=a[B],a.hasOwnProperty(B)&&Q!=null&&!l.hasOwnProperty(B)&&nt(t,i,B,null,l,Q);for(te in l)Q=l[te],Y=a[te],!l.hasOwnProperty(te)||Q===Y||Q==null&&Y==null||nt(t,i,te,Q,l,Y)}function e0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function R1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,b=f.duration;if(d&&b&&e0(_)){for(_=0,b=f.responseEnd,l+=1;l<a.length;l++){var N=a[l],F=N.startTime;if(F>b)break;var W=N.transferSize,te=N.initiatorType;W&&e0(te)&&(N=N.responseEnd,_+=W*(N<b?1:(b-F)/(N-F)))}if(--l,i+=8*(d+_)/(f.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Yd=null,$d=null;function Lc(t){return t.nodeType===9?t:t.ownerDocument}function t0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function n0(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Xd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Wd=null;function C1(){var t=window.event;return t&&t.type==="popstate"?t===Wd?!1:(Wd=t,!0):(Wd=null,!1)}var i0=typeof setTimeout=="function"?setTimeout:void 0,I1=typeof clearTimeout=="function"?clearTimeout:void 0,r0=typeof Promise=="function"?Promise:void 0,N1=typeof queueMicrotask=="function"?queueMicrotask:typeof r0<"u"?function(t){return r0.resolve(null).then(t).catch(D1)}:i0;function D1(t){setTimeout(function(){throw t})}function qr(t){return t==="head"}function s0(t,i){var a=i,l=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(f),Za(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Rl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Rl(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[pi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&Rl(t.ownerDocument.body);a=f}while(a);Za(i)}function a0(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Jd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Jd(a),pa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function O1(t,i,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[pi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Bn(t.nextSibling),t===null)break}return null}function M1(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Bn(t.nextSibling),t===null))return null;return t}function o0(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Bn(t.nextSibling),t===null))return null;return t}function Zd(t){return t.data==="$?"||t.data==="$~"}function em(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function V1(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Bn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var tm=null;function l0(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Bn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function u0(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function c0(t,i,a){switch(i=Lc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Rl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);pa(t)}var qn=new Map,h0=new Set;function Pc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ir=ae.d;ae.d={f:k1,r:L1,D:P1,C:j1,L:U1,m:z1,X:q1,S:B1,M:H1};function k1(){var t=ir.f(),i=Cc();return t||i}function L1(t){var i=Dn(t);i!==null&&i.tag===5&&i.type==="form"?Cy(i):ir.r(t)}var Xa=typeof document>"u"?null:document;function f0(t,i,a){var l=Xa;if(l&&typeof i=="string"&&i){var f=ln(i);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),h0.has(f)||(h0.add(f),t={rel:t,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),$t(i,"link",t),xt(i),l.head.appendChild(i)))}}function P1(t){ir.D(t),f0("dns-prefetch",t,null)}function j1(t,i){ir.C(t,i),f0("preconnect",t,i)}function U1(t,i,a){ir.L(t,i,a);var l=Xa;if(l&&t&&i){var f='link[rel="preload"][as="'+ln(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+ln(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+ln(a.imageSizes)+'"]')):f+='[href="'+ln(t)+'"]';var d=f;switch(i){case"style":d=Wa(t);break;case"script":d=Ja(t)}qn.has(d)||(t=S({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),qn.set(d,t),l.querySelector(f)!==null||i==="style"&&l.querySelector(Cl(d))||i==="script"&&l.querySelector(Il(d))||(i=l.createElement("link"),$t(i,"link",t),xt(i),l.head.appendChild(i)))}}function z1(t,i){ir.m(t,i);var a=Xa;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+ln(l)+'"][href="'+ln(t)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ja(t)}if(!qn.has(d)&&(t=S({rel:"modulepreload",href:t},i),qn.set(d,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Il(d)))return}l=a.createElement("link"),$t(l,"link",t),xt(l),a.head.appendChild(l)}}}function B1(t,i,a){ir.S(t,i,a);var l=Xa;if(l&&t){var f=yi(l).hoistableStyles,d=Wa(t);i=i||"default";var _=f.get(d);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(Cl(d)))b.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":i},a),(a=qn.get(d))&&nm(t,a);var N=_=l.createElement("link");xt(N),$t(N,"link",t),N._p=new Promise(function(F,W){N.onload=F,N.onerror=W}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,jc(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:b},f.set(d,_)}}}function q1(t,i){ir.X(t,i);var a=Xa;if(a&&t){var l=yi(a).hoistableScripts,f=Ja(t),d=l.get(f);d||(d=a.querySelector(Il(f)),d||(t=S({src:t,async:!0},i),(i=qn.get(f))&&im(t,i),d=a.createElement("script"),xt(d),$t(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function H1(t,i){ir.M(t,i);var a=Xa;if(a&&t){var l=yi(a).hoistableScripts,f=Ja(t),d=l.get(f);d||(d=a.querySelector(Il(f)),d||(t=S({src:t,async:!0,type:"module"},i),(i=qn.get(f))&&im(t,i),d=a.createElement("script"),xt(d),$t(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function d0(t,i,a,l){var f=(f=Re.current)?Pc(f):null;if(!f)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Wa(a.href),a=yi(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Wa(a.href);var d=yi(f).hoistableStyles,_=d.get(t);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=f.querySelector(Cl(t)))&&!d._p&&(_.instance=d,_.state.loading=5),qn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},qn.set(t,a),d||F1(f,t,a,_.state))),i&&l===null)throw Error(s(528,""));return _}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ja(a),a=yi(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Wa(t){return'href="'+ln(t)+'"'}function Cl(t){return'link[rel="stylesheet"]['+t+"]"}function m0(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function F1(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),$t(i,"link",a),xt(i),t.head.appendChild(i))}function Ja(t){return'[src="'+ln(t)+'"]'}function Il(t){return"script[async]"+t}function p0(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+ln(a.href)+'"]');if(l)return i.instance=l,xt(l),l;var f=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),xt(l),$t(l,"style",f),jc(l,a.precedence,t),i.instance=l;case"stylesheet":f=Wa(a.href);var d=t.querySelector(Cl(f));if(d)return i.state.loading|=4,i.instance=d,xt(d),d;l=m0(a),(f=qn.get(f))&&nm(l,f),d=(t.ownerDocument||t).createElement("link"),xt(d);var _=d;return _._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),$t(d,"link",l),i.state.loading|=4,jc(d,a.precedence,t),i.instance=d;case"script":return d=Ja(a.src),(f=t.querySelector(Il(d)))?(i.instance=f,xt(f),f):(l=a,(f=qn.get(d))&&(l=S({},a),im(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),xt(f),$t(f,"link",l),t.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,jc(l,a.precedence,t));return i.instance}function jc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===i)d=b;else if(d!==f)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function nm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function im(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Uc=null;function g0(t,i,a){if(Uc===null){var l=new Map,f=Uc=new Map;f.set(a,l)}else f=Uc,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var d=a[f];if(!(d[pi]||d[At]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=t+_;var b=l.get(_);b?b.push(d):l.set(_,[d])}}return l}function y0(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function G1(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function _0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Q1(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Wa(l.href),d=i.querySelector(Cl(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=zc.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,xt(d);return}d=i.ownerDocument||i,l=m0(l),(f=qn.get(f))&&nm(l,f),d=d.createElement("link"),xt(d);var _=d;_._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),$t(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=zc.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var rm=0;function K1(t,i){return t.stylesheets&&t.count===0&&qc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&qc(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&rm===0&&(rm=62500*R1());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&qc(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>rm?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function zc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Bc=null;function qc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Bc=new Map,i.forEach(Y1,t),Bc=null,zc.call(t))}function Y1(t,i){if(!(i.state.loading&4)){var a=Bc.get(t);if(a)var l=a.get(null);else{a=new Map,Bc.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=zc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),i.state.loading|=4}}var Nl={$$typeof:$,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function $1(t,i,a,l,f,d,_,b,N){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=di(0),this.hiddenUpdates=di(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function v0(t,i,a,l,f,d,_,b,N,F,W,te){return t=new $1(t,i,a,_,N,F,W,te,b),i=1,d===!0&&(i|=24),d=Sn(3,null,null,i),t.current=d,d.stateNode=t,i=Pf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Bf(d),t}function E0(t){return t?(t=Ia,t):Ia}function T0(t,i,a,l,f,d){f=E0(f),l.context===null?l.context=f:l.pendingContext=f,l=Dr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Or(t,l,i),a!==null&&(mn(a,t,i),ll(a,t,i))}function S0(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function sm(t,i){S0(t,i),(t=t.alternate)&&S0(t,i)}function b0(t){if(t.tag===13||t.tag===31){var i=ks(t,67108864);i!==null&&mn(i,t,67108864),sm(t,67108864)}}function w0(t){if(t.tag===13||t.tag===31){var i=Rn();i=bs(i);var a=ks(t,i);a!==null&&mn(a,t,i),sm(t,i)}}var Hc=!0;function X1(t,i,a,l){var f=J.T;J.T=null;var d=ae.p;try{ae.p=2,am(t,i,a,l)}finally{ae.p=d,J.T=f}}function W1(t,i,a,l){var f=J.T;J.T=null;var d=ae.p;try{ae.p=8,am(t,i,a,l)}finally{ae.p=d,J.T=f}}function am(t,i,a,l){if(Hc){var f=om(l);if(f===null)Qd(t,i,l,Fc,a),x0(t,l);else if(Z1(f,t,i,a,l))l.stopPropagation();else if(x0(t,l),i&4&&-1<J1.indexOf(t)){for(;f!==null;){var d=Dn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=hi(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var N=1<<31-gt(_);b.entanglements[1]|=N,_&=~N}Ni(d),(Ge&6)===0&&(xc=sn()+500,wl(0))}}break;case 31:case 13:b=ks(d,2),b!==null&&mn(b,d,2),Cc(),sm(d,2)}if(d=om(l),d===null&&Qd(t,i,l,Fc,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Qd(t,i,l,null,a)}}function om(t){return t=On(t),lm(t)}var Fc=null;function lm(t){if(Fc=null,t=gi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=h(i),t!==null)return t;t=null}else if(a===31){if(t=m(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Fc=t,null}function A0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vs()){case Mo:return 2;case Vo:return 8;case gr:case mf:return 32;case Su:return 268435456;default:return 32}default:return 32}}var um=!1,Hr=null,Fr=null,Gr=null,Dl=new Map,Ol=new Map,Qr=[],J1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function x0(t,i){switch(t){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":Dl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(i.pointerId)}}function Ml(t,i,a,l,f,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Dn(i),i!==null&&b0(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function Z1(t,i,a,l,f){switch(i){case"focusin":return Hr=Ml(Hr,t,i,a,l,f),!0;case"dragenter":return Fr=Ml(Fr,t,i,a,l,f),!0;case"mouseover":return Gr=Ml(Gr,t,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return Dl.set(d,Ml(Dl.get(d)||null,t,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Ol.set(d,Ml(Ol.get(d)||null,t,i,a,l,f)),!0}return!1}function R0(t){var i=gi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){t.blockedOn=i,Kn(t.priority,function(){w0(a)});return}}else if(i===31){if(i=m(a),i!==null){t.blockedOn=i,Kn(t.priority,function(){w0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=om(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Qo=l,a.target.dispatchEvent(l),Qo=null}else return i=Dn(a),i!==null&&b0(i),t.blockedOn=a,!1;i.shift()}return!0}function C0(t,i,a){Gc(t)&&a.delete(i)}function ew(){um=!1,Hr!==null&&Gc(Hr)&&(Hr=null),Fr!==null&&Gc(Fr)&&(Fr=null),Gr!==null&&Gc(Gr)&&(Gr=null),Dl.forEach(C0),Ol.forEach(C0)}function Qc(t,i){t.blockedOn===i&&(t.blockedOn=null,um||(um=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,ew)))}var Kc=null;function I0(t){Kc!==t&&(Kc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Kc===t&&(Kc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],f=t[i+2];if(typeof l!="function"){if(lm(l||a)===null)continue;break}var d=Dn(a);d!==null&&(t.splice(i,3),i-=3,od(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Za(t){function i(N){return Qc(N,t)}Hr!==null&&Qc(Hr,t),Fr!==null&&Qc(Fr,t),Gr!==null&&Qc(Gr,t),Dl.forEach(i),Ol.forEach(i);for(var a=0;a<Qr.length;a++){var l=Qr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Qr.length&&(a=Qr[0],a.blockedOn===null);)R0(a),a.blockedOn===null&&Qr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[Ut]||null;if(typeof d=="function")_||I0(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[Ut]||null)b=_.formAction;else if(lm(f)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),I0(a)}}}function N0(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function cm(t){this._internalRoot=t}Yc.prototype.render=cm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=Rn();T0(a,l,t,i,null,null)},Yc.prototype.unmount=cm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;T0(t.current,2,null,t,null,null),Cc(),i[mi]=null}};function Yc(t){this._internalRoot=t}Yc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Cu();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Qr.length&&i!==0&&i<Qr[a].priority;a++);Qr.splice(a,0,t),a===0&&R0(t)}};var D0=e.version;if(D0!=="19.2.0")throw Error(s(527,D0,"19.2.0"));ae.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(i),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var tw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$c.isDisabled&&$c.supportsFiber)try{Gn=$c.inject(tw),Ft=$c}catch{}}return kl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",f=jy,d=Uy,_=zy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=v0(t,1,!1,null,null,a,l,null,f,d,_,N0),t[mi]=i.current,Gd(t),new cm(i)},kl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,f="",d=jy,_=Uy,b=zy,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),i=v0(t,1,!0,i,a??null,l,f,N,d,_,b,N0),i.context=E0(null),a=i.current,l=Rn(),l=bs(l),f=Dr(l),f.callback=null,Or(a,f,l),a=l,i.current.lanes=a,Ts(i,a),Ni(i),t[mi]=i.current,Gd(t),new Yc(i)},kl.version="19.2.0",kl}var B0;function fw(){if(B0)return dm.exports;B0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),dm.exports=hw(),dm.exports}var dw=fw();const mw=IE(dw);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var q0="popstate";function pw(r={}){function e(o,u){let{pathname:h="/",search:m="",hash:p=""}=sa(o.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Vm("",{pathname:h,search:m,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let h=o.document.querySelector("base"),m="";if(h&&h.getAttribute("href")){let p=o.location.href,g=p.indexOf("#");m=g===-1?p:p.slice(0,g)}return m+"#"+(typeof u=="string"?u:$l(u))}function s(o,u){Fn(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return yw(e,n,s,r)}function ht(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Fn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gw(){return Math.random().toString(36).substring(2,10)}function H0(r,e){return{usr:r.state,key:r.key,idx:e}}function Vm(r,e,n=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?sa(e):e,state:n,key:e&&e.key||s||gw()}}function $l({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function sa(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function yw(r,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,h=o.history,m="POP",p=null,g=E();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function E(){return(h.state||{idx:null}).idx}function S(){m="POP";let U=E(),G=U==null?null:U-g;g=U,p&&p({action:m,location:j.location,delta:G})}function w(U,G){m="PUSH";let X=Vm(j.location,U,G);n&&n(X,U),g=E()+1;let $=H0(X,g),se=j.createHref(X);try{h.pushState($,"",se)}catch(ye){if(ye instanceof DOMException&&ye.name==="DataCloneError")throw ye;o.location.assign(se)}u&&p&&p({action:m,location:j.location,delta:1})}function D(U,G){m="REPLACE";let X=Vm(j.location,U,G);n&&n(X,U),g=E();let $=H0(X,g),se=j.createHref(X);h.replaceState($,"",se),u&&p&&p({action:m,location:j.location,delta:0})}function V(U){return _w(U)}let j={get action(){return m},get location(){return r(o,h)},listen(U){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(q0,S),p=U,()=>{o.removeEventListener(q0,S),p=null}},createHref(U){return e(o,U)},createURL:V,encodeLocation(U){let G=V(U);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:w,replace:D,go(U){return h.go(U)}};return j}function _w(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ht(n,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:$l(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function NE(r,e,n="/"){return vw(r,e,n,!1)}function vw(r,e,n,s){let o=typeof e=="string"?sa(e):e,u=lr(o.pathname||"/",n);if(u==null)return null;let h=DE(r);Ew(h);let m=null;for(let p=0;m==null&&p<h.length;++p){let g=Dw(u);m=Iw(h[p],g,s)}return m}function DE(r,e=[],n=[],s="",o=!1){let u=(h,m,p=o,g)=>{let E={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:m,route:h};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(s)&&p)return;ht(E.relativePath.startsWith(s),`Absolute route path "${E.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(s.length)}let S=ar([s,E.relativePath]),w=n.concat(E);h.children&&h.children.length>0&&(ht(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),DE(h.children,e,w,S,p)),!(h.path==null&&!h.index)&&e.push({path:S,score:Rw(S,h.index),routesMeta:w})};return r.forEach((h,m)=>{var p;if(h.path===""||!((p=h.path)!=null&&p.includes("?")))u(h,m);else for(let g of OE(h.path))u(h,m,!0,g)}),e}function OE(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let h=OE(s.join("/")),m=[];return m.push(...h.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...h),m.map(p=>r.startsWith("/")&&p===""?"/":p)}function Ew(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:Cw(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var Tw=/^:[\w-]+$/,Sw=3,bw=2,ww=1,Aw=10,xw=-2,F0=r=>r==="*";function Rw(r,e){let n=r.split("/"),s=n.length;return n.some(F0)&&(s+=xw),e&&(s+=bw),n.filter(o=>!F0(o)).reduce((o,u)=>o+(Tw.test(u)?Sw:u===""?ww:Aw),s)}function Cw(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function Iw(r,e,n=!1){let{routesMeta:s}=r,o={},u="/",h=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",S=ph({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},E),w=p.route;if(!S&&g&&n&&!s[s.length-1].route.index&&(S=ph({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!S)return null;Object.assign(o,S.params),h.push({params:o,pathname:ar([u,S.pathname]),pathnameBase:kw(ar([u,S.pathnameBase])),route:w}),S.pathnameBase!=="/"&&(u=ar([u,S.pathnameBase]))}return h}function ph(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=Nw(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:E,isOptional:S},w)=>{if(E==="*"){let V=m[w]||"";h=u.slice(0,u.length-V.length).replace(/(.)\/+$/,"$1")}const D=m[w];return S&&!D?g[E]=void 0:g[E]=(D||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:r}}function Nw(r,e=!1,n=!0){Fn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function Dw(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function lr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}function Ow(r,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?sa(r):r;return{pathname:n?n.startsWith("/")?n:Mw(n,e):e,search:Lw(s),hash:Pw(o)}}function Mw(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function ym(r,e,n,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Vw(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function up(r){let e=Vw(r);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function cp(r,e,n,s=!1){let o;typeof r=="string"?o=sa(r):(o={...r},ht(!o.pathname||!o.pathname.includes("?"),ym("?","pathname","search",o)),ht(!o.pathname||!o.pathname.includes("#"),ym("#","pathname","hash",o)),ht(!o.search||!o.search.includes("#"),ym("#","search","hash",o)));let u=r===""||o.pathname==="",h=u?"/":o.pathname,m;if(h==null)m=n;else{let S=e.length-1;if(!s&&h.startsWith("..")){let w=h.split("/");for(;w[0]==="..";)w.shift(),S-=1;o.pathname=w.join("/")}m=S>=0?e[S]:"/"}let p=Ow(o,m),g=h&&h!=="/"&&h.endsWith("/"),E=(u||h===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||E)&&(p.pathname+="/"),p}var ar=r=>r.join("/").replace(/\/\/+/g,"/"),kw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Lw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Pw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function jw(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var ME=["POST","PUT","PATCH","DELETE"];new Set(ME);var Uw=["GET",...ME];new Set(Uw);var _o=k.createContext(null);_o.displayName="DataRouter";var Lh=k.createContext(null);Lh.displayName="DataRouterState";k.createContext(!1);var VE=k.createContext({isTransitioning:!1});VE.displayName="ViewTransition";var zw=k.createContext(new Map);zw.displayName="Fetchers";var Bw=k.createContext(null);Bw.displayName="Await";var oi=k.createContext(null);oi.displayName="Navigation";var au=k.createContext(null);au.displayName="Location";var li=k.createContext({outlet:null,matches:[],isDataRoute:!1});li.displayName="Route";var hp=k.createContext(null);hp.displayName="RouteError";function qw(r,{relative:e}={}){ht(vo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=k.useContext(oi),{hash:o,pathname:u,search:h}=ou(r,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:ar([n,u])),s.createHref({pathname:m,search:h,hash:o})}function vo(){return k.useContext(au)!=null}function fs(){return ht(vo(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(au).location}var kE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function LE(r){k.useContext(oi).static||k.useLayoutEffect(r)}function Ph(){let{isDataRoute:r}=k.useContext(li);return r?iA():Hw()}function Hw(){ht(vo(),"useNavigate() may be used only in the context of a <Router> component.");let r=k.useContext(_o),{basename:e,navigator:n}=k.useContext(oi),{matches:s}=k.useContext(li),{pathname:o}=fs(),u=JSON.stringify(up(s)),h=k.useRef(!1);return LE(()=>{h.current=!0}),k.useCallback((p,g={})=>{if(Fn(h.current,kE),!h.current)return;if(typeof p=="number"){n.go(p);return}let E=cp(p,JSON.parse(u),o,g.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:ar([e,E.pathname])),(g.replace?n.replace:n.push)(E,g.state,g)},[e,n,u,o,r])}var Fw=k.createContext(null);function Gw(r){let e=k.useContext(li).outlet;return k.useMemo(()=>e&&k.createElement(Fw.Provider,{value:r},e),[e,r])}function ou(r,{relative:e}={}){let{matches:n}=k.useContext(li),{pathname:s}=fs(),o=JSON.stringify(up(n));return k.useMemo(()=>cp(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function Qw(r,e){return PE(r,e)}function PE(r,e,n,s,o){var X;ht(vo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=k.useContext(oi),{matches:h}=k.useContext(li),m=h[h.length-1],p=m?m.params:{},g=m?m.pathname:"/",E=m?m.pathnameBase:"/",S=m&&m.route;{let $=S&&S.path||"";jE(g,!S||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let w=fs(),D;if(e){let $=typeof e=="string"?sa(e):e;ht(E==="/"||((X=$.pathname)==null?void 0:X.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${$.pathname}" was given in the \`location\` prop.`),D=$}else D=w;let V=D.pathname||"/",j=V;if(E!=="/"){let $=E.replace(/^\//,"").split("/");j="/"+V.replace(/^\//,"").split("/").slice($.length).join("/")}let U=NE(r,{pathname:j});Fn(S||U!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),Fn(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let G=Ww(U&&U.map($=>Object.assign({},$,{params:Object.assign({},p,$.params),pathname:ar([E,u.encodeLocation?u.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?E:ar([E,u.encodeLocation?u.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),h,n,s,o);return e&&G?k.createElement(au.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...D},navigationType:"POP"}},G):G}function Kw(){let r=nA(),e=jw(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:u},"ErrorBoundary")," or"," ",k.createElement("code",{style:u},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:o},n):null,h)}var Yw=k.createElement(Kw,null),$w=class extends k.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?k.createElement(li.Provider,{value:this.props.routeContext},k.createElement(hp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Xw({routeContext:r,match:e,children:n}){let s=k.useContext(_o);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(li.Provider,{value:r},n)}function Ww(r,e=[],n=null,s=null,o=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let u=r,h=n==null?void 0:n.errors;if(h!=null){let g=u.findIndex(E=>E.route.id&&(h==null?void 0:h[E.route.id])!==void 0);ht(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,g+1))}let m=!1,p=-1;if(n)for(let g=0;g<u.length;g++){let E=u[g];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=g),E.route.id){let{loaderData:S,errors:w}=n,D=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!w||w[E.route.id]===void 0);if(E.route.lazy||D){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}return u.reduceRight((g,E,S)=>{let w,D=!1,V=null,j=null;n&&(w=h&&E.route.id?h[E.route.id]:void 0,V=E.route.errorElement||Yw,m&&(p<0&&S===0?(jE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,j=null):p===S&&(D=!0,j=E.route.hydrateFallbackElement||null)));let U=e.concat(u.slice(0,S+1)),G=()=>{let X;return w?X=V:D?X=j:E.route.Component?X=k.createElement(E.route.Component,null):E.route.element?X=E.route.element:X=g,k.createElement(Xw,{match:E,routeContext:{outlet:g,matches:U,isDataRoute:n!=null},children:X})};return n&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?k.createElement($w,{location:n.location,revalidation:n.revalidation,component:V,error:w,children:G(),routeContext:{outlet:null,matches:U,isDataRoute:!0},unstable_onError:s}):G()},null)}function fp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jw(r){let e=k.useContext(_o);return ht(e,fp(r)),e}function Zw(r){let e=k.useContext(Lh);return ht(e,fp(r)),e}function eA(r){let e=k.useContext(li);return ht(e,fp(r)),e}function dp(r){let e=eA(r),n=e.matches[e.matches.length-1];return ht(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function tA(){return dp("useRouteId")}function nA(){var s;let r=k.useContext(hp),e=Zw("useRouteError"),n=dp("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[n]}function iA(){let{router:r}=Jw("useNavigate"),e=dp("useNavigate"),n=k.useRef(!1);return LE(()=>{n.current=!0}),k.useCallback(async(o,u={})=>{Fn(n.current,kE),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var G0={};function jE(r,e,n){!e&&!G0[r]&&(G0[r]=!0,Fn(!1,n))}k.memo(rA);function rA({routes:r,future:e,state:n,unstable_onError:s}){return PE(r,void 0,n,s,e)}function UE({to:r,replace:e,state:n,relative:s}){ht(vo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=k.useContext(oi);Fn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=k.useContext(li),{pathname:h}=fs(),m=Ph(),p=cp(r,up(u),h,s==="path"),g=JSON.stringify(p);return k.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:s})},[m,g,s,e,n]),null}function sA(r){return Gw(r.context)}function Ys(r){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aA({basename:r="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){ht(!vo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),m=k.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof n=="string"&&(n=sa(n));let{pathname:p="/",search:g="",hash:E="",state:S=null,key:w="default"}=n,D=k.useMemo(()=>{let V=lr(p,h);return V==null?null:{location:{pathname:V,search:g,hash:E,state:S,key:w},navigationType:s}},[h,p,g,E,S,w,s]);return Fn(D!=null,`<Router basename="${h}"> is not able to match the URL "${p}${g}${E}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:k.createElement(oi.Provider,{value:m},k.createElement(au.Provider,{children:e,value:D}))}function oA({children:r,location:e}){return Qw(km(r),e)}function km(r,e=[]){let n=[];return k.Children.forEach(r,(s,o)=>{if(!k.isValidElement(s))return;let u=[...e,o];if(s.type===k.Fragment){n.push.apply(n,km(s.props.children,u));return}ht(s.type===Ys,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=km(s.props.children,u)),n.push(h)}),n}var ih="get",rh="application/x-www-form-urlencoded";function jh(r){return r!=null&&typeof r.tagName=="string"}function lA(r){return jh(r)&&r.tagName.toLowerCase()==="button"}function uA(r){return jh(r)&&r.tagName.toLowerCase()==="form"}function cA(r){return jh(r)&&r.tagName.toLowerCase()==="input"}function hA(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function fA(r,e){return r.button===0&&(!e||e==="_self")&&!hA(r)}var Xc=null;function dA(){if(Xc===null)try{new FormData(document.createElement("form"),0),Xc=!1}catch{Xc=!0}return Xc}var mA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _m(r){return r!=null&&!mA.has(r)?(Fn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rh}"`),null):r}function pA(r,e){let n,s,o,u,h;if(uA(r)){let m=r.getAttribute("action");s=m?lr(m,e):null,n=r.getAttribute("method")||ih,o=_m(r.getAttribute("enctype"))||rh,u=new FormData(r)}else if(lA(r)||cA(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||m.getAttribute("action");if(s=p?lr(p,e):null,n=r.getAttribute("formmethod")||m.getAttribute("method")||ih,o=_m(r.getAttribute("formenctype"))||_m(m.getAttribute("enctype"))||rh,u=new FormData(m,r),!dA()){let{name:g,type:E,value:S}=r;if(E==="image"){let w=g?`${g}.`:"";u.append(`${w}x`,"0"),u.append(`${w}y`,"0")}else g&&u.append(g,S)}}else{if(jh(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ih,s=null,o=rh,h=r}return u&&o==="text/plain"&&(h=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function mp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function gA(r,e,n){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&lr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function yA(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _A(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function vA(r,e,n){let s=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let h=await yA(u,n);return h.links?h.links():[]}return[]}));return bA(s.flat(1).filter(_A).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Q0(r,e,n,s,o,u){let h=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>{var E;return n[g].pathname!==p.pathname||((E=n[g].route.path)==null?void 0:E.endsWith("*"))&&n[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>h(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{var S;let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(h(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let w=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((S=n[0])==null?void 0:S.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function EA(r,e,{includeHydrateFallback:n}={}){return TA(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function TA(r){return[...new Set(r)]}function SA(r){let e={},n=Object.keys(r).sort();for(let s of n)e[s]=r[s];return e}function bA(r,e){let n=new Set;return new Set(e),r.reduce((s,o)=>{let u=JSON.stringify(SA(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function zE(){let r=k.useContext(_o);return mp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function wA(){let r=k.useContext(Lh);return mp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var pp=k.createContext(void 0);pp.displayName="FrameworkContext";function BE(){let r=k.useContext(pp);return mp(r,"You must render this element inside a <HydratedRouter> element"),r}function AA(r,e){let n=k.useContext(pp),[s,o]=k.useState(!1),[u,h]=k.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:E,onTouchStart:S}=e,w=k.useRef(null);k.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let j=G=>{G.forEach(X=>{h(X.isIntersecting)})},U=new IntersectionObserver(j,{threshold:.5});return w.current&&U.observe(w.current),()=>{U.disconnect()}}},[r]),k.useEffect(()=>{if(s){let j=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(j)}}},[s]);let D=()=>{o(!0)},V=()=>{o(!1),h(!1)};return n?r!=="intent"?[u,w,{}]:[u,w,{onFocus:Ll(m,D),onBlur:Ll(p,V),onMouseEnter:Ll(g,D),onMouseLeave:Ll(E,V),onTouchStart:Ll(S,D)}]:[!1,w,{}]}function Ll(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function xA({page:r,...e}){let{router:n}=zE(),s=k.useMemo(()=>NE(n.routes,r,n.basename),[n.routes,r,n.basename]);return s?k.createElement(CA,{page:r,matches:s,...e}):null}function RA(r){let{manifest:e,routeModules:n}=BE(),[s,o]=k.useState([]);return k.useEffect(()=>{let u=!1;return vA(r,e,n).then(h=>{u||o(h)}),()=>{u=!0}},[r,e,n]),s}function CA({page:r,matches:e,...n}){let s=fs(),{manifest:o,routeModules:u}=BE(),{basename:h}=zE(),{loaderData:m,matches:p}=wA(),g=k.useMemo(()=>Q0(r,e,p,o,s,"data"),[r,e,p,o,s]),E=k.useMemo(()=>Q0(r,e,p,o,s,"assets"),[r,e,p,o,s]),S=k.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let V=new Set,j=!1;if(e.forEach(G=>{var $;let X=o.routes[G.route.id];!X||!X.hasLoader||(!g.some(se=>se.route.id===G.route.id)&&G.route.id in m&&(($=u[G.route.id])!=null&&$.shouldRevalidate)||X.hasClientLoader?j=!0:V.add(G.route.id))}),V.size===0)return[];let U=gA(r,h,"data");return j&&V.size>0&&U.searchParams.set("_routes",e.filter(G=>V.has(G.route.id)).map(G=>G.route.id).join(",")),[U.pathname+U.search]},[h,m,s,o,g,e,r,u]),w=k.useMemo(()=>EA(E,o),[E,o]),D=RA(E);return k.createElement(k.Fragment,null,S.map(V=>k.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...n})),w.map(V=>k.createElement("link",{key:V,rel:"modulepreload",href:V,...n})),D.map(({key:V,link:j})=>k.createElement("link",{key:V,nonce:n.nonce,...j})))}function IA(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var qE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qE&&(window.__reactRouterVersion="7.9.4")}catch{}function NA({basename:r,children:e,window:n}){let s=k.useRef();s.current==null&&(s.current=pw({window:n,v5Compat:!0}));let o=s.current,[u,h]=k.useState({action:o.action,location:o.location}),m=k.useCallback(p=>{k.startTransition(()=>h(p))},[h]);return k.useLayoutEffect(()=>o.listen(m),[o,m]),k.createElement(aA,{basename:r,children:e,location:u.location,navigationType:u.action,navigator:o})}var HE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FE=k.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:h,state:m,target:p,to:g,preventScrollReset:E,viewTransition:S,...w},D){let{basename:V}=k.useContext(oi),j=typeof g=="string"&&HE.test(g),U,G=!1;if(typeof g=="string"&&j&&(U=g,qE))try{let C=new URL(window.location.href),M=g.startsWith("//")?new URL(C.protocol+g):new URL(g),O=lr(M.pathname,V);M.origin===C.origin&&O!=null?g=O+M.search+M.hash:G=!0}catch{Fn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let X=qw(g,{relative:o}),[$,se,ye]=AA(s,w),pe=VA(g,{replace:h,state:m,target:p,preventScrollReset:E,relative:o,viewTransition:S});function I(C){e&&e(C),C.defaultPrevented||pe(C)}let x=k.createElement("a",{...w,...ye,href:U||X,onClick:G||u?e:I,ref:IA(D,se),target:p,"data-discover":!j&&n==="render"?"true":void 0});return $&&!j?k.createElement(k.Fragment,null,x,k.createElement(xA,{page:X})):x});FE.displayName="Link";var DA=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:h,viewTransition:m,children:p,...g},E){let S=ou(h,{relative:g.relative}),w=fs(),D=k.useContext(Lh),{navigator:V,basename:j}=k.useContext(oi),U=D!=null&&UA(S)&&m===!0,G=V.encodeLocation?V.encodeLocation(S).pathname:S.pathname,X=w.pathname,$=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;n||(X=X.toLowerCase(),$=$?$.toLowerCase():null,G=G.toLowerCase()),$&&j&&($=lr($,j)||$);const se=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let ye=X===G||!o&&X.startsWith(G)&&X.charAt(se)==="/",pe=$!=null&&($===G||!o&&$.startsWith(G)&&$.charAt(G.length)==="/"),I={isActive:ye,isPending:pe,isTransitioning:U},x=ye?e:void 0,C;typeof s=="function"?C=s(I):C=[s,ye?"active":null,pe?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let M=typeof u=="function"?u(I):u;return k.createElement(FE,{...g,"aria-current":x,className:C,ref:E,style:M,to:h,viewTransition:m},typeof p=="function"?p(I):p)});DA.displayName="NavLink";var OA=k.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:h=ih,action:m,onSubmit:p,relative:g,preventScrollReset:E,viewTransition:S,...w},D)=>{let V=PA(),j=jA(m,{relative:g}),U=h.toLowerCase()==="get"?"get":"post",G=typeof m=="string"&&HE.test(m),X=$=>{if(p&&p($),$.defaultPrevented)return;$.preventDefault();let se=$.nativeEvent.submitter,ye=(se==null?void 0:se.getAttribute("formmethod"))||h;V(se||$.currentTarget,{fetcherKey:e,method:ye,navigate:n,replace:o,state:u,relative:g,preventScrollReset:E,viewTransition:S})};return k.createElement("form",{ref:D,method:U,action:j,onSubmit:s?p:X,...w,"data-discover":!G&&r==="render"?"true":void 0})});OA.displayName="Form";function MA(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GE(r){let e=k.useContext(_o);return ht(e,MA(r)),e}function VA(r,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:h}={}){let m=Ph(),p=fs(),g=ou(r,{relative:u});return k.useCallback(E=>{if(fA(E,e)){E.preventDefault();let S=n!==void 0?n:$l(p)===$l(g);m(r,{replace:S,state:s,preventScrollReset:o,relative:u,viewTransition:h})}},[p,m,g,n,s,e,r,o,u,h])}var kA=0,LA=()=>`__${String(++kA)}__`;function PA(){let{router:r}=GE("useSubmit"),{basename:e}=k.useContext(oi),n=tA();return k.useCallback(async(s,o={})=>{let{action:u,method:h,encType:m,formData:p,body:g}=pA(s,e);if(o.navigate===!1){let E=o.fetcherKey||LA();await r.fetch(E,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||h,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||h,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,n])}function jA(r,{relative:e}={}){let{basename:n}=k.useContext(oi),s=k.useContext(li);ht(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...ou(r||".",{relative:e})},h=fs();if(r==null){u.search=h.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(E=>E==="")){m.delete("index"),p.filter(S=>S).forEach(S=>m.append("index",S));let E=m.toString();u.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:ar([n,u.pathname])),$l(u)}function UA(r,{relative:e}={}){let n=k.useContext(VE);ht(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=GE("useViewTransitionState"),o=ou(r,{relative:e});if(!n.isTransitioning)return!1;let u=lr(n.currentLocation.pathname,s)||n.currentLocation.pathname,h=lr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return ph(o.pathname,h)!=null||ph(o.pathname,u)!=null}const zA=()=>{};var K0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},BA=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],h=r[n++],m=r[n++],p=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],h=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},KE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],h=o+1<r.length,m=h?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,E=u>>2,S=(u&3)<<4|m>>4;let w=(m&15)<<2|g>>6,D=g&63;p||(D=64,h||(w=64)),s.push(n[E],n[S],n[w],n[D])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(QE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):BA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const S=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||g==null||S==null)throw new qA;const w=u<<2|m>>4;if(s.push(w),g!==64){const D=m<<4&240|g>>2;if(s.push(D),S!==64){const V=g<<6&192|S;s.push(V)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class qA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HA=function(r){const e=QE(r);return KE.encodeByteArray(e,!0)},gh=function(r){return HA(r).replace(/\./g,"")},YE=function(r){try{return KE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=()=>FA().__FIREBASE_DEFAULTS__,QA=()=>{if(typeof process>"u"||typeof K0>"u")return;const r=K0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},KA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&YE(r[1]);return e&&JSON.parse(e)},Uh=()=>{try{return zA()||GA()||QA()||KA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},$E=r=>{var e,n;return(n=(e=Uh())==null?void 0:e.emulatorHosts)==null?void 0:n[r]},YA=r=>{const e=$E(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},XE=()=>{var r;return(r=Uh())==null?void 0:r.config},WE=r=>{var e;return(e=Uh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function JE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[gh(JSON.stringify(n)),gh(JSON.stringify(h)),""].join(".")}const Hl={};function WA(){const r={prod:[],emulator:[]};for(const e of Object.keys(Hl))Hl[e]?r.emulator.push(e):r.prod.push(e);return r}function JA(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Y0=!1;function ZE(r,e){if(typeof window>"u"||typeof document>"u"||!Eo(window.location.host)||Hl[r]===e||Hl[r]||Y0)return;Hl[r]=e;function n(w){return`__firebase__banner__${w}`}const s="__firebase__banner",u=WA().prod.length>0;function h(){const w=document.getElementById(s);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function p(w,D){w.setAttribute("width","24"),w.setAttribute("id",D),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function g(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Y0=!0,h()},w}function E(w,D){w.setAttribute("id",D),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function S(){const w=JA(s),D=n("text"),V=document.getElementById(D)||document.createElement("span"),j=n("learnmore"),U=document.getElementById(j)||document.createElement("a"),G=n("preprendIcon"),X=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const $=w.element;m($),E(U,j);const se=g();p(X,G),$.append(X,V,U,se),document.body.appendChild($)}u?(V.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function ex(){var e;const r=(e=Uh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nx(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function ix(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rx(){const r=rn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function sx(){return!ex()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ax(){try{return typeof indexedDB=="object"}catch{return!1}}function ox(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="FirebaseError";class mr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=lx,Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lu.prototype.create)}}class lu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?ux(u,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new mr(o,m,s)}}function ux(r,e){return r.replace(cx,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const cx=/\{\$([^}]+)}/g;function hx(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ea(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],h=e[o];if($0(u)&&$0(h)){if(!ea(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function $0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Pl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function jl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function fx(r,e){const n=new dx(r,e);return n.subscribe.bind(n)}class dx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");mx(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=vm),o.error===void 0&&(o.error=vm),o.complete===void 0&&(o.complete=vm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mx(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function vm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(r){return r&&r._delegate?r._delegate:r}class ta{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new $A;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yx(e))try{this.getOrInitializeService({instanceIdentifier:$s})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=$s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$s){return this.instances.has(e)}getOptions(e=$s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&h.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:gx(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=$s){return this.component?this.component.multipleInstances?e:$s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gx(r){return r===$s?void 0:r}function yx(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new px(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ve||(Ve={}));const vx={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},Ex=Ve.INFO,Tx={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},Sx=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=Tx[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gp{constructor(e){this.name=e,this._logLevel=Ex,this._logHandler=Sx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const bx=(r,e)=>e.some(n=>r instanceof n);let X0,W0;function wx(){return X0||(X0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ax(){return W0||(W0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eT=new WeakMap,Lm=new WeakMap,tT=new WeakMap,Em=new WeakMap,yp=new WeakMap;function xx(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",h)},u=()=>{n(es(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&eT.set(n,r)}).catch(()=>{}),yp.set(e,r),e}function Rx(r){if(Lm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",h),r.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",h),r.addEventListener("abort",h)});Lm.set(r,e)}let Pm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Lm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||tT.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return es(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Cx(r){Pm=r(Pm)}function Ix(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Tm(this),e,...n);return tT.set(s,e.sort?e.sort():[e]),es(s)}:Ax().includes(r)?function(...e){return r.apply(Tm(this),e),es(eT.get(this))}:function(...e){return es(r.apply(Tm(this),e))}}function Nx(r){return typeof r=="function"?Ix(r):(r instanceof IDBTransaction&&Rx(r),bx(r,wx())?new Proxy(r,Pm):r)}function es(r){if(r instanceof IDBRequest)return xx(r);if(Em.has(r))return Em.get(r);const e=Nx(r);return e!==r&&(Em.set(r,e),yp.set(e,r)),e}const Tm=r=>yp.get(r);function Dx(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(r,e),m=es(h);return s&&h.addEventListener("upgradeneeded",p=>{s(es(h.result),p.oldVersion,p.newVersion,es(h.transaction),p)}),n&&h.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const Ox=["get","getKey","getAll","getAllKeys","count"],Mx=["put","add","delete","clear"],Sm=new Map;function J0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Sm.get(e))return Sm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=Mx.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Ox.includes(n)))return;const u=async function(h,...m){const p=this.transaction(h,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return Sm.set(e,u),u}Cx(r=>({...r,get:(e,n,s)=>J0(e,n)||r.get(e,n,s),has:(e,n)=>!!J0(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kx(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function kx(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jm="@firebase/app",Z0="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new gp("@firebase/app"),Lx="@firebase/app-compat",Px="@firebase/analytics-compat",jx="@firebase/analytics",Ux="@firebase/app-check-compat",zx="@firebase/app-check",Bx="@firebase/auth",qx="@firebase/auth-compat",Hx="@firebase/database",Fx="@firebase/data-connect",Gx="@firebase/database-compat",Qx="@firebase/functions",Kx="@firebase/functions-compat",Yx="@firebase/installations",$x="@firebase/installations-compat",Xx="@firebase/messaging",Wx="@firebase/messaging-compat",Jx="@firebase/performance",Zx="@firebase/performance-compat",e2="@firebase/remote-config",t2="@firebase/remote-config-compat",n2="@firebase/storage",i2="@firebase/storage-compat",r2="@firebase/firestore",s2="@firebase/ai",a2="@firebase/firestore-compat",o2="firebase",l2="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="[DEFAULT]",u2={[jm]:"fire-core",[Lx]:"fire-core-compat",[jx]:"fire-analytics",[Px]:"fire-analytics-compat",[zx]:"fire-app-check",[Ux]:"fire-app-check-compat",[Bx]:"fire-auth",[qx]:"fire-auth-compat",[Hx]:"fire-rtdb",[Fx]:"fire-data-connect",[Gx]:"fire-rtdb-compat",[Qx]:"fire-fn",[Kx]:"fire-fn-compat",[Yx]:"fire-iid",[$x]:"fire-iid-compat",[Xx]:"fire-fcm",[Wx]:"fire-fcm-compat",[Jx]:"fire-perf",[Zx]:"fire-perf-compat",[e2]:"fire-rc",[t2]:"fire-rc-compat",[n2]:"fire-gcs",[i2]:"fire-gcs-compat",[r2]:"fire-fst",[a2]:"fire-fst-compat",[s2]:"fire-vertex","fire-js":"fire-js",[o2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new Map,c2=new Map,zm=new Map;function ev(r,e){try{r.container.addComponent(e)}catch(n){ur.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function uo(r){const e=r.name;if(zm.has(e))return ur.debug(`There were multiple attempts to register component ${e}.`),!1;zm.set(e,r);for(const n of yh.values())ev(n,r);for(const n of c2.values())ev(n,r);return!0}function _p(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function ii(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ts=new lu("app","Firebase",h2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ta("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=l2;function nT(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:Um,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ts.create("bad-app-name",{appName:String(o)});if(n||(n=XE()),!n)throw ts.create("no-options");const u=yh.get(o);if(u){if(ea(n,u.options)&&ea(s,u.config))return u;throw ts.create("duplicate-app",{appName:o})}const h=new _x(o);for(const p of zm.values())h.addComponent(p);const m=new f2(n,s,h);return yh.set(o,m),m}function iT(r=Um){const e=yh.get(r);if(!e&&r===Um&&XE())return nT();if(!e)throw ts.create("no-app",{appName:r});return e}function ns(r,e,n){let s=u2[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ur.warn(h.join(" "));return}uo(new ta(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="firebase-heartbeat-database",m2=1,Xl="firebase-heartbeat-store";let bm=null;function rT(){return bm||(bm=Dx(d2,m2,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Xl)}catch(n){console.warn(n)}}}}).catch(r=>{throw ts.create("idb-open",{originalErrorMessage:r.message})})),bm}async function p2(r){try{const n=(await rT()).transaction(Xl),s=await n.objectStore(Xl).get(sT(r));return await n.done,s}catch(e){if(e instanceof mr)ur.warn(e.message);else{const n=ts.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ur.warn(n.message)}}}async function tv(r,e){try{const s=(await rT()).transaction(Xl,"readwrite");await s.objectStore(Xl).put(e,sT(r)),await s.done}catch(n){if(n instanceof mr)ur.warn(n.message);else{const s=ts.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ur.warn(s.message)}}}function sT(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=1024,y2=30;class _2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new E2(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=nv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>y2){const h=T2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ur.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=nv(),{heartbeatsToSend:s,unsentEntries:o}=v2(this._heartbeatsCache.heartbeats),u=gh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return ur.warn(n),""}}}function nv(){return new Date().toISOString().substring(0,10)}function v2(r,e=g2){const n=[];let s=r.slice();for(const o of r){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),iv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),iv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class E2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ax()?ox().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await p2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return tv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return tv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function iv(r){return gh(JSON.stringify({version:2,heartbeats:r})).length}function T2(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(r){uo(new ta("platform-logger",e=>new Vx(e),"PRIVATE")),uo(new ta("heartbeat",e=>new _2(e),"PRIVATE")),ns(jm,Z0,r),ns(jm,Z0,"esm2020"),ns("fire-js","")}S2("");function aT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const b2=aT,oT=new lu("auth","Firebase",aT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new gp("@firebase/auth");function w2(r,...e){_h.logLevel<=Ve.WARN&&_h.warn(`Auth (${To}): ${r}`,...e)}function sh(r,...e){_h.logLevel<=Ve.ERROR&&_h.error(`Auth (${To}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(r,...e){throw vp(r,...e)}function Oi(r,...e){return vp(r,...e)}function lT(r,e,n){const s={...b2(),[e]:n};return new lu("auth","Firebase",s).create(e,{appName:r.name})}function is(r){return lT(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vp(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return oT.create(r,...e)}function ve(r,e,...n){if(!r)throw vp(e,...n)}function rr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw sh(e),new Error(e)}function cr(r,e){r||rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function A2(){return rv()==="http:"||rv()==="https:"}function rv(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(A2()||nx()||"connection"in navigator)?navigator.onLine:!0}function R2(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n){this.shortDelay=e,this.longDelay=n,cr(n>e,"Short delay should be less than long delay!"),this.isMobile=ZA()||ix()}get(){return x2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(r,e){cr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],N2=new cu(3e4,6e4);function aa(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ds(r,e,n,s,o={}){return cT(r,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const m=uu({key:r.config.apiKey,...h}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:p,...u};return tx()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Eo(r.emulatorConfig.host)&&(g.credentials="include"),uT.fetch()(await hT(r,r.config.apiHost,n,m),g)})}async function cT(r,e,n){r._canInitEmulator=!1;const s={...C2,...e};try{const o=new O2(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw Wc(r,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wc(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Wc(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw Wc(r,"user-disabled",h);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw lT(r,E,g);si(r,E)}}catch(o){if(o instanceof mr)throw o;si(r,"network-request-failed",{message:String(o)})}}async function zh(r,e,n,s,o={}){const u=await ds(r,e,n,s,o);return"mfaPendingCredential"in u&&si(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function hT(r,e,n,s){const o=`${e}${n}?${s}`,u=r,h=u.config.emulator?Ep(r.config,o):`${r.config.apiScheme}://${o}`;return I2.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function D2(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class O2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Oi(this.auth,"network-request-failed")),N2.get())})}}function Wc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Oi(r,e,s);return o.customData._tokenResponse=n,o}function sv(r){return r!==void 0&&r.enterprise!==void 0}class M2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return D2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function V2(r,e){return ds(r,"GET","/v2/recaptchaConfig",aa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2(r,e){return ds(r,"POST","/v1/accounts:delete",e)}async function vh(r,e){return ds(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function L2(r,e=!1){const n=St(r),s=await n.getIdToken(e),o=Tp(s);ve(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:Fl(wm(o.auth_time)),issuedAtTime:Fl(wm(o.iat)),expirationTime:Fl(wm(o.exp)),signInProvider:h||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function wm(r){return Number(r)*1e3}function Tp(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return sh("JWT malformed, contained fewer than 3 sections"),null;try{const o=YE(n);return o?JSON.parse(o):(sh("Failed to decode base64 JWT payload"),null)}catch(o){return sh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function av(r){const e=Tp(r);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof mr&&P2(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function P2({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fl(this.lastLoginAt),this.creationTime=Fl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eh(r){var S;const e=r.auth,n=await r.getIdToken(),s=await Wl(r,vh(e,{idToken:n}));ve(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=(S=o.providerUserInfo)!=null&&S.length?fT(o.providerUserInfo):[],h=z2(r.providerData,u),m=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!(h!=null&&h.length),g=m?p:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new qm(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(r,E)}async function U2(r){const e=St(r);await Eh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function z2(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function fT(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2(r,e){const n=await cT(r,{},async()=>{const s=uu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,h=await hT(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return r.emulatorConfig&&Eo(r.emulatorConfig.host)&&(p.credentials="include"),uT.fetch()(h,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function q2(r,e){return ds(r,"POST","/v2/accounts:revokeToken",aa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):av(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const n=av(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await B2(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,h=new so;return s&&(ve(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(ve(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(ve(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new so,this.toJSON())}_performRefresh(){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(r,e){ve(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ri{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new j2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new qm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Wl(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return L2(this,e)}reload(){return U2(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ri({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Eh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ii(this.auth.app))return Promise.reject(is(this.auth));const e=await this.getIdToken();return await Wl(this,k2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,g=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:S,emailVerified:w,isAnonymous:D,providerData:V,stsTokenManager:j}=n;ve(S&&j,e,"internal-error");const U=so.fromJSON(this.name,j);ve(typeof S=="string",e,"internal-error"),Yr(s,e.name),Yr(o,e.name),ve(typeof w=="boolean",e,"internal-error"),ve(typeof D=="boolean",e,"internal-error"),Yr(u,e.name),Yr(h,e.name),Yr(m,e.name),Yr(p,e.name),Yr(g,e.name),Yr(E,e.name);const G=new ri({uid:S,auth:e,email:o,emailVerified:w,displayName:s,isAnonymous:D,photoURL:h,phoneNumber:u,tenantId:m,stsTokenManager:U,createdAt:g,lastLoginAt:E});return V&&Array.isArray(V)&&(G.providerData=V.map(X=>({...X}))),p&&(G._redirectEventId=p),G}static async _fromIdTokenResponse(e,n,s=!1){const o=new so;o.updateFromServerResponse(n);const u=new ri({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Eh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];ve(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?fT(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new so;m.updateFromIdToken(s);const p=new ri({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new qm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=new Map;function sr(r){cr(r instanceof Function,"Expected a class definition");let e=ov.get(r);return e?(cr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,ov.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}dT.type="NONE";const lv=dT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(r,e,n){return`firebase:${r}:${e}:${n}`}class ao{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=ah(this.userKey,o.apiKey,u),this.fullPersistenceKey=ah("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await vh(this.auth,{idToken:e}).catch(()=>{});return n?ri._fromGetAccountInfoResponse(this.auth,n,e):null}return ri._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new ao(sr(lv),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||sr(lv);const h=ah(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const E=await g._get(h);if(E){let S;if(typeof E=="string"){const w=await vh(e,{idToken:E}).catch(()=>{});if(!w)break;S=await ri._fromGetAccountInfoResponse(e,w,E)}else S=ri._fromJSON(e,E);g!==u&&(m=S),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new ao(u,e,s):(u=p[0],m&&await u._set(h,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(h)}catch{}})),new ao(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vT(e))return"Blackberry";if(ET(e))return"Webos";if(pT(e))return"Safari";if((e.includes("chrome/")||gT(e))&&!e.includes("edge/"))return"Chrome";if(_T(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function mT(r=rn()){return/firefox\//i.test(r)}function pT(r=rn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gT(r=rn()){return/crios\//i.test(r)}function yT(r=rn()){return/iemobile/i.test(r)}function _T(r=rn()){return/android/i.test(r)}function vT(r=rn()){return/blackberry/i.test(r)}function ET(r=rn()){return/webos/i.test(r)}function Sp(r=rn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function H2(r=rn()){var e;return Sp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function F2(){return rx()&&document.documentMode===10}function TT(r=rn()){return Sp(r)||_T(r)||ET(r)||vT(r)||/windows phone/i.test(r)||yT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(r,e=[]){let n;switch(r){case"Browser":n=uv(rn());break;case"Worker":n=`${uv(rn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${To}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((h,m)=>{try{const p=e(u);h(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q2(r,e={}){return ds(r,"GET","/v2/passwordPolicy",aa(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=6;class Y2{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??K2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cv(this),this.idTokenSubscription=new cv(this),this.beforeStateQueue=new G2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=sr(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await ao.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await vh(this,{idToken:e}),s=await ri._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(ii(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(u=this.redirectUser)==null?void 0:u._redirectEventId,m=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===m)&&(p!=null&&p.user)&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(h){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Eh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=R2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ii(this.app))return Promise.reject(is(this));const n=e?St(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ii(this.app)?Promise.reject(is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ii(this.app)?Promise.reject(is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Q2(this),n=new Y2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await q2(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&sr(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=await ao.create(this,[sr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(n);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ST(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(ii(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&w2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function So(r){return St(r)}class cv{constructor(e){this.auth=e,this.observer=null,this.addObserver=fx(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function X2(r){Bh=r}function bT(r){return Bh.loadJS(r)}function W2(){return Bh.recaptchaEnterpriseScript}function J2(){return Bh.gapiScript}function Z2(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class eR{constructor(){this.enterprise=new tR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class tR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const nR="recaptcha-enterprise",wT="NO_RECAPTCHA";class iR{constructor(e){this.type=nR,this.auth=So(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,m)=>{V2(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new M2(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,h(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,h,m){const p=window.grecaptcha;sv(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{h(g)}).catch(()=>{h(wT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eR().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{s(this.auth).then(m=>{if(!n&&sv(window.grecaptcha))o(m,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=W2();p.length!==0&&(p+=m),bT(p).then(()=>{o(m,u,h)}).catch(g=>{h(g)})}}).catch(m=>{h(m)})})}}async function hv(r,e,n,s=!1,o=!1){const u=new iR(r);let h;if(o)h=wT;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function fv(r,e,n,s,o){var u;if((u=r._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await hv(r,e,n,n==="getOobCode");return s(r,h)}else return s(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await hv(r,e,n,n==="getOobCode");return s(r,m)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(r,e){const n=_p(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ea(u,e??{}))return o;si(o,"already-initialized")}return n.initialize({options:e})}function sR(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(sr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function aR(r,e,n){const s=So(r);ve(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=AT(e),{host:h,port:m}=oR(e),p=m===null?"":`:${m}`,g={url:`${u}//${h}${p}/`},E=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){ve(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ve(ea(g,s.config.emulator)&&ea(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,Eo(h)?(JE(`${u}//${h}${p}`),ZE("Auth",!0)):lR()}function AT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function oR(r){const e=AT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:dv(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:dv(h)}}}function dv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function lR(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,n){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}}async function uR(r,e){return ds(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(r,e){return zh(r,"POST","/v1/accounts:signInWithPassword",aa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(r,e){return zh(r,"POST","/v1/accounts:signInWithEmailLink",aa(r,e))}async function fR(r,e){return zh(r,"POST","/v1/accounts:signInWithEmailLink",aa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends bp{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Jl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Jl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fv(e,n,"signInWithPassword",cR);case"emailLink":return hR(e,{email:this._email,oobCode:this._password});default:si(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fv(e,s,"signUpPassword",uR);case"emailLink":return fR(e,{idToken:n,email:this._email,oobCode:this._password});default:si(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(r,e){return zh(r,"POST","/v1/accounts:signInWithIdp",aa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="http://localhost";class na extends bp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new na(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):si("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const h=new na(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return oo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,oo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,oo(e,n)}buildRequest(){const e={requestUri:dR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=uu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pR(r){const e=Pl(jl(r)).link,n=e?Pl(jl(e)).deep_link_id:null,s=Pl(jl(r)).deep_link_id;return(s?Pl(jl(s)).link:null)||s||n||e||r}class wp{constructor(e){const n=Pl(jl(e)),s=n.apiKey??null,o=n.oobCode??null,u=mR(n.mode??null);ve(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=pR(e);try{return new wp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.providerId=bo.PROVIDER_ID}static credential(e,n){return Jl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=wp.parseLink(n);return ve(s,"argument-error"),Jl._fromEmailAndCode(e,s.code,s.tenantId)}}bo.PROVIDER_ID="password";bo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends xT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends hu{constructor(){super("facebook.com")}static credential(e){return na._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.FACEBOOK_SIGN_IN_METHOD="facebook.com";$r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends hu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return na._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Xr.credential(n,s)}catch{return null}}}Xr.GOOGLE_SIGN_IN_METHOD="google.com";Xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends hu{constructor(){super("github.com")}static credential(e){return na._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.GITHUB_SIGN_IN_METHOD="github.com";Wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends hu{constructor(){super("twitter.com")}static credential(e,n){return na._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Jr.credential(n,s)}catch{return null}}}Jr.TWITTER_SIGN_IN_METHOD="twitter.com";Jr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await ri._fromIdTokenResponse(e,s,o),h=mv(s);return new co({user:u,providerId:h,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=mv(s);return new co({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function mv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th extends mr{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Th.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Th(e,n,s,o)}}function RT(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Th._fromErrorAndOperation(r,u,e,s):u})}async function gR(r,e,n=!1){const s=await Wl(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return co._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR(r,e,n=!1){const{auth:s}=r;if(ii(s.app))return Promise.reject(is(s));const o="reauthenticate";try{const u=await Wl(r,RT(s,o,e,r),n);ve(u.idToken,s,"internal-error");const h=Tp(u.idToken);ve(h,s,"internal-error");const{sub:m}=h;return ve(r.uid===m,s,"user-mismatch"),co._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&si(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CT(r,e,n=!1){if(ii(r.app))return Promise.reject(is(r));const s="signIn",o=await RT(r,s,e),u=await co._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function _R(r,e){return CT(So(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(r){const e=So(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function ER(r,e,n){return ii(r.app)?Promise.reject(is(r)):_R(St(r),bo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&vR(r),s})}function TR(r,e,n,s){return St(r).onIdTokenChanged(e,n,s)}function SR(r,e,n){return St(r).beforeAuthStateChanged(e,n)}function bR(r,e,n,s){return St(r).onAuthStateChanged(e,n,s)}function wR(r){return St(r).signOut()}const Sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sh,"1"),this.storage.removeItem(Sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=1e3,xR=10;class NT extends IT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,m,p)=>{this.notifyListeners(h,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!n&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);F2()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,xR):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},AR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NT.type="LOCAL";const RR=NT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT extends IT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}DT.type="SESSION";const OT=DT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new qh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(h).map(async g=>g(n.origin,u)),p=await CR(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,p)=>{const g=Ap("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(S){const w=S;if(w.data.eventId===g)switch(w.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(w.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(){return window}function NR(r){Mi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(){return typeof Mi().WorkerGlobalScope<"u"&&typeof Mi().importScripts=="function"}async function DR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OR(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function MR(){return MT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="firebaseLocalStorageDb",VR=1,bh="firebaseLocalStorage",kT="fbase_key";class fu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hh(r,e){return r.transaction([bh],e?"readwrite":"readonly").objectStore(bh)}function kR(){const r=indexedDB.deleteDatabase(VT);return new fu(r).toPromise()}function Hm(){const r=indexedDB.open(VT,VR);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(bh,{keyPath:kT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(bh)?e(s):(s.close(),await kR(),e(await Hm()))})})}async function pv(r,e,n){const s=Hh(r,!0).put({[kT]:e,value:n});return new fu(s).toPromise()}async function LR(r,e){const n=Hh(r,!1).get(e),s=await new fu(n).toPromise();return s===void 0?null:s.value}function gv(r,e){const n=Hh(r,!0).delete(e);return new fu(n).toPromise()}const PR=800,jR=3;class LT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>jR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qh._getInstance(MR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await DR(),!this.activeServiceWorker)return;this.sender=new IR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hm();return await pv(e,Sh,"1"),await gv(e,Sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>pv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>LR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>gv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Hh(o,!1).getAll();return new fu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LT.type="LOCAL";const UR=LT;new cu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(r,e){return e?sr(e):(ve(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp extends bp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return oo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BR(r){return CT(r.auth,new xp(r),r.bypassAuthState)}function qR(r){const{auth:e,user:n}=r;return ve(n,e,"internal-error"),yR(n,new xp(r),r.bypassAuthState)}async function HR(r){const{auth:e,user:n}=r;return ve(n,e,"internal-error"),gR(n,new xp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BR;case"linkViaPopup":case"linkViaRedirect":return HR;case"reauthViaPopup":case"reauthViaRedirect":return qR;default:si(this.auth,"internal-error")}}resolve(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=new cu(2e3,1e4);class ro extends PT{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,ro.currentPopupAction&&ro.currentPopupAction.cancel(),ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){cr(this.filter.length===1,"Popup operations only handle one event");const e=Ap();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FR.get())};e()}}ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="pendingRedirect",oh=new Map;class QR extends PT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=oh.get(this.auth._key());if(!e){try{const s=await KR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}oh.set(this.auth._key(),e)}return this.bypassAuthState||oh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KR(r,e){const n=XR(e),s=$R(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function YR(r,e){oh.set(r._key(),e)}function $R(r){return sr(r._redirectPersistence)}function XR(r){return ah(GR,r.config.apiKey,r.name)}async function WR(r,e,n=!1){if(ii(r.app))return Promise.reject(is(r));const s=So(r),o=zR(s,e),h=await new QR(s,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=600*1e3;class ZR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!jT(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(Oi(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JR&&this.cachedEventUids.clear(),this.cachedEventUids.has(yv(e))}saveEventToCache(e){this.cachedEventUids.add(yv(e)),this.lastProcessedEventTime=Date.now()}}function yv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function jT({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tC(r,e={}){return ds(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iC=/^https?/;async function rC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await tC(r);for(const n of e)try{if(sC(n))return}catch{}si(r,"unauthorized-domain")}function sC(r){const e=Bm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===s}if(!iC.test(n))return!1;if(nC.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=new cu(3e4,6e4);function _v(){const r=Mi().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function oC(r){return new Promise((e,n)=>{var o,u,h;function s(){_v(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_v(),n(Oi(r,"network-request-failed"))},timeout:aC.get()})}if((u=(o=Mi().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((h=Mi().gapi)!=null&&h.load)s();else{const m=Z2("iframefcb");return Mi()[m]=()=>{gapi.load?s():n(Oi(r,"network-request-failed"))},bT(`${J2()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw lh=null,e})}let lh=null;function lC(r){return lh=lh||oC(r),lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=new cu(5e3,15e3),cC="__/auth/iframe",hC="emulator/auth/iframe",fC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mC(r){const e=r.config;ve(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Ep(e,hC):`https://${r.config.authDomain}/${cC}`,s={apiKey:e.apiKey,appName:r.name,v:To},o=dC.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${uu(s).slice(1)}`}async function pC(r){const e=await lC(r),n=Mi().gapi;return ve(n,r,"internal-error"),e.open({where:document.body,url:mC(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fC,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=Oi(r,"network-request-failed"),m=Mi().setTimeout(()=>{u(h)},uC.get());function p(){Mi().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yC=500,_C=600,vC="_blank",EC="http://localhost";class vv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TC(r,e,n,s=yC,o=_C){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...gC,width:s.toString(),height:o.toString(),top:u,left:h},g=rn().toLowerCase();n&&(m=gT(g)?vC:n),mT(g)&&(e=e||EC,p.scrollbars="yes");const E=Object.entries(p).reduce((w,[D,V])=>`${w}${D}=${V},`,"");if(H2(g)&&m!=="_self")return SC(e||"",m),new vv(null);const S=window.open(e||"",m,E);ve(S,r,"popup-blocked");try{S.focus()}catch{}return new vv(S)}function SC(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="__/auth/handler",wC="emulator/auth/handler",AC=encodeURIComponent("fac");async function Ev(r,e,n,s,o,u){ve(r.config.authDomain,r,"auth-domain-config-required"),ve(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:To,eventId:o};if(e instanceof xT){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",hx(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,S]of Object.entries({}))h[E]=S}if(e instanceof hu){const E=e.getScopes().filter(S=>S!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await r._getAppCheckToken(),g=p?`#${AC}=${encodeURIComponent(p)}`:"";return`${xC(r)}?${uu(m).slice(1)}${g}`}function xC({config:r}){return r.emulator?Ep(r,wC):`https://${r.authDomain}/${bC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="webStorageSupport";class RC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OT,this._completeRedirectFn=WR,this._overrideRedirectResult=YR}async _openPopup(e,n,s,o){var h;cr((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const u=await Ev(e,n,s,Bm(),o);return TC(e,u,Ap())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await Ev(e,n,s,Bm(),o);return NR(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(cr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await pC(e),s=new ZR(e);return n.register("authEvent",o=>(ve(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Am,{type:Am},o=>{var h;const u=(h=o==null?void 0:o[0])==null?void 0:h[Am];u!==void 0&&n(!!u),si(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return TT()||pT()||Sp()}}const CC=RC;var Tv="@firebase/auth",Sv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DC(r){uo(new ta("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=s.options;ve(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ST(r)},g=new $2(s,o,u,p);return sR(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),uo(new ta("auth-internal",e=>{const n=So(e.getProvider("auth").getImmediate());return(s=>new IC(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ns(Tv,Sv,NC(r)),ns(Tv,Sv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=300,MC=WE("authIdTokenMaxAge")||OC;let bv=null;const VC=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>MC)return;const o=n==null?void 0:n.token;bv!==o&&(bv=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function kC(r=iT()){const e=_p(r,"auth");if(e.isInitialized())return e.getImmediate();const n=rR(r,{popupRedirectResolver:CC,persistence:[UR,RR,OT]}),s=WE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=VC(u.toString());SR(n,h,()=>h(n.currentUser)),TR(n,m=>h(m))}}const o=$E("auth");return o&&aR(n,`http://${o}`),n}function LC(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}X2({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=Oi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",LC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DC("Browser");var wv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rs,UT;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,x){function C(){}C.prototype=x.prototype,I.F=x.prototype,I.prototype=new C,I.prototype.constructor=I,I.D=function(M,O,z){for(var R=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)R[Be-2]=arguments[Be];return x.prototype[O].apply(M,R)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,x,C){C||(C=0);const M=Array(16);if(typeof x=="string")for(var O=0;O<16;++O)M[O]=x.charCodeAt(C++)|x.charCodeAt(C++)<<8|x.charCodeAt(C++)<<16|x.charCodeAt(C++)<<24;else for(O=0;O<16;++O)M[O]=x[C++]|x[C++]<<8|x[C++]<<16|x[C++]<<24;x=I.g[0],C=I.g[1],O=I.g[2];let z=I.g[3],R;R=x+(z^C&(O^z))+M[0]+3614090360&4294967295,x=C+(R<<7&4294967295|R>>>25),R=z+(O^x&(C^O))+M[1]+3905402710&4294967295,z=x+(R<<12&4294967295|R>>>20),R=O+(C^z&(x^C))+M[2]+606105819&4294967295,O=z+(R<<17&4294967295|R>>>15),R=C+(x^O&(z^x))+M[3]+3250441966&4294967295,C=O+(R<<22&4294967295|R>>>10),R=x+(z^C&(O^z))+M[4]+4118548399&4294967295,x=C+(R<<7&4294967295|R>>>25),R=z+(O^x&(C^O))+M[5]+1200080426&4294967295,z=x+(R<<12&4294967295|R>>>20),R=O+(C^z&(x^C))+M[6]+2821735955&4294967295,O=z+(R<<17&4294967295|R>>>15),R=C+(x^O&(z^x))+M[7]+4249261313&4294967295,C=O+(R<<22&4294967295|R>>>10),R=x+(z^C&(O^z))+M[8]+1770035416&4294967295,x=C+(R<<7&4294967295|R>>>25),R=z+(O^x&(C^O))+M[9]+2336552879&4294967295,z=x+(R<<12&4294967295|R>>>20),R=O+(C^z&(x^C))+M[10]+4294925233&4294967295,O=z+(R<<17&4294967295|R>>>15),R=C+(x^O&(z^x))+M[11]+2304563134&4294967295,C=O+(R<<22&4294967295|R>>>10),R=x+(z^C&(O^z))+M[12]+1804603682&4294967295,x=C+(R<<7&4294967295|R>>>25),R=z+(O^x&(C^O))+M[13]+4254626195&4294967295,z=x+(R<<12&4294967295|R>>>20),R=O+(C^z&(x^C))+M[14]+2792965006&4294967295,O=z+(R<<17&4294967295|R>>>15),R=C+(x^O&(z^x))+M[15]+1236535329&4294967295,C=O+(R<<22&4294967295|R>>>10),R=x+(O^z&(C^O))+M[1]+4129170786&4294967295,x=C+(R<<5&4294967295|R>>>27),R=z+(C^O&(x^C))+M[6]+3225465664&4294967295,z=x+(R<<9&4294967295|R>>>23),R=O+(x^C&(z^x))+M[11]+643717713&4294967295,O=z+(R<<14&4294967295|R>>>18),R=C+(z^x&(O^z))+M[0]+3921069994&4294967295,C=O+(R<<20&4294967295|R>>>12),R=x+(O^z&(C^O))+M[5]+3593408605&4294967295,x=C+(R<<5&4294967295|R>>>27),R=z+(C^O&(x^C))+M[10]+38016083&4294967295,z=x+(R<<9&4294967295|R>>>23),R=O+(x^C&(z^x))+M[15]+3634488961&4294967295,O=z+(R<<14&4294967295|R>>>18),R=C+(z^x&(O^z))+M[4]+3889429448&4294967295,C=O+(R<<20&4294967295|R>>>12),R=x+(O^z&(C^O))+M[9]+568446438&4294967295,x=C+(R<<5&4294967295|R>>>27),R=z+(C^O&(x^C))+M[14]+3275163606&4294967295,z=x+(R<<9&4294967295|R>>>23),R=O+(x^C&(z^x))+M[3]+4107603335&4294967295,O=z+(R<<14&4294967295|R>>>18),R=C+(z^x&(O^z))+M[8]+1163531501&4294967295,C=O+(R<<20&4294967295|R>>>12),R=x+(O^z&(C^O))+M[13]+2850285829&4294967295,x=C+(R<<5&4294967295|R>>>27),R=z+(C^O&(x^C))+M[2]+4243563512&4294967295,z=x+(R<<9&4294967295|R>>>23),R=O+(x^C&(z^x))+M[7]+1735328473&4294967295,O=z+(R<<14&4294967295|R>>>18),R=C+(z^x&(O^z))+M[12]+2368359562&4294967295,C=O+(R<<20&4294967295|R>>>12),R=x+(C^O^z)+M[5]+4294588738&4294967295,x=C+(R<<4&4294967295|R>>>28),R=z+(x^C^O)+M[8]+2272392833&4294967295,z=x+(R<<11&4294967295|R>>>21),R=O+(z^x^C)+M[11]+1839030562&4294967295,O=z+(R<<16&4294967295|R>>>16),R=C+(O^z^x)+M[14]+4259657740&4294967295,C=O+(R<<23&4294967295|R>>>9),R=x+(C^O^z)+M[1]+2763975236&4294967295,x=C+(R<<4&4294967295|R>>>28),R=z+(x^C^O)+M[4]+1272893353&4294967295,z=x+(R<<11&4294967295|R>>>21),R=O+(z^x^C)+M[7]+4139469664&4294967295,O=z+(R<<16&4294967295|R>>>16),R=C+(O^z^x)+M[10]+3200236656&4294967295,C=O+(R<<23&4294967295|R>>>9),R=x+(C^O^z)+M[13]+681279174&4294967295,x=C+(R<<4&4294967295|R>>>28),R=z+(x^C^O)+M[0]+3936430074&4294967295,z=x+(R<<11&4294967295|R>>>21),R=O+(z^x^C)+M[3]+3572445317&4294967295,O=z+(R<<16&4294967295|R>>>16),R=C+(O^z^x)+M[6]+76029189&4294967295,C=O+(R<<23&4294967295|R>>>9),R=x+(C^O^z)+M[9]+3654602809&4294967295,x=C+(R<<4&4294967295|R>>>28),R=z+(x^C^O)+M[12]+3873151461&4294967295,z=x+(R<<11&4294967295|R>>>21),R=O+(z^x^C)+M[15]+530742520&4294967295,O=z+(R<<16&4294967295|R>>>16),R=C+(O^z^x)+M[2]+3299628645&4294967295,C=O+(R<<23&4294967295|R>>>9),R=x+(O^(C|~z))+M[0]+4096336452&4294967295,x=C+(R<<6&4294967295|R>>>26),R=z+(C^(x|~O))+M[7]+1126891415&4294967295,z=x+(R<<10&4294967295|R>>>22),R=O+(x^(z|~C))+M[14]+2878612391&4294967295,O=z+(R<<15&4294967295|R>>>17),R=C+(z^(O|~x))+M[5]+4237533241&4294967295,C=O+(R<<21&4294967295|R>>>11),R=x+(O^(C|~z))+M[12]+1700485571&4294967295,x=C+(R<<6&4294967295|R>>>26),R=z+(C^(x|~O))+M[3]+2399980690&4294967295,z=x+(R<<10&4294967295|R>>>22),R=O+(x^(z|~C))+M[10]+4293915773&4294967295,O=z+(R<<15&4294967295|R>>>17),R=C+(z^(O|~x))+M[1]+2240044497&4294967295,C=O+(R<<21&4294967295|R>>>11),R=x+(O^(C|~z))+M[8]+1873313359&4294967295,x=C+(R<<6&4294967295|R>>>26),R=z+(C^(x|~O))+M[15]+4264355552&4294967295,z=x+(R<<10&4294967295|R>>>22),R=O+(x^(z|~C))+M[6]+2734768916&4294967295,O=z+(R<<15&4294967295|R>>>17),R=C+(z^(O|~x))+M[13]+1309151649&4294967295,C=O+(R<<21&4294967295|R>>>11),R=x+(O^(C|~z))+M[4]+4149444226&4294967295,x=C+(R<<6&4294967295|R>>>26),R=z+(C^(x|~O))+M[11]+3174756917&4294967295,z=x+(R<<10&4294967295|R>>>22),R=O+(x^(z|~C))+M[2]+718787259&4294967295,O=z+(R<<15&4294967295|R>>>17),R=C+(z^(O|~x))+M[9]+3951481745&4294967295,I.g[0]=I.g[0]+x&4294967295,I.g[1]=I.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+O&4294967295,I.g[3]=I.g[3]+z&4294967295}s.prototype.v=function(I,x){x===void 0&&(x=I.length);const C=x-this.blockSize,M=this.C;let O=this.h,z=0;for(;z<x;){if(O==0)for(;z<=C;)o(this,I,z),z+=this.blockSize;if(typeof I=="string"){for(;z<x;)if(M[O++]=I.charCodeAt(z++),O==this.blockSize){o(this,M),O=0;break}}else for(;z<x;)if(M[O++]=I[z++],O==this.blockSize){o(this,M),O=0;break}}this.h=O,this.o+=x},s.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var x=1;x<I.length-8;++x)I[x]=0;x=this.o*8;for(var C=I.length-8;C<I.length;++C)I[C]=x&255,x/=256;for(this.v(I),I=Array(16),x=0,C=0;C<4;++C)for(let M=0;M<32;M+=8)I[x++]=this.g[C]>>>M&255;return I};function u(I,x){var C=m;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=x(I)}function h(I,x){this.h=x;const C=[];let M=!0;for(let O=I.length-1;O>=0;O--){const z=I[O]|0;M&&z==x||(C[O]=z,M=!1)}this.g=C}var m={};function p(I){return-128<=I&&I<128?u(I,function(x){return new h([x|0],x<0?-1:0)}):new h([I|0],I<0?-1:0)}function g(I){if(isNaN(I)||!isFinite(I))return S;if(I<0)return U(g(-I));const x=[];let C=1;for(let M=0;I>=C;M++)x[M]=I/C|0,C*=4294967296;return new h(x,0)}function E(I,x){if(I.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(I.charAt(0)=="-")return U(E(I.substring(1),x));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=g(Math.pow(x,8));let M=S;for(let z=0;z<I.length;z+=8){var O=Math.min(8,I.length-z);const R=parseInt(I.substring(z,z+O),x);O<8?(O=g(Math.pow(x,O)),M=M.j(O).add(g(R))):(M=M.j(C),M=M.add(g(R)))}return M}var S=p(0),w=p(1),D=p(16777216);r=h.prototype,r.m=function(){if(j(this))return-U(this).m();let I=0,x=1;for(let C=0;C<this.g.length;C++){const M=this.i(C);I+=(M>=0?M:4294967296+M)*x,x*=4294967296}return I},r.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(V(this))return"0";if(j(this))return"-"+U(this).toString(I);const x=g(Math.pow(I,6));var C=this;let M="";for(;;){const O=se(C,x).g;C=G(C,O.j(x));let z=((C.g.length>0?C.g[0]:C.h)>>>0).toString(I);if(C=O,V(C))return z+M;for(;z.length<6;)z="0"+z;M=z+M}},r.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function V(I){if(I.h!=0)return!1;for(let x=0;x<I.g.length;x++)if(I.g[x]!=0)return!1;return!0}function j(I){return I.h==-1}r.l=function(I){return I=G(this,I),j(I)?-1:V(I)?0:1};function U(I){const x=I.g.length,C=[];for(let M=0;M<x;M++)C[M]=~I.g[M];return new h(C,~I.h).add(w)}r.abs=function(){return j(this)?U(this):this},r.add=function(I){const x=Math.max(this.g.length,I.g.length),C=[];let M=0;for(let O=0;O<=x;O++){let z=M+(this.i(O)&65535)+(I.i(O)&65535),R=(z>>>16)+(this.i(O)>>>16)+(I.i(O)>>>16);M=R>>>16,z&=65535,R&=65535,C[O]=R<<16|z}return new h(C,C[C.length-1]&-2147483648?-1:0)};function G(I,x){return I.add(U(x))}r.j=function(I){if(V(this)||V(I))return S;if(j(this))return j(I)?U(this).j(U(I)):U(U(this).j(I));if(j(I))return U(this.j(U(I)));if(this.l(D)<0&&I.l(D)<0)return g(this.m()*I.m());const x=this.g.length+I.g.length,C=[];for(var M=0;M<2*x;M++)C[M]=0;for(M=0;M<this.g.length;M++)for(let O=0;O<I.g.length;O++){const z=this.i(M)>>>16,R=this.i(M)&65535,Be=I.i(O)>>>16,Ke=I.i(O)&65535;C[2*M+2*O]+=R*Ke,X(C,2*M+2*O),C[2*M+2*O+1]+=z*Ke,X(C,2*M+2*O+1),C[2*M+2*O+1]+=R*Be,X(C,2*M+2*O+1),C[2*M+2*O+2]+=z*Be,X(C,2*M+2*O+2)}for(I=0;I<x;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=x;I<2*x;I++)C[I]=0;return new h(C,0)};function X(I,x){for(;(I[x]&65535)!=I[x];)I[x+1]+=I[x]>>>16,I[x]&=65535,x++}function $(I,x){this.g=I,this.h=x}function se(I,x){if(V(x))throw Error("division by zero");if(V(I))return new $(S,S);if(j(I))return x=se(U(I),x),new $(U(x.g),U(x.h));if(j(x))return x=se(I,U(x)),new $(U(x.g),x.h);if(I.g.length>30){if(j(I)||j(x))throw Error("slowDivide_ only works with positive integers.");for(var C=w,M=x;M.l(I)<=0;)C=ye(C),M=ye(M);var O=pe(C,1),z=pe(M,1);for(M=pe(M,2),C=pe(C,2);!V(M);){var R=z.add(M);R.l(I)<=0&&(O=O.add(C),z=R),M=pe(M,1),C=pe(C,1)}return x=G(I,O.j(x)),new $(O,x)}for(O=S;I.l(x)>=0;){for(C=Math.max(1,Math.floor(I.m()/x.m())),M=Math.ceil(Math.log(C)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),z=g(C),R=z.j(x);j(R)||R.l(I)>0;)C-=M,z=g(C),R=z.j(x);V(z)&&(z=w),O=O.add(z),I=G(I,R)}return new $(O,I)}r.B=function(I){return se(this,I).h},r.and=function(I){const x=Math.max(this.g.length,I.g.length),C=[];for(let M=0;M<x;M++)C[M]=this.i(M)&I.i(M);return new h(C,this.h&I.h)},r.or=function(I){const x=Math.max(this.g.length,I.g.length),C=[];for(let M=0;M<x;M++)C[M]=this.i(M)|I.i(M);return new h(C,this.h|I.h)},r.xor=function(I){const x=Math.max(this.g.length,I.g.length),C=[];for(let M=0;M<x;M++)C[M]=this.i(M)^I.i(M);return new h(C,this.h^I.h)};function ye(I){const x=I.g.length+1,C=[];for(let M=0;M<x;M++)C[M]=I.i(M)<<1|I.i(M-1)>>>31;return new h(C,I.h)}function pe(I,x){const C=x>>5;x%=32;const M=I.g.length-C,O=[];for(let z=0;z<M;z++)O[z]=x>0?I.i(z+C)>>>x|I.i(z+C+1)<<32-x:I.i(z+C);return new h(O,I.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,UT=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=E,rs=h}).apply(typeof wv<"u"?wv:typeof self<"u"?self:typeof window<"u"?window:{});var Jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zT,Ul,BT,uh,Fm,qT,HT,FT;(function(){var r,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jc=="object"&&Jc];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var v=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var q=c[A];if(!(q in v))break e;v=v[q]}c=c[c.length-1],A=v[c],y=y(A),y!=A&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var v=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&v.push([A,y[A]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function m(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function p(c,y,v){return c.call.apply(c.bind,arguments)}function g(c,y,v){return g=p,g.apply(null,arguments)}function E(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function S(c,y){function v(){}v.prototype=y.prototype,c.Z=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(A,q,K){for(var re=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)re[Ae-2]=arguments[Ae];return y.prototype[q].apply(A,re)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function D(c){const y=c.length;if(y>0){const v=Array(y);for(let A=0;A<y;A++)v[A]=c[A];return v}return[]}function V(c,y){for(let A=1;A<arguments.length;A++){const q=arguments[A];var v=typeof q;if(v=v!="object"?v:q?Array.isArray(q)?"array":v:"null",v=="array"||v=="object"&&typeof q.length=="number"){v=c.length||0;const K=q.length||0;c.length=v+K;for(let re=0;re<K;re++)c[v+re]=q[re]}else c.push(q)}}class j{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function U(c){h.setTimeout(()=>{throw c},0)}function G(){var c=I;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class X{constructor(){this.h=this.g=null}add(y,v){const A=$.get();A.set(y,v),this.h?this.h.next=A:this.g=A,this.h=A}}var $=new j(()=>new se,c=>c.reset());class se{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,pe=!1,I=new X,x=()=>{const c=Promise.resolve(void 0);ye=()=>{c.then(C)}};function C(){for(var c;c=G();){try{c.h.call(c.g)}catch(v){U(v)}var y=$;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}pe=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};h.addEventListener("test",v,y),h.removeEventListener("test",v,y)}catch{}return c})();function R(c){return/^[\s\xa0]*$/.test(c)}function Be(c,y){O.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}S(Be,O),Be.prototype.init=function(c,y){const v=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Be.Z.h.call(this)},Be.prototype.h=function(){Be.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ke="closure_listenable_"+(Math.random()*1e6|0),J=0;function ae(c,y,v,A,q){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!A,this.ha=q,this.key=++J,this.da=this.fa=!1}function ge(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ze(c,y,v){for(const A in c)y.call(v,c[A],A,c)}function $e(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function P(c){const y={};for(const v in c)y[v]=c[v];return y}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(c,y){let v,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(v in A)c[v]=A[v];for(let K=0;K<ne.length;K++)v=ne[K],Object.prototype.hasOwnProperty.call(A,v)&&(c[v]=A[v])}}function ce(c){this.src=c,this.g={},this.h=0}ce.prototype.add=function(c,y,v,A,q){const K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);const re=Re(c,y,A,q);return re>-1?(y=c[re],v||(y.fa=!1)):(y=new ae(y,this.src,K,!!A,q),y.fa=v,c.push(y)),y};function Te(c,y){const v=y.type;if(v in c.g){var A=c.g[v],q=Array.prototype.indexOf.call(A,y,void 0),K;(K=q>=0)&&Array.prototype.splice.call(A,q,1),K&&(ge(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Re(c,y,v,A){for(let q=0;q<c.length;++q){const K=c[q];if(!K.da&&K.listener==y&&K.capture==!!v&&K.ha==A)return q}return-1}var je="closure_lm_"+(Math.random()*1e6|0),kt={};function lt(c,y,v,A,q){if(Array.isArray(y)){for(let K=0;K<y.length;K++)lt(c,y[K],v,A,q);return null}return v=Oo(v),c&&c[Ke]?c.J(y,v,m(A)?!!A.capture:!1,q):ys(c,y,v,!1,A,q)}function ys(c,y,v,A,q,K){if(!y)throw Error("Invalid event type");const re=m(q)?!!q.capture:!!q;let Ae=_s(c);if(Ae||(c[je]=Ae=new ce(c)),v=Ae.add(y,v,A,re,K),v.proxy)return v;if(A=ca(),v.proxy=A,A.src=c,A.listener=v,c.addEventListener)z||(q=re),q===void 0&&(q=!1),c.addEventListener(y.toString(),A,q);else if(c.attachEvent)c.attachEvent(ui(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ca(){function c(v){return y.call(c.src,c.listener,v)}const y=No;return c}function ha(c,y,v,A,q){if(Array.isArray(y))for(var K=0;K<y.length;K++)ha(c,y[K],v,A,q);else A=m(A)?!!A.capture:!!A,v=Oo(v),c&&c[Ke]?(c=c.i,K=String(y).toString(),K in c.g&&(y=c.g[K],v=Re(y,v,A,q),v>-1&&(ge(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete c.g[K],c.h--)))):c&&(c=_s(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Re(y,v,A,q)),(v=c>-1?y[c]:null)&&fa(v))}function fa(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Ke])Te(y.i,c);else{var v=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(v,A,c.capture):y.detachEvent?y.detachEvent(ui(v),A):y.addListener&&y.removeListener&&y.removeListener(A),(v=_s(y))?(Te(v,c),v.h==0&&(v.src=null,y[je]=null)):ge(c)}}}function ui(c){return c in kt?kt[c]:kt[c]="on"+c}function No(c,y){if(c.da)c=!0;else{y=new Be(y,this);const v=c.listener,A=c.ha||c.src;c.fa&&fa(c),c=v.call(A,y)}return c}function _s(c){return c=c[je],c instanceof ce?c:null}var Do="__closure_events_fn_"+(Math.random()*1e9>>>0);function Oo(c){return typeof c=="function"?c:(c[Do]||(c[Do]=function(y){return c.handleEvent(y)}),c[Do])}function bt(){M.call(this),this.i=new ce(this),this.M=this,this.G=null}S(bt,M),bt.prototype[Ke]=!0,bt.prototype.removeEventListener=function(c,y,v,A){ha(this,c,y,v,A)};function Lt(c,y){var v,A=c.G;if(A)for(v=[];A;A=A.G)v.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new O(y,c);else if(y instanceof O)y.target=y.target||c;else{var q=y;y=new O(A,c),oe(y,q)}q=!0;let K,re;if(v)for(re=v.length-1;re>=0;re--)K=y.g=v[re],q=pr(K,A,!0,y)&&q;if(K=y.g=c,q=pr(K,A,!0,y)&&q,q=pr(K,A,!1,y)&&q,v)for(re=0;re<v.length;re++)K=y.g=v[re],q=pr(K,A,!1,y)&&q}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const v=c.g[y];for(let A=0;A<v.length;A++)ge(v[A]);delete c.g[y],c.h--}}this.G=null},bt.prototype.J=function(c,y,v,A){return this.i.add(String(c),y,!1,v,A)},bt.prototype.K=function(c,y,v,A){return this.i.add(String(c),y,!0,v,A)};function pr(c,y,v,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let K=0;K<y.length;++K){const re=y[K];if(re&&!re.da&&re.capture==v){const Ae=re.listener,yt=re.ha||re.src;re.fa&&Te(c.i,re),q=Ae.call(yt,A)!==!1&&q}}return q&&!A.defaultPrevented}function df(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(c,y||0)}function Tu(c){c.g=df(()=>{c.g=null,c.i&&(c.i=!1,Tu(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class sn extends M{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Tu(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vs(c){M.call(this),this.h=c,this.g={}}S(vs,M);var Mo=[];function Vo(c){ze(c.g,function(y,v){this.g.hasOwnProperty(v)&&fa(y)},c),c.g={}}vs.prototype.N=function(){vs.Z.N.call(this),Vo(this)},vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gr=h.JSON.stringify,mf=h.JSON.parse,Su=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function bu(){}function wu(){}var Gn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ft(){O.call(this,"d")}S(Ft,O);function Nn(){O.call(this,"c")}S(Nn,O);var gt={},Au=null;function da(){return Au=Au||new bt}gt.Ia="serverreachability";function xu(c){O.call(this,gt.Ia,c)}S(xu,O);function ci(c){const y=da();Lt(y,new xu(y))}gt.STAT_EVENT="statevent";function Es(c,y){O.call(this,gt.STAT_EVENT,c),this.stat=y}S(Es,O);function wt(c){const y=da();Lt(y,new Es(y,c))}gt.Ja="timingevent";function hi(c,y){O.call(this,gt.Ja,c),this.size=y}S(hi,O);function fi(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function Qn(){this.g=!0}Qn.prototype.ua=function(){this.g=!1};function pf(c,y,v,A,q,K){c.info(function(){if(c.g)if(K){var re="",Ae=K.split("&");for(let Fe=0;Fe<Ae.length;Fe++){var yt=Ae[Fe].split("=");if(yt.length>1){const ut=yt[0];yt=yt[1];const Vn=ut.split("_");re=Vn.length>=2&&Vn[1]=="type"?re+(ut+"="+yt+"&"):re+(ut+"=redacted&")}}}else re=null;else re=K;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+y+`
`+v+`
`+re})}function Ru(c,y,v,A,q,K,re){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+y+`
`+v+`
`+K+" "+re})}function di(c,y,v,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+gf(c,v)+(A?" "+A:"")})}function Ts(c,y){c.info(function(){return"TIMEOUT: "+y})}Qn.prototype.info=function(){};function gf(c,y){if(!c.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(c=0;c<K.length;c++)if(Array.isArray(K[c])){var v=K[c];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var q=A[0];if(q!="noop"&&q!="stop"&&q!="close")for(let re=1;re<A.length;re++)A[re]=""}}}}return gr(K)}catch{return y}}var Ss={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ko={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Lo;function bs(){}S(bs,bu),bs.prototype.g=function(){return new XMLHttpRequest},Lo=new bs;function Ui(c){return encodeURIComponent(String(c))}function Cu(c){var y=1;c=c.split(":");const v=[];for(;y>0&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function Kn(c,y,v,A){this.j=c,this.i=y,this.l=v,this.S=A||1,this.V=new vs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Yn}function Yn(){this.i=null,this.g="",this.h=!1}var At={},Ut={};function mi(c,y,v){c.M=1,c.A=ws(Rt(y)),c.u=v,c.R=!0,ma(c,null)}function ma(c,y){c.F=Date.now(),pi(c),c.B=Rt(c.A);var v=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),_a(v.i,"t",A),c.C=0,v=c.j.L,c.h=new Yn,c.g=Hu(c.j,v?y:null,!c.u),c.P>0&&(c.O=new sn(g(c.Y,c,c.g),c.P)),y=c.V,v=c.g,A=c.ba;var q="readystatechange";Array.isArray(q)||(q&&(Mo[0]=q.toString()),q=Mo);for(let K=0;K<q.length;K++){const re=lt(v,q[K],A||y.handleEvent,!1,y.h||y);if(!re)break;y.g[re.key]=re}y=c.J?P(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),ci(),pf(c.i,c.v,c.B,c.l,c.S,c.u)}Kn.prototype.ba=function(c){c=c.target;const y=this.O;y&&Wn(c)==3?y.j():this.Y(c)},Kn.prototype.Y=function(c){try{if(c==this.g)e:{const Ae=Wn(this.g),yt=this.g.ya(),Fe=this.g.ca();if(!(Ae<3)&&(Ae!=3||this.g&&(this.h.h||this.g.la()||Gt(this.g)))){this.K||Ae!=4||yt==7||(yt==8||Fe<=0?ci(3):ci(2)),gi(this);var y=this.g.ca();this.X=y;var v=yf(this);if(this.o=y==200,Ru(this.i,this.v,this.B,this.l,this.S,Ae,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,q=this.g;if((A=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(A)){var K=A;break t}}K=null}if(c=K)di(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yi(this,c);else{this.o=!1,this.m=3,wt(12),vn(this),Dn(this);break e}}if(this.R){c=!0;let ut;for(;!this.K&&this.C<v.length;)if(ut=Nu(this,v),ut==Ut){Ae==4&&(this.m=4,wt(14),c=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==At){this.m=4,wt(15),di(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else di(this.i,this.l,ut,null),yi(this,ut);if(Iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ae!=4||v.length!=0||this.h.h||(this.m=1,wt(16),c=!1),this.o=this.o&&c,!c)di(this.i,this.l,v,"[Invalid Chunked Response]"),vn(this),Dn(this);else if(v.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Wo(re),re.P=!0,wt(11))}}else di(this.i,this.l,v,null),yi(this,v);Ae==4&&vn(this),this.o&&!this.K&&(Ae==4?Uu(this.j,this):(this.o=!1,pi(this)))}else Bi(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),vn(this),Dn(this)}}}catch{}finally{}};function yf(c){if(!Iu(c))return c.g.la();const y=Gt(c.g);if(y==="")return"";let v="";const A=y.length,q=Wn(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return vn(c),Dn(c),"";c.h.i=new h.TextDecoder}for(let K=0;K<A;K++)c.h.h=!0,v+=c.h.i.decode(y[K],{stream:!(q&&K==A-1)});return y.length=0,c.h.g+=v,c.C=0,c.h.g}function Iu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Nu(c,y){var v=c.C,A=y.indexOf(`
`,v);return A==-1?Ut:(v=Number(y.substring(v,A)),isNaN(v)?At:(A+=1,A+v>y.length?Ut:(y=y.slice(A,A+v),c.C=A+v,y)))}Kn.prototype.cancel=function(){this.K=!0,vn(this)};function pi(c){c.T=Date.now()+c.H,pa(c,c.H)}function pa(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=fi(g(c.aa,c),y)}function gi(c){c.D&&(h.clearTimeout(c.D),c.D=null)}Kn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Ts(this.i,this.B),this.M!=2&&(ci(),wt(17)),vn(this),this.m=2,Dn(this)):pa(this,this.T-c)};function Dn(c){c.j.I==0||c.K||Uu(c.j,c)}function vn(c){gi(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,Vo(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function yi(c,y){try{var v=c.j;if(v.I!=0&&(v.g==c||vi(v.h,c))){if(!c.L&&vi(v.h,c)&&v.I==3){try{var A=v.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)ba(v),wr(v);else break e;Ds(v),wt(18)}}else v.xa=q[1],0<v.xa-v.K&&q[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=fi(g(v.Va,v),6e3));_i(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ai(v,11)}else if((c.L||v.g==c)&&ba(v),!R(y))for(q=v.Ba.g.parse(y),y=0;y<q.length;y++){let Fe=q[y];const ut=Fe[0];if(!(ut<=v.K))if(v.K=ut,Fe=Fe[1],v.I==2)if(Fe[0]=="c"){v.M=Fe[1],v.ba=Fe[2];const Vn=Fe[3];Vn!=null&&(v.ka=Vn,v.j.info("VER="+v.ka));const xi=Fe[4];xi!=null&&(v.za=xi,v.j.info("SVER="+v.za));const Jn=Fe[5];Jn!=null&&typeof Jn=="number"&&Jn>0&&(A=1.5*Jn,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Zn=c.g;if(Zn){const Os=Zn.g?Zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Os){var K=A.h;K.g||Os.indexOf("spdy")==-1&&Os.indexOf("quic")==-1&&Os.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Uo(K,K.h),K.h=null))}if(A.G){const wa=Zn.g?Zn.g.getResponseHeader("X-HTTP-Session-Id"):null;wa&&(A.wa=wa,Xe(A.J,A.G,wa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var re=c;if(A.na=qu(A,A.L?A.ba:null,A.W),re.L){zo(A.h,re);var Ae=re,yt=A.O;yt&&(Ae.H=yt),Ae.D&&(gi(Ae),pi(Ae)),A.g=re}else Pu(A);v.i.length>0&&wi(v)}else Fe[0]!="stop"&&Fe[0]!="close"||Ai(v,7);else v.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Ai(v,7):$o(v):Fe[0]!="noop"&&v.l&&v.l.qa(Fe),v.A=0)}}ci(4)}catch{}}var xt=class{constructor(c,y){this.g=c,this.map=y}};function Po(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function _i(c){return c.h?1:c.g?c.g.size:0}function vi(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Uo(c,y){c.g?c.g.add(y):c.h=y}function zo(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Po.prototype.cancel=function(){if(this.i=Bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Bo(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.G);return y}return D(c.i)}var Du=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ga(c,y){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const A=c[v].indexOf("=");let q,K=null;A>=0?(q=c[v].substring(0,A),K=c[v].substring(A+1)):q=c[v],y(q,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function En(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof En?(this.l=c.l,zt(this,c.j),this.o=c.o,this.g=c.g,yr(this,c.u),this.h=c.h,qo(this,ku(c.i)),this.m=c.m):c&&(y=String(c).match(Du))?(this.l=!1,zt(this,y[1]||"",!0),this.o=Ei(y[2]||""),this.g=Ei(y[3]||"",!0),yr(this,y[4]),this.h=Ei(y[5]||"",!0),qo(this,y[6]||"",!0),this.m=Ei(y[7]||"")):(this.l=!1,this.i=new vr(null,this.l))}En.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(As(y,ya,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(As(y,ya,!0),"@"),c.push(Ui(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(As(v,v.charAt(0)=="/"?Ho:Ou,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",As(v,Mu)),c.join("")},En.prototype.resolve=function(c){const y=Rt(this);let v=!!c.j;v?zt(y,c.j):v=!!c.o,v?y.o=c.o:v=!!c.g,v?y.g=c.g:v=c.u!=null;var A=c.h;if(v)yr(y,c.u);else if(v=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var q=y.h.lastIndexOf("/");q!=-1&&(A=y.h.slice(0,q+1)+A)}if(q=A,q==".."||q==".")A="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){A=q.lastIndexOf("/",0)==0,q=q.split("/");const K=[];for(let re=0;re<q.length;){const Ae=q[re++];Ae=="."?A&&re==q.length&&K.push(""):Ae==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),A&&re==q.length&&K.push("")):(K.push(Ae),A=!0)}A=K.join("/")}else A=q}return v?y.h=A:v=c.i.toString()!=="",v?qo(y,ku(c.i)):v=!!c.m,v&&(y.m=c.m),y};function Rt(c){return new En(c)}function zt(c,y,v){c.j=v?Ei(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function yr(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function qo(c,y,v){y instanceof vr?(c.i=y,va(c.i,c.l)):(v||(y=As(y,_r)),c.i=new vr(y,c.l))}function Xe(c,y,v){c.i.set(y,v)}function ws(c){return Xe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Ei(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function As(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,ln),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ln(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ya=/[#\/\?@]/g,Ou=/[#\?:]/g,Ho=/[#\?]/g,_r=/[#\?@]/g,Mu=/#/g;function vr(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function un(c){c.g||(c.g=new Map,c.h=0,c.i&&ga(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=vr.prototype,r.add=function(c,y){un(this),this.i=null,c=Er(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function Vu(c,y){un(c),y=Er(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Fo(c,y){return un(c),y=Er(c,y),c.g.has(y)}r.forEach=function(c,y){un(this),this.g.forEach(function(v,A){v.forEach(function(q){c.call(y,q,A,this)},this)},this)};function Go(c,y){un(c);let v=[];if(typeof y=="string")Fo(c,y)&&(v=v.concat(c.g.get(Er(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)v=v.concat(c[y]);return v}r.set=function(c,y){return un(this),this.i=null,c=Er(this,c),Fo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=Go(this,c),c.length>0?String(c[0]):y):y};function _a(c,y,v){Vu(c,y),v.length>0&&(c.i=null,c.g.set(Er(c,y),D(v)),c.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var v=y[A];const q=Ui(v);v=Go(this,v);for(let K=0;K<v.length;K++){let re=q;v[K]!==""&&(re+="="+Ui(v[K])),c.push(re)}}return this.i=c.join("&")};function ku(c){const y=new vr;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function Er(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function va(c,y){y&&!c.j&&(un(c),c.i=null,c.g.forEach(function(v,A){const q=A.toLowerCase();A!=q&&(Vu(this,A),_a(this,q,v))},c)),c.j=y}function $n(c,y){const v=new Qn;if(h.Image){const A=new Image;A.onload=E(On,v,"TestLoadImage: loaded",!0,y,A),A.onerror=E(On,v,"TestLoadImage: error",!1,y,A),A.onabort=E(On,v,"TestLoadImage: abort",!1,y,A),A.ontimeout=E(On,v,"TestLoadImage: timeout",!1,y,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function Qo(c,y){const v=new Qn,A=new AbortController,q=setTimeout(()=>{A.abort(),On(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(K=>{clearTimeout(q),K.ok?On(v,"TestPingServer: ok",!0,y):On(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),On(v,"TestPingServer: error",!1,y)})}function On(c,y,v,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(v)}catch{}}function Tr(){this.g=new Su}function Ti(c){this.i=c.Sb||null,this.h=c.ab||!1}S(Ti,bu),Ti.prototype.g=function(){return new xs(this.i,this.h)};function xs(c,y){bt.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(xs,bt),r=xs.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Xn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Sr(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ea(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ea(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Sr(this):Xn(this),this.readyState==3&&Ea(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,Sr(this))},r.Na=function(c){this.g&&(this.response=c,Sr(this))},r.ga=function(){this.g&&Sr(this)};function Sr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Xn(c)}r.setRequestHeader=function(c,y){this.A.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function Xn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(xs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Mn(c){let y="";return ze(c,function(v,A){y+=A,y+=":",y+=v,y+=`\r
`}),y}function Rs(c,y,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=Mn(v),typeof c=="string"?v!=null&&Ui(v):Xe(c,y,v))}function et(c){bt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(et,bt);var Si=/^https?$/i,Ko=["POST","PUT"];r=et.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,y,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Lo.g(),this.g.onreadystatechange=w(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(K){Cs(this,K);return}if(c=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)v.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const K of A.keys())v.set(K,A.get(K));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),q=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(Ko,y,void 0)>=0)||A||q||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,re]of v)this.g.setRequestHeader(K,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(K){Cs(this,K)}};function Cs(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,Yo(c),zi(c)}function Yo(c){c.A||(c.A=!0,Lt(c,"complete"),Lt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Lt(this,"complete"),Lt(this,"abort"),zi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zi(this,!0)),et.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Is(this):this.Xa())},r.Xa=function(){Is(this)};function Is(c){if(c.h&&typeof u<"u"){if(c.v&&Wn(c)==4)setTimeout(c.Ca.bind(c),0);else if(Lt(c,"readystatechange"),Wn(c)==4){c.h=!1;try{const K=c.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var A;if(A=K===0){let re=String(c.D).match(Du)[1]||null;!re&&h.self&&h.self.location&&(re=h.self.location.protocol.slice(0,-1)),A=!Si.test(re?re.toLowerCase():"")}v=A}if(v)Lt(c,"complete"),Lt(c,"success");else{c.o=6;try{var q=Wn(c)>2?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.ca()+"]",Yo(c)}}finally{zi(c)}}}}function zi(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,y||Lt(c,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Wn(c){return c.g?c.g.readyState:0}r.ca=function(){try{return Wn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),mf(y)}};function Gt(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Bi(c){const y={};c=(c.g&&Wn(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(R(c[A]))continue;var v=Cu(c[A]);const q=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=y[q]||[];y[q]=K,K.push(v)}$e(y,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function br(c){this.za=0,this.i=[],this.j=new Qn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bi("baseRetryDelayMs",5e3,c),this.Za=bi("retryDelaySeedMs",1e4,c),this.Ta=bi("forwardChannelMaxRetries",2,c),this.va=bi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Po(c&&c.concurrentRequestLimit),this.Ba=new Tr,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=br.prototype,r.ka=8,r.I=1,r.connect=function(c,y,v,A){wt(0),this.W=c,this.H=y||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=qu(this,null,this.W),wi(this)};function $o(c){if(Ta(c),c.I==3){var y=c.V++,v=Rt(c.J);if(Xe(v,"SID",c.M),Xe(v,"RID",y),Xe(v,"TYPE","terminate"),Ns(c,v),y=new Kn(c,c.j,y),y.M=2,y.A=ws(Rt(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&h.Image&&(new Image().src=y.A,v=!0),v||(y.g=Hu(y.j,null),y.g.ea(y.A)),y.F=Date.now(),pi(y)}Bu(c)}function wr(c){c.g&&(Wo(c),c.g.cancel(),c.g=null)}function Ta(c){wr(c),c.v&&(h.clearTimeout(c.v),c.v=null),ba(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function wi(c){if(!jo(c.h)&&!c.m){c.m=!0;var y=c.Ea;ye||x(),pe||(ye(),pe=!0),I.add(y,c),c.D=0}}function Sa(c,y){return _i(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=fi(g(c.Ea,c,y),zu(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const q=new Kn(this,this.j,c);let K=this.o;if(this.U&&(K?(K=P(K),oe(K,this.U)):K=this.U),this.u!==null||this.R||(q.J=K,K=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Lu(this,q,y),v=Rt(this.J),Xe(v,"RID",c),Xe(v,"CVER",22),this.G&&Xe(v,"X-HTTP-Session-Id",this.G),Ns(this,v),K&&(this.R?y="headers="+Ui(Mn(K))+"&"+y:this.u&&Rs(v,this.u,K)),Uo(this.h,q),this.Ra&&Xe(v,"TYPE","init"),this.S?(Xe(v,"$req",y),Xe(v,"SID","null"),q.U=!0,mi(q,v,null)):mi(q,v,y),this.I=2}}else this.I==3&&(c?Xo(this,c):this.i.length==0||jo(this.h)||Xo(this))};function Xo(c,y){var v;y?v=y.l:v=c.V++;const A=Rt(c.J);Xe(A,"SID",c.M),Xe(A,"RID",v),Xe(A,"AID",c.K),Ns(c,A),c.u&&c.o&&Rs(A,c.u,c.o),v=new Kn(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Lu(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Uo(c.h,v),mi(v,A,y)}function Ns(c,y){c.H&&ze(c.H,function(v,A){Xe(y,A,v)}),c.l&&ze({},function(v,A){Xe(y,A,v)})}function Lu(c,y,v){v=Math.min(c.i.length,v);const A=c.l?g(c.l.Ka,c.l,c):null;e:{var q=c.i;let Ae=-1;for(;;){const yt=["count="+v];Ae==-1?v>0?(Ae=q[0].g,yt.push("ofs="+Ae)):Ae=0:yt.push("ofs="+Ae);let Fe=!0;for(let ut=0;ut<v;ut++){var K=q[ut].g;const Vn=q[ut].map;if(K-=Ae,K<0)Ae=Math.max(0,q[ut].g-100),Fe=!1;else try{K="req"+K+"_"||"";try{var re=Vn instanceof Map?Vn:Object.entries(Vn);for(const[xi,Jn]of re){let Zn=Jn;m(Jn)&&(Zn=gr(Jn)),yt.push(K+xi+"="+encodeURIComponent(Zn))}}catch(xi){throw yt.push(K+"type="+encodeURIComponent("_badmap")),xi}}catch{A&&A(Vn)}}if(Fe){re=yt.join("&");break e}}re=void 0}return c=c.i.splice(0,v),y.G=c,re}function Pu(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;ye||x(),pe||(ye(),pe=!0),I.add(y,c),c.A=0}}function Ds(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=fi(g(c.Da,c),zu(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,ju(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=fi(g(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),wr(this),ju(this))};function Wo(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function ju(c){c.g=new Kn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=Rt(c.na);Xe(y,"RID","rpc"),Xe(y,"SID",c.M),Xe(y,"AID",c.K),Xe(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&Xe(y,"TO",c.ia),Xe(y,"TYPE","xmlhttp"),Ns(c,y),c.u&&c.o&&Rs(y,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=ws(Rt(y)),v.u=null,v.R=!0,ma(v,c)}r.Va=function(){this.C!=null&&(this.C=null,wr(this),Ds(this),wt(19))};function ba(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Uu(c,y){var v=null;if(c.g==y){ba(c),Wo(c),c.g=null;var A=2}else if(vi(c.h,y))v=y.G,zo(c.h,y),A=1;else return;if(c.I!=0){if(y.o)if(A==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var q=c.D;A=da(),Lt(A,new hi(A,v)),wi(c)}else Pu(c);else if(q=y.m,q==3||q==0&&y.X>0||!(A==1&&Sa(c,y)||A==2&&Ds(c)))switch(v&&v.length>0&&(y=c.h,y.i=y.i.concat(v)),q){case 1:Ai(c,5);break;case 4:Ai(c,10);break;case 3:Ai(c,6);break;default:Ai(c,2)}}}function zu(c,y){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*y}function Ai(c,y){if(c.j.info("Error code "+y),y==2){var v=g(c.bb,c),A=c.Ua;const q=!A;A=new En(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||zt(A,"https"),ws(A),q?$n(A.toString(),v):Qo(A.toString(),v)}else wt(2);c.I=0,c.l&&c.l.pa(y),Bu(c),Ta(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Bu(c){if(c.I=0,c.ja=[],c.l){const y=Bo(c.h);(y.length!=0||c.i.length!=0)&&(V(c.ja,y),V(c.ja,c.i),c.h.i.length=0,D(c.i),c.i.length=0),c.l.oa()}}function qu(c,y,v){var A=v instanceof En?Rt(v):new En(v);if(A.g!="")y&&(A.g=y+"."+A.g),yr(A,A.u);else{var q=h.location;A=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const K=new En(null);A&&zt(K,A),y&&(K.g=y),q&&yr(K,q),v&&(K.h=v),A=K}return v=c.G,y=c.wa,v&&y&&Xe(A,v,y),Xe(A,"VER",c.ka),Ns(c,A),A}function Hu(c,y,v){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new et(new Ti({ab:v})):new et(c.ma),y.Fa(c.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fu(){}r=Fu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ar(){}Ar.prototype.g=function(c,y){return new an(c,y)};function an(c,y){bt.call(this),this.g=new br(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!R(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new qi(this)}S(an,bt),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){$o(this.g)},an.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=gr(c),c=v);y.i.push(new xt(y.Ya++,c)),y.I==3&&wi(y)},an.prototype.N=function(){this.g.l=null,delete this.j,$o(this.g),delete this.g,an.Z.N.call(this)};function Gu(c){Ft.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}S(Gu,Ft);function Qu(){Nn.call(this),this.status=1}S(Qu,Nn);function qi(c){this.g=c}S(qi,Fu),qi.prototype.ra=function(){Lt(this.g,"a")},qi.prototype.qa=function(c){Lt(this.g,new Gu(c))},qi.prototype.pa=function(c){Lt(this.g,new Qu)},qi.prototype.oa=function(){Lt(this.g,"b")},Ar.prototype.createWebChannel=Ar.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,FT=function(){return new Ar},HT=function(){return da()},qT=gt,Fm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ss.NO_ERROR=0,Ss.TIMEOUT=8,Ss.HTTP_ERROR=6,uh=Ss,ko.COMPLETE="complete",BT=ko,wu.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",bt.prototype.listen=bt.prototype.J,Ul=wu,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,zT=et}).apply(typeof Jc<"u"?Jc:typeof self<"u"?self:typeof window<"u"?window:{});const Av="@firebase/firestore",xv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=new gp("@firebase/firestore");function eo(){return ia.logLevel}function ue(r,...e){if(ia.logLevel<=Ve.DEBUG){const n=e.map(Rp);ia.debug(`Firestore (${wo}): ${r}`,...n)}}function hr(r,...e){if(ia.logLevel<=Ve.ERROR){const n=e.map(Rp);ia.error(`Firestore (${wo}): ${r}`,...n)}}function ho(r,...e){if(ia.logLevel<=Ve.WARN){const n=e.map(Rp);ia.warn(`Firestore (${wo}): ${r}`,...n)}}function Rp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,GT(r,s,n)}function GT(r,e,n){let s=`FIRESTORE (${wo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw hr(s),new Error(s)}function Ye(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||GT(e,o,s)}function we(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends mr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(tn.UNAUTHENTICATED)))}shutdown(){}}class jC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class UC{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new or;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new or,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new or)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ye(typeof s.accessToken=="string",31837,{l:s}),new QT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class zC{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BC{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new zC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Rv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ii(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ye(this.o===void 0,3512);const s=u=>{u.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,ue("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Rv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Rv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=HC(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function ke(r,e){return r<e?-1:r>e?1:0}function Gm(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return xm(o)===xm(u)?ke(o,u):xm(o)?1:-1}return ke(r.length,e.length)}const FC=55296,GC=57343;function xm(r){const e=r.charCodeAt(0);return e>=FC&&e<=GC}function fo(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="__name__";class Di{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ee(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ee(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Di.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Di?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Di.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return ke(e.length,n.length)}static compareSegments(e,n){const s=Di.isNumericId(e),o=Di.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Di.extractNumericId(e).compare(Di.extractNumericId(n)):Gm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rs.fromString(e.substring(4,e.length-2))}}class st extends Di{construct(e,n,s){return new st(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new le(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new st(n)}static emptyPath(){return new st([])}}const QC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Di{construct(e,n,s){return new Wt(e,n,s)}static isValidIdentifier(e){return QC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cv}static keyField(){return new Wt([Cv])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new le(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new le(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new le(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(u(),o++)}if(u(),h)throw new le(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(st.fromString(e))}static fromName(e){return new me(st.fromString(e).popFirst(5))}static empty(){return new me(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(r,e,n){if(!n)throw new le(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function KC(r,e,n,s){if(e===!0&&s===!0)throw new le(ee.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Iv(r){if(!me.isDocumentKey(r))throw new le(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Nv(r){if(me.isDocumentKey(r))throw new le(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function YT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Fh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ee(12329,{type:typeof r})}function In(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new le(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fh(r);throw new le(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(r,e){const n={typeString:r};return e&&(n.value=e),n}function du(r,e){if(!YT(r))throw new le(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new le(ee.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=-62135596800,Ov=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Ov);return new Ze(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Dv)throw new le(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ov}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(du(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Dv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:Vt("string",Ze._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Ze(0,0))}static max(){return new Se(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=-1;function YC(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new Ze(n+1,0):new Ze(n,s));return new as(o,me.empty(),e)}function $C(r){return new as(r.readTime,r.key,Zl)}class as{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new as(Se.min(),me.empty(),Zl)}static max(){return new as(Se.max(),me.empty(),Zl)}}function XC(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(r.documentKey,e.documentKey),n!==0?n:ke(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==WC)throw r;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.reject(n)}static resolve(e){return new ie(((n,s)=>{n(e)}))}static reject(e){return new ie(((n,s)=>{s(e)}))}static waitFor(e){return new ie(((n,s)=>{let o=0,u=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++u,h&&u===o&&n()}),(p=>s(p)))})),h=!0,u===o&&n()}))}static or(e){let n=ie.resolve(!1);for(const s of e)n=n.next((o=>o?ie.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ie(((s,o)=>{const u=e.length,h=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next((E=>{h[g]=E,++m,m===u&&s(h)}),(E=>o(E)))}}))}static doWhile(e,n){return new ie(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function ZC(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=-1;function Qh(r){return r==null}function wh(r){return r===0&&1/r==-1/0}function eI(r){return typeof r=="number"&&Number.isInteger(r)&&!wh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="";function tI(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=Mv(e)),e=nI(r.get(n),e);return Mv(e)}function nI(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case $T:n+="";break;default:n+=u}}return n}function Mv(r){return r+$T+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function ms(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function XT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){this.comparator=e,this.root=n||Xt.EMPTY}insert(e,n){return new dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zc(this.root,e,this.comparator,!0)}}class Zc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Xt.RED,this.left=o??Xt.EMPTY,this.right=u??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Xt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kv(this.data.getIterator())}getIteratorFrom(e){return new kv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new jt(this.comparator);return n.data=e,n}}class kv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new Cn([])}unionWith(e){let n=new jt(Wt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new WT("Invalid base64 string: "+u):u}})(e);return new Jt(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new Jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const iI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(r){if(Ye(!!r,39018),typeof r=="string"){let e=0;const n=iI.exec(r);if(Ye(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Et(r.seconds),nanos:Et(r.nanos)}}function Et(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ls(r){return typeof r=="string"?Jt.fromBase64String(r):Jt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="server_timestamp",ZT="__type__",eS="__previous_value__",tS="__local_write_time__";function Np(r){var n,s;return((s=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[ZT])==null?void 0:s.stringValue)===JT}function Kh(r){const e=r.mapValue.fields[eS];return Np(e)?Kh(e):e}function eu(r){const e=os(r.mapValue.fields[tS].timestampValue);return new Ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n,s,o,u,h,m,p,g,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=E}}const Ah="(default)";class tu{constructor(e,n){this.projectId=e,this.database=n||Ah}static empty(){return new tu("","")}get isDefaultDatabase(){return this.database===Ah}isEqual(e){return e instanceof tu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="__type__",sI="__max__",eh={mapValue:{}},iS="__vector__",xh="value";function us(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Np(r)?4:oI(r)?9007199254740991:aI(r)?10:11:Ee(28295,{value:r})}function ji(r,e){if(r===e)return!0;const n=us(r);if(n!==us(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return eu(r).isEqual(eu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=os(o.timestampValue),m=os(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return ls(o.bytesValue).isEqual(ls(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return Et(o.geoPointValue.latitude)===Et(u.geoPointValue.latitude)&&Et(o.geoPointValue.longitude)===Et(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Et(o.integerValue)===Et(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=Et(o.doubleValue),m=Et(u.doubleValue);return h===m?wh(h)===wh(m):isNaN(h)&&isNaN(m)}return!1})(r,e);case 9:return fo(r.arrayValue.values||[],e.arrayValue.values||[],ji);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Vv(h)!==Vv(m))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(m[p]===void 0||!ji(h[p],m[p])))return!1;return!0})(r,e);default:return Ee(52216,{left:r})}}function nu(r,e){return(r.values||[]).find((n=>ji(n,e)))!==void 0}function mo(r,e){if(r===e)return 0;const n=us(r),s=us(e);if(n!==s)return ke(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(r.booleanValue,e.booleanValue);case 2:return(function(u,h){const m=Et(u.integerValue||u.doubleValue),p=Et(h.integerValue||h.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(r,e);case 3:return Lv(r.timestampValue,e.timestampValue);case 4:return Lv(eu(r),eu(e));case 5:return Gm(r.stringValue,e.stringValue);case 6:return(function(u,h){const m=ls(u),p=ls(h);return m.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(u,h){const m=u.split("/"),p=h.split("/");for(let g=0;g<m.length&&g<p.length;g++){const E=ke(m[g],p[g]);if(E!==0)return E}return ke(m.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,h){const m=ke(Et(u.latitude),Et(h.latitude));return m!==0?m:ke(Et(u.longitude),Et(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Pv(r.arrayValue,e.arrayValue);case 10:return(function(u,h){var w,D,V,j;const m=u.fields||{},p=h.fields||{},g=(w=m[xh])==null?void 0:w.arrayValue,E=(D=p[xh])==null?void 0:D.arrayValue,S=ke(((V=g==null?void 0:g.values)==null?void 0:V.length)||0,((j=E==null?void 0:E.values)==null?void 0:j.length)||0);return S!==0?S:Pv(g,E)})(r.mapValue,e.mapValue);case 11:return(function(u,h){if(u===eh.mapValue&&h===eh.mapValue)return 0;if(u===eh.mapValue)return 1;if(h===eh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=h.fields||{},E=Object.keys(g);p.sort(),E.sort();for(let S=0;S<p.length&&S<E.length;++S){const w=Gm(p[S],E[S]);if(w!==0)return w;const D=mo(m[p[S]],g[E[S]]);if(D!==0)return D}return ke(p.length,E.length)})(r.mapValue,e.mapValue);default:throw Ee(23264,{he:n})}}function Lv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ke(r,e);const n=os(r),s=os(e),o=ke(n.seconds,s.seconds);return o!==0?o:ke(n.nanos,s.nanos)}function Pv(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=mo(n[o],s[o]);if(u)return u}return ke(n.length,s.length)}function po(r){return Qm(r)}function Qm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=os(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return ls(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return me.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Qm(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${Qm(n.fields[h])}`;return o+"}"})(r.mapValue):Ee(61005,{value:r})}function ch(r){switch(us(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kh(r);return e?16+ch(e):16;case 5:return 2*r.stringValue.length;case 6:return ls(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+ch(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return ms(s.fields,((u,h)=>{o+=u.length+ch(h)})),o})(r.mapValue);default:throw Ee(13486,{value:r})}}function jv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Km(r){return!!r&&"integerValue"in r}function Dp(r){return!!r&&"arrayValue"in r}function Uv(r){return!!r&&"nullValue"in r}function zv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function hh(r){return!!r&&"mapValue"in r}function aI(r){var n,s;return((s=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[nS])==null?void 0:s.stringValue)===iS}function Gl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ms(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Gl(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gl(r.arrayValue.values[n]);return e}return{...r}}function oI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===sI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!hh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gl(n)}setAll(e){let n=Wt.emptyPath(),s={},o=[];e.forEach(((h,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}h?s[m.lastSegment()]=Gl(h):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());hh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ji(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];hh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){ms(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new gn(Gl(this.value))}}function rS(r){const e=[];return ms(r.fields,((n,s)=>{const o=new Wt([n]);if(hh(s)){const u=rS(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n,s,o,u,h,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new nn(e,0,Se.min(),Se.min(),Se.min(),gn.empty(),0)}static newFoundDocument(e,n,s,o){return new nn(e,1,n,Se.min(),s,o,0)}static newNoDocument(e,n){return new nn(e,2,n,Se.min(),Se.min(),gn.empty(),0)}static newUnknownDocument(e,n){return new nn(e,3,n,Se.min(),Se.min(),gn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.position=e,this.inclusive=n}}function Bv(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],h=r.position[o];if(u.field.isKeyField()?s=me.comparator(me.fromName(h.referenceValue),n.key):s=mo(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function qv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!ji(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n="asc"){this.field=e,this.dir=n}}function lI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{}class Mt extends sS{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new cI(e,n,s):n==="array-contains"?new dI(e,s):n==="in"?new mI(e,s):n==="not-in"?new pI(e,s):n==="array-contains-any"?new gI(e,s):new Mt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new hI(e,s):new fI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(mo(n,this.value)):n!==null&&us(this.value)===us(n)&&this.matchesComparison(mo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ai extends sS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ai(e,n)}matches(e){return aS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function aS(r){return r.op==="and"}function oS(r){return uI(r)&&aS(r)}function uI(r){for(const e of r.filters)if(e instanceof ai)return!1;return!0}function Ym(r){if(r instanceof Mt)return r.field.canonicalString()+r.op.toString()+po(r.value);if(oS(r))return r.filters.map((e=>Ym(e))).join(",");{const e=r.filters.map((n=>Ym(n))).join(",");return`${r.op}(${e})`}}function lS(r,e){return r instanceof Mt?(function(s,o){return o instanceof Mt&&s.op===o.op&&s.field.isEqual(o.field)&&ji(s.value,o.value)})(r,e):r instanceof ai?(function(s,o){return o instanceof ai&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,h,m)=>u&&lS(h,o.filters[m])),!0):!1})(r,e):void Ee(19439)}function uS(r){return r instanceof Mt?(function(n){return`${n.field.canonicalString()} ${n.op} ${po(n.value)}`})(r):r instanceof ai?(function(n){return n.op.toString()+" {"+n.getFilters().map(uS).join(" ,")+"}"})(r):"Filter"}class cI extends Mt{constructor(e,n,s){super(e,n,s),this.key=me.fromName(s.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class hI extends Mt{constructor(e,n){super(e,"in",n),this.keys=cS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class fI extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=cS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function cS(r,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((s=>me.fromName(s.referenceValue)))}class dI extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dp(n)&&nu(n.arrayValue,this.value)}}class mI extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&nu(this.value.arrayValue,n)}}class pI extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!nu(this.value.arrayValue,n)}}class gI extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>nu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n=null,s=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.Te=null}}function Hv(r,e=null,n=[],s=[],o=null,u=null,h=null){return new yI(r,e,n,s,o,u,h)}function Op(r){const e=we(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Ym(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Qh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>po(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>po(s))).join(",")),e.Te=n}return e.Te}function Mp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!lI(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!lS(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!qv(r.startAt,e.startAt)&&qv(r.endAt,e.endAt)}function $m(r){return me.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n=null,s=[],o=[],u=null,h="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _I(r,e,n,s,o,u,h,m){return new Ro(r,e,n,s,o,u,h,m)}function Yh(r){return new Ro(r)}function Fv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function hS(r){return r.collectionGroup!==null}function Ql(r){const e=we(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new jt(Wt.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new iu(u,s))})),n.has(Wt.keyField().canonicalString())||e.Ie.push(new iu(Wt.keyField(),s))}return e.Ie}function Vi(r){const e=we(r);return e.Ee||(e.Ee=vI(e,Ql(r))),e.Ee}function vI(r,e){if(r.limitType==="F")return Hv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new iu(o.field,u)}));const n=r.endAt?new Rh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Rh(r.startAt.position,r.startAt.inclusive):null;return Hv(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Xm(r,e){const n=r.filters.concat([e]);return new Ro(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Wm(r,e,n){return new Ro(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function $h(r,e){return Mp(Vi(r),Vi(e))&&r.limitType===e.limitType}function fS(r){return`${Op(Vi(r))}|lt:${r.limitType}`}function to(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>uS(o))).join(", ")}]`),Qh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>po(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>po(o))).join(",")),`Target(${s})`})(Vi(r))}; limitType=${r.limitType})`}function Xh(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):me.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of Ql(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,m,p){const g=Bv(h,m,p);return h.inclusive?g<=0:g<0})(s.startAt,Ql(s),o)||s.endAt&&!(function(h,m,p){const g=Bv(h,m,p);return h.inclusive?g>=0:g>0})(s.endAt,Ql(s),o))})(r,e)}function EI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function dS(r){return(e,n)=>{let s=!1;for(const o of Ql(r)){const u=TI(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function TI(r,e,n){const s=r.field.isKeyField()?me.comparator(e.key,n.key):(function(u,h,m){const p=h.data.field(u),g=m.data.field(u);return p!==null&&g!==null?mo(p,g):Ee(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ee(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ms(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return XT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI=new dt(me.comparator);function fr(){return SI}const mS=new dt(me.comparator);function zl(...r){let e=mS;for(const n of r)e=e.insert(n.key,n);return e}function pS(r){let e=mS;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Xs(){return Kl()}function gS(){return Kl()}function Kl(){return new oa((r=>r.toString()),((r,e)=>r.isEqual(e)))}const bI=new dt(me.comparator),wI=new jt(me.comparator);function Le(...r){let e=wI;for(const n of r)e=e.add(n);return e}const AI=new jt(ke);function xI(){return AI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wh(e)?"-0":e}}function yS(r){return{integerValue:""+r}}function RI(r,e){return eI(e)?yS(e):Vp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this._=void 0}}function CI(r,e,n){return r instanceof Ch?(function(o,u){const h={fields:{[ZT]:{stringValue:JT},[tS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Np(u)&&(u=Kh(u)),u&&(h.fields[eS]=u),{mapValue:h}})(n,e):r instanceof ru?vS(r,e):r instanceof su?ES(r,e):(function(o,u){const h=_S(o,u),m=Gv(h)+Gv(o.Ae);return Km(h)&&Km(o.Ae)?yS(m):Vp(o.serializer,m)})(r,e)}function II(r,e,n){return r instanceof ru?vS(r,e):r instanceof su?ES(r,e):n}function _S(r,e){return r instanceof Ih?(function(s){return Km(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Ch extends Wh{}class ru extends Wh{constructor(e){super(),this.elements=e}}function vS(r,e){const n=TS(e);for(const s of r.elements)n.some((o=>ji(o,s)))||n.push(s);return{arrayValue:{values:n}}}class su extends Wh{constructor(e){super(),this.elements=e}}function ES(r,e){let n=TS(e);for(const s of r.elements)n=n.filter((o=>!ji(o,s)));return{arrayValue:{values:n}}}class Ih extends Wh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Gv(r){return Et(r.integerValue||r.doubleValue)}function TS(r){return Dp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function NI(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof ru&&o instanceof ru||s instanceof su&&o instanceof su?fo(s.elements,o.elements,ji):s instanceof Ih&&o instanceof Ih?ji(s.Ae,o.Ae):s instanceof Ch&&o instanceof Ch})(r.transform,e.transform)}class DI{constructor(e,n){this.version=e,this.transformResults=n}}class _n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Jh{}function SS(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Zh(r.key,_n.none()):new mu(r.key,r.data,_n.none());{const n=r.data,s=gn.empty();let o=new jt(Wt.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new ps(r.key,s,new Cn(o.toArray()),_n.none())}}function OI(r,e,n){r instanceof mu?(function(o,u,h){const m=o.value.clone(),p=Kv(o.fieldTransforms,u,h.transformResults);m.setAll(p),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,n):r instanceof ps?(function(o,u,h){if(!fh(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=Kv(o.fieldTransforms,u,h.transformResults),p=u.data;p.setAll(bS(o)),p.setAll(m),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(r,e,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function Yl(r,e,n,s){return r instanceof mu?(function(u,h,m,p){if(!fh(u.precondition,h))return m;const g=u.value.clone(),E=Yv(u.fieldTransforms,p,h);return g.setAll(E),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null})(r,e,n,s):r instanceof ps?(function(u,h,m,p){if(!fh(u.precondition,h))return m;const g=Yv(u.fieldTransforms,p,h),E=h.data;return E.setAll(bS(u)),E.setAll(g),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((S=>S.field)))})(r,e,n,s):(function(u,h,m){return fh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,e,n)}function MI(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=_S(s.transform,o||null);u!=null&&(n===null&&(n=gn.empty()),n.set(s.field,u))}return n||null}function Qv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&fo(s,o,((u,h)=>NI(u,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class mu extends Jh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ps extends Jh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function bS(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function Kv(r,e,n){const s=new Map;Ye(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],h=u.transform,m=e.data.field(u.field);s.set(u.field,II(h,m,n[o]))}return s}function Yv(r,e,n){const s=new Map;for(const o of r){const u=o.transform,h=n.data.field(o.field);s.set(o.field,CI(u,h,e))}return s}class Zh extends Jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VI extends Jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&OI(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Yl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Yl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=gS();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=n.has(o.key)?null:m;const p=SS(h,m);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Le())}isEqual(e){return this.batchId===e.batchId&&fo(this.mutations,e.mutations,((n,s)=>Qv(n,s)))&&fo(this.baseMutations,e.baseMutations,((n,s)=>Qv(n,s)))}}class kp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Ye(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return bI})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new kp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,Ue;function jI(r){switch(r){case ee.OK:return Ee(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ee(15467,{code:r})}}function wS(r){if(r===void 0)return hr("GRPC error has no .code"),ee.UNKNOWN;switch(r){case Ot.OK:return ee.OK;case Ot.CANCELLED:return ee.CANCELLED;case Ot.UNKNOWN:return ee.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return ee.INTERNAL;case Ot.UNAVAILABLE:return ee.UNAVAILABLE;case Ot.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Ot.NOT_FOUND:return ee.NOT_FOUND;case Ot.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Ot.ABORTED:return ee.ABORTED;case Ot.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Ot.DATA_LOSS:return ee.DATA_LOSS;default:return Ee(39323,{code:r})}}(Ue=Ot||(Ot={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=new rs([4294967295,4294967295],0);function $v(r){const e=UI().encode(r),n=new UT;return n.update(e),new Uint8Array(n.digest())}function Xv(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new rs([n,s],0),new rs([o,u],0)]}class Lp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Bl(`Invalid padding: ${n}`);if(s<0)throw new Bl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Bl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Bl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=rs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(rs.fromNumber(s)));return o.compare(zI)===1&&(o=new rs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=$v(e),[s,o]=Xv(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);if(!this.we(h))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Lp(u,o,n);return s.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const n=$v(e),[s,o]=Xv(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);this.Se(h)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,pu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ef(Se.min(),o,new dt(ke),fr(),Le())}}class pu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new pu(s,n,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class AS{constructor(e,n){this.targetId=e,this.Ce=n}}class xS{constructor(e,n,s=Jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class Wv{constructor(){this.ve=0,this.Fe=Jv(),this.Me=Jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),n=Le(),s=Le();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ee(38017,{changeType:u})}})),new pu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Jv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class BI{constructor(e){this.Ge=e,this.ze=new Map,this.je=fr(),this.Je=th(),this.He=th(),this.Ye=new dt(ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if($m(u))if(s===0){const h=new me(u.path);this.et(n,h,nn.newNoDocument(h,Se.min()))}else Ye(s===1,20013,{expectedCount:s});else{const h=this._t(n);if(h!==s){const m=this.ut(e),p=m?this.ct(m,e,h):1;if(p!==0){this.it(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let h,m;try{h=ls(s).toUint8Array()}catch(p){if(p instanceof WT)return ho("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Lp(h,o,u)}catch(p){return ho(p instanceof Bl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const m=this.ot(h);if(m){if(u.current&&$m(m.target)){const p=new me(m.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,nn.newNoDocument(p,e))}u.Be&&(n.set(h,u.ke()),u.qe())}}));let s=Le();this.He.forEach(((u,h)=>{let m=!0;h.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new ef(e,n,this.Ye,this.je,s);return this.je=fr(),this.Je=th(),this.He=th(),this.Ye=new dt(ke),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Wv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new jt(ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new jt(ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Wv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function th(){return new dt(me.comparator)}function Jv(){return new dt(me.comparator)}const qI={asc:"ASCENDING",desc:"DESCENDING"},HI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FI={and:"AND",or:"OR"};class GI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Jm(r,e){return r.useProto3Json||Qh(e)?e:{value:e}}function Nh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RS(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function QI(r,e){return Nh(r,e.toTimestamp())}function ki(r){return Ye(!!r,49232),Se.fromTimestamp((function(n){const s=os(n);return new Ze(s.seconds,s.nanos)})(r))}function Pp(r,e){return Zm(r,e).canonicalString()}function Zm(r,e){const n=(function(o){return new st(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function CS(r){const e=st.fromString(r);return Ye(MS(e),10190,{key:e.toString()}),e}function ep(r,e){return Pp(r.databaseId,e.path)}function Rm(r,e){const n=CS(e);if(n.get(1)!==r.databaseId.projectId)throw new le(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new le(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new me(NS(n))}function IS(r,e){return Pp(r.databaseId,e)}function KI(r){const e=CS(r);return e.length===4?st.emptyPath():NS(e)}function tp(r){return new st(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function NS(r){return Ye(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Zv(r,e,n){return{name:ep(r,e),fields:n.value.mapValue.fields}}function YI(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ee(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(g,E){return g.useProto3Json?(Ye(E===void 0||typeof E=="string",58123),Jt.fromBase64String(E||"")):(Ye(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Jt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(g){const E=g.code===void 0?ee.UNKNOWN:wS(g.code);return new le(E,g.message||"")})(h);n=new xS(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Rm(r,s.document.name),u=ki(s.document.updateTime),h=s.document.createTime?ki(s.document.createTime):Se.min(),m=new gn({mapValue:{fields:s.document.fields}}),p=nn.newFoundDocument(o,u,h,m),g=s.targetIds||[],E=s.removedTargetIds||[];n=new dh(g,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Rm(r,s.document),u=s.readTime?ki(s.readTime):Se.min(),h=nn.newNoDocument(o,u),m=s.removedTargetIds||[];n=new dh([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Rm(r,s.document),u=s.removedTargetIds||[];n=new dh([],u,o,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new PI(o,u),m=s.targetId;n=new AS(m,h)}}return n}function $I(r,e){let n;if(e instanceof mu)n={update:Zv(r,e.key,e.value)};else if(e instanceof Zh)n={delete:ep(r,e.key)};else if(e instanceof ps)n={update:Zv(r,e.key,e.data),updateMask:rN(e.fieldMask)};else{if(!(e instanceof VI))return Ee(16599,{Vt:e.type});n={verify:ep(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,h){const m=h.transform;if(m instanceof Ch)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ru)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof su)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Ih)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw Ee(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:QI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ee(27497)})(r,e.precondition)),n}function XI(r,e){return r&&r.length>0?(Ye(e!==void 0,14353),r.map((n=>(function(o,u){let h=o.updateTime?ki(o.updateTime):ki(u);return h.isEqual(Se.min())&&(h=ki(u)),new DI(h,o.transformResults||[])})(n,e)))):[]}function WI(r,e){return{documents:[IS(r,e.path)]}}function JI(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=IS(r,o);const u=(function(g){if(g.length!==0)return OS(ai.create(g,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(g){if(g.length!==0)return g.map((E=>(function(w){return{field:no(w.field),direction:tN(w.dir)}})(E)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const m=Jm(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:o}}function ZI(r){let e=KI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ye(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=(function(S){const w=DS(S);return w instanceof ai&&oS(w)?w.getFilters():[w]})(n.where));let h=[];n.orderBy&&(h=(function(S){return S.map((w=>(function(V){return new iu(io(V.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(w)))})(n.orderBy));let m=null;n.limit&&(m=(function(S){let w;return w=typeof S=="object"?S.value:S,Qh(w)?null:w})(n.limit));let p=null;n.startAt&&(p=(function(S){const w=!!S.before,D=S.values||[];return new Rh(D,w)})(n.startAt));let g=null;return n.endAt&&(g=(function(S){const w=!S.before,D=S.values||[];return new Rh(D,w)})(n.endAt)),_I(e,o,h,u,m,"F",p,g)}function eN(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function DS(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=io(n.unaryFilter.field);return Mt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=io(n.unaryFilter.field);return Mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=io(n.unaryFilter.field);return Mt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=io(n.unaryFilter.field);return Mt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Mt.create(io(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return ai.create(n.compositeFilter.filters.map((s=>DS(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(n.compositeFilter.op))})(r):Ee(30097,{filter:r})}function tN(r){return qI[r]}function nN(r){return HI[r]}function iN(r){return FI[r]}function no(r){return{fieldPath:r.canonicalString()}}function io(r){return Wt.fromServerFormat(r.fieldPath)}function OS(r){return r instanceof Mt?(function(n){if(n.op==="=="){if(zv(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NAN"}};if(Uv(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zv(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NAN"}};if(Uv(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:no(n.field),op:nN(n.op),value:n.value}}})(r):r instanceof ai?(function(n){const s=n.getFilters().map((o=>OS(o)));return s.length===1?s[0]:{compositeFilter:{op:iN(n.op),filters:s}}})(r):Ee(54877,{filter:r})}function rN(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function MS(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n,s,o,u=Se.min(),h=Se.min(),m=Jt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Zr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e){this.yt=e}}function aN(r){const e=ZI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Wm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(){this.Cn=new lN}addToCollectionParentIndex(e,n){return this.Cn.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(as.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(as.min())}updateCollectionGroup(e,n,s){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class lN{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new jt(st.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new jt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VS=41943040;class pn{static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(VS,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new go(0)}static cr(){return new go(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="LruGarbageCollector",uN=1048576;function nE([r,e],[n,s]){const o=ke(r,n);return o===0?ke(e,s):o}class cN{constructor(e){this.Ir=e,this.buffer=new jt(nE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();nE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class hN{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(tE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){xo(n)?ue(tE,"Ignoring IndexedDB error during garbage collection: ",n):await Ao(n)}await this.Vr(3e5)}))}}class fN{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ie.resolve(Gh.ce);const s=new cN(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(eE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,h,m,p,g;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,h=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(s=S,m=Date.now(),this.removeTargets(e,s,n)))).next((S=>(u=S,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((S=>(g=Date.now(),eo()<=Ve.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${S} documents in `+(g-p)+`ms
Total Duration: ${g-E}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S}))))}}function dN(r,e){return new fN(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(){this.changes=new oa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ie.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Yl(s.mutation,o,Cn.empty(),Ze.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Le()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Le()){const o=Xs();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let h=zl();return u.forEach(((m,p)=>{h=h.insert(m,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const s=Xs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Le())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,m)=>{n.set(h,m)}))}))}computeViews(e,n,s,o){let u=fr();const h=Kl(),m=(function(){return Kl()})();return n.forEach(((p,g)=>{const E=s.get(g.key);o.has(g.key)&&(E===void 0||E.mutation instanceof ps)?u=u.insert(g.key,g):E!==void 0?(h.set(g.key,E.mutation.getFieldMask()),Yl(E.mutation,g,E.mutation.getFieldMask(),Ze.now())):h.set(g.key,Cn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((g,E)=>h.set(g,E))),n.forEach(((g,E)=>m.set(g,new pN(E,h.get(g)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=Kl();let o=new dt(((h,m)=>h-m)),u=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const m of h)m.keys().forEach((p=>{const g=n.get(p);if(g===null)return;let E=s.get(p)||Cn.empty();E=m.applyToLocalView(g,E),s.set(p,E);const S=(o.get(m.batchId)||Le()).add(p);o=o.insert(m.batchId,S)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,E=p.value,S=gS();E.forEach((w=>{if(!u.has(w)){const D=SS(n.get(w),s.get(w));D!==null&&S.set(w,D),u=u.add(w)}})),h.push(this.documentOverlayCache.saveOverlays(e,g,S))}return ie.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(h){return me.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ie.resolve(Xs());let m=Zl,p=u;return h.next((g=>ie.forEach(g,((E,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),u.get(E)?ie.resolve():this.remoteDocumentCache.getEntry(e,E).next((w=>{p=p.insert(E,w)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,p,g,Le()))).next((E=>({batchId:m,changes:pS(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next((s=>{let o=zl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let h=zl();return this.indexManager.getCollectionParents(e,u).next((m=>ie.forEach(m,(p=>{const g=(function(S,w){return new Ro(w,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next((E=>{E.forEach(((S,w)=>{h=h.insert(S,w)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((h=>{u.forEach(((p,g)=>{const E=g.getKey();h.get(E)===null&&(h=h.insert(E,nn.newInvalidDocument(E)))}));let m=zl();return h.forEach(((p,g)=>{const E=u.get(p);E!==void 0&&Yl(E.mutation,g,Cn.empty(),Ze.now()),Xh(n,g)&&(m=m.insert(p,g))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ie.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:ki(o.createTime)}})(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:aN(o.bundledQuery),readTime:ki(o.readTime)}})(n)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(){this.overlays=new dt(me.comparator),this.qr=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Xs();return ie.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),ie.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ie.resolve()}getOverlaysForCollection(e,n,s){const o=Xs(),u=n.length+1,h=new me(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new dt(((g,E)=>g-E));const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let E=u.get(g.largestBatchId);E===null&&(E=Xs(),u=u.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const m=Xs(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,E)=>m.set(g,E))),!(m.size()>=o)););return ie.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new LI(n,s));let u=this.qr.get(n);u===void 0&&(u=Le(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(){this.Qr=new jt(qt.$r),this.Ur=new jt(qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new qt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new qt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new me(new st([])),s=new qt(n,e),o=new qt(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new st([])),s=new qt(n,e),o=new qt(n,e+1);let u=Le();return this.Ur.forEachInRange([s,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new qt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class qt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||ke(e.Yr,n.Yr)}static Kr(e,n){return ke(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new jt(qt.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new kI(u,n,s,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new qt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ie.resolve(h)}lookupMutationBatch(e,n){return ie.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Ip:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new qt(n,0),o=new qt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(h=>{const m=this.Xr(h.Yr);u.push(m)})),ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new jt(ke);return n.forEach((o=>{const u=new qt(o,0),h=new qt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(m=>{s=s.add(m.Yr)}))})),ie.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;me.isDocumentKey(u)||(u=u.child(""));const h=new qt(new me(u),0);let m=new jt(ke);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Yr)),!0)}),h),ie.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ye(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ie.forEach(n.mutations,(o=>{const u=new qt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new qt(n,0),o=this.Zr.firstAfterOrEqual(s);return ie.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.ri=e,this.docs=(function(){return new dt(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ie.resolve(s?s.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(e,n){let s=fr();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():nn.newInvalidDocument(o))})),ie.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=fr();const h=n.path,m=new me(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:E}}=p.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||XC($C(E),s)<=0||(o.has(E.key)||Xh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return ie.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ee(9500)}ii(e,n){return ie.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new SN(this)}getSize(e){return ie.resolve(this.size)}}class SN extends mN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ie.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.persistence=e,this.si=new oa((n=>Op(n)),Mp),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new jp,this.targetCount=0,this.ai=go.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ie.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new go(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.Pr(n),ie.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ie.waitFor(u).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ie.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ie.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),ie.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ie.resolve(s)}containsKey(e,n){return ie.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n){this.ui={},this.overlays={},this.ci=new Gh(0),this.li=!1,this.li=!0,this.hi=new vN,this.referenceDelegate=e(this),this.Pi=new bN(this),this.indexManager=new oN,this.remoteDocumentCache=(function(o){return new TN(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new sN(n),this.Ii=new yN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _N,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new EN(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ue("MemoryPersistence","Starting transaction:",e);const o=new wN(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ie.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class wN extends JC{constructor(e){super(),this.currentSequenceNumber=e}}class Up{constructor(e){this.persistence=e,this.Ri=new jp,this.Vi=null}static mi(e){return new Up(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ie.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(s=>{const o=me.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ie.or([()=>ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Dh{constructor(e,n){this.persistence=e,this.pi=new oa((s=>tI(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=dN(this,n)}static mi(e,n){return new Dh(e,n)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ie.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?ie.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,n).next((m=>{m||(s++,u.removeEntry(h,Se.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ch(e.data.value)),n}br(e,n,s){return ie.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ie.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Le(),o=Le();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new zp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return sx()?8:ZC(rn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new AN;return this.Ss(e,n,h).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,h,m.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(eo()<=Ve.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",to(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(eo()<=Ve.DEBUG&&ue("QueryEngine","Query:",to(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(eo()<=Ve.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",to(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vi(n))):ie.resolve())}ys(e,n){if(Fv(n))return ie.resolve(null);let s=Vi(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Wm(n,null,"F"),s=Vi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const h=Le(...u);return this.ps.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,s).next((p=>{const g=this.Ds(n,m);return this.Cs(n,g,h,p.readTime)?this.ys(e,Wm(n,null,"F")):this.vs(e,g,n,p)}))))})))))}ws(e,n,s,o){return Fv(n)||o.isEqual(Se.min())?ie.resolve(null):this.ps.getDocuments(e,s).next((u=>{const h=this.Ds(n,u);return this.Cs(n,h,s,o)?ie.resolve(null):(eo()<=Ve.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),to(n)),this.vs(e,h,n,YC(o,Zl)).next((m=>m)))}))}Ds(e,n){let s=new jt(dS(e));return n.forEach(((o,u)=>{Xh(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return eo()<=Ve.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",to(n)),this.ps.getDocumentsMatchingQuery(e,n,as.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="LocalStore",RN=3e8;class CN{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new dt(ke),this.xs=new oa((u=>Op(u)),Mp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function IN(r,e,n,s){return new CN(r,e,n,s)}async function LS(r,e){const n=we(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const h=[],m=[];let p=Le();for(const g of o){h.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}for(const g of u){m.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next((g=>({Ls:g,removedBatchIds:h,addedBatchIds:m})))}))}))}function NN(r,e){const n=we(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,g,E){const S=g.batch,w=S.keys();let D=ie.resolve();return w.forEach((V=>{D=D.next((()=>E.getEntry(p,V))).next((j=>{const U=g.docVersions.get(V);Ye(U!==null,48541),j.version.compareTo(U)<0&&(S.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),E.addEntry(j)))}))})),D.next((()=>m.mutationQueue.removeMutationBatch(p,S)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=Le();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function PS(r){const e=we(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function DN(r,e){const n=we(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((E,S)=>{const w=o.get(S);if(!w)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,S).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,S))));let D=w.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?D=D.withResumeToken(Jt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):E.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(E.resumeToken,s)),o=o.insert(S,D),(function(j,U,G){return j.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=RN?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(w,D,E)&&m.push(n.Pi.updateTargetData(u,D))}));let p=fr(),g=Le();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(ON(u,h,e.documentUpdates).next((E=>{p=E.ks,g=E.qs}))),!s.isEqual(Se.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((S=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(E)}return ie.waitFor(m).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,g))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function ON(r,e,n){let s=Le(),o=Le();return n.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let h=fr();return n.forEach(((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Se.min())?(e.removeEntry(m,p.readTime),h=h.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),h=h.insert(m,p)):ue(Bp,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)})),{ks:h,qs:o}}))}function MN(r,e){const n=we(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Ip),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function VN(r,e){const n=we(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,ie.resolve(o)):n.Pi.allocateTargetId(s).next((h=>(o=new Zr(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function np(r,e,n){const s=we(r),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!xo(h))throw h;ue(Bp,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function iE(r,e,n){const s=we(r);let o=Se.min(),u=Le();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,g,E){const S=we(p),w=S.xs.get(E);return w!==void 0?ie.resolve(S.Ms.get(w)):S.Pi.getTargetData(g,E)})(s,h,Vi(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,m.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,n?o:Se.min(),n?u:Le()))).next((m=>(kN(s,EI(e),m),{documents:m,Qs:u})))))}function kN(r,e,n){let s=r.Os.get(e)||Se.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(e,s)}class rE{constructor(){this.activeTargetIds=xI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LN{constructor(){this.Mo=new rE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="ConnectivityMonitor";class aE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(sE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(sE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nh=null;function ip(){return nh===null?nh=(function(){return 268435456+Math.round(2147483648*Math.random())})():nh++,"0x"+nh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="RestConnection",jN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class UN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Ah?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const h=ip(),m=this.zo(e,n.toUriEncodedString());ue(Cm,`Sending RPC '${e}' ${h}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:g}=new URL(m),E=Eo(g);return this.Jo(e,m,p,s,E).then((S=>(ue(Cm,`Received RPC '${e}' ${h}: `,S),S)),(S=>{throw ho(Cm,`RPC '${e}' ${h} failed with error: `,S,"url: ",m,"request:",s),S}))}Ho(e,n,s,o,u,h){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+wo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=jN[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class BN extends UN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const h=ip();return new Promise(((m,p)=>{const g=new zT;g.setWithCredentials(!0),g.listenOnce(BT.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case uh.NO_ERROR:const S=g.getResponseJson();ue(en,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(S)),m(S);break;case uh.TIMEOUT:ue(en,`RPC '${e}' ${h} timed out`),p(new le(ee.DEADLINE_EXCEEDED,"Request time out"));break;case uh.HTTP_ERROR:const w=g.getStatus();if(ue(en,`RPC '${e}' ${h} failed with status:`,w,"response text:",g.getResponseText()),w>0){let D=g.getResponseJson();Array.isArray(D)&&(D=D[0]);const V=D==null?void 0:D.error;if(V&&V.status&&V.message){const j=(function(G){const X=G.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(X)>=0?X:ee.UNKNOWN})(V.status);p(new le(j,V.message))}else p(new le(ee.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new le(ee.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:h,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ue(en,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(o);ue(en,`RPC '${e}' ${h} sending request:`,o),g.send(n,"POST",E,s,15)}))}T_(e,n,s){const o=ip(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=FT(),m=HT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");ue(en,`Creating RPC '${e}' stream ${o}: ${E}`,p);const S=h.createWebChannel(E,p);this.I_(S);let w=!1,D=!1;const V=new zN({Yo:U=>{D?ue(en,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(w||(ue(en,`Opening RPC '${e}' stream ${o} transport.`),S.open(),w=!0),ue(en,`RPC '${e}' stream ${o} sending:`,U),S.send(U))},Zo:()=>S.close()}),j=(U,G,X)=>{U.listen(G,($=>{try{X($)}catch(se){setTimeout((()=>{throw se}),0)}}))};return j(S,Ul.EventType.OPEN,(()=>{D||(ue(en,`RPC '${e}' stream ${o} transport opened.`),V.o_())})),j(S,Ul.EventType.CLOSE,(()=>{D||(D=!0,ue(en,`RPC '${e}' stream ${o} transport closed`),V.a_(),this.E_(S))})),j(S,Ul.EventType.ERROR,(U=>{D||(D=!0,ho(en,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),V.a_(new le(ee.UNAVAILABLE,"The operation could not be completed")))})),j(S,Ul.EventType.MESSAGE,(U=>{var G;if(!D){const X=U.data[0];Ye(!!X,16349);const $=X,se=($==null?void 0:$.error)||((G=$[0])==null?void 0:G.error);if(se){ue(en,`RPC '${e}' stream ${o} received error:`,se);const ye=se.status;let pe=(function(C){const M=Ot[C];if(M!==void 0)return wS(M)})(ye),I=se.message;pe===void 0&&(pe=ee.INTERNAL,I="Unknown error status: "+ye+" with message "+se.message),D=!0,V.a_(new le(pe,I)),S.close()}else ue(en,`RPC '${e}' stream ${o} received:`,X),V.u_(X)}})),j(m,qT.STAT_EVENT,(U=>{U.stat===Fm.PROXY?ue(en,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Fm.NOPROXY&&ue(en,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Im(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(r){return new GI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="PersistentStream";class US{constructor(e,n,s,o,u,h,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jS(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(hr(n.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new le(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(oE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ue(oE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qN extends US{constructor(e,n,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=YI(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Se.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Se.min():h.readTime?ki(h.readTime):Se.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=tp(this.serializer),n.addTarget=(function(u,h){let m;const p=h.target;if(m=$m(p)?{documents:WI(u,p)}:{query:JI(u,p).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=RS(u,h.resumeToken);const g=Jm(u,h.expectedCount);g!==null&&(m.expectedCount=g)}else if(h.snapshotVersion.compareTo(Se.min())>0){m.readTime=Nh(u,h.snapshotVersion.toTimestamp());const g=Jm(u,h.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,e);const s=eN(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=tp(this.serializer),n.removeTarget=e,this.q_(n)}}class HN extends US{constructor(e,n,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=XI(e.writeResults,e.commitTime),s=ki(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=tp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>$I(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{}class GN extends FN{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new le(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(e,Zm(n,s),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new le(ee.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(e,Zm(n,s),o,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new le(ee.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class QN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hr(n),this.aa=!1):ue("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="RemoteStore";class KN{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{la(this)&&(ue(ra,"Restarting streams for network reachability change."),await(async function(p){const g=we(p);g.Ea.add(4),await gu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await nf(g)})(this))}))})),this.Ra=new QN(s,o)}}async function nf(r){if(la(r))for(const e of r.da)await e(!0)}async function gu(r){for(const e of r.da)await e(!1)}function zS(r,e){const n=we(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Gp(n)?Fp(n):Co(n).O_()&&Hp(n,e))}function qp(r,e){const n=we(r),s=Co(n);n.Ia.delete(e),s.O_()&&BS(n,e),n.Ia.size===0&&(s.O_()?s.L_():la(n)&&n.Ra.set("Unknown"))}function Hp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Co(r).Y_(e)}function BS(r,e){r.Va.Ue(e),Co(r).Z_(e)}function Fp(r){r.Va=new BI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Co(r).start(),r.Ra.ua()}function Gp(r){return la(r)&&!Co(r).x_()&&r.Ia.size>0}function la(r){return we(r).Ea.size===0}function qS(r){r.Va=void 0}async function YN(r){r.Ra.set("Online")}async function $N(r){r.Ia.forEach(((e,n)=>{Hp(r,e)}))}async function XN(r,e){qS(r),Gp(r)?(r.Ra.ha(e),Fp(r)):r.Ra.set("Unknown")}async function WN(r,e,n){if(r.Ra.set("Online"),e instanceof xS&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(s){ue(ra,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Oh(r,s)}else if(e instanceof dh?r.Va.Ze(e):e instanceof AS?r.Va.st(e):r.Va.tt(e),!n.isEqual(Se.min()))try{const s=await PS(r.localStore);n.compareTo(s)>=0&&await(function(u,h){const m=u.Va.Tt(h);return m.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.Ia.get(g);E&&u.Ia.set(g,E.withResumeToken(p.resumeToken,h))}})),m.targetMismatches.forEach(((p,g)=>{const E=u.Ia.get(p);if(!E)return;u.Ia.set(p,E.withResumeToken(Jt.EMPTY_BYTE_STRING,E.snapshotVersion)),BS(u,p);const S=new Zr(E.target,p,g,E.sequenceNumber);Hp(u,S)})),u.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){ue(ra,"Failed to raise snapshot:",s),await Oh(r,s)}}async function Oh(r,e,n){if(!xo(e))throw e;r.Ea.add(1),await gu(r),r.Ra.set("Offline"),n||(n=()=>PS(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ue(ra,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await nf(r)}))}function HS(r,e){return e().catch((n=>Oh(r,n,e)))}async function rf(r){const e=we(r),n=cs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ip;for(;JN(e);)try{const o=await MN(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,ZN(e,o)}catch(o){await Oh(e,o)}FS(e)&&GS(e)}function JN(r){return la(r)&&r.Ta.length<10}function ZN(r,e){r.Ta.push(e);const n=cs(r);n.O_()&&n.X_&&n.ea(e.mutations)}function FS(r){return la(r)&&!cs(r).x_()&&r.Ta.length>0}function GS(r){cs(r).start()}async function eD(r){cs(r).ra()}async function tD(r){const e=cs(r);for(const n of r.Ta)e.ea(n.mutations)}async function nD(r,e,n){const s=r.Ta.shift(),o=kp.from(s,e,n);await HS(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await rf(r)}async function iD(r,e){e&&cs(r).X_&&await(async function(s,o){if((function(h){return jI(h)&&h!==ee.ABORTED})(o.code)){const u=s.Ta.shift();cs(s).B_(),await HS(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await rf(s)}})(r,e),FS(r)&&GS(r)}async function lE(r,e){const n=we(r);n.asyncQueue.verifyOperationInProgress(),ue(ra,"RemoteStore received new credentials");const s=la(n);n.Ea.add(3),await gu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await nf(n)}async function rD(r,e){const n=we(r);e?(n.Ea.delete(2),await nf(n)):e||(n.Ea.add(2),await gu(n),n.Ra.set("Unknown"))}function Co(r){return r.ma||(r.ma=(function(n,s,o){const u=we(n);return u.sa(),new qN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:YN.bind(null,r),t_:$N.bind(null,r),r_:XN.bind(null,r),H_:WN.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Gp(r)?Fp(r):r.Ra.set("Unknown")):(await r.ma.stop(),qS(r))}))),r.ma}function cs(r){return r.fa||(r.fa=(function(n,s,o){const u=we(n);return u.sa(),new HN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:eD.bind(null,r),r_:iD.bind(null,r),ta:tD.bind(null,r),na:nD.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await rf(r)):(await r.fa.stop(),r.Ta.length>0&&(ue(ra,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const h=Date.now()+s,m=new Qp(e,n,h,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kp(r,e){if(hr("AsyncQueue",`${e}: ${r}`),xo(r))return new le(ee.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{static emptySet(e){return new lo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||me.comparator(n.key,s.key):(n,s)=>me.comparator(n.key,s.key),this.keyedMap=zl(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof lo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new lo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.ga=new dt(me.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class yo{constructor(e,n,s,o,u,h,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const h=[];return n.forEach((m=>{h.push({type:0,doc:m})})),new yo(e,n,lo.emptySet(n),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class aD{constructor(){this.queries=cE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=we(n),u=o.queries;o.queries=cE(),u.forEach(((h,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new le(ee.ABORTED,"Firestore shutting down"))}}function cE(){return new oa((r=>fS(r)),$h)}async function Yp(r,e){const n=we(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new sD,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const m=Kp(h,`Initialization of query '${to(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Xp(n)}async function $p(r,e){const n=we(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function oD(r,e){const n=we(r);let s=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const m of h.Sa)m.Fa(o)&&(s=!0);h.wa=o}}s&&Xp(n)}function lD(r,e,n){const s=we(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function Xp(r){r.Ca.forEach((e=>{e.next()}))}var rp,hE;(hE=rp||(rp={})).Ma="default",hE.Cache="cache";class Wp{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new yo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.key=e}}class KS{constructor(e){this.key=e}}class uD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=dS(e),this.tu=new lo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new uE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,S)=>{const w=o.get(E),D=Xh(this.query,S)?S:null,V=!!w&&this.mutatedKeys.has(w.key),j=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let U=!1;w&&D?w.data.isEqual(D.data)?V!==j&&(s.track({type:3,doc:D}),U=!0):this.su(w,D)||(s.track({type:2,doc:D}),U=!0,(p&&this.eu(D,p)>0||g&&this.eu(D,g)<0)&&(m=!0)):!w&&D?(s.track({type:0,doc:D}),U=!0):w&&!D&&(s.track({type:1,doc:w}),U=!0,(p||g)&&(m=!0)),U&&(D?(h=h.add(D),u=j?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:h,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((E,S)=>(function(D,V){const j=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:U})}};return j(D)-j(V)})(E.type,S.type)||this.eu(E.doc,S.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,g=p!==this.Za;return this.Za=p,h.length!==0||g?{snapshot:new yo(this.query,e.tu,u,h,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new uE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new KS(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new QS(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return yo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Jp="SyncEngine";class cD{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class hD{constructor(e){this.key=e,this.hu=!1}}class fD{constructor(e,n,s,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new oa((m=>fS(m)),$h),this.Iu=new Map,this.Eu=new Set,this.du=new dt(me.comparator),this.Au=new Map,this.Ru=new jp,this.Vu={},this.mu=new Map,this.fu=go.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function dD(r,e,n=!0){const s=ZS(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await YS(s,e,n,!0),o}async function mD(r,e){const n=ZS(r);await YS(n,e,!0,!1)}async function YS(r,e,n,s){const o=await VN(r.localStore,Vi(e)),u=o.targetId,h=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await pD(r,e,u,h==="current",o.resumeToken)),r.isPrimaryClient&&n&&zS(r.remoteStore,o),m}async function pD(r,e,n,s,o){r.pu=(S,w,D)=>(async function(j,U,G,X){let $=U.view.ru(G);$.Cs&&($=await iE(j.localStore,U.query,!1).then((({documents:I})=>U.view.ru(I,$))));const se=X&&X.targetChanges.get(U.targetId),ye=X&&X.targetMismatches.get(U.targetId)!=null,pe=U.view.applyChanges($,j.isPrimaryClient,se,ye);return dE(j,U.targetId,pe.au),pe.snapshot})(r,S,w,D);const u=await iE(r.localStore,e,!0),h=new uD(e,u.Qs),m=h.ru(u.documents),p=pu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),g=h.applyChanges(m,r.isPrimaryClient,p);dE(r,n,g.au);const E=new cD(e,n,h);return r.Tu.set(e,E),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),g.snapshot}async function gD(r,e,n){const s=we(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((h=>!$h(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await np(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&qp(s.remoteStore,o.targetId),sp(s,o.targetId)})).catch(Ao)):(sp(s,o.targetId),await np(s.localStore,o.targetId,!0))}async function yD(r,e){const n=we(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),qp(n.remoteStore,s.targetId))}async function _D(r,e,n){const s=AD(r);try{const o=await(function(h,m){const p=we(h),g=Ze.now(),E=m.reduce(((D,V)=>D.add(V.key)),Le());let S,w;return p.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let V=fr(),j=Le();return p.Ns.getEntries(D,E).next((U=>{V=U,V.forEach(((G,X)=>{X.isValidDocument()||(j=j.add(G))}))})).next((()=>p.localDocuments.getOverlayedDocuments(D,V))).next((U=>{S=U;const G=[];for(const X of m){const $=MI(X,S.get(X.key).overlayedDocument);$!=null&&G.push(new ps(X.key,$,rS($.value.mapValue),_n.exists(!0)))}return p.mutationQueue.addMutationBatch(D,g,G,m)})).next((U=>{w=U;const G=U.applyToLocalDocumentSet(S,j);return p.documentOverlayCache.saveOverlays(D,U.batchId,G)}))})).then((()=>({batchId:w.batchId,changes:pS(S)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,m,p){let g=h.Vu[h.currentUser.toKey()];g||(g=new dt(ke)),g=g.insert(m,p),h.Vu[h.currentUser.toKey()]=g})(s,o.batchId,n),await yu(s,o.changes),await rf(s.remoteStore)}catch(o){const u=Kp(o,"Failed to persist write");n.reject(u)}}async function $S(r,e){const n=we(r);try{const s=await DN(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&(Ye(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Ye(h.hu,14607):o.removedDocuments.size>0&&(Ye(h.hu,42227),h.hu=!1))})),await yu(n,s,e)}catch(s){await Ao(s)}}function fE(r,e,n){const s=we(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const p=we(h);p.onlineState=m;let g=!1;p.queries.forEach(((E,S)=>{for(const w of S.Sa)w.va(m)&&(g=!0)})),g&&Xp(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function vD(r,e,n){const s=we(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let h=new dt(me.comparator);h=h.insert(u,nn.newNoDocument(u,Se.min()));const m=Le().add(u),p=new ef(Se.min(),new Map,new dt(ke),h,m);await $S(s,p),s.du=s.du.remove(u),s.Au.delete(e),Zp(s)}else await np(s.localStore,e,!1).then((()=>sp(s,e,n))).catch(Ao)}async function ED(r,e){const n=we(r),s=e.batch.batchId;try{const o=await NN(n.localStore,e);WS(n,s,null),XS(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await yu(n,o)}catch(o){await Ao(o)}}async function TD(r,e,n){const s=we(r);try{const o=await(function(h,m){const p=we(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let E;return p.mutationQueue.lookupMutationBatch(g,m).next((S=>(Ye(S!==null,37113),E=S.keys(),p.mutationQueue.removeMutationBatch(g,S)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,E,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E))).next((()=>p.localDocuments.getDocuments(g,E)))}))})(s.localStore,e);WS(s,e,n),XS(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await yu(s,o)}catch(o){await Ao(o)}}function XS(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function WS(r,e,n){const s=we(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function sp(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||JS(r,s)}))}function JS(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(qp(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),Zp(r))}function dE(r,e,n){for(const s of n)s instanceof QS?(r.Ru.addReference(s.key,e),SD(r,s)):s instanceof KS?(ue(Jp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||JS(r,s.key)):Ee(19791,{wu:s})}function SD(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(ue(Jp,"New document in limbo: "+n),r.Eu.add(s),Zp(r))}function Zp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new me(st.fromString(e)),s=r.fu.next();r.Au.set(s,new hD(n)),r.du=r.du.insert(n,s),zS(r.remoteStore,new Zr(Vi(Yh(n.path)),s,"TargetPurposeLimboResolution",Gh.ce))}}async function yu(r,e,n){const s=we(r),o=[],u=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{h.push(s.pu(p,e,n).then((g=>{var E;if((g||n)&&s.isPrimaryClient){const S=g?!g.fromCache:(E=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,S?"current":"not-current")}if(g){o.push(g);const S=zp.As(p.targetId,g);u.push(S)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(p,g){const E=we(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>ie.forEach(g,(w=>ie.forEach(w.Es,(D=>E.persistence.referenceDelegate.addReference(S,w.targetId,D))).next((()=>ie.forEach(w.ds,(D=>E.persistence.referenceDelegate.removeReference(S,w.targetId,D)))))))))}catch(S){if(!xo(S))throw S;ue(Bp,"Failed to update sequence numbers: "+S)}for(const S of g){const w=S.targetId;if(!S.fromCache){const D=E.Ms.get(w),V=D.snapshotVersion,j=D.withLastLimboFreeSnapshotVersion(V);E.Ms=E.Ms.insert(w,j)}}})(s.localStore,u))}async function bD(r,e){const n=we(r);if(!n.currentUser.isEqual(e)){ue(Jp,"User change. New user:",e.toKey());const s=await LS(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new le(ee.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await yu(n,s.Ls)}}function wD(r,e){const n=we(r),s=n.Au.get(e);if(s&&s.hu)return Le().add(s.key);{let o=Le();const u=n.Iu.get(e);if(!u)return o;for(const h of u){const m=n.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function ZS(r){const e=we(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=$S.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vD.bind(null,e),e.Pu.H_=oD.bind(null,e.eventManager),e.Pu.yu=lD.bind(null,e.eventManager),e}function AD(r){const e=we(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ED.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TD.bind(null,e),e}class Mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=tf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return IN(this.persistence,new xN,e.initialUser,this.serializer)}Cu(e){return new kS(Up.mi,this.serializer)}Du(e){return new LN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mh.provider={build:()=>new Mh};class xD extends Mh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ye(this.persistence.referenceDelegate instanceof Dh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new hN(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new kS((s=>Dh.mi(s,n)),this.serializer)}}class ap{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>fE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=bD.bind(null,this.syncEngine),await rD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aD})()}createDatastore(e){const n=tf(e.databaseInfo.databaseId),s=(function(u){return new BN(u)})(e.databaseInfo);return(function(u,h,m,p){return new GN(u,h,m,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,h,m){return new KN(s,o,u,h,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>fE(this.syncEngine,n,0)),(function(){return aE.v()?new aE:new PN})())}createSyncEngine(e,n){return(function(o,u,h,m,p,g,E){const S=new fD(o,u,h,m,p,g);return E&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=we(o);ue(ra,"RemoteStore shutting down."),u.Ea.add(5),await gu(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ap.provider={build:()=>new ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="FirestoreClient";class RD{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=tn.UNAUTHENTICATED,this.clientId=Cp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async h=>{ue(hs,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(ue(hs,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Kp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Nm(r,e){r.asyncQueue.verifyOperationInProgress(),ue(hs,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await LS(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function mE(r,e){r.asyncQueue.verifyOperationInProgress();const n=await CD(r);ue(hs,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>lE(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>lE(e.remoteStore,o))),r._onlineComponents=e}async function CD(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ue(hs,"Using user provided OfflineComponentProvider");try{await Nm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;ho("Error using user provided cache. Falling back to memory cache: "+n),await Nm(r,new Mh)}}else ue(hs,"Using default OfflineComponentProvider"),await Nm(r,new xD(void 0));return r._offlineComponents}async function eb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ue(hs,"Using user provided OnlineComponentProvider"),await mE(r,r._uninitializedComponentsProvider._online)):(ue(hs,"Using default OnlineComponentProvider"),await mE(r,new ap))),r._onlineComponents}function ID(r){return eb(r).then((e=>e.syncEngine))}async function Vh(r){const e=await eb(r),n=e.eventManager;return n.onListen=dD.bind(null,e.syncEngine),n.onUnlisten=gD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=yD.bind(null,e.syncEngine),n}function ND(r,e,n={}){const s=new or;return r.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,p,g){const E=new eg({next:w=>{E.Nu(),h.enqueueAndForget((()=>$p(u,S)));const D=w.docs.has(m);!D&&w.fromCache?g.reject(new le(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&w.fromCache&&p&&p.source==="server"?g.reject(new le(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(w)},error:w=>g.reject(w)}),S=new Wp(Yh(m.path),E,{includeMetadataChanges:!0,qa:!0});return Yp(u,S)})(await Vh(r),r.asyncQueue,e,n,s))),s.promise}function DD(r,e,n={}){const s=new or;return r.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,p,g){const E=new eg({next:w=>{E.Nu(),h.enqueueAndForget((()=>$p(u,S))),w.fromCache&&p.source==="server"?g.reject(new le(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(w)},error:w=>g.reject(w)}),S=new Wp(m,E,{includeMetadataChanges:!0,qa:!0});return Yp(u,S)})(await Vh(r),r.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="firestore.googleapis.com",gE=!0;class yE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nb,this.ssl=gE}else this.host=e.host,this.ssl=e.ssl??gE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uN)throw new le(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tb(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new le(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new le(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new le(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sf{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new PC;switch(s.type){case"firstParty":return new BC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new le(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=pE.get(n);s&&(ue("ComponentProvider","Removing Datastore"),pE.delete(n),s.terminate())})(this),Promise.resolve()}}function OD(r,e,n,s={}){var g;r=In(r,sf);const o=Eo(e),u=r._getSettings(),h={...u,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${n}`;o&&(JE(`https://${m}`),ZE("Firestore",!0)),u.host!==nb&&u.host!==m&&ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!ea(p,h)&&(r._setSettings(p),s.mockUserToken)){let E,S;if(typeof s.mockUserToken=="string")E=s.mockUserToken,S=tn.MOCK_USER;else{E=XA(s.mockUserToken,(g=r._app)==null?void 0:g.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new le(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new tn(w)}r._authCredentials=new jC(new QT(E,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new gs(this.firestore,e,this._query)}}class Tt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}toJSON(){return{type:Tt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(du(n,Tt._jsonSchema))return new Tt(e,s||null,new me(st.fromString(n.referencePath)))}}Tt._jsonSchemaVersion="firestore/documentReference/1.0",Tt._jsonSchema={type:Vt("string",Tt._jsonSchemaVersion),referencePath:Vt("string")};class ss extends gs{constructor(e,n,s){super(e,n,Yh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new me(e))}withConverter(e){return new ss(this.firestore,e,this._path)}}function Qe(r,e,...n){if(r=St(r),KT("collection","path",e),r instanceof sf){const s=st.fromString(e,...n);return Nv(s),new ss(r,null,s)}{if(!(r instanceof Tt||r instanceof ss))throw new le(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(st.fromString(e,...n));return Nv(s),new ss(r.firestore,null,s)}}function Ws(r,e,...n){if(r=St(r),arguments.length===1&&(e=Cp.newId()),KT("doc","path",e),r instanceof sf){const s=st.fromString(e,...n);return Iv(s),new Tt(r,null,new me(s))}{if(!(r instanceof Tt||r instanceof ss))throw new le(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(st.fromString(e,...n));return Iv(s),new Tt(r.firestore,r instanceof ss?r.converter:null,new me(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="AsyncQueue";class vE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jS(this,"async_queue_retry"),this._c=()=>{const s=Im();s&&ue(_E,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Im();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Im();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new or;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xo(e))throw e;ue(_E,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,hr("INTERNAL UNHANDLED ERROR: ",EE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Qp.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ee(47125,{Pc:EE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function EE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class dr extends sf{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new vE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vE(e),this._firestoreClient=void 0,await e}}}function MD(r,e){const n=typeof r=="object"?r:iT(),s=typeof r=="string"?r:Ah,o=_p(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=YA("firestore");u&&OD(o,...u)}return o}function _u(r){if(r._terminated)throw new le(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||VD(r),r._firestoreClient}function VD(r){var s,o,u;const e=r._freezeSettings(),n=(function(m,p,g,E){return new rI(m,p,g,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,tb(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new RD(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hn(Jt.fromBase64String(e))}catch(n){throw new le(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Hn(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(du(e,Hn._jsonSchema))return Hn.fromBase64String(e.bytes)}}Hn._jsonSchemaVersion="firestore/bytes/1.0",Hn._jsonSchema={type:Vt("string",Hn._jsonSchemaVersion),bytes:Vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Li._jsonSchemaVersion}}static fromJSON(e){if(du(e,Li._jsonSchema))return new Li(e.latitude,e.longitude)}}Li._jsonSchemaVersion="firestore/geoPoint/1.0",Li._jsonSchema={type:Vt("string",Li._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(du(e,Pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Pi(e.vectorValues);throw new le(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pi._jsonSchemaVersion="firestore/vectorValue/1.0",Pi._jsonSchema={type:Vt("string",Pi._jsonSchemaVersion),vectorValues:Vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=/^__.*__$/;class LD{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ps(e,this.data,this.fieldMask,n,this.fieldTransforms):new mu(e,this.data,n,this.fieldTransforms)}}class ib{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ps(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ac:r})}}class ng{constructor(e,n,s,o,u,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ng({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return kh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(rb(this.Ac)&&kD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class PD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||tf(e)}Cc(e,n,s,o=!1){return new ng({Ac:e,methodName:n,Dc:s,path:Wt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function af(r){const e=r._freezeSettings(),n=tf(r._databaseId);return new PD(r._databaseId,!!e.ignoreUndefinedProperties,n)}function sb(r,e,n,s,o,u={}){const h=r.Cc(u.merge||u.mergeFields?2:0,e,n,o);ig("Data must be an object, but it was:",h,s);const m=lb(s,h);let p,g;if(u.merge)p=new Cn(h.fieldMask),g=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const S of u.mergeFields){const w=op(e,S,n);if(!h.contains(w))throw new le(ee.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);cb(E,w)||E.push(w)}p=new Cn(E),g=h.fieldTransforms.filter((S=>p.covers(S.field)))}else p=null,g=h.fieldTransforms;return new LD(new gn(m),p,g)}class of extends tg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof of}}function ab(r,e,n,s){const o=r.Cc(1,e,n);ig("Data must be an object, but it was:",o,s);const u=[],h=gn.empty();ms(s,((p,g)=>{const E=rg(e,p,n);g=St(g);const S=o.yc(E);if(g instanceof of)u.push(E);else{const w=Eu(g,S);w!=null&&(u.push(E),h.set(E,w))}}));const m=new Cn(u);return new ib(h,m,o.fieldTransforms)}function ob(r,e,n,s,o,u){const h=r.Cc(1,e,n),m=[op(e,s,n)],p=[o];if(u.length%2!=0)throw new le(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<u.length;w+=2)m.push(op(e,u[w])),p.push(u[w+1]);const g=[],E=gn.empty();for(let w=m.length-1;w>=0;--w)if(!cb(g,m[w])){const D=m[w];let V=p[w];V=St(V);const j=h.yc(D);if(V instanceof of)g.push(D);else{const U=Eu(V,j);U!=null&&(g.push(D),E.set(D,U))}}const S=new Cn(g);return new ib(E,S,h.fieldTransforms)}function jD(r,e,n,s=!1){return Eu(n,r.Cc(s?4:3,e))}function Eu(r,e){if(ub(r=St(r)))return ig("Unsupported field value:",e,r),lb(r,e);if(r instanceof tg)return(function(s,o){if(!rb(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let h=0;for(const m of s){let p=Eu(m,o.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),h++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=St(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return RI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Ze.fromDate(s);return{timestampValue:Nh(o.serializer,u)}}if(s instanceof Ze){const u=new Ze(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Nh(o.serializer,u)}}if(s instanceof Li)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Hn)return{bytesValue:RS(o.serializer,s._byteString)};if(s instanceof Tt){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Pp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Pi)return(function(h,m){return{mapValue:{fields:{[nS]:{stringValue:iS},[xh]:{arrayValue:{values:h.toArray().map((g=>{if(typeof g!="number")throw m.Sc("VectorValues must only contain numeric values.");return Vp(m.serializer,g)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Fh(s)}`)})(r,e)}function lb(r,e){const n={};return XT(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ms(r,((s,o)=>{const u=Eu(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function ub(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ze||r instanceof Li||r instanceof Hn||r instanceof Tt||r instanceof tg||r instanceof Pi)}function ig(r,e,n){if(!ub(n)||!YT(n)){const s=Fh(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function op(r,e,n){if((e=St(e))instanceof vu)return e._internalPath;if(typeof e=="string")return rg(r,e);throw kh("Field path arguments must be of type string or ",r,!1,void 0,n)}const UD=new RegExp("[~\\*/\\[\\]]");function rg(r,e,n){if(e.search(UD)>=0)throw kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new vu(...e.split("."))._internalPath}catch{throw kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function kh(r,e,n,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||h)&&(p+=" (found",u&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new le(ee.INVALID_ARGUMENT,m+r+p)}function cb(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zD extends hb{data(){return super.data()}}function lf(r,e){return typeof e=="string"?rg(r,e):e instanceof vu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new le(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sg{}class db extends sg{}function yn(r,e,...n){let s=[];e instanceof sg&&s.push(e),s=s.concat(n),(function(u){const h=u.filter((p=>p instanceof ag)).length,m=u.filter((p=>p instanceof uf)).length;if(h>1||h>0&&m>0)throw new le(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class uf extends db{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new uf(e,n,s)}_apply(e){const n=this._parse(e);return mb(e._query,n),new gs(e.firestore,e.converter,Xm(e._query,n))}_parse(e){const n=af(e.firestore);return(function(u,h,m,p,g,E,S){let w;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new le(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){bE(S,E);const V=[];for(const j of S)V.push(SE(p,u,j));w={arrayValue:{values:V}}}else w=SE(p,u,S)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||bE(S,E),w=jD(m,h,S,E==="in"||E==="not-in");return Mt.create(g,E,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ht(r,e,n){const s=e,o=lf("where",r);return uf._create(o,s,n)}class ag extends sg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ag(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:ai.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let h=o;const m=u.getFlattenedFilters();for(const p of m)mb(h,p),h=Xm(h,p)})(e._query,n),new gs(e.firestore,e.converter,Xm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class og extends db{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new og(e,n)}_apply(e){const n=(function(o,u,h){if(o.startAt!==null)throw new le(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new le(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new iu(u,h)})(e._query,this._field,this._direction);return new gs(e.firestore,e.converter,(function(o,u){const h=o.explicitOrderBy.concat([u]);return new Ro(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function BD(r,e="asc"){const n=e,s=lf("orderBy",r);return og._create(s,n)}function SE(r,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new le(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hS(e)&&n.indexOf("/")!==-1)throw new le(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(st.fromString(n));if(!me.isDocumentKey(s))throw new le(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return jv(r,new me(s))}if(n instanceof Tt)return jv(r,n._key);throw new le(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fh(n)}.`)}function bE(r,e){if(!Array.isArray(r)||r.length===0)throw new le(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mb(r,e){const n=(function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new le(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class qD{convertValue(e,n="none"){switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ms(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){var s,o,u;const n=(u=(o=(s=e.fields)==null?void 0:s[xh].arrayValue)==null?void 0:o.values)==null?void 0:u.map((h=>Et(h.doubleValue)));return new Pi(n)}convertGeoPoint(e){return new Li(Et(e.latitude),Et(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Kh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(eu(e));default:return null}}convertTimestamp(e){const n=os(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=st.fromString(e);Ye(MS(s),9688,{name:e});const o=new tu(s.get(1),s.get(3)),u=new me(s.popFirst(5));return o.isEqual(n)||hr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class ql{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Js extends hb{constructor(e,n,s,o,u,h){super(e,n,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(lf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Js._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Js._jsonSchemaVersion="firestore/documentSnapshot/1.0",Js._jsonSchema={type:Vt("string",Js._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class mh extends Js{data(e={}){return super.data(e)}}class Zs{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new ql(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new mh(this._firestore,this._userDataWriter,s.key,s,new ql(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const p=new mh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ql(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new mh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ql(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,E=-1;return m.type!==0&&(g=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:HD(m.type),doc:p,oldIndex:g,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(r){r=In(r,Tt);const e=In(r.firestore,dr);return ND(_u(e),r._key).then((n=>gb(e,r,n)))}Zs._jsonSchemaVersion="firestore/querySnapshot/1.0",Zs._jsonSchema={type:Vt("string",Zs._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class lg extends qD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}function ft(r){r=In(r,gs);const e=In(r.firestore,dr),n=_u(e),s=new lg(e);return fb(r._query),DD(n,r._query).then((o=>new Zs(e,s,r,o)))}function ug(r,e,n,...s){r=In(r,Tt);const o=In(r.firestore,dr),u=af(o);let h;return h=typeof(e=St(e))=="string"||e instanceof vu?ob(u,"updateDoc",r._key,e,n,s):ab(u,"updateDoc",r._key,e),ff(o,[h.toMutation(r._key,_n.exists(!0))])}function wE(r){return ff(In(r.firestore,dr),[new Zh(r._key,_n.none())])}function cf(r,e){const n=In(r.firestore,dr),s=Ws(r),o=pb(r.converter,e);return ff(n,[sb(af(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,_n.exists(!1))]).then((()=>s))}function hf(r,...e){var p,g,E;r=St(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||TE(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(TE(e[s])){const S=e[s];e[s]=(p=S.next)==null?void 0:p.bind(S),e[s+1]=(g=S.error)==null?void 0:g.bind(S),e[s+2]=(E=S.complete)==null?void 0:E.bind(S)}let u,h,m;if(r instanceof Tt)h=In(r.firestore,dr),m=Yh(r._key.path),u={next:S=>{e[s]&&e[s](gb(h,r,S))},error:e[s+1],complete:e[s+2]};else{const S=In(r,gs);h=In(S.firestore,dr),m=S._query;const w=new lg(h);u={next:D=>{e[s]&&e[s](new Zs(h,w,S,D))},error:e[s+1],complete:e[s+2]},fb(r._query)}return(function(w,D,V,j){const U=new eg(j),G=new Wp(D,U,V);return w.asyncQueue.enqueueAndForget((async()=>Yp(await Vh(w),G))),()=>{U.Nu(),w.asyncQueue.enqueueAndForget((async()=>$p(await Vh(w),G)))}})(_u(h),m,o,u)}function ff(r,e){return(function(s,o){const u=new or;return s.asyncQueue.enqueueAndForget((async()=>_D(await ID(s),o,u))),u.promise})(_u(r),e)}function gb(r,e,n){const s=n.docs.get(e._key),o=new lg(r);return new Js(r,o,e._key,s,new ql(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=af(e)}set(e,n,s){this._verifyNotCommitted();const o=Dm(e,this._firestore),u=pb(o.converter,n,s),h=sb(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,s);return this._mutations.push(h.toMutation(o._key,_n.none())),this}update(e,n,s,...o){this._verifyNotCommitted();const u=Dm(e,this._firestore);let h;return h=typeof(n=St(n))=="string"||n instanceof vu?ob(this._dataReader,"WriteBatch.update",u._key,n,s,o):ab(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(h.toMutation(u._key,_n.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Dm(e,this._firestore);return this._mutations=this._mutations.concat(new Zh(n._key,_n.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Dm(r,e){if((r=St(r)).firestore!==e)throw new le(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(r){return _u(r=In(r,dr)),new GD(r,(e=>ff(r,e)))}(function(e,n=!0){(function(o){wo=o})(To),uo(new ta("firestore",((s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),m=new dr(new UC(s.getProvider("auth-internal")),new qC(h,s.getProvider("app-check-internal")),(function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new le(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tu(g.options.projectId,E)})(h,o),h);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),ns(Av,xv,e),ns(Av,xv,"esm2020")})();var KD="firebase",YD="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ns(KD,YD,"app");const $D={apiKey:"AIzaSyD5230yNYk6WneHum7z-HJH5mnqto_t1AM",authDomain:"biometric-attendace-a4bfe.firebaseapp.com",projectId:"biometric-attendace-a4bfe",storageBucket:"biometric-attendace-a4bfe.firebasestorage.app",messagingSenderId:"17500864277",appId:"1:17500864277:web:fa2e70843ff97d152bf31c",measurementId:"G-6Y38QMXG0V"},yb=nT($D),cg=kC(yb),De=MD(yb),_b=k.createContext(void 0);function hg(){const r=k.useContext(_b);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r}function XD({children:r}){const[e,n]=k.useState(null),[s,o]=k.useState(null),[u,h]=k.useState(!0);k.useEffect(()=>bR(cg,async g=>{if(n(g),g)try{const E=Ws(De,"admins",g.uid),S=await FD(E);S.exists()?o(S.data()):o({name:g.displayName||"Admin",role:"Administrator",email:g.email||"No email"})}catch(E){console.error("Failed to fetch admin data:",E),o(null)}else o(null);h(!1)}),[]);const m={currentUser:e,adminData:s,loading:u};return T.jsx(_b.Provider,{value:m,children:r})}function WD(){const[r,e]=k.useState(""),[n,s]=k.useState(""),[o,u]=k.useState(""),[h,m]=k.useState(!1),p=Ph(),{currentUser:g}=hg();k.useEffect(()=>{g&&p("/dashboard",{replace:!0})},[g,p]);const E=async S=>{if(S.preventDefault(),u(""),m(!0),!r||!n){u("Please enter both email and password."),m(!1);return}try{await ER(cg,r,n),p("/dashboard")}catch(w){switch(w.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":u("Incorrect email or password. Please try again.");break;case"auth/invalid-email":u("Please enter a valid email address.");break;default:u("Failed to log in. Please check your credentials.");break}}finally{m(!1)}};return T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:T.jsxs("div",{className:"max-w-md w-full space-y-8 p-10 bg-white shadow-lg rounded-xl",children:[T.jsx("div",{children:T.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Admin Sign In"})}),T.jsxs("form",{className:"mt-8 space-y-6",onSubmit:E,children:[o&&T.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:T.jsx("span",{className:"block sm:inline",children:o})}),T.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),T.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:r,onChange:S=>e(S.target.value)})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),T.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:n,onChange:S=>s(S.target.value)})]})]}),T.jsx("div",{children:T.jsx("button",{type:"submit",disabled:h,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-300 disabled:cursor-not-allowed",children:h?"Signing in...":"Sign in"})})]})]})})}function ua(){return T.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-10 w-10 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}const Om=["Computer Science","Software Engineering","Information Technology","Cyber Security","Electrical Electronics"],Mm=["100","200","300","400","500"];function JD({isOpen:r,onClose:e,onSubmit:n,studentData:s}){const[o,u]=k.useState(""),[h,m]=k.useState(""),[p,g]=k.useState(Om[0]),[E,S]=k.useState(Mm[0]),[w,D]=k.useState(""),[V,j]=k.useState("idle"),[U,G]=k.useState("Not Captured"),[X,$]=k.useState(""),se=k.useRef(null);if(k.useEffect(()=>{s?(u(s.name),m(s.studentId||""),g(s.department),S(s.level),s.fingerprintTemplate?(D(s.fingerprintTemplate),j("success"),G("Template captured")):(D(""),j("idle"),G("Not Captured"))):(u(""),m(""),g(Om[0]),S(Mm[0]),D(""),j("idle"),G("Not Captured")),$("")},[s,r]),k.useEffect(()=>{if(r){se.current=new WebSocket("ws://localhost:5000");let x=!0;return se.current.onopen=()=>{x&&(console.log("Successfully connected to fingerprint bridge."),j("idle"),G("Ready to capture"))},se.current.onmessage=C=>{if(x)try{const M=JSON.parse(C.data);M.type==="ENROLL_RESPONSE"?M.success?(D(M.id.toString()),j("success"),G(`Template captured successfully! (ID: ${M.id})`)):(j("error"),G(M.error||"Capture failed.")):M.type}catch{console.log("Non-JSON message:",C.data)}},se.current.onerror=C=>{x&&(console.error("WebSocket Error:",C),j("error"),G("Bridge connection failed."))},se.current.onclose=()=>{x&&(console.log("Disconnected from fingerprint bridge."),V!=="success"&&V!=="error"&&(j("idle"),G("Bridge disconnected.")))},()=>{x=!1,se.current&&se.current.readyState===WebSocket.OPEN&&se.current.close()}}},[r]),!r)return null;const ye=()=>{if(!se.current||se.current.readyState!==WebSocket.OPEN){j("error"),G("Bridge not connected. Re-open form.");return}j("capturing"),G("Sending capture command..."),se.current.send("CAPTURE_FINGERPRINT")},pe=()=>{switch(V){case"success":return"bg-green-100 text-green-800";case"capturing":return"bg-blue-100 text-blue-800 animate-pulse";case"error":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},I=x=>{if(x.preventDefault(),!o||!h||!p||!E){$("All fields except fingerprint are required.");return}if(!w||V!=="success"){$("A fingerprint must be successfully captured.");return}n({name:o,studentId:h,department:p,level:E,fingerprintTemplate:w})};return T.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 z-50 flex justify-center items-center p-4",children:T.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-md",children:[T.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:s?"Edit Student":"Add Student"}),T.jsxs("form",{onSubmit:I,className:"space-y-4",children:[X&&T.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:T.jsx("span",{className:"block sm:inline",children:X})}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),T.jsx("input",{type:"text",id:"name",value:o,onChange:x=>u(x.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"studentId",className:"block text-sm font-medium text-gray-700",children:"Student ID"}),T.jsx("input",{type:"text",id:"studentId",value:h,onChange:x=>m(x.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700",children:"Department"}),T.jsx("select",{id:"department",value:p,onChange:x=>g(x.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:Om.map(x=>T.jsx("option",{value:x,children:x},x))})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"level",className:"block text-sm font-medium text-gray-700",children:"Level"}),T.jsx("select",{id:"level",value:E,onChange:x=>S(x.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:Mm.map(x=>T.jsx("option",{value:x,children:x},x))})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fingerprint"}),T.jsxs("div",{className:"mt-1 flex items-center space-x-4 p-2 border border-gray-300 rounded-md",children:[T.jsx("button",{type:"button",onClick:ye,disabled:V==="capturing",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-300 disabled:cursor-wait",children:V==="capturing"?"Capturing...":"Capture"}),T.jsx("div",{className:"flex-1 text-center",children:T.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full transition-colors duration-300 ${pe()}`,children:U})})]})]}),T.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[T.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),T.jsx("button",{type:"submit",disabled:V!=="success",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-gray-400",children:"Save"})]})]})]})})}function ZD(){const[r,e]=k.useState([]),[n,s]=k.useState(!0),[o,u]=k.useState(!1),[h,m]=k.useState(null),[p,g]=k.useState(null);k.useEffect(()=>{s(!0);const V=hf(Qe(De,"students"),j=>{const U=j.docs.map(G=>({id:G.id,...G.data()}));e(U),s(!1)},j=>{console.error("Error fetching students:",j),s(!1)});return()=>V()},[]);const E=(V=null)=>{m(V),u(!0)},S=()=>{u(!1),m(null)},w=async V=>{try{if(h){const j=Ws(De,"students",h.id);await ug(j,V)}else await cf(Qe(De,"students"),V);S()}catch(j){console.error("Error saving student:",j)}},D=async V=>{const j=r.find(U=>U.id===V);if(!j){console.error("Student not found for deletion.");return}if(!j.fingerprintTemplate){if(window.confirm("This student has no fingerprint registered. Are you sure you want to delete them from the database?"))try{g(V),await wE(Ws(De,"students",V))}catch(U){console.error("Error deleting student from Firestore:",U),alert("Error deleting student from database.")}finally{g(null)}return}if(window.confirm("Are you sure you want to delete this student? This will also remove their fingerprint from the scanner module.")){g(V);const U=new WebSocket("ws://localhost:5000");U.onopen=()=>{console.log("Connected to fingerprint bridge for deletion."),U.send(`DELETE_FINGERPRINT:${j.fingerprintTemplate}`)},U.onmessage=async G=>{try{const X=JSON.parse(G.data);if(X.type==="DELETE_RESPONSE"){if(X.success)try{await wE(Ws(De,"students",V)),alert("Student and fingerprint deleted successfully.")}catch($){console.error("Firestore delete error:",$),alert("Fingerprint deleted, but database cleanup failed.")}else alert(`Failed to delete fingerprint: ${X.error||"Unknown error"}`);U.close()}}catch{console.log("Ignored non-JSON message during delete")}},U.onerror=G=>{console.error("WebSocket Error:",G),alert("Could not connect to the fingerprint bridge. Please ensure it is running and refresh the page."),g(null),(U.readyState===WebSocket.OPEN||U.readyState===WebSocket.CONNECTING)&&U.close()},U.onclose=()=>{console.log("Disconnected from fingerprint bridge."),g(null)}}};return n?T.jsx("div",{className:"flex justify-center items-center p-8",children:T.jsx(ua,{})}):T.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-6 md:p-8",children:[T.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center mb-6 gap-4",children:[T.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Manage Students"}),T.jsx("button",{onClick:()=>E(),className:"px-5 py-2.5 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Add Student"})]}),T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[T.jsx("thead",{className:"bg-gray-50",children:T.jsxs("tr",{children:[T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student ID"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Level"}),T.jsx("th",{scope:"col",className:"relative px-6 py-3",children:T.jsx("span",{className:"sr-only",children:"Actions"})})]})}),T.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.length>0?r.map(V=>T.jsxs("tr",{className:"hover:bg-gray-50",children:[T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:V.name}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:V.studentId}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:V.department}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:V.level}),T.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-4",children:[T.jsx("button",{onClick:()=>E(V),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),T.jsx("button",{onClick:()=>D(V.id),disabled:p===V.id,className:"text-red-600 hover:text-red-900 disabled:text-gray-400 disabled:cursor-wait",children:p===V.id?"Deleting...":"Delete"})]})]},V.id)):T.jsx("tr",{children:T.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No students found."})})})]})}),o&&T.jsx(JD,{isOpen:o,onClose:S,onSubmit:w,studentData:h})]})}const AE=["Computer Science","Software Engineering","Information Technology","Cyber Security","Electrical Electronics"],xE=["100","200","300","400","500"];function e4({isOpen:r,onClose:e,onSubmit:n}){const[s,o]=k.useState(""),[u,h]=k.useState(""),[m,p]=k.useState(AE[0]),[g,E]=k.useState(xE[0]),[S,w]=k.useState("");if(!r)return null;const D=V=>{if(V.preventDefault(),!s||!u||!m||!g){w("All fields are required.");return}n({name:s,code:u,department:m,level:g})};return T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:T.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl p-8 w-full max-w-md",children:[T.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add Course"}),T.jsxs("form",{onSubmit:D,className:"space-y-4",children:[S&&T.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:T.jsx("span",{className:"block sm:inline",children:S})}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-white",children:"Course Name"}),T.jsx("input",{type:"text",id:"name",value:s,onChange:V=>o(V.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm  text-black focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"code",className:"block text-sm font-medium text-white",children:"Course Code"}),T.jsx("input",{type:"text",id:"code",value:u,onChange:V=>h(V.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-black focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-white",children:"Department"}),T.jsx("select",{id:"department",value:m,onChange:V=>p(V.target.value),className:"mt-1 block w-full px-3 py-2 border border-indigo-500 bg-gray-800 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:AE.map(V=>T.jsx("option",{value:V,children:V},V))})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"level",className:"block text-sm font-medium text-white",children:"Level"}),T.jsx("select",{id:"level",value:g,onChange:V=>E(V.target.value),className:"mt-1 block w-full px-3 py-2 border border-indigo-500 bg-gray-800 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:xE.map(V=>T.jsx("option",{value:V,children:V},V))})]}),T.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[T.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),T.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Save"})]})]})]})})}function t4(){const[r,e]=k.useState([]),[n,s]=k.useState(!0),[o,u]=k.useState(!1);k.useEffect(()=>{s(!0);const g=hf(Qe(De,"courses"),E=>{const S=E.docs.map(w=>({id:w.id,...w.data()}));e(S),s(!1)},E=>{console.error("Error fetching courses:",E),s(!1)});return()=>g()},[]);const h=()=>{u(!0)},m=()=>{u(!1)},p=async g=>{try{const S=(await cf(Qe(De,"courses"),g)).id,w=yn(Qe(De,"students"),Ht("department","==",g.department),Ht("level","==",g.level)),D=await ft(w);if(!D.empty){const V=QD(De);D.forEach(j=>{const U=Ws(Qe(De,"courseStudents"));V.set(U,{courseId:S,studentId:j.id})}),await V.commit()}m()}catch(E){console.error("Error saving course and enrolling students:",E)}};return n?T.jsx("div",{className:"flex justify-center items-center p-8",children:T.jsx(ua,{})}):T.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-8",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Manage Courses"}),T.jsx("button",{onClick:h,className:"px-4 py-2 bg-indigo-600 text-white font-medium rounded-md hover:bg-indigo-700",children:"Add Course"})]}),T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[T.jsx("thead",{className:"bg-gray-50",children:T.jsxs("tr",{children:[T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course Name"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course Code"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Level"})]})}),T.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.length>0?r.map(g=>T.jsxs("tr",{children:[T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:g.name}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.code}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.department}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.level})]},g.id)):T.jsx("tr",{children:T.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No courses found."})})})]})}),o&&T.jsx(e4,{isOpen:o,onClose:m,onSubmit:p})]})}function n4(){const[r,e]=k.useState([]),[n,s]=k.useState([]),[o,u]=k.useState(!0);k.useEffect(()=>{const m=async()=>{try{const E=(await ft(Qe(De,"courses"))).docs.map(S=>({id:S.id,...S.data()}));e(E)}catch(g){console.error("Error fetching courses:",g)}},p=hf(Qe(De,"sessions"),g=>{const E=g.docs.map(S=>({id:S.id,...S.data()}));s(E),u(!1)},g=>{console.error("Error fetching sessions:",g),u(!1)});return m(),()=>p()},[]);const h=async m=>{const p=yn(Qe(De,"sessions"),Ht("courseId","==",m),Ht("active","==",!0)),g=await ft(p);if(g.empty)await cf(Qe(De,"sessions"),{courseId:m,startTime:Ze.now(),endTime:null,active:!0});else{const E=g.docs[0];await ug(Ws(De,"sessions",E.id),{endTime:Ze.now(),active:!1})}};return o?T.jsx("div",{className:"flex justify-center items-center p-8",children:T.jsx(ua,{})}):T.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-8",children:[T.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Manage Class Sessions"}),T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[T.jsx("thead",{className:"bg-gray-50",children:T.jsxs("tr",{children:[T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course Name"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),T.jsx("th",{scope:"col",className:"relative px-6 py-3",children:T.jsx("span",{className:"sr-only",children:"Actions"})})]})}),T.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.length>0?r.map(m=>{const p=n.some(g=>g.courseId===m.id&&g.active);return T.jsxs("tr",{children:[T.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[m.name," (",m.code,")"]}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:T.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p?"Active":"Inactive"})}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:T.jsx("button",{onClick:()=>h(m.id),className:`px-4 py-2 text-white font-medium rounded-md ${p?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:p?"End Session":"Start Session"})})]},m.id)}):T.jsx("tr",{children:T.jsx("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No courses found. Add courses first."})})})]})})]})}function vb({isOpen:r,onClose:e,latitude:n,longitude:s,title:o="Attendance Location"}){return!r||n===void 0||s===void 0?null:T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:T.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl overflow-hidden animate-fade-in-scale",children:[T.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 bg-gray-50",children:[T.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:o}),T.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:T.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),T.jsx("div",{className:"p-0 h-96 bg-gray-100 relative",children:T.jsx("iframe",{title:"Location Map",width:"100%",height:"100%",frameBorder:"0",style:{border:0},src:`https://maps.google.com/maps?q=${n},${s}&z=15&output=embed`,allowFullScreen:!0})}),T.jsxs("div",{className:"p-4 bg-gray-50 flex justify-between items-center text-sm text-gray-500",children:[T.jsxs("span",{children:["Lat: ",n.toFixed(6),", Lon: ",s.toFixed(6)]}),T.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${n},${s}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-medium",children:"Open in Google Maps"})]})]})})}/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r4=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),RE=r=>{const e=r4(r);return e.charAt(0).toUpperCase()+e.slice(1)},Eb=(...r)=>r.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),s4=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var a4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=k.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:h,...m},p)=>k.createElement("svg",{ref:p,...a4,width:e,height:e,stroke:r,strokeWidth:s?Number(n)*24/Number(e):n,className:Eb("lucide",o),...!u&&!s4(m)&&{"aria-hidden":"true"},...m},[...h.map(([g,E])=>k.createElement(g,E)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=(r,e)=>{const n=k.forwardRef(({className:s,...o},u)=>k.createElement(o4,{ref:u,iconNode:e,className:Eb(`lucide-${i4(RE(r))}`,`lucide-${r}`,s),...o}));return n.displayName=RE(r),n};/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Tb=Io("circle-check-big",l4);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Sb=Io("circle-x",u4);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],h4=Io("download",c4);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],bb=Io("fingerprint-pattern",f4);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],wb=Io("loader",d4);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["path",{d:"m13.5 6.5-3.148-3.148a1.205 1.205 0 0 0-1.704 0L6.352 5.648a1.205 1.205 0 0 0 0 1.704L9.5 10.5",key:"dzhfyz"}],["path",{d:"M16.5 7.5 19 5",key:"1ltcjm"}],["path",{d:"m17.5 10.5 3.148 3.148a1.205 1.205 0 0 1 0 1.704l-2.296 2.296a1.205 1.205 0 0 1-1.704 0L13.5 14.5",key:"nfoymv"}],["path",{d:"M9 21a6 6 0 0 0-6-6",key:"1iajcf"}],["path",{d:"M9.352 10.648a1.205 1.205 0 0 0 0 1.704l2.296 2.296a1.205 1.205 0 0 0 1.704 0l4.296-4.296a1.205 1.205 0 0 0 0-1.704l-2.296-2.296a1.205 1.205 0 0 0-1.704 0z",key:"nv9zqy"}]],p4=Io("satellite",m4);function g4(){const[r,e]=k.useState([]),[n,s]=k.useState(new Map),[o,u]=k.useState(new Map),[h,m]=k.useState(!0),[p,g]=k.useState(null);k.useEffect(()=>{(async()=>{try{const j=await ft(Qe(De,"students")),U=new Map(j.docs.map($=>[$.id,{id:$.id,...$.data()}]));s(U);const G=await ft(Qe(De,"courses")),X=new Map(G.docs.map($=>[$.id,{id:$.id,...$.data()}]));u(X)}catch(j){console.error("Error fetching students and courses:",j)}})();const D=yn(Qe(De,"attendance"),BD("joinTime","desc")),V=hf(D,j=>{const U=j.docs.map(G=>({id:G.id,...G.data()}));e(U),m(!1)},j=>{console.error("Error fetching attendance:",j),m(!1)});return()=>V()},[]);const E=()=>{const w=["Student Name","Course Name","Join Time","Sign Out Time","Status","Latitude","Longitude","Location"],D=S.map(G=>[G.studentName,G.courseName,G.joinTime.toDate().toLocaleString(),G.signOutTime?G.signOutTime.toDate().toLocaleString():"-",G.signOutTime?"Signed Out":"Signed In",G.latitude||"",G.longitude||"",G.locationName||""]),V=[w.join(","),...D.map(G=>G.map(X=>`"${X}"`).join(","))].join(`
`),j=new Blob([V],{type:"text/csv;charset=utf-8;"}),U=document.createElement("a");if(U.download!==void 0){const G=URL.createObjectURL(j);U.setAttribute("href",G),U.setAttribute("download","attendance_log.csv"),U.style.visibility="hidden",document.body.appendChild(U),U.click(),document.body.removeChild(U)}},S=k.useMemo(()=>r.map(w=>{var D,V;return{...w,studentName:((D=n.get(w.studentId))==null?void 0:D.name)||"Unknown Student",courseName:((V=o.get(w.courseId))==null?void 0:V.name)||"Unknown Course"}}),[r,n,o]);return h?T.jsx("div",{className:"flex justify-center items-center p-8",children:T.jsx(ua,{})}):T.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-8",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Live Attendance Log"}),T.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[T.jsx(h4,{size:18}),"Export CSV"]})]}),T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[T.jsx("thead",{className:"bg-gray-50",children:T.jsxs("tr",{children:[T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course Name"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Join Time"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coordinates"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Map"})]})}),T.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.length>0?S.map(w=>T.jsxs("tr",{children:[T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:w.studentName}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:w.courseName}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:w.joinTime.toDate().toLocaleString()}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-bold ${w.signOutTime?"bg-gray-100 text-gray-400 border border-gray-200":"bg-green-100 text-green-700 border border-green-200"}`,children:[T.jsx("div",{className:`w-2 h-2 rounded-full ${w.signOutTime?"bg-gray-400":"bg-green-500"}`}),"IN"]}),T.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-bold ${w.signOutTime?"bg-red-100 text-red-700 border border-red-200":"bg-gray-100 text-gray-400 border border-gray-200"}`,children:[T.jsx("div",{className:`w-2 h-2 rounded-full ${w.signOutTime?"bg-red-500":"bg-gray-400"}`}),"OUT"]})]})}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:w.latitude&&w.longitude?T.jsxs("span",{className:"font-mono text-xs",children:[w.latitude.toFixed(6),", ",w.longitude.toFixed(6)]}):T.jsx("span",{className:"text-gray-400",children:"No Data"})}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:w.latitude&&w.longitude?T.jsxs("button",{onClick:()=>g({lat:w.latitude,lon:w.longitude}),className:"text-blue-600 hover:text-blue-900 flex items-center text-xs font-medium",children:[T.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"View Map"]}):T.jsx("span",{className:"text-gray-400",children:""})})]},w.id)):T.jsx("tr",{children:T.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No attendance records yet."})})})]})}),T.jsx(vb,{isOpen:!!p,onClose:()=>g(null),latitude:p==null?void 0:p.lat,longitude:p==null?void 0:p.lon})]})}function y4(){const[r,e]=k.useState(!0),[n,s]=k.useState([]),[o,u]=k.useState(new Map),[h,m]=k.useState([]),[p,g]=k.useState([]),[E,S]=k.useState(""),[w,D]=k.useState(null);k.useEffect(()=>{(async()=>{e(!0);try{const[U,G,X,$]=await Promise.all([ft(Qe(De,"courses")),ft(Qe(De,"students")),ft(Qe(De,"sessions")),ft(Qe(De,"attendance"))]),se=U.docs.map(x=>({id:x.id,...x.data()})),ye=new Map(G.docs.map(x=>[x.id,{id:x.id,...x.data()}])),pe=X.docs.map(x=>({id:x.id,...x.data()})),I=$.docs.map(x=>({id:x.id,...x.data()}));s(se),u(ye),m(pe),g(I),se.length>0&&S(se[0].id)}catch(U){console.error("Error fetching analytics data:",U)}finally{e(!1)}})()},[]);const V=k.useMemo(()=>{if(!E||o.size===0)return[];const j=n.find(X=>X.id===E);if(!j)return[];const U=h.filter(X=>X.courseId===E).length,G=Array.from(o.values()).filter(X=>X.department===j.department&&X.level===j.level);return G.length===0?[]:G.map(X=>{const $=p.filter(x=>x.studentId===X.id&&x.courseId===E),se=$.length,ye=U>0?se/U*100:0;let pe,I;if($.length>0){const x=$[$.length-1];pe=x.latitude,I=x.longitude}return{studentDocId:X.id,studentId:X.studentId,studentName:X.name,totalClasses:U,attendedClasses:se,attendancePercentage:Math.round(ye),latitude:pe,longitude:I}})},[E,n,o,h,p]);return r?T.jsx("div",{className:"flex justify-center items-center p-8",children:T.jsx(ua,{})}):T.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-6 md:p-8",children:[T.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center mb-6 gap-4",children:[T.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Attendance Analytics"}),n.length>0&&T.jsxs("div",{children:[T.jsx("label",{htmlFor:"course-select",className:"sr-only",children:"Select a course"}),T.jsx("select",{id:"course-select",value:E,onChange:j=>S(j.target.value),className:"block w-full md:w-auto pl-3 pr-10 py-2 text-base bg-white border-gray-300 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:n.map(j=>T.jsxs("option",{value:j.id,children:[j.name," (",j.code,")"]},j.id))})]})]}),T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[T.jsx("thead",{className:"bg-gray-50",children:T.jsxs("tr",{children:[T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student ID"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Classes"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Classes Attended"}),T.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attendance %"}),T.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coordinates"}),T.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Map"})]})}),T.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.length>0?V.map(j=>T.jsxs("tr",{className:"hover:bg-gray-50",children:[T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:j.studentName}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.studentId}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.totalClasses}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.attendedClasses}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:T.jsxs("div",{className:"flex items-center",children:[T.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:T.jsx("div",{className:"bg-indigo-600 h-2.5 rounded-full",style:{width:`${j.attendancePercentage}%`}})}),T.jsxs("span",{className:"ml-3 font-medium w-12 text-right",children:[j.attendancePercentage,"%"]})]})}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.latitude&&j.longitude?T.jsxs("span",{className:"font-mono text-xs",children:[j.latitude.toFixed(6),", ",j.longitude.toFixed(6)]}):T.jsx("span",{className:"text-gray-400",children:"No Data"})}),T.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.latitude&&j.longitude?T.jsxs("button",{onClick:()=>D({lat:j.latitude,lon:j.longitude}),className:"text-blue-600 hover:text-blue-900 flex items-center text-xs font-medium",children:[T.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"View Map"]}):T.jsx("span",{className:"text-gray-400",children:""})})]},j.studentDocId)):T.jsx("tr",{children:T.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-sm text-gray-500",children:n.length===0?"No courses found.":"No analytics to display. Ensure students are enrolled and sessions have been conducted."})})})]})}),T.jsx(vb,{isOpen:!!w,onClose:()=>D(null),latitude:w==null?void 0:w.lat,longitude:w==null?void 0:w.lon})]})}function _4(){var u,h,m,p;const[r,e]=k.useState({esp32Connected:!1,webClients:0,uptime:0,timestamp:""}),[n,s]=k.useState(!1),o=k.useRef(null);return k.useEffect(()=>{const g=()=>{o.current=new WebSocket("ws://localhost:5000"),o.current.onopen=()=>{s(!0)},o.current.onclose=()=>{s(!1),setTimeout(g,3e3)},o.current.onerror=()=>{s(!1)},o.current.onmessage=E=>{try{const S=JSON.parse(E.data);S.type==="ESP32_CONNECTION"?e(w=>({...w,esp32Connected:S.connected})):S.type==="ESP32_STATUS"&&e(w=>({...w,esp32Connected:!0,esp32Status:S.data}))}catch(S){console.error("Failed to parse status message",S)}}};return g(),()=>{o.current&&o.current.close()}},[]),T.jsxs("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:[T.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-3",children:"System Status"}),T.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[T.jsxs("div",{className:"flex flex-col",children:[T.jsx("span",{className:"text-xs text-gray-500 uppercase",children:"Connection Server"}),T.jsxs("div",{className:"flex items-center mt-1",children:[T.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${n?"bg-green-500":"bg-red-500"}`}),T.jsx("span",{className:`font-medium ${n?"text-green-700":"text-red-700"}`,children:n?"Online":"Offline"})]})]}),T.jsxs("div",{className:"flex flex-col",children:[T.jsx("span",{className:"text-xs text-gray-500 uppercase",children:"ESP32 Device"}),T.jsxs("div",{className:"flex items-center mt-1",children:[T.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${r.esp32Connected?"bg-green-500":"bg-gray-400"}`}),T.jsx("span",{className:"font-medium text-gray-800",children:r.esp32Connected?"Connected":"Disconnected"})]})]}),T.jsxs("div",{className:"flex flex-col",children:[T.jsx("span",{className:"text-xs text-gray-500 uppercase",children:"Modules"}),T.jsxs("div",{className:"flex flex-col mt-1 space-y-1",children:[T.jsxs("div",{className:"flex items-center text-sm",children:[T.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${(u=r.esp32Status)!=null&&u.fingerprint?"bg-green-500":"bg-red-400"}`}),T.jsx("span",{className:"text-gray-600",children:"Fingerprint"})]}),T.jsxs("div",{className:"flex items-center text-sm",children:[T.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${(h=r.esp32Status)!=null&&h.gps?"bg-green-500":"bg-red-400"}`}),T.jsxs("span",{className:"text-gray-600",children:["GPS ",(m=r.esp32Status)!=null&&m.gpsFixed?"(Fixed)":""]})]})]})]}),T.jsxs("div",{className:"flex flex-col",children:[T.jsx("span",{className:"text-xs text-gray-500 uppercase",children:"Satellites"}),T.jsx("span",{className:"text-lg font-bold text-gray-800",children:((p=r.esp32Status)==null?void 0:p.satellites)||0})]})]})]})}const CE=[{id:"dashboard",label:"Dashboard",icon:r=>T.jsx("svg",{...r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})},{id:"studentManagement",label:"Students",icon:r=>T.jsx("svg",{...r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1a6 6 0 00-5.176-5.97M15 21h6m-6-1a6 6 0 00-5.176-5.97M12 12a4 4 0 100-8 4 4 0 000 8z"})})},{id:"courseManagement",label:"Courses",icon:r=>T.jsx("svg",{...r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v11.494m-9-5.747h18"})})},{id:"sessionManagement",label:"Sessions",icon:r=>T.jsx("svg",{...r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},{id:"attendanceLog",label:"Attendance Log",icon:r=>T.jsx("svg",{...r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})},{id:"attendanceAnalytics",label:"Analytics",icon:r=>T.jsxs("svg",{...r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"}),T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"})]})}];function v4(){var S;const{adminData:r,loading:e}=hg(),n=Ph(),[s,o]=k.useState("dashboard"),[u,h]=k.useState(!1),m=async()=>{try{await wR(cg),n("/login")}catch(w){console.error("Failed to sign out:",w)}};if(e||!r)return T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:T.jsx(ua,{})});const p=()=>{const w={studentManagement:T.jsx(ZD,{}),courseManagement:T.jsx(t4,{}),sessionManagement:T.jsx(n4,{}),attendanceLog:T.jsx(g4,{}),attendanceAnalytics:T.jsx(y4,{}),dashboard:T.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-8 text-gray-800",children:[T.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Dashboard"}),T.jsx(_4,{}),T.jsxs("p",{className:"text-lg text-gray-500",children:["Welcome back, ",r.name,"."]}),T.jsx("div",{className:"mt-8 border-t border-gray-200 pt-8",children:T.jsxs("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2",children:[T.jsxs("div",{className:"sm:col-span-1",children:[T.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),T.jsx("dd",{className:"mt-1 text-lg text-gray-800",children:r.name})]}),T.jsxs("div",{className:"sm:col-span-1",children:[T.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Email address"}),T.jsx("dd",{className:"mt-1 text-lg text-gray-800",children:r.email})]}),T.jsxs("div",{className:"sm:col-span-1",children:[T.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Role"}),T.jsx("dd",{className:"mt-1 text-lg text-gray-800",children:r.role})]})]})})]})};return w[s]||w.dashboard},g=w=>`w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg transition-colors duration-200 ${s===w?"bg-blue-600 text-white font-semibold":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,E=()=>T.jsxs(T.Fragment,{children:[T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-center space-x-3 mb-10 px-2",children:[T.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:T.jsxs("svg",{className:"w-6 h-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0 3.517-1.009 6.789-2.75 9.566l-2.75-2.75a2.25 2.25 0 01-3.182 0l-2.75 2.75A18.003 18.003 0 0112 11z"}),T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0-3.517 1.009-6.789 2.75-9.566l2.75 2.75a2.25 2.25 0 013.182 0l2.75-2.75A18.003 18.003 0 0112 11z"})]})}),T.jsx("h1",{className:"text-xl font-bold text-white",children:"Admin Panel"})]}),T.jsx("nav",{className:"space-y-2",children:CE.map(w=>T.jsxs("button",{onClick:()=>{o(w.id),h(!1)},className:g(w.id),children:[w.icon({className:"w-6 h-6 flex-shrink-0"}),T.jsx("span",{className:"truncate",children:w.label})]},w.id))})]}),T.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[T.jsxs("div",{className:"flex items-center space-x-3 px-2 mb-4",children:[T.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center text-blue-400 font-bold",children:r.name.charAt(0)}),T.jsxs("div",{children:[T.jsx("p",{className:"text-sm font-semibold text-white truncate",children:r.name}),T.jsx("p",{className:"text-xs text-gray-400 truncate",children:r.email})]})]}),T.jsxs("button",{onClick:m,className:"w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-red-400 hover:bg-red-500 hover:text-white transition-colors duration-200",children:[T.jsx("svg",{className:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),T.jsx("span",{children:"Sign Out"})]})]})]});return T.jsxs("div",{className:"relative min-h-screen md:flex",children:[u&&T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden",onClick:()=>h(!1),"aria-hidden":"true"}),T.jsx("aside",{className:`fixed inset-y-0 left-0 w-64 bg-gray-800 p-4 flex flex-col justify-between transform ${u?"translate-x-0":"-translate-x-full"} md:relative md:translate-x-0 transition-transform duration-300 ease-in-out z-40`,children:T.jsx(E,{})}),T.jsxs("div",{className:"flex-1 flex flex-col",children:[T.jsxs("header",{className:"md:hidden flex justify-between items-center bg-white p-4 shadow-md sticky top-0 z-20",children:[T.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:((S=CE.find(w=>w.id===s))==null?void 0:S.label)||"Dashboard"}),T.jsxs("button",{onClick:()=>h(!0),className:"text-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-500 rounded",children:[T.jsx("span",{className:"sr-only",children:"Open sidebar"}),T.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})]}),T.jsx("main",{className:"flex-1 p-6 lg:p-10 overflow-y-auto",children:p()})]})]})}function E4(){const{currentUser:r,loading:e}=hg();return e?T.jsx("div",{className:"min-h-screen flex items-center justify-center",children:T.jsx(ua,{})}):r?T.jsx(sA,{}):T.jsx(UE,{to:"/login",replace:!0})}function Ab({data:r,onClose:e}){const n=k.useRef(null);return T.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:T.jsx("div",{ref:n,className:"relative w-full max-w-md transform transition-all duration-500 ease-out animate-slide-up",children:T.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-200",children:[T.jsxs("div",{className:"bg-gray-100 px-6 py-3 border-b border-gray-200 flex justify-between items-center",children:[T.jsxs("div",{className:"flex items-center space-x-2",children:[T.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),T.jsx("span",{className:"text-xs font-bold text-gray-500 tracking-widest uppercase",children:"Biometric Verified"})]}),T.jsx("div",{className:"flex items-center space-x-1",children:T.jsx("span",{className:"text-[10px] text-gray-400 font-mono",children:new Date().toLocaleTimeString()})})]}),T.jsxs("div",{className:"p-8 relative overflow-hidden",children:[T.jsx("div",{className:"absolute top-0 right-0 -mr-16 -mt-16 w-32 h-32 bg-blue-50 rounded-full"}),T.jsx("div",{className:"absolute bottom-0 left-0 -ml-16 -mb-16 w-32 h-32 bg-purple-50 rounded-full"}),T.jsxs("div",{className:"relative z-10 text-center",children:[T.jsx("div",{className:"inline-block p-1 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 mb-4 shadow-lg",children:T.jsx("div",{className:"bg-white p-3 rounded-full",children:T.jsx("svg",{className:"w-10 h-10 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),T.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:r.name}),T.jsxs("p",{className:"text-sm font-medium text-gray-400 mt-1 uppercase tracking-wide",children:["ID: ",r.studentId]}),T.jsx("div",{className:"my-6 border-t border-gray-100"}),T.jsxs("div",{className:"grid grid-cols-2 gap-4 text-left",children:[T.jsxs("div",{children:[T.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold",children:"Department"}),T.jsx("p",{className:"text-sm font-bold text-gray-800",children:r.department})]}),T.jsxs("div",{children:[T.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold",children:"Course"}),T.jsx("p",{className:"text-sm font-bold text-gray-800 truncate",children:r.courseName})]})]}),T.jsxs("div",{className:"mt-6 bg-gray-50 rounded-xl p-4 border border-gray-100",children:[T.jsxs("div",{className:"flex justify-between items-end mb-2",children:[T.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Attendance Rate"}),T.jsxs("span",{className:"text-2xl font-bold text-indigo-600",children:[r.attendancePercentage,"%"]})]}),T.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:T.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 h-2 rounded-full transition-all duration-1000",style:{width:`${r.attendancePercentage}%`}})})]})]})]}),T.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200 text-center",children:T.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-800 font-medium text-sm transition-colors",children:"Close Verification"})})]})})})}function T4(){const[r,e]=k.useState("idle"),[n,s]=k.useState("Initializing..."),[o,u]=k.useState("offline"),[h,m]=k.useState(null),p=k.useRef(null),g=k.useRef(!1);k.useEffect(()=>{p.current=new WebSocket("ws://localhost:5000");let D=!0;return p.current.onopen=()=>{D&&(console.log("Portal connected to bridge."),s("Syncing Satellite Data..."),u("searching"))},p.current.onmessage=V=>{if(!D)return;let j=V.data.toString(),U="",G="";try{const X=JSON.parse(j);if(X.type==="ESP32_STATUS"){const $=X.data;$.gpsFixed===!0&&$.satellites>0?o!=="ready"&&(console.log(" GPS Ready:",$.satellites,"satellites"),u("ready"),s("Ready to authenticate"),g.current||(g.current=!0)):o!=="searching"&&(u("searching"),s("Syncing Satellite Data..."));return}if(X.type==="ATTENDANCE"){E(X.data.id,X.data);return}else if(X.type==="DUPLICATE_ATTENDANCE"){e("error"),s(`${X.studentName}: Attendance already taken`);return}else if(X.type==="SIGNED_OUT"){e("success"),s(`${X.studentName}: Signed Out`);return}else if(X.type==="SESSION_COMPLETED"){e("error"),s(`${X.studentName}: Session Closed`);return}else if(X.type==="ENROLL_RESPONSE")U=X.success?"SUCCESS":"ERROR",G=X.error||X.id||"Enrollment failed";else if(X.type==="VERIFY_RESPONSE")if(X.success){E(X.id.toString());return}else U="ERROR",G="No match found";else U=X.type||"UNKNOWN"}catch{const $=j.split(":",2);U=$[0],G=$[1]}U==="SUCCESS"?E(G):U==="STATUS"?o==="ready"&&typeof G=="string"&&G.length<50&&s(G):U!=="ATTENDANCE"&&(e("error"),s(typeof G=="string"?G:"Verification failed"))},p.current.onerror=async()=>{D&&(e("error"),u("offline"),s("Bridge Offline"))},()=>{D=!1,p.current&&p.current.readyState===WebSocket.OPEN&&p.current.close()}},[]),k.useEffect(()=>{let D;return(r==="error"||r==="success")&&(D=setTimeout(()=>{h||(e("idle"),s(o==="ready"?"Ready to authenticate":"Syncing Satellite Data..."))},4e3)),()=>clearTimeout(D)},[r,h,o]),k.useEffect(()=>{let D;return h&&(D=setTimeout(()=>{m(null),e("idle"),s(o==="ready"?"Ready to authenticate":"Syncing Satellite Data...")},8e3)),()=>clearTimeout(D)},[h,o]);const E=async(D,V)=>{try{const j=Qe(De,"students"),U=yn(j,Ht("fingerprintTemplate","==",D.toString())),G=await ft(U);if(G.empty){e("error"),s("Unknown Identity");return}const X=G.docs[0],$={id:X.id,...X.data()},se=Qe(De,"sessions"),ye=yn(se,Ht("active","==",!0)),pe=await ft(ye);let I=null,x="Common Entry";if(!pe.empty){const M=Qe(De,"courses"),O=await ft(M),z=new Map(O.docs.map(R=>[R.id,R.data()]));for(const R of pe.docs){const Be={id:R.id,...R.data()},Ke=z.get(Be.courseId);if(Ke&&Ke.department===$.department&&Ke.level===$.level){I=Be,x=Ke.name;break}}}s("Verified"),e("success");let C=0;if(I){const M=yn(Qe(De,"sessions"),Ht("courseId","==",I.courseId)),z=(await ft(M)).size,R=yn(Qe(De,"attendance"),Ht("studentId","==",$.id),Ht("courseId","==",I.courseId)),Ke=(await ft(R)).size;C=z>0?Math.round(Ke/z*100):0}m({name:$.name,studentId:$.studentId,department:$.department,courseName:x,attendancePercentage:C})}catch(j){console.error("Portal Display Error:",j),e("error"),s("System Error")}},S=()=>{if(!p.current||p.current.readyState!==WebSocket.OPEN){e("error"),s("Not connected");return}if(o!=="ready"){e("error"),s("Wait for GPS Sync...");return}e("scanning"),s("Place your finger"),p.current.send("VERIFY_FINGERPRINT")},w=()=>{m(null),e("idle"),s(o==="ready"?"Ready to authenticate":"Syncing Satellite Data...")};return T.jsxs("div",{className:"min-h-screen  bg-black-800  flex flex-col items-center justify-center p-6",children:[h&&T.jsx(Ab,{data:h,onClose:w}),T.jsxs("div",{className:"w-full max-w-md",children:[T.jsxs("div",{className:"text-center mb-12 relative",children:[T.jsx("div",{className:"absolute -top-4 right-0 flex gap-2",children:T.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold transition-all duration-300 shadow-md ${o==="ready"?"bg-green-500/20 text-green-300 border border-green-400/30 shadow-lg shadow-green-500/20":o==="searching"?"bg-blue-500/20 text-blue-300 border border-blue-400/30 animate-pulse":"bg-gray-500/20 text-gray-400 border border-gray-400/20"}`,children:[T.jsx(p4,{className:`w-3.5 h-3.5 ${o==="ready"?"":o==="searching"?"animate-spin":""}`}),T.jsx("span",{children:o==="ready"?"GPS LOCKED":o==="searching"?"ACQUIRING...":"OFFLINE"})]})}),T.jsx("h1",{className:"text-3xl font-semibold text-gray-300 mb-2",children:"Biometric Login"}),T.jsx("p",{className:"text-gray-500",children:"Authenticate using your fingerprint"})]}),T.jsxs("div",{className:"bg-gray-800  rounded-3xl shadow-lg p-8",children:[T.jsx("div",{className:"flex justify-center mb-8",children:T.jsxs("div",{className:"relative",children:[T.jsx("div",{className:`absolute inset-0 rounded-full blur-2xl opacity-20 transition-all duration-500 ${r==="scanning"?"bg-blue-500 scale-150":r==="success"?"bg-green-500 scale-150":r==="error"?"bg-red-500 scale-150":"bg-transparent"}`}),T.jsxs("div",{className:`relative w-32 h-32 rounded-full flex items-center justify-center transition-all duration-300 ${r==="scanning"?"bg-blue-50 border-2 border-blue-500":r==="success"?"bg-green-50 border-2 border-green-500":r==="error"?"bg-red-50 border-2 border-red-500":"bg-gray-50 border-2 border-gray-200"}`,children:[r==="scanning"&&T.jsx(wb,{className:"w-12 h-12 text-blue-600 animate-spin"}),r==="success"&&T.jsx(Tb,{className:"w-12 h-12 text-green-600"}),r==="error"&&T.jsx(Sb,{className:"w-12 h-12 text-red-600"}),r==="idle"&&T.jsx(bb,{className:"w-12 h-12 text-gray-400"})]})]})}),T.jsxs("div",{className:"text-center mb-8",children:[T.jsx("p",{className:`text-lg font-semibold transition-all duration-300 ${r==="scanning"?"text-blue-600":r==="success"?"text-green-600":r==="error"?"text-red-600":o==="searching"?"text-blue-400":"text-gray-300"}`,children:n}),o==="searching"&&T.jsx("p",{className:"text-xs text-gray-500 mt-2 animate-pulse",children:"Waiting for satellite lock..."})]}),T.jsx("button",{onClick:S,disabled:r==="scanning"||o!=="ready",className:`w-full py-4 rounded-xl font-medium text-base transition-all duration-200 ${r==="scanning"||o!=="ready"?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 active:scale-[0.98] shadow-md hover:shadow-lg"}`,children:r==="scanning"?"Scanning...":o!=="ready"?"Waiting for GPS...":"Start Authentication"})]}),T.jsx("div",{className:"text-center mt-8",children:T.jsx("p",{className:"text-sm text-gray-400",children:"Secured by Dern Technology"})})]})]})}function S4(){const[r,e]=k.useState("idle"),[n,s]=k.useState("Click button to begin verification"),[o,u]=k.useState(null),h=k.useRef(null);k.useEffect(()=>{h.current=new WebSocket("ws://localhost:5000");let E=!0;return h.current.onopen=()=>{E&&console.log("Verification portal connected to bridge.")},h.current.onerror=()=>{E&&(e("error"),s("Bridge connection failed."))},h.current.onmessage=S=>{if(!E)return;let w=S.data.toString(),D="",V="";try{const j=JSON.parse(w);if(j.type==="VERIFY_RESPONSE")if(j.success){m(j.id.toString());return}else D="ERROR",V="No match found";else{if(j.type==="ESP32_STATUS")return;D=j.type||"UNKNOWN",V=j.data||""}}catch{const U=w.split(":",2);D=U[0],V=U[1]}D==="SUCCESS"?m(V):D==="STATUS"?s(V):D!=="ATTENDANCE"&&(e("error"),s(typeof V=="string"?V:"Verification failed"))},()=>{var S;E=!1,((S=h.current)==null?void 0:S.readyState)===WebSocket.OPEN&&h.current.close()}},[]),k.useEffect(()=>{let E;return r==="error"&&(E=setTimeout(()=>{e("idle"),s("Click button to begin verification"),u(null)},5e3)),()=>clearTimeout(E)},[r]);const m=async E=>{try{const S=yn(Qe(De,"students"),Ht("fingerprintTemplate","==",E)),w=await ft(S);if(w.empty){e("error"),s("Fingerprint not recognized. Please contact the exam officer.");return}const D=w.docs[0],V={id:D.id,...D.data()},j=yn(Qe(De,"sessions"),Ht("active","==",!0)),U=await ft(j);if(U.empty){e("error"),s("No active exam session found.");return}const G=await ft(Qe(De,"courses")),X=new Map(G.docs.map(O=>[O.id,O.data()]));let $=null,se=null;for(const O of U.docs){const z=O.data(),R=X.get(z.courseId);if(R&&R.department===V.department&&R.level===V.level){$=O,se={id:z.courseId,...R};break}}if(!$||!se){e("error"),s("No active exam for your department/level.");return}const ye=se.id,I=(await ft(yn(Qe(De,"sessions"),Ht("courseId","==",ye)))).docs.length,C=(await ft(yn(Qe(De,"attendance"),Ht("studentId","==",V.id),Ht("courseId","==",ye)))).docs.length,M=I>0?Math.round(C/I*100):0;if(M<70){e("error"),s(`Access Denied: Minimum 70% attendance required. Yours is ${M}%.`);return}e("success"),s("Verified"),u({name:V.name,studentId:V.studentId,department:V.department,courseName:`${se.name} (${se.code})`,attendancePercentage:M})}catch(S){console.error("Verification Error:",S),e("error"),s("An unexpected server error occurred.")}},p=()=>{if(!h.current||h.current.readyState!==WebSocket.OPEN){e("error"),s("Bridge not connected. Please refresh.");return}e("scanning"),s("Place your finger on the scanner..."),h.current.send("VERIFY_FINGERPRINT")},g=()=>{u(null),e("idle"),s("Click button to begin verification")};return T.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col items-center justify-center p-6",children:[o&&T.jsx(Ab,{data:o,onClose:g}),T.jsxs("div",{className:"w-full max-w-md",children:[T.jsxs("div",{className:"text-center mb-12 relative",children:[T.jsx("h1",{className:"text-3xl font-semibold text-gray-300 mb-2",children:"Exam Verification"}),T.jsx("p",{className:"text-gray-500",children:"Verify eligibility for exam entry"})]}),T.jsxs("div",{className:"bg-gray-800 rounded-3xl shadow-lg p-8",children:[T.jsx("div",{className:"flex justify-center mb-8",children:T.jsxs("div",{className:"relative",children:[T.jsx("div",{className:`absolute inset-0 rounded-full blur-2xl opacity-20 transition-all duration-500 ${r==="scanning"?"bg-blue-500 scale-150":r==="success"?"bg-green-500 scale-150":r==="error"?"bg-red-500 scale-150":"bg-transparent"}`}),T.jsxs("div",{className:`relative w-32 h-32 rounded-full flex items-center justify-center transition-all duration-300 ${r==="scanning"?"bg-blue-50 border-2 border-blue-500":r==="success"?"bg-green-50 border-2 border-green-500":r==="error"?"bg-red-50 border-2 border-red-500":"bg-gray-50 border-2 border-gray-200"}`,children:[r==="scanning"&&T.jsx(wb,{className:"w-12 h-12 text-blue-600 animate-spin"}),r==="success"&&T.jsx(Tb,{className:"w-12 h-12 text-green-600"}),r==="error"&&T.jsx(Sb,{className:"w-12 h-12 text-red-600"}),r==="idle"&&T.jsx(bb,{className:"w-12 h-12 text-gray-400"})]})]})}),T.jsx("div",{className:"text-center mb-8",children:T.jsx("p",{className:`text-lg font-semibold transition-all duration-300 ${r==="scanning"?"text-blue-600":r==="success"?"text-green-600":r==="error"?"text-red-600":"text-gray-300"}`,children:n})}),T.jsx("button",{onClick:p,disabled:r==="scanning",className:`w-full py-4 rounded-xl font-medium text-base transition-all duration-200 ${r==="scanning"?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 active:scale-[0.98] shadow-md hover:shadow-lg"}`,children:r==="scanning"?"Verifying...":"Start Verification"})]}),T.jsx("div",{className:"text-center mt-8",children:T.jsx("p",{className:"text-sm text-gray-400",children:"Secured by Dern Technology"})})]})]})}async function b4(r,e){try{const n=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${r}&lon=${e}&zoom=18&addressdetails=1`,{headers:{"User-Agent":"BiometricAttendanceSystem/1.0"}});if(!n.ok)throw new Error("Geocoding failed");const o=(await n.json()).address||{},u=o.building||o.amenity||o.road||o.suburb||o.city||o.town||o.village||"Unknown Location",h=o.city||o.state||"";return h?`${u}, ${h}`:u}catch(n){return console.error("Reverse geocoding error:",n),`${r.toFixed(4)}, ${e.toFixed(4)}`}}function w4(){const r=k.useRef(null),e=k.useRef({latitude:null,longitude:null});k.useEffect(()=>(r.current=new WebSocket("ws://localhost:5000"),r.current.onopen=()=>{console.log("Global Listener connected to bridge.")},r.current.onmessage=async s=>{try{const o=JSON.parse(s.data);if(o.type==="ATTENDANCE")await n(o.data);else if(o.type==="ESP32_STATUS")o.data&&o.data.type==="STATUS"&&o.data.lat&&o.data.lon&&(e.current={latitude:o.data.lat,longitude:o.data.lon});else if(o.type==="VERIFY_RESPONSE"&&o.success){const u=o.latitude||o.lat||e.current.latitude,h=o.longitude||o.lon||e.current.longitude;await n({id:o.id,latitude:u,longitude:h})}}catch{}},r.current.onclose=()=>{setTimeout(()=>{var s;(s=r.current)==null||s.readyState,WebSocket.CLOSED},5e3)},()=>{r.current&&r.current.close()}),[]);const n=async s=>{const{id:o,latitude:u,longitude:h}=s,m=u||e.current.latitude,p=h||e.current.longitude;try{const g=Qe(De,"students"),E=yn(g,Ht("fingerprintTemplate","==",o.toString())),S=await ft(E);if(S.empty){console.warn(` Unknown fingerprint ID: ${o}`);return}const w=S.docs[0],D=w.data(),V=w.id,j=Qe(De,"sessions"),U=yn(j,Ht("active","==",!0)),G=await ft(U);if(G.empty){console.warn(" No active sessions found");return}const X=Qe(De,"courses"),$=await ft(X),se=new Map;$.docs.forEach(R=>{se.set(R.id,{id:R.id,...R.data()})});let ye=null,pe=null;for(const R of G.docs){const Be=R.data(),Ke=se.get(Be.courseId);if(Ke&&Ke.department===D.department&&Ke.level===D.level){ye=R,pe=Be.courseId;break}}if(!ye){console.warn(` No matching session for ${D.name}`);return}const I=ye.id,x=pe,C=Qe(De,"attendance"),M=yn(C,Ht("studentId","==",V),Ht("sessionId","==",I)),O=await ft(M);if(!O.empty){const R=O.docs[0];if(R.data().signOutTime){console.log(` Session completed for ${D.name}`),r.current&&r.current.readyState===WebSocket.OPEN&&r.current.send(JSON.stringify({type:"SESSION_COMPLETED",studentName:D.name,message:"Session already completed"}));return}console.log(` Signing out ${D.name}`),await ug(R.ref,{signOutTime:Ze.now()}),r.current&&r.current.readyState===WebSocket.OPEN&&r.current.send(JSON.stringify({type:"SIGNED_OUT",studentName:D.name,message:"Signed Out Successfully"}));return}const z=m&&p?await b4(m,p):"No GPS";await cf(C,{studentId:V,courseId:x,sessionId:I,joinTime:Ze.now(),verified:!0,verificationMethod:"fingerprint",latitude:m||null,longitude:p||null,locationName:z}),console.log(` Attendance: ${D.name} |  ${z}`)}catch(g){console.error(" Attendance error:",g)}};return null}function A4(){return T.jsxs(XD,{children:[T.jsx(w4,{}),T.jsx(NA,{children:T.jsxs(oA,{children:[T.jsx(Ys,{path:"/login",element:T.jsx(WD,{})}),T.jsx(Ys,{path:"/portal",element:T.jsx(T4,{})}),T.jsx(Ys,{path:"/verify",element:T.jsx(S4,{})}),T.jsx(Ys,{element:T.jsx(E4,{}),children:T.jsx(Ys,{path:"/dashboard",element:T.jsx(v4,{})})}),T.jsx(Ys,{path:"*",element:T.jsx(UE,{to:"/dashboard",replace:!0})})]})})]})}const xb=document.getElementById("root");if(!xb)throw new Error("Could not find root element to mount to");const x4=mw.createRoot(xb);x4.render(T.jsx(aw.StrictMode,{children:T.jsx(A4,{})}));
